<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer130" class="_idGenObjectStyleOverride-1">&#13;
			<p id="_idParaDest-94" class="Chapter-Title"><span class="ChapterMarker">11. </span><a id="_idTextAnchor136"/>Configuring CentOS 8 systemd Units</p>&#13;
			<p class="My-Basic-Paragraph">In order to gain proficiency in CentOS 8 system administration it is important to understand the concepts of systemd units with a particular emphasis on two specific types known as <a id="_idIndexMarker185"/>targets and services. The goal of this chapter, therefore, is to provide a basic overview of the different <a id="_idIndexMarker186"/><a id="_idIndexMarker187"/><a id="_idIndexMarker188"/>systemd units supported by CentOS 8 combined with an overview of how to configure the many <a id="_idIndexMarker189"/>services that run in the background of a running Linux system.</p>&#13;
			<p id="_idParaDest-95" class="Heading-1-1"><span class="Heading11Marker">11.1 </span><a id="_idTextAnchor137"/>Understanding CentOS 8 systemd Targets</p>&#13;
			<p class="My-Basic-Paragraph">CentOS 8 can be configured to boot into one of a number of states (referred to as <span class="My-Italic _idGenCharOverride-1">targets</span>), each of which is designed to provide a specific level of operating system functionality. The target to which a system will boot by default is configured by the system administrator based on the purpose for which the system is being used. A desktop system, for example, will most likely be configured to boot using the graphical user interface target, while a cloud-based server system would be more likely to boot to the multi-user target level.</p>&#13;
			<p class="My-Basic-Paragraph">During the boot sequence, a process named <a id="_idIndexMarker190"/><span class="My-Italic _idGenCharOverride-1">systemd</span> looks in the <span class="My-Italic _idGenCharOverride-1">/etc/systemd/system</span> folder to find the default target setting. Having identified the default target, it proceeds to start the systemd units associated with that target so that the system boots with all the necessary processes running.</p>&#13;
			<p class="My-Basic-Paragraph">For those familiar with previous CentOS versions, systemd targets are the replacement for the older <a id="_idIndexMarker191"/><span class="My-Italic _idGenCharOverride-1">runlevel</span> system.</p>&#13;
			<p id="_idParaDest-96" class="Heading-1-1"><span class="Heading11Marker">11.2 </span><a id="_idTextAnchor138"/>Understanding CentOS 8 systemd Services</p>&#13;
			<p class="My-Basic-Paragraph">A service is essentially a process, typically running in the background, that provides specific functionality. The sshd service, for example, is the background process (also referred to as a <a id="_idIndexMarker192"/>daemon) that provides secure shell access to the system. Different systemd targets are configured to automatically launch different collections of services, depending on the functionality that is to be provided by that target.</p>&#13;
			<p class="My-Basic-Paragraph">Targets and services are types of <span class="My-Italic _idGenCharOverride-1">systemd unit</span>, a topic which will be covered later in this chapter.</p>&#13;
			<p id="_idParaDest-97" class="Heading-1-1"><span class="Heading11Marker">11.3 </span><a id="_idTextAnchor139"/>CentOS 8 systemd Target Descriptions</p>&#13;
			<p class="My-Basic-Paragraph">As previously outlined, CentOS 8 can be booted into one of a number of target levels. The default target to which the system is configured to boot will, in turn, dictate which systemd units are started. The targets that relate specifically to system startup and shutdown can be summarized as follows:</p>&#13;
			<p class="My-Basic-Paragraph">• <a id="_idIndexMarker193"/><a id="_idIndexMarker194"/><span class="My-Bold _idGenCharOverride-1">poweroff.target </span>- This is the target in which the system shuts down. For obvious reasons it is unlikely you would want this as your default target.</p>&#13;
			<p class="My-Basic-Paragraph">• <a id="_idIndexMarker195"/><a id="_idIndexMarker196"/><span class="My-Bold _idGenCharOverride-1">rescue.target</span> – Causes the system to start up in a single user mode under which only the root user can log in. In this mode the system does not start any networking, graphical user interface or multi-user services. This run level is ideal for system administrators to perform system maintenance or repair activities.</p>&#13;
			<p class="My-Basic-Paragraph">• <a id="_idIndexMarker197"/><a id="_idIndexMarker198"/><span class="My-Bold _idGenCharOverride-1">multi-user.target</span> - Boots the system into a multi-user mode with text based console login capability.</p>&#13;
			<p class="My-Basic-Paragraph">• <a id="_idIndexMarker199"/><a id="_idIndexMarker200"/><span class="My-Bold _idGenCharOverride-1">graphical.target</span> - Boots the system into a networked, multi-user state with X Window System capability. By default the graphical desktop environment will start at the end of the boot process. This is the most common run level for desktop or workstation use.</p>&#13;
			<p class="My-Basic-Paragraph">• <a id="_idIndexMarker201"/><a id="_idIndexMarker202"/><span class="My-Bold _idGenCharOverride-1">reboot.target</span> - Reboots the system. Another target that, for obvious reasons, you are unlikely to want as your default.</p>&#13;
			<p class="My-Basic-Paragraph">In addition to the above targets, the system also includes about 70 other targets, many of which are essentially sub-targets used by the above main targets. Behind the scenes, for example, <span class="My-Italic _idGenCharOverride-1">multi-user.target</span> will also start a target named <a id="_idIndexMarker203"/><a id="_idIndexMarker204"/><a id="_idIndexMarker205"/><span class="My-Italic _idGenCharOverride-1">basic.target</span> which will, in turn, start the <a id="_idIndexMarker206"/><a id="_idIndexMarker207"/><span class="My-Italic _idGenCharOverride-1">sockets.target</span> unit which is required for communication between different processes. This ensures that all of the services on which the multi-user target is dependent are also started during the boot process.</p>&#13;
			<p class="My-Basic-Paragraph">A list of the targets <a id="_idIndexMarker208"/>and services on which a specified target is dependent can be viewed by running the following command in a terminal window:</p>&#13;
			<p class="Code"><a id="_idIndexMarker209"/># systemctl list-dependencies &lt;target&gt;</p>&#13;
			<p class="My-Basic-Paragraph"><a href="../Text/Systemd_Targets_and_States.xhtml#_idTextAnchor140">Figure 11-1</a>, for example, shows a partial listing of the systemd unit dependencies for the multi-user target (the full listing contains over 120 targets and services required for a fully functional multi-user system):</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-1" src="Images/rhel_8_target_dependencies.png" alt="" width="621" height="221"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 11-1</span><a id="_idTextAnchor140"/></p>&#13;
			<p class="My-Basic-Paragraph">The listing is presented as a hierarchical tree illustrating how some dependencies have sub-dependencies of their own. Scrolling to the bottom of the list, for example, would reveal that the multi-user target depends on two network filesystem related targets (namely <a id="_idIndexMarker210"/><a id="_idIndexMarker211"/><span class="My-Italic _idGenCharOverride-1">nfs-client.target</span> and <a id="_idIndexMarker212"/><a id="_idIndexMarker213"/><span class="My-Italic _idGenCharOverride-1">remote-fs.target</span>), each with its own service and target sub-dependencies:</p>&#13;
			<p class="Centered-Image"><img class="_idGenObjectAttribute-2" src="Images/rhel_8_target_sub_dependencies.png" alt="" width="621" height="175"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 11-2</span></p>&#13;
			<p class="My-Basic-Paragraph">The colored dots to the left of each entry in the list indicate the current status of that service or target as follows:</p>&#13;
			<p class="Bullet-List"><span class="_idGenBNMarker-4">•</span><span class="My-Bold _idGenCharOverride-1">Green</span> - The service or target is active and running.</p>&#13;
			<p class="Bullet-List"><span class="_idGenBNMarker-4">•</span><span class="My-Bold _idGenCharOverride-1">White</span> - The service or target is inactive (dead). Typically because the service or target has not yet been enabled, has been stopped for some reason, or a condition on which the service or target depends has not been met.</p>&#13;
			<p class="Bullet-List"><span class="_idGenBNMarker-4">•</span><span class="My-Bold _idGenCharOverride-1">Red</span> -  The service or target failed to start due to a fatal error.</p>&#13;
			<p class="My-Basic-Paragraph">To find out more details about the status of a <a id="_idIndexMarker214"/>systemd unit, use the <a id="_idIndexMarker215"/><span class="My-Italic _idGenCharOverride-1">systemctl</span> command followed by the unit name as follows:</p>&#13;
			<p class="Code"># systemctl status systemd-machine-id-commit.service</p>&#13;
			<p class="Code"><span class="CharOverride-1">◉</span> systemd-machine-id-commit.service - Commit a transient machine-id on disk</p>&#13;
			<p class="Code">   Loaded: loaded (/usr/lib/systemd/system/systemd-machine-id-commit.service; static; vendor preset: disabled)</p>&#13;
			<p class="Code">   Active: inactive (dead)</p>&#13;
			<p class="Code">Condition: start condition failed at Thu 2019-02-14 15:27:47 EST; 1h 14min ago</p>&#13;
			<p class="Code">           ConditionPathIsMountPoint=/etc/machine-id was not met</p>&#13;
			<p class="Code">     Docs: man:systemd-machine-id-commit.service(8)</p>&#13;
			<p id="_idParaDest-98" class="Heading-1-1"><span class="Heading11Marker">11.4 </span><a id="_idTextAnchor141"/>Identifying and Configuring the Default Target</p>&#13;
			<p class="My-Basic-Paragraph"><a id="_idIndexMarker216"/><a id="_idIndexMarker217"/>The current default target for a CentOS 8 system can be identified using the <span class="My-Italic _idGenCharOverride-1">systemctl</span> command as follows:</p>&#13;
			<p class="Code"># systemctl get-default</p>&#13;
			<p class="Code">multi-user.target</p>&#13;
			<p class="My-Basic-Paragraph">In the above case, the system is configured to boot using the multi-user target by default. The default setting can be changed at any time using the <span class="My-Italic _idGenCharOverride-1">systemctl</span> command with the <span class="My-Italic _idGenCharOverride-1">set-default</span> option. The following example changes the default target to start the graphical user interface the next time the system boots:</p>&#13;
			<p class="Code"># systemctl set-default graphical.target</p>&#13;
			<p class="Code">Removed /etc/systemd/system/default.target.</p>&#13;
			<p class="Code">Created symlink /etc/systemd/system/default.target → /usr/lib/systemd/system/graphical.target.</p>&#13;
			<p class="My-Basic-Paragraph">The output from the default change operation reveals the steps performed in the background by the <span class="My-Italic _idGenCharOverride-1">systemctl </span>command to implement the change. The current default is configured by establishing a symbolic link from the <a id="_idIndexMarker218"/><span class="My-Italic _idGenCharOverride-1">default.target</span> file located in <span class="My-Italic _idGenCharOverride-1">/etc/systemd/system</span> to point to the corresponding target file located in the <span class="My-Italic _idGenCharOverride-1">/usr/lib/systemd/system</span> folder (in this case the <span class="My-Italic _idGenCharOverride-1">graphical.target</span> file).</p>&#13;
			<p id="_idParaDest-99" class="Heading-1-1"><span class="Heading11Marker">11.5 </span><a id="_idTextAnchor142"/>Understanding <a id="_idIndexMarker219"/>systemd Units and Unit Types</p>&#13;
			<p class="My-Basic-Paragraph">As previously mentioned, targets and services are both types of <span class="My-Italic _idGenCharOverride-1">systemd unit</span>. All of the files within the <span class="My-Italic _idGenCharOverride-1">/usr/lib/systemd/system</span> folder are referred to as <a id="_idIndexMarker220"/><span class="My-Italic _idGenCharOverride-1">systemd unit configuration files</span>, each of which represents a systemd unit. Each unit is, in turn, categorized as being of a particular <span class="My-Italic _idGenCharOverride-1">unit type.</span> CentOS 8 supports 12 different unit types including the target and service unit types already covered in this chapter. </p>&#13;
			<p class="My-Basic-Paragraph">The type of a unit file is represented by the filename extension as outlined in <a href="../Text/Systemd_Targets_and_States.xhtml#_idTextAnchor143">Table 11-1</a> below: </p>&#13;
			<table id="table001-1" class="My-Table-Style">&#13;
				<colgroup>&#13;
					<col/>&#13;
					<col/>&#13;
					<col/>&#13;
				</colgroup>&#13;
				<tbody>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style My-Table-Header-Style">&#13;
							<p class="My-Basic-Paragraph"><span class="My-Bold _idGenCharOverride-1">Unit Type</span></p>&#13;
						</td>&#13;
						<td class="My-Table-Style My-Table-Header-Style">&#13;
							<p class="My-Basic-Paragraph"><span class="My-Bold _idGenCharOverride-1">Filename Extension</span></p>&#13;
						</td>&#13;
						<td class="My-Table-Style My-Table-Header-Style">&#13;
							<p class="My-Basic-Paragraph"><span class="My-Bold _idGenCharOverride-1">Type Description</span></p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Service</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.service</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">System service.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Target</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.target</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Group of systemd units.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Automount</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.automount</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">File system auto-mount point.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Device</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.device</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Device file recognized by the kernel.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Mount</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.mount</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">File system mount point.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Path</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.path</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">File or directory in a file system.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Scope</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.scope</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Externally created process.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Slice</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.slice</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Group of hierarchically organized units that manage system processes.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Snapshot</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.snapshot</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Saved state of the systemd manager.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Socket</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.socket</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph ParaOverride-3">Inter-process communication socket.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Swap</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.swap</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Swap device or a swap file.</p>&#13;
						</td>&#13;
					</tr>&#13;
					<tr class="My-Table-Style">&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Timer</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">.timer</p>&#13;
						</td>&#13;
						<td class="My-Table-Style">&#13;
							<p class="My-Basic-Paragraph">Systemd timer.</p>&#13;
						</td>&#13;
					</tr>&#13;
				</tbody>&#13;
			</table>&#13;
			<p class="Table-Caption"><span class="TableCaptionMarker">Table 11-1</span><a id="_idTextAnchor143"/></p>&#13;
			<p class="My-Basic-Paragraph">Note that the target unit type differs from other types in that it is essentially comprised of a group of systemd units such as services or other targets. </p>&#13;
			<p id="_idParaDest-100" class="Heading-1-1"><span class="Heading11Marker">11.6 </span><a id="_idTextAnchor144"/>Dynamically Changing the Current Target</p>&#13;
			<p class="My-Basic-Paragraph"><a id="_idIndexMarker221"/>The above step specifies the target that will be used the next time the system starts, but does not change the state of the currently running system. To change to a different target dynamically, use the <span class="My-Italic _idGenCharOverride-1">systemctl</span> command once again, this time using the <span class="My-Italic _idGenCharOverride-1">isolate</span> option followed by the destination target. To switch the current system to the graphical target without rebooting, for example, the following command would be used:</p>&#13;
			<p class="Code"># systemctl isolate graphical.target</p>&#13;
			<p class="My-Basic-Paragraph">Once executed, the system will start the graphical desktop environment.</p>&#13;
			<p id="_idParaDest-101" class="Heading-1-1"><span class="Heading11Marker">11.7 </span><a id="_idTextAnchor145"/>Enabling, Disabling and Masking <a id="_idIndexMarker222"/><a id="_idIndexMarker223"/><a id="_idIndexMarker224"/>systemd Units</p>&#13;
			<p class="My-Basic-Paragraph"><a id="_idIndexMarker225"/><a id="_idIndexMarker226"/><a id="_idIndexMarker227"/>A newly installed CentOS 8 system will include the base systemd service units but is unlikely to include all of the services that will eventually be needed by the system once it goes into a production environment. A basic CentOS 8 installation, for example, will typically not include the packages necessary to run an Apache web server, a key element of which is the <a id="_idIndexMarker228"/><span class="My-Italic _idGenCharOverride-1">httpd.service</span> unit.</p>&#13;
			<p class="My-Basic-Paragraph">The system administrator will resolve this problem by installing the necessary httpd packages using the following command:</p>&#13;
			<p class="Code"># dnf install httpd</p>&#13;
			<p class="My-Basic-Paragraph">Having configured the web server, the next task will be to check the status of the httpd service unit to identify whether it was activated as part of the installation process:</p>&#13;
			<p class="Code"># systemctl status httpd.service</p>&#13;
			<p class="Code"> httpd.service - The Apache HTTP Server</p>&#13;
			<p class="Code">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)</p>&#13;
			<p class="Code">   Active: inactive (dead)</p>&#13;
			<p class="Code">     Docs: man:httpd.service(8)</p>&#13;
			<p class="My-Basic-Paragraph">Note that the service has loaded but is inactive because it is preset by the vendor to be disabled when first installed. To start the service, the following command can be used:</p>&#13;
			<p class="Code"># systemctl start httpd.service</p>&#13;
			<p class="My-Basic-Paragraph">A status check will now indicate that the service is active:</p>&#13;
			<p class="Code"> httpd.service - The Apache HTTP Server</p>&#13;
			<p class="Code">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)</p>&#13;
			<p class="Code">   Active: active (running) since Fri 2019-02-15 11:13:26 EST; 8s ago</p>&#13;
			<p class="Code">     Docs: man:httpd.service(8)</p>&#13;
			<p class="Code"> Main PID: 10721 (httpd)</p>&#13;
			<p class="Code">   Status: "Started, listening on: port 80"</p>&#13;
			<p class="Code">    Tasks: 213 (limit: 13923)</p>&#13;
			<p class="Code">   Memory: 24.1M</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="My-Basic-Paragraph">Note, however that the status indicates that the service is still disabled. This means that next time the system reboots, the httpd service will not start automatically and will need to be started manually by the system administrator.</p>&#13;
			<p class="My-Basic-Paragraph">To configure the httpd service to start automatically each time the system starts, it must be enabled as follows:</p>&#13;
			<p class="Code"># systemctl enable httpd.service</p>&#13;
			<p class="My-Basic-Paragraph">Once the service has been enabled, the Loaded section of the status output will read as follows:</p>&#13;
			<p class="Code">Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)</p>&#13;
			<p class="My-Basic-Paragraph">Now that it has been enabled, the next time the system reboots to the current target, the httpd service will start automatically. Assuming, for example, that the service was enabled while the system was running the multi-user target, the httpd service will have been added as another dependency to the <span class="My-Italic _idGenCharOverride-1">multi-user.target</span> systemd unit.</p>&#13;
			<p class="My-Basic-Paragraph">Behind the scenes, <span class="My-Italic _idGenCharOverride-1">systemctl</span> adds dependencies to targets by creating symbolic links in the <a id="_idIndexMarker229"/><span class="My-Italic _idGenCharOverride-1">.wants</span> folder for the target within the <span class="My-Italic _idGenCharOverride-1">/etc/systemd/system</span> folder. The <span class="My-Italic _idGenCharOverride-1">multi-user.target</span> unit, for example, has a folder named <span class="My-Italic _idGenCharOverride-1">multi-user.target.wants</span> in <span class="My-Italic _idGenCharOverride-1">/etc/systemd/system</span> containing symbolic links to all of the systemd units located in <span class="My-Italic _idGenCharOverride-1">/usr/lib/systemd/system</span> on which it is dependent. A review of this folder will show a correlation with the dependencies listed by the <span class="My-Italic _idGenCharOverride-1">systemctl list-dependencies</span> command outlined earlier in the chapter.</p>&#13;
			<p class="My-Basic-Paragraph"><a id="_idIndexMarker230"/><a id="_idIndexMarker231"/>To disable a service so that it no longer starts automatically as a target dependency, simply disable it as follows:</p>&#13;
			<p class="Code"># systemctl disable httpd.service</p>&#13;
			<p class="My-Basic-Paragraph">This command will remove the symbolic link to the<span class="My-Italic _idGenCharOverride-1"> httpd.service</span> unit file from the <span class="My-Italic _idGenCharOverride-1">.wants</span> directory so that it is no longer a dependency and, as such, will not be started the next time the system boots.</p>&#13;
			<p class="My-Basic-Paragraph">The <span class="My-Italic _idGenCharOverride-1">.wants</span> folder contains dependencies which, if not available, will not prevent the unit from starting and functioning. Mandatory dependencies (in other words dependencies that will cause the unit to fail if not available) should be placed in the <a id="_idIndexMarker232"/><span class="My-Italic _idGenCharOverride-1">.requires</span> folder (for example <span class="My-Italic _idGenCharOverride-1">multi-user.target.requires</span>).</p>&#13;
			<p class="My-Basic-Paragraph"><a id="_idIndexMarker233"/>In addition to enabling and disabling, it is also possible to mask a systemd unit as follows:</p>&#13;
			<p class="Code"># systemctl mask httpd.service</p>&#13;
			<p class="My-Basic-Paragraph">A masked systemd unit cannot be enabled, disabled or started under any circumstances even if it is listed as a dependency for another unit. In fact, as far has the system is concerned, it is as though a masked systemd unit no longer exists. This can be useful for ensuring that a unit is never started regardless of the system conditions. The only way to regain access to the service is to unmask it:</p>&#13;
			<p class="Code"># systemctl unmask httpd.service</p>&#13;
			<p id="_idParaDest-102" class="Heading-1-1"><span class="Heading11Marker">11.8 </span><a id="_idTextAnchor146"/>Working with systemd Units in <a id="_idIndexMarker234"/>Cockpit</p>&#13;
			<p class="My-Basic-Paragraph">In addition to the command-line techniques outlined so far in this chapter, it is also possible to review and manage systemd units from within the Cockpit web-based interface. Assuming that Cockpit has been installed and set up as outlined in the chapter entitled <a href="../Text/Cockpit_Overview.xhtml#_idTextAnchor081"><span class="My-Italic _idGenCharOverride-1">“An Overview of the CentOS 8 Cockpit Web Interface”</span></a>, access to the list of systemd units on the system can be accessed by logging into Cockpit and selecting the Services option in the left-hand navigation panel marked A in <a href="../Text/Systemd_Targets_and_States.xhtml#_idTextAnchor147">Figure 11-3</a>:</p>&#13;
			<p class="Centered-Image"><img class="_idGenObjectAttribute-3" src="Images/centos_8_cockpit_services_screen.png" alt="" width="1432" height="825"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 11-3</span><a id="_idTextAnchor147"/></p>&#13;
			<p class="My-Basic-Paragraph">The button marked B displays units of specific types in the main area marked C where the current status of each unit is listed in the State column.</p>&#13;
			<p class="My-Basic-Paragraph">Selecting a unit from the list will display detailed information. <a href="../Text/Systemd_Targets_and_States.xhtml#_idTextAnchor148">Figure 11-4</a>, for example, shows the detail screen for an <span class="My-Italic _idGenCharOverride-1">httpd.service</span> instance including service logs (A) and menu options (B) for performing tasks such as starting, stopping, enabling/disabling and masking/unmasking the unit. </p>&#13;
			<p class="Centered-Image"><img class="_idGenObjectAttribute-4" src="Images/rhel_8_cockpit_service_details.png" alt="" width="897" height="490"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 11-4</span><a id="_idTextAnchor148"/></p>&#13;
			<p id="_idParaDest-103" class="Heading-1-1"><span class="Heading11Marker">11.9 </span><a id="_idTextAnchor149"/>Summary</p>&#13;
			<p class="My-Basic-Paragraph">A newly installed CentOS 8 system includes a base set of systemd units many of which run in the background to provide much of the functionality of the system. These units are categorized by type, the most common of which being targets and services. A target unit is simply a group of other units that are to be started collectively. The system has a default target unit which defines the other units which are to be started up each time the system boots. The most common targets are those which boot the system to either multi-user or graphical mode. The <span class="My-Italic _idGenCharOverride-1">systemctl </span>command-line tool provides a range of options for performing systemd unit configuration tasks, many of which are also available through the Cockpit web-based interface.</p>&#13;
		</div>&#13;
</div>



  </body></html>