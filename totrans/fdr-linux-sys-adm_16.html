<html><head></head><body>
<div id="_idContainer434" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-143"><a id="_idTextAnchor208" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1.1">10</span></h1>
<h1 id="_idParaDest-144" class="calibre5"><a id="_idTextAnchor209" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2.1">System Administration</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">Unlike many professions, there is no single path to becoming a system administrator. </span><span class="kobospan" id="kobo.3.2">Many </span><strong class="bold"><span class="kobospan" id="kobo.4.1">SysAdmins</span></strong><span class="kobospan" id="kobo.5.1"> have a degree </span><a id="_idIndexMarker745" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.6.1">in a wide range of fields: </span><strong class="bold"><span class="kobospan" id="kobo.7.1">computer science</span></strong><span class="kobospan" id="kobo.8.1">, </span><strong class="bold"><span class="kobospan" id="kobo.9.1">systems engineering</span></strong><span class="kobospan" id="kobo.10.1">, </span><strong class="bold"><span class="kobospan" id="kobo.11.1">Information Technology</span></strong><span class="kobospan" id="kobo.12.1">, </span><strong class="bold"><span class="kobospan" id="kobo.13.1">software engineering</span></strong><span class="kobospan" id="kobo.14.1">, </span><strong class="bold"><span class="kobospan" id="kobo.15.1">mechanical engineering</span></strong><span class="kobospan" id="kobo.16.1">, </span><strong class="bold"><span class="kobospan" id="kobo.17.1">meteorology</span></strong><span class="kobospan" id="kobo.18.1">, and </span><span><span class="kobospan" id="kobo.19.1">so on.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.20.1">Plus, given </span><a id="_idIndexMarker746" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.21.1">the hands-on nature of system administration, and the availability </span><a id="_idIndexMarker747" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.22.1">of open source server software, many SysAdmins </span><a id="_idIndexMarker748" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.23.1">enter this field on a self-taught basis. </span><span class="kobospan" id="kobo.23.2">Generally, it requires </span><a id="_idIndexMarker749" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.24.1">some prior experience with the system </span><a id="_idIndexMarker750" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.25.1">expected to be managed. </span><span class="kobospan" id="kobo.25.2">In some cases, SysAdmin </span><a id="_idIndexMarker751" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.26.1">candidates must hold a certificate before they can be considered for </span><span><span class="kobospan" id="kobo.27.1">the position.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.28.1">This profession becomes more difficult if you don’t have the habit of undertaking </span><span><em class="italic"><span class="kobospan" id="kobo.29.1">best practices</span></em></span><span><span class="kobospan" id="kobo.30.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.31.1">But where do you learn them? </span><span class="kobospan" id="kobo.31.2">Where are they </span><span><span class="kobospan" id="kobo.32.1">written down?</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.33.1">In this chapter, we intend </span><a id="_idIndexMarker752" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.34.1">to clear up those doubts and help you on your way to becoming a </span><strong class="bold"><span class="kobospan" id="kobo.35.1">Linux </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.36.1">system administrator</span></strong></span><span><span class="kobospan" id="kobo.37.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.38.1">We’re going to cover the following </span><span><span class="kobospan" id="kobo.39.1">main topics:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.40.1">The three laws of </span><span><span class="kobospan" id="kobo.41.1">the SysAdmin</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.42.1">A little bit of Git </span><span><span class="kobospan" id="kobo.43.1">and programming</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.44.1">Don’t forget to </span><span><span class="kobospan" id="kobo.45.1">back up</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.46.1">Automating </span><span><span class="kobospan" id="kobo.47.1">with Ansible</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.48.1">Never-ending study</span></span></li>
</ul>
<h1 id="_idParaDest-145" class="calibre5"><a id="_idTextAnchor210" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.49.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.50.1">To complete the topics in this chapter, you will need to install the packages indicated in each section. </span><span class="kobospan" id="kobo.50.2">In each section, you will find instructions for the different types of packages you will need </span><span><span class="kobospan" id="kobo.51.1">to install.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.52.1">The examples for this chapter can be downloaded from this book’s </span><strong class="bold"><span class="kobospan" id="kobo.53.1">GitHub</span></strong> <span><span class="kobospan" id="kobo.54.1">repository: </span></span><a href="https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter10" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.55.1">https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter10</span></span></a><span><span class="kobospan" id="kobo.56.1">.</span></span></p>
<h1 id="_idParaDest-146" class="calibre5"><a id="_idTextAnchor211" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.57.1">The three laws of the SysAdmin</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.58.1">“</span><em class="italic"><span class="kobospan" id="kobo.59.1">Because, if you stop to think of it, the three laws of robotics are the essential guiding principles of a good many of the world’s ethical systems. </span><span class="kobospan" id="kobo.59.2">[...] To put it simply, if Byerley follows all the laws of robotics, he may be a robot, or may simply be a very </span></em><span><em class="italic"><span class="kobospan" id="kobo.60.1">good man.</span></em></span><span><span class="kobospan" id="kobo.61.1">”</span></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.62.1">Dr. </span><span class="kobospan" id="kobo.62.2">Susan Calvin in Evidence from </span></em><span><em class="italic"><span class="kobospan" id="kobo.63.1">Isaac Asimov</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.64.1">For more than 20 years, I was a SysAdmin for different companies. </span><span class="kobospan" id="kobo.64.2">In those years, some young people </span><a id="_idIndexMarker753" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.65.1">asked me what the best practices were and if could they apply them to consider themselves a good SysAdmin. </span><span class="kobospan" id="kobo.65.2">Over the years, I have read different articles about these </span><em class="italic"><span class="kobospan" id="kobo.66.1">best practices</span></em><span class="kobospan" id="kobo.67.1">: </span><strong class="bold"><span class="kobospan" id="kobo.68.1">Ethics Code for SysAdmins</span></strong><span class="kobospan" id="kobo.69.1">, </span><strong class="bold"><span class="kobospan" id="kobo.70.1">The 10 Commandments of the SysAdmin</span></strong><span class="kobospan" id="kobo.71.1">, and even </span><strong class="bold"><span class="kobospan" id="kobo.72.1">Fundamental Laws </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.73.1">of Computing</span></strong></span><span><span class="kobospan" id="kobo.74.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.75.1">This job of becoming a platform SysAdmin is an arduous task that becomes complicated if we don’t get into the habit of applying best practices. </span><span class="kobospan" id="kobo.75.2">But where do you learn them? </span><span class="kobospan" id="kobo.75.3">Where are they </span><span><span class="kobospan" id="kobo.76.1">written down?</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.77.1">One of the best philosophies, in my experience, is to follow the </span><strong class="bold"><span class="kobospan" id="kobo.78.1">KISS principle</span></strong><span class="kobospan" id="kobo.79.1"> and, based on it, simplify the recommendations into fundamental principles that help us develop </span><span><span class="kobospan" id="kobo.80.1">our skills.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.81.1">Let’s provide an overview of </span><span><span class="kobospan" id="kobo.82.1">this principle.</span></span></p>
<h2 id="_idParaDest-147" class="calibre7"><a id="_idTextAnchor212" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.83.1">The KISS principle</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.84.1">The KISS </span><a id="_idIndexMarker754" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.85.1">principle (an acronym for </span><em class="italic"><span class="kobospan" id="kobo.86.1">Keep It Simple, Stupid!</span></em><span class="kobospan" id="kobo.87.1">) is a design </span><a id="_idIndexMarker755" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.88.1">principle that was outlined by the US Navy in 1960. </span><span class="kobospan" id="kobo.88.2">It states that most systems work better if they’re kept simple than if they become complicated. </span><span class="kobospan" id="kobo.88.3">Thus, simplicity should be a key aim in design, and unnecessary complexity should </span><span><span class="kobospan" id="kobo.89.1">be avoided.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.90.1">A text attributed to </span><em class="italic"><span class="kobospan" id="kobo.91.1">Leonardo Da Vinci</span></em><span class="kobospan" id="kobo.92.1"> gives us a broad outline of </span><span><span class="kobospan" id="kobo.93.1">the principle:</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.94.1">“</span><em class="italic"><span class="kobospan" id="kobo.95.1">Simplicity is the </span></em><span><em class="italic"><span class="kobospan" id="kobo.96.1">ultimate sophistication.</span></em></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.97.1">When once you have tasted flight, you will forever walk the Earth with your eyes turned skyward, for there you have been, and there you will always long </span></em><span><em class="italic"><span class="kobospan" id="kobo.98.1">to return.</span></em></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.99.1">Learning never exhausts </span></em><span><em class="italic"><span class="kobospan" id="kobo.100.1">the mind.</span></em></span><span><span class="kobospan" id="kobo.101.1">”</span></span></p>
<p class="calibre3"><span lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.102.1">–</span></span><em class="italic"><span class="kobospan" id="kobo.103.1"> Leonardo </span></em><span><em class="italic"><span class="kobospan" id="kobo.104.1">da Vinci</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.105.1">In most cases, simple </span><a id="_idIndexMarker756" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.106.1">solutions are more effective. </span><span class="kobospan" id="kobo.106.2">Over the </span><a id="_idIndexMarker757" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.107.1">years, I have seen young SysAdmins fall into applying complex solutions that lead to </span><span><span class="kobospan" id="kobo.108.1">more issues.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.109.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.110.1">For more </span><a id="_idIndexMarker758" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.111.1">information on how to apply the KISS principle in code creation, refer to </span><em class="italic"><span class="kobospan" id="kobo.112.1">The Kiss Principle</span></em> <span><span class="kobospan" id="kobo.113.1">at </span></span><a href="https://people.apache.org/~fhanik/kiss.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.114.1">https://people.apache.org/~fhanik/kiss.html</span></span></a><span><span class="kobospan" id="kobo.115.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.116.1">Based on this, let me share with you the fundamental principles that guide me in my work as </span><span><span class="kobospan" id="kobo.117.1">a SysAdmin.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.118.1">Let’s see how these fundamental principles originated, and then delve deeper </span><span><span class="kobospan" id="kobo.119.1">into them.</span></span></p>
<h2 id="_idParaDest-148" class="calibre7"><a id="_idTextAnchor213" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.120.1">Knowing the basic tasks</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.121.1">This is from </span><a id="_idIndexMarker759" class="pcalibre1 calibre6 pcalibre"/><span><span class="kobospan" id="kobo.122.1">Wikipedia (</span></span><a href="https://en.wikipedia.org/wiki/System_administrator" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.123.1">https://en.wikipedia.org/wiki/System_administrator</span></span></a><span><span class="kobospan" id="kobo.124.1">):</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.125.1">“</span><em class="italic"><span class="kobospan" id="kobo.126.1">A System Administrator is the person who handles implementing, configuring, maintaining, monitoring, documenting, and ensuring the proper functioning of a computer system, or some aspect </span></em><span><em class="italic"><span class="kobospan" id="kobo.127.1">of it.</span></em></span><span><span class="kobospan" id="kobo.128.1">”</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.129.1">Their purpose is to guarantee the </span><em class="italic"><span class="kobospan" id="kobo.130.1">uptime</span></em><span class="kobospan" id="kobo.131.1">, </span><em class="italic"><span class="kobospan" id="kobo.132.1">performance</span></em><span class="kobospan" id="kobo.133.1">, </span><em class="italic"><span class="kobospan" id="kobo.134.1">resource usage</span></em><span class="kobospan" id="kobo.135.1">, and </span><em class="italic"><span class="kobospan" id="kobo.136.1">security </span></em><span class="kobospan" id="kobo.137.1">of the servers that </span><span><span class="kobospan" id="kobo.138.1">they manage.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.139.1">They have different roles, such as </span><em class="italic"><span class="kobospan" id="kobo.140.1">server administrator</span></em><span class="kobospan" id="kobo.141.1">, </span><em class="italic"><span class="kobospan" id="kobo.142.1">database administrator</span></em><span class="kobospan" id="kobo.143.1">, </span><em class="italic"><span class="kobospan" id="kobo.144.1">network administrator</span></em><span class="kobospan" id="kobo.145.1">, </span><em class="italic"><span class="kobospan" id="kobo.146.1">email server administrator</span></em><span class="kobospan" id="kobo.147.1">, </span><em class="italic"><span class="kobospan" id="kobo.148.1">web server administrator</span></em><span class="kobospan" id="kobo.149.1">, </span><em class="italic"><span class="kobospan" id="kobo.150.1">security administrator</span></em><span class="kobospan" id="kobo.151.1">, </span><em class="italic"><span class="kobospan" id="kobo.152.1">backup administrator</span></em><span class="kobospan" id="kobo.153.1">, and </span><span><span class="kobospan" id="kobo.154.1">so on.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.155.1">Depending on the role, the tasks change, but they converge on </span><span><span class="kobospan" id="kobo.156.1">fundamental points.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.157.1">Let’s start with the most basic point, which is to </span><em class="italic"><span class="kobospan" id="kobo.158.1">always use the command-line interface</span></em><span class="kobospan" id="kobo.159.1">. </span><span class="kobospan" id="kobo.159.2">As mentioned in </span><a href="B19121_01_split_000.xhtml#_idTextAnchor014" class="pcalibre1 calibre6 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.160.1">Chapter 1</span></em></span></a><span class="kobospan" id="kobo.161.1">, the Terminal is the primary tool for operating system administration. </span><span class="kobospan" id="kobo.161.2">Its use extends the capabilities of system administration </span><span><span class="kobospan" id="kobo.162.1">and operation.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.163.1">From my own experience, </span><em class="italic"><span class="kobospan" id="kobo.164.1">any productive system will fail one day</span></em><span class="kobospan" id="kobo.165.1">, no matter how many precautions we have provided or maintenance we’ve undertaken. </span><span class="kobospan" id="kobo.165.2">The best solution is to prepare for that day with a </span><span><span class="kobospan" id="kobo.166.1">valid backup.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.167.1">If we do </span><a id="_idIndexMarker760" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.168.1">not know what is critical in our system, then we should investigate what is critical and, thus, plan to have a backup. </span><span class="kobospan" id="kobo.168.2">How do we know that a backup will serve us in case of disaster? </span><span class="kobospan" id="kobo.168.3">Here are some questions you should ask </span><span><span class="kobospan" id="kobo.169.1">when planning:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.170.1">What software (or script) is used for </span><span><span class="kobospan" id="kobo.171.1">backing up?</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.172.1">How much space do we have for backups (internal and external, on disk, or </span><span><span class="kobospan" id="kobo.173.1">on tape)?</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.174.1">How often should we rotate </span><span><span class="kobospan" id="kobo.175.1">the backups?</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.176.1">Regardless of the total backup (full backup), do we need </span><span><span class="kobospan" id="kobo.177.1">incremental backups?</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.178.1">Once we have a clear idea of how we make the backup, we must take the necessary time to verify it. </span><span class="kobospan" id="kobo.178.2">Although we have a good plan for creating backups, this does not mean that they won’t </span><span><span class="kobospan" id="kobo.179.1">be corrupted.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.180.1">Backing up, and how often we do it, is </span><em class="italic"><span class="kobospan" id="kobo.181.1">the most basic and generic task</span></em><span class="kobospan" id="kobo.182.1"> in all types of </span><span><span class="kobospan" id="kobo.183.1">system administration.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.184.1">The majority of backup solutions allow us to handle this task via the command line. </span><span class="kobospan" id="kobo.184.2">Thanks to this facility, the task could become </span><em class="italic"><span class="kobospan" id="kobo.185.1">automated</span></em><span class="kobospan" id="kobo.186.1">, like many others. </span><span class="kobospan" id="kobo.186.2">Automating tasks streamlines </span><span><span class="kobospan" id="kobo.187.1">SysAdmins’ work.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.188.1">The statement </span><em class="italic"><span class="kobospan" id="kobo.189.1">Lazy SysAdmin is the best SysAdmin </span></em><span class="kobospan" id="kobo.190.1">is well known. </span><span class="kobospan" id="kobo.190.2">This means that if you are proactive enough to automate all processes, you will have a lot of </span><em class="italic"><span class="kobospan" id="kobo.191.1">free time</span></em><span class="kobospan" id="kobo.192.1"> and be considered lazy. </span><span class="kobospan" id="kobo.192.2">The best SysAdmin never seems to be very busy and prefers relaxing and letting the system do the work for them. </span><em class="italic"><span class="kobospan" id="kobo.193.1">Work smarter, </span></em><span><em class="italic"><span class="kobospan" id="kobo.194.1">not harder</span></em></span><span><span class="kobospan" id="kobo.195.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.196.1">But the free time we can get from </span><em class="italic"><span class="kobospan" id="kobo.197.1">automating processes</span></em><span class="kobospan" id="kobo.198.1"> should be used productively – maybe by studying some new language or emerging technologies we haven’t mastered (Perl, Python, Kubernetes, and so on) or optimizing some script to turn it into </span><span><span class="kobospan" id="kobo.199.1">an </span></span><span><em class="italic"><span class="kobospan" id="kobo.200.1">orchestration</span></em></span><span><span class="kobospan" id="kobo.201.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.202.1">The following figure shows the evolution of </span><span><span class="kobospan" id="kobo.203.1">these principles:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer363">
<span class="kobospan" id="kobo.204.1"><img alt="Figure 10.1 – Fundamental principles" src="image/B19121_10_1.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.205.1">Figure 10.1 – Fundamental principles</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.206.1">Following these basic principles helped me improve many systems administration skills. </span><span class="kobospan" id="kobo.206.2">Although </span><a id="_idIndexMarker761" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.207.1">they do not cover all aspects of systems administration per se, they create good habits that could develop many skills needed for </span><span><span class="kobospan" id="kobo.208.1">this job.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.209.1">These principles constitute my </span><em class="italic"><span class="kobospan" id="kobo.210.1">fundamental laws of effective management</span></em><span class="kobospan" id="kobo.211.1"> – that is, my three laws of </span><span><span class="kobospan" id="kobo.212.1">the SysAdmin:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.213.1">Back up</span></strong><span class="kobospan" id="kobo.214.1">: A SysAdmin must back up the entire system and always verify </span><span><span class="kobospan" id="kobo.215.1">the backup</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.216.1">Automate</span></strong><span class="kobospan" id="kobo.217.1">: A SysAdmin should automate as much as possible, except if it conflicts with the </span><span><span class="kobospan" id="kobo.218.1">first law</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.219.1">Study</span></strong><span class="kobospan" id="kobo.220.1">: A SysAdmin must have free time to study, so long this free time does not conflict with the first or </span><span><span class="kobospan" id="kobo.221.1">second law</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.222.1">Before we dive deep into each of the laws of system administration, let’s take a quick look at a couple of indispensable tools for </span><span><span class="kobospan" id="kobo.223.1">implementing them.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.224.1">First, we’ll look at programming and </span><span><span class="kobospan" id="kobo.225.1">version management.</span></span></p>
<h1 id="_idParaDest-149" class="calibre5"><a id="_idTextAnchor214" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.226.1">A little bit of Git and programming</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.227.1">Typical system administration tasks involve command-line tools. </span><span class="kobospan" id="kobo.227.2">Tasks of greater complexity often need to chain several commands and share the results with each other. </span><span class="kobospan" id="kobo.227.3">Linux commands can be combined to solve repetitive and difficult tasks using the Bash shell environment and basic </span><span><span class="kobospan" id="kobo.228.1">programming functions.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.229.1">As a command interpreter and a programming language in its own right, the Bash shell environment allows you to run routines and use expressions, besides running other </span><span><span class="kobospan" id="kobo.230.1">programming languages.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.231.1">These routines simplify the lists of commands, which can be included in a file called a </span><span><em class="italic"><span class="kobospan" id="kobo.232.1">Bash script</span></em></span><span><span class="kobospan" id="kobo.233.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.234.1">Next, we’ll learn how to create </span><span><span class="kobospan" id="kobo.235.1">Bash scripts.</span></span></p>
<h2 id="_idParaDest-150" class="calibre7"><a id="_idTextAnchor215" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.236.1">Bash scripting</span></h2>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.237.1">Bash scripting</span></em><span class="kobospan" id="kobo.238.1"> consists of </span><a id="_idIndexMarker762" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.239.1">programming using commands as the program’s instructions. </span><span class="kobospan" id="kobo.239.2">This strategy automates repetitive tasks, reducing them to a single line through expressions such as logic gates, conditions, loops, and so on. </span><span class="kobospan" id="kobo.239.3">Thus, it facilitates the consolidation of several long commands into a </span><em class="italic"><span class="kobospan" id="kobo.240.1">single piece of code </span></em><span><em class="italic"><span class="kobospan" id="kobo.241.1">to run</span></em></span><span><span class="kobospan" id="kobo.242.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.243.1">It provides a structured, formatted, and modular sequence of activities, as well as commands with dynamic values through the use of </span><span><span class="kobospan" id="kobo.244.1">command-line arguments.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.245.1">In its simplest form, a Bash script consists of a runnable file containing a list of commands, and with programming logic to control decision-making in the task. </span><span class="kobospan" id="kobo.245.2">Skill in shell scripting is essential for administering systems in any </span><span><span class="kobospan" id="kobo.246.1">operating environment.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.247.1">There is a lot of literature and many references on how to write a Bash script in the best way. </span><span class="kobospan" id="kobo.247.2">However, by following the principle of simplicity mentioned at the beginning of this chapter, it could summarized </span><span><span class="kobospan" id="kobo.248.1">as follows:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.249.1">
#!/bin/bash  ← [</span><strong class="bold1"><span class="kobospan1" id="kobo.250.1">1</span></strong><span class="kobospan1" id="kobo.251.1">]
#
# IDENTIFICATION  ← [</span><strong class="bold1"><span class="kobospan1" id="kobo.252.1">2</span></strong><span class="kobospan1" id="kobo.253.1">]
#
# VARIABLES  ← [</span><strong class="bold1"><span class="kobospan1" id="kobo.254.1">3</span></strong><span class="kobospan1" id="kobo.255.1">]
# COMMANDS  ← [</span><strong class="bold1"><span class="kobospan1" id="kobo.256.1">4</span></strong><span class="kobospan1" id="kobo.257.1">]</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.258.1">Let’s take </span><a id="_idIndexMarker763" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.259.1">a </span><span><span class="kobospan" id="kobo.260.1">closer look:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.261.1">[</span><strong class="bold"><span class="kobospan" id="kobo.262.1">1</span></strong><span class="kobospan" id="kobo.263.1">] </span><strong class="source-inline1"><span class="kobospan" id="kobo.264.1">she-bang</span></strong><span class="kobospan" id="kobo.265.1"> or </span><strong class="source-inline1"><span class="kobospan" id="kobo.266.1">sh-bang</span></strong><span class="kobospan" id="kobo.267.1">: The first line of a script starts with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.268.1">#!</span></strong><span class="kobospan" id="kobo.269.1"> notation. </span><span class="kobospan" id="kobo.269.2">This is a </span><em class="italic"><span class="kobospan" id="kobo.270.1">two-byte magic number</span></em><span class="kobospan" id="kobo.271.1"> that indicates an interpretative script. </span><span class="kobospan" id="kobo.271.2">The syntax that follows is the name of the command interpreter needed to run the lines of </span><span><span class="kobospan" id="kobo.272.1">this script.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.273.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.274.1">To understand how magic numbers indicate file types in Linux, refer to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.275.1">file(1)</span></strong><span class="kobospan" id="kobo.276.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.277.1">magic(5)</span></strong> <span><span class="kobospan" id="kobo.278.1">man pages.</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.279.1">[</span><strong class="bold"><span class="kobospan" id="kobo.280.1">2</span></strong><span class="kobospan" id="kobo.281.1">] </span><strong class="source-inline1"><span class="kobospan" id="kobo.282.1">IDENTIFICATION</span></strong><span class="kobospan" id="kobo.283.1">: The identification section of the script is essential and indispensable. </span><span class="kobospan" id="kobo.283.2">This is the documentation of the script and includes the description of the routines run, as well as the version and even the author’s details and license </span><span><span class="kobospan" id="kobo.284.1">of use.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.285.1">[</span><strong class="bold"><span class="kobospan" id="kobo.286.1">3</span></strong><span class="kobospan" id="kobo.287.1">] </span><strong class="source-inline1"><span class="kobospan" id="kobo.288.1">VARIABLES</span></strong><span class="kobospan" id="kobo.289.1">: This section declares the variables that run the script during its operation. </span><span class="kobospan" id="kobo.289.2">The variables store information in the system’s memory. </span><span class="kobospan" id="kobo.289.3">The script uses local variables. </span><span class="kobospan" id="kobo.289.4">These variables store information for short periods. </span><span class="kobospan" id="kobo.289.5">Local variables exist and are valid only for the shell or session in which the </span><span><span class="kobospan" id="kobo.290.1">script runs.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.291.1">[</span><strong class="bold"><span class="kobospan" id="kobo.292.1">4</span></strong><span class="kobospan" id="kobo.293.1">] </span><strong class="source-inline1"><span class="kobospan" id="kobo.294.1">COMMANDS</span></strong><span class="kobospan" id="kobo.295.1">: This section lists the routines and commands to run. </span><span class="kobospan" id="kobo.295.2">It also includes functions used to specify </span><em class="italic"><span class="kobospan" id="kobo.296.1">run</span></em><span class="kobospan" id="kobo.297.1"> commands in </span><span><span class="kobospan" id="kobo.298.1">specific situations.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.299.1">Let’s see an example of a Bash script. </span><span class="kobospan" id="kobo.299.2">Create a script that covers the </span><span><span class="kobospan" id="kobo.300.1">following routines:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.301.1">Name the </span><span><span class="kobospan" id="kobo.302.1">file </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.303.1">mytasks.sh</span></strong></span><span><span class="kobospan" id="kobo.304.1">.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.305.1">Create a </span><em class="italic"><span class="kobospan" id="kobo.306.1">working directory </span></em><span><span class="kobospan" id="kobo.307.1">named </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.308.1">class</span></strong></span><span><span class="kobospan" id="kobo.309.1">.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.310.1">Concatenate the following files as a </span><strong class="source-inline1"><span class="kobospan" id="kobo.311.1">data</span></strong><span class="kobospan" id="kobo.312.1"> file in the </span><span><span class="kobospan" id="kobo.313.1">working directory:</span></span><ul class="calibre17"><li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.314.1">/</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.315.1">etc/passwd</span></strong></span></li><li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.316.1">/</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.317.1">etc/group</span></strong></span></li><li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.318.1">/</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.319.1">etc/shadow</span></strong></span></li></ul></li>
<li class="calibre14"><span class="kobospan" id="kobo.320.1">Create the </span><span><span class="kobospan" id="kobo.321.1">following users:</span></span><ul class="calibre17"><li class="calibre14"><span><strong class="source-inline1"><span class="kobospan" id="kobo.322.1">John</span></strong></span></li><li class="calibre14"><span><strong class="source-inline1"><span class="kobospan" id="kobo.323.1">Peter</span></strong></span></li><li class="calibre14"><span><strong class="source-inline1"><span class="kobospan" id="kobo.324.1">Mark</span></strong></span></li></ul></li>
<li class="calibre14"><span class="kobospan" id="kobo.325.1">Copy the </span><strong class="source-inline1"><span class="kobospan" id="kobo.326.1">data</span></strong><span class="kobospan" id="kobo.327.1"> file to the </span><span><span class="kobospan" id="kobo.328.1">users’ home.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.329.1">Generate an </span><span><em class="italic"><span class="kobospan" id="kobo.330.1">activity log</span></em></span><span><span class="kobospan" id="kobo.331.1">.</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.332.1">The routines </span><a id="_idIndexMarker764" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.333.1">are simple: creating a </span><em class="italic"><span class="kobospan" id="kobo.334.1">working directory</span></em><span class="kobospan" id="kobo.335.1"> gives the administrator a single point of consolidation of working files. </span><span class="kobospan" id="kobo.335.2">This makes backing up much easier. </span><span class="kobospan" id="kobo.335.3">And, from system files, we create a data file, which must exist in each of the users’ home directories – the same users that, if they do not exist in the system, must create them. </span><span class="kobospan" id="kobo.335.4">All routines and activities performed by the Bash script should be recorded in the log for </span><span><span class="kobospan" id="kobo.336.1">documentation purposes.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.337.1">The Bash script involves creating users, so the user running the script must have the </span><em class="italic"><span class="kobospan" id="kobo.338.1">appropriate privileges</span></em><span class="kobospan" id="kobo.339.1"> to do so. </span><span class="kobospan" id="kobo.339.2">One of the best options is to use the </span><strong class="source-inline"><span class="kobospan" id="kobo.340.1">sudo</span></strong><span class="kobospan" id="kobo.341.1"> command. </span><span class="kobospan" id="kobo.341.2">Then, you can grant the </span><em class="italic"><span class="kobospan" id="kobo.342.1">non-root user</span></em><span class="kobospan" id="kobo.343.1"> the privilege to create users and assign the permissions needed to the files involved in </span><span><span class="kobospan" id="kobo.344.1">the activities.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.345.1">To make this example a little simpler, we’ll use the </span><strong class="source-inline"><span class="kobospan" id="kobo.346.1">root</span></strong><span class="kobospan" id="kobo.347.1"> user. </span><span class="kobospan" id="kobo.347.2">To switch to the </span><strong class="source-inline"><span class="kobospan" id="kobo.348.1">root</span></strong><span class="kobospan" id="kobo.349.1"> user, use the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.350.1">sudo</span></strong></span><span><span class="kobospan" id="kobo.351.1"> command:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.352.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.353.1">sudo -i</span></strong></pre> <p class="calibre3"><span class="kobospan" id="kobo.354.1">To create the Bash script, follow </span><span><span class="kobospan" id="kobo.355.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.356.1">Create and change to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.357.1">class</span></strong> <span><span class="kobospan" id="kobo.358.1">working directory:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.359.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.360.1">mkdir class</span></strong><span class="kobospan1" id="kobo.361.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.362.1">cd class</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.363.1">Use your </span><a id="_idIndexMarker765" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.364.1">preferred text editor to create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.365.1">mytasks.sh</span></strong><span class="kobospan" id="kobo.366.1"> script file. </span><span class="kobospan" id="kobo.366.2">In this example, we will use the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.367.1">vim</span></strong></span><span><span class="kobospan" id="kobo.368.1"> editor:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.369.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.370.1">vim mytasks.sh</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.371.1">As a </span><strong class="source-inline1"><span class="kobospan" id="kobo.372.1">she-bang</span></strong><span class="kobospan" id="kobo.373.1">, add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.374.1">#!/</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.375.1">bin/bash</span></strong></span><span><span class="kobospan" id="kobo.376.1"> line:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer364">
<span class="kobospan" id="kobo.377.1"><img alt="Figure 10.2 – Creating the mytasks.sh script" src="image/B19121_10_2.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.378.1">Figure 10.2 – Creating the mytasks.sh script</span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.379.1">Fill in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.380.1">IDENTIFICATION</span></strong><span class="kobospan" id="kobo.381.1"> section with descriptive information about the script routine, including the version and the author of </span><span><span class="kobospan" id="kobo.382.1">the script:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer365">
<span class="kobospan" id="kobo.383.1"><img alt="Figure 10.3 – Script identification section" src="image/B19121_10_3.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.384.1">Figure 10.3 – Script identification section</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.385.1">In the </span><strong class="source-inline1"><span class="kobospan" id="kobo.386.1">VARIABLES</span></strong><span class="kobospan" id="kobo.387.1"> section, we need to declare the static information, which </span><span><span class="kobospan" id="kobo.388.1">won’t change:</span></span><ol class="calibre18"><li class="upper-roman"><span class="kobospan" id="kobo.389.1">The path </span><a id="_idIndexMarker766" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.390.1">and name of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.391.1">class</span></strong> <span><span class="kobospan" id="kobo.392.1">working directory:</span></span></li></ol><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.393.1">WDIR</span></strong><span class="kobospan1" id="kobo.394.1">=/root/class</span></pre><ol class="calibre18"><li class="upper-roman" value="2"><span class="kobospan" id="kobo.395.1">The path and name of the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.396.1">log</span></strong></span><span><span class="kobospan" id="kobo.397.1"> file:</span></span></li></ol><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.398.1">LOG</span></strong><span class="kobospan1" id="kobo.399.1">=</span><strong class="bold1"><span class="kobospan1" id="kobo.400.1">$WDIR</span></strong><span class="kobospan1" id="kobo.401.1">/mytasks.log</span></pre><p class="calibre3"><span class="kobospan" id="kobo.402.1">Please note how the working directory variable serves as the file path </span><span><span class="kobospan" id="kobo.403.1">origin point.</span></span></p><ol class="calibre18"><li class="upper-roman" value="3"><span class="kobospan" id="kobo.404.1">The selected timestamp for the log record of </span><span><span class="kobospan" id="kobo.405.1">the runs:</span></span></li></ol><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.406.1">TIMESTAMP</span></strong><span class="kobospan1" id="kobo.407.1">=$(</span><strong class="bold1"><span class="kobospan1" id="kobo.408.1">date +'%Y-%m-%d %H:%M'</span></strong><span class="kobospan1" id="kobo.409.1">)</span></pre><p class="calibre3"><span class="kobospan" id="kobo.410.1">This output of the </span><strong class="source-inline"><span class="kobospan" id="kobo.411.1">date</span></strong><span class="kobospan" id="kobo.412.1"> command gets formatted as </span><span><strong class="source-inline"><span class="kobospan" id="kobo.413.1">2023-06-18 20:50</span></strong></span><span><span class="kobospan" id="kobo.414.1">.</span></span></p><ol class="calibre18"><li class="upper-roman" value="4"><span class="kobospan" id="kobo.415.1">The path and name </span><span><span class="kobospan" id="kobo.416.1">of </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.417.1">DATA_FILE</span></strong></span><span><span class="kobospan" id="kobo.418.1">:</span></span></li></ol><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.419.1">DATA_FILE</span></strong><span class="kobospan1" id="kobo.420.1">=</span><strong class="bold1"><span class="kobospan1" id="kobo.421.1">$WDIR</span></strong><span class="kobospan1" id="kobo.422.1">/data</span></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.423.1">In the command section, test the use of variables and how tasks are logged and run by creating the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.424.1">data</span></strong></span><span><span class="kobospan" id="kobo.425.1"> file:</span></span><ol class="calibre18"><li class="upper-roman"><span class="kobospan" id="kobo.426.1">Start recording a header with symbols to separate the activities </span><span><span class="kobospan" id="kobo.427.1">in </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.428.1">log</span></strong></span><span><span class="kobospan" id="kobo.429.1">:</span></span></li></ol><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.430.1">echo </span></strong><span class="kobospan1" id="kobo.431.1">"++++++++++++++++++++++++++++++++" </span><strong class="bold1"><span class="kobospan1" id="kobo.432.1">&gt;&gt; $LOG</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.433.1">To record </span><a id="_idIndexMarker767" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.434.1">the activities in </span><strong class="source-inline"><span class="kobospan" id="kobo.435.1">log</span></strong><span class="kobospan" id="kobo.436.1">, run an </span><strong class="source-inline"><span class="kobospan" id="kobo.437.1">echo</span></strong><span class="kobospan" id="kobo.438.1"> command with the activity and direct the output to the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.439.1">log</span></strong></span><span><span class="kobospan" id="kobo.440.1"> file.</span></span></p><ol class="calibre18"><li class="upper-roman" value="2"><span class="kobospan" id="kobo.441.1">Record the start of the script so that you can count the time it takes to perform </span><span><span class="kobospan" id="kobo.442.1">the routine:</span></span></li></ol><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.443.1">echo </span></strong><span class="kobospan1" id="kobo.444.1">"</span><strong class="bold1"><span class="kobospan1" id="kobo.445.1">$TIMESTAMP </span></strong><span class="kobospan1" id="kobo.446.1">[</span><strong class="bold1"><span class="kobospan1" id="kobo.447.1">INFO</span></strong><span class="kobospan1" id="kobo.448.1">] Start running mytasks.sh" </span><strong class="bold1"><span class="kobospan1" id="kobo.449.1">&gt;&gt; $LOG</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.450.1">Using </span><strong class="source-inline"><span class="kobospan" id="kobo.451.1">log</span></strong><span class="kobospan" id="kobo.452.1"> levels (</span><strong class="source-inline"><span class="kobospan" id="kobo.453.1">info</span></strong><span class="kobospan" id="kobo.454.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.455.1">error</span></strong><span class="kobospan" id="kobo.456.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.457.1">warn</span></strong><span class="kobospan" id="kobo.458.1">, and so on) allows you to distinguish the outputs of </span><span><span class="kobospan" id="kobo.459.1">the activities.</span></span></p></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.460.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.461.1">To learn </span><a id="_idIndexMarker768" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.462.1">more about kernel log levels, refer to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.463.1">syslog(2)</span></strong> <span><span class="kobospan" id="kobo.464.1">man page.</span></span></p>
<ol class="calibre13">
<li class="upper-roman" value="3"><span class="kobospan" id="kobo.465.1">Record the first activity – that is, creating the </span><span><span class="kobospan" id="kobo.466.1">data file:</span></span></li>
</ol>
<pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.467.1">echo </span></strong><span class="kobospan1" id="kobo.468.1">"</span><strong class="bold1"><span class="kobospan1" id="kobo.469.1">$TIMESTAMP </span></strong><span class="kobospan1" id="kobo.470.1">[</span><strong class="bold1"><span class="kobospan1" id="kobo.471.1">INFO</span></strong><span class="kobospan1" id="kobo.472.1">] Create data file" </span><strong class="bold1"><span class="kobospan1" id="kobo.473.1">&gt;&gt; $LOG</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.474.1">cat /etc/passwd &gt;&gt; $DATA_FILE</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.475.1">cat /etc/group &gt;&gt; $DATA_FILE</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.476.1">cat /etc/shadow &gt;&gt; $DATA_FILE</span></strong></pre> <p class="calibre3"><span class="kobospan" id="kobo.477.1">This same first activity can be seen in the </span><span><span class="kobospan" id="kobo.478.1">following screenshot:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer366">
<span class="kobospan" id="kobo.479.1"><img alt="Figure 10.4 – The first version of mytasks.sh" src="image/B19121_10_4.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.480.1">Figure 10.4 – The first version of mytasks.sh</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.481.1">Now, let’s test </span><a id="_idIndexMarker769" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.482.1">this first version of the </span><span><span class="kobospan" id="kobo.483.1">Bash script:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.484.1">Set </span><em class="italic"><span class="kobospan" id="kobo.485.1">run rights</span></em><span class="kobospan" id="kobo.486.1"> to the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.487.1">mytasks.sh</span></strong></span><span><span class="kobospan" id="kobo.488.1"> script:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.489.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.490.1">chmod +x mytasks.sh</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer367">
<span class="kobospan" id="kobo.491.1"><img alt="Figure 10.5 – Setting run rights to mytasks.sh" src="image/B19121_10_5.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.492.1">Figure 10.5 – Setting run rights to mytasks.sh</span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.493.1">Run the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.494.1">mytasks.sh</span></strong></span><span><span class="kobospan" id="kobo.495.1"> script:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.496.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.497.1">./mytasks.sh</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.498.1">Verify the creation of the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.499.1">data</span></strong></span><span><span class="kobospan" id="kobo.500.1"> file:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer368">
<span class="kobospan" id="kobo.501.1"><img alt="Figure 10.6 – Verifying the data file" src="image/B19121_10_6.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.502.1">Figure 10.6 – Verifying the data file</span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.503.1">Verify that </span><a id="_idIndexMarker770" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.504.1">activities are recorded in the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.505.1">log</span></strong></span><span><span class="kobospan" id="kobo.506.1"> file:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer369">
<span class="kobospan" id="kobo.507.1"><img alt="Figure 10.7 – Verifying the log file" src="image/B19121_10_7.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.508.1">Figure 10.7 – Verifying the log file</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.509.1">As we can see, the </span><strong class="source-inline"><span class="kobospan" id="kobo.510.1">data</span></strong><span class="kobospan" id="kobo.511.1"> file was created and the activities were recorded in the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.512.1">log</span></strong></span><span><span class="kobospan" id="kobo.513.1"> file.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.514.1">The next step is to create the users. </span><span class="kobospan" id="kobo.514.2">However, note that every time the Bash script runs, the </span><strong class="source-inline"><span class="kobospan" id="kobo.515.1">data</span></strong><span class="kobospan" id="kobo.516.1"> file must be created. </span><span class="kobospan" id="kobo.516.2">Before continuing, now is a good time to add </span><span><span class="kobospan" id="kobo.517.1">a validation:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.518.1">If the </span><strong class="source-inline1"><span class="kobospan" id="kobo.519.1">data</span></strong><span class="kobospan" id="kobo.520.1"> file exists, continue with the </span><span><span class="kobospan" id="kobo.521.1">following instruction.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.522.1">If the </span><strong class="source-inline1"><span class="kobospan" id="kobo.523.1">data</span></strong><span class="kobospan" id="kobo.524.1"> file is not present, then you can </span><span><span class="kobospan" id="kobo.525.1">create it.</span></span></li>
</ul>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.526.1">For validation, use an </span><strong class="source-inline1"><span class="kobospan" id="kobo.527.1">if-else</span></strong><span class="kobospan" id="kobo.528.1"> statement. </span><span class="kobospan" id="kobo.528.2">A basic effective </span><strong class="source-inline1"><span class="kobospan" id="kobo.529.1">if-else</span></strong><span class="kobospan" id="kobo.530.1"> statement indicates that if a particular test is </span><strong class="source-inline1"><span class="kobospan" id="kobo.531.1">true</span></strong><span class="kobospan" id="kobo.532.1">, then it performs a given set of commands. </span><span class="kobospan" id="kobo.532.2">If it is </span><strong class="source-inline1"><span class="kobospan" id="kobo.533.1">false</span></strong><span class="kobospan" id="kobo.534.1">, then perform a different set </span><span><span class="kobospan" id="kobo.535.1">of commands.</span></span><p class="calibre3"><span class="kobospan" id="kobo.536.1">In the </span><strong class="source-inline"><span class="kobospan" id="kobo.537.1">COMMANDS</span></strong><span class="kobospan" id="kobo.538.1"> section, add the following </span><span><strong class="source-inline"><span class="kobospan" id="kobo.539.1">if-else</span></strong></span><span><span class="kobospan" id="kobo.540.1"> statement:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.541.1">
echo "$TIMESTAMP [INFO] Verify the data file" &gt;&gt; $LOG
</span><strong class="bold1"><span class="kobospan1" id="kobo.542.1">if [ -f $DATA_FILE ]</span></strong><span class="kobospan1" id="kobo.543.1">;
</span><strong class="bold1"><span class="kobospan1" id="kobo.544.1">then</span></strong><span class="kobospan1" id="kobo.545.1">
  echo "$TIMESTAMP [OK] The data file exists" &gt;&gt; $LOG
</span><strong class="bold1"><span class="kobospan1" id="kobo.546.1">else</span></strong><span class="kobospan1" id="kobo.547.1">
  echo "$TIMESTAMP [INFO] Create data file" &gt;&gt; $LOG
  cat /etc/passwd &gt;&gt; $DATA_FILE
  cat /etc/group &gt;&gt; $DATA_FILE
  cat /etc/shadow &gt;&gt; $DATA_FILE
</span><strong class="bold1"><span class="kobospan1" id="kobo.548.1">fi</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.549.1">Note that </span><a id="_idIndexMarker771" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.550.1">the commands that create the </span><strong class="source-inline"><span class="kobospan" id="kobo.551.1">data</span></strong><span class="kobospan" id="kobo.552.1"> file can be turned into a basic </span><span><strong class="source-inline"><span class="kobospan" id="kobo.553.1">for</span></strong></span><span><span class="kobospan" id="kobo.554.1"> loop:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.555.1">for i in </span></strong><span class="kobospan1" id="kobo.556.1">passwd group shadow
</span><strong class="bold1"><span class="kobospan1" id="kobo.557.1">do</span></strong><span class="kobospan1" id="kobo.558.1">
  cat /etc/$i &gt;&gt; $DATA_FILE
</span><strong class="bold1"><span class="kobospan1" id="kobo.559.1">done</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.560.1">A </span><strong class="source-inline"><span class="kobospan" id="kobo.561.1">for</span></strong><span class="kobospan" id="kobo.562.1"> loop in Bash is a statement that allows code to </span><span><span class="kobospan" id="kobo.563.1">run repeatedly.</span></span></p><p class="calibre3"><span class="kobospan" id="kobo.564.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.565.1">COMMANDS</span></strong><span class="kobospan" id="kobo.566.1"> section looks </span><span><span class="kobospan" id="kobo.567.1">as follows:</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer370">
<span class="kobospan" id="kobo.568.1"><img alt="Figure 10.8 – The COMMANDS section of mytasks.sh" src="image/B19121_10_8.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.569.1">Figure 10.8 – The COMMANDS section of mytasks.sh</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.570.1">Save the changes and </span><span><span class="kobospan" id="kobo.571.1">test them.</span></span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.572.1">Verify the </span><a id="_idIndexMarker772" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.573.1">run in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.574.1">log</span></strong> <span><span class="kobospan" id="kobo.575.1">file record:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer371">
<span class="kobospan" id="kobo.576.1"><img alt="Figure 10.9 – Verifying the run on the log file" src="image/B19121_10_9.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.577.1">Figure 10.9 – Verifying the run on the log file</span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.578.1">Delete the </span><strong class="source-inline1"><span class="kobospan" id="kobo.579.1">data</span></strong><span class="kobospan" id="kobo.580.1"> file and </span><a id="_idIndexMarker773" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.581.1">rerun the </span><strong class="source-inline1"><span class="kobospan" id="kobo.582.1">mytasks.sh</span></strong><span class="kobospan" id="kobo.583.1"> script to confirm the creation of the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.584.1">data</span></strong></span><span><span class="kobospan" id="kobo.585.1"> file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.586.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.587.1">rm -rf data</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer372">
<span class="kobospan" id="kobo.588.1"><img alt="Figure 10.10 – Validating the creation of the data file" src="image/B19121_10_10.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.589.1">Figure 10.10 – Validating the creation of the data file</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.590.1">Since this change worked, the version of the Bash script </span><span><span class="kobospan" id="kobo.591.1">could change:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.592.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.593.1">Version: 0.2 → Add data file validation</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer373">
<span class="kobospan" id="kobo.594.1"><img alt="Figure 10.11 – Modifying the version of mytasks.sh" src="image/B19121_10_11.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.595.1">Figure 10.11 – Modifying the version of mytasks.sh</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.596.1">Let’s continue by adding the </span><span><span class="kobospan" id="kobo.597.1">routine activities.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.598.1">The routine includes creating users and copying the </span><strong class="source-inline"><span class="kobospan" id="kobo.599.1">data</span></strong><span class="kobospan" id="kobo.600.1"> file to their home directories. </span><span class="kobospan" id="kobo.600.2">Here, a combination of statements and loops is used so that the script can be reused every time extra users are added </span><span><span class="kobospan" id="kobo.601.1">to it:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.602.1">Begin by recording the activity in the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.603.1">log</span></strong></span><span><span class="kobospan" id="kobo.604.1"> file:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.605.1">echo "$TIMESTAMP [INFO] Verify users" &gt;&gt; $LOG</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.606.1">Use a </span><strong class="source-inline1"><span class="kobospan" id="kobo.607.1">for</span></strong><span class="kobospan" id="kobo.608.1"> loop to confirm the users and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.609.1">data</span></strong><span class="kobospan" id="kobo.610.1"> file in their home directories. </span><span class="kobospan" id="kobo.610.2">Instead of </span><a id="_idIndexMarker774" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.611.1">adding the usernames to the script, instruct the loop to take the reading of a </span><strong class="source-inline1"><span class="kobospan" id="kobo.612.1">users</span></strong><span class="kobospan" id="kobo.613.1"> file as input. </span><span class="kobospan" id="kobo.613.2">So, add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.614.1">users</span></strong><span class="kobospan" id="kobo.615.1"> file to the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.616.1">VARIABLES</span></strong></span><span><span class="kobospan" id="kobo.617.1"> section:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.618.1">USER_FILE</span></strong><span class="kobospan1" id="kobo.619.1">=$WDIR/</span><strong class="bold1"><span class="kobospan1" id="kobo.620.1">users</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.621.1">Create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.622.1">users</span></strong><span class="kobospan" id="kobo.623.1"> file with the </span><span><span class="kobospan" id="kobo.624.1">requested usernames:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer374">
<span class="kobospan" id="kobo.625.1"><img alt="Figure 10.12 – The users file" src="image/B19121_10_12.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.626.1">Figure 10.12 – The users file</span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.627.1">In the </span><strong class="source-inline1"><span class="kobospan" id="kobo.628.1">for</span></strong><span class="kobospan" id="kobo.629.1"> loop, for each line representing a user, first, confirm the user’s existence in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.630.1">/etc/passwd</span></strong><span class="kobospan" id="kobo.631.1"> file. </span><span class="kobospan" id="kobo.631.2">If the user exists, then confirm the </span><strong class="source-inline1"><span class="kobospan" id="kobo.632.1">data</span></strong><span class="kobospan" id="kobo.633.1"> file in the user’s home directory. </span><span class="kobospan" id="kobo.633.2">If both statements are positive, only then both statements are recorded in the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.634.1">log</span></strong></span><span><span class="kobospan" id="kobo.635.1"> file.</span></span><p class="calibre3"><span class="kobospan" id="kobo.636.1">If either statement is negative, then create the user and copy the </span><strong class="source-inline"><span class="kobospan" id="kobo.637.1">data</span></strong><span class="kobospan" id="kobo.638.1"> file to the user’s home directory. </span><span class="kobospan" id="kobo.638.2">Alternatively, you can copy the </span><strong class="source-inline"><span class="kobospan" id="kobo.639.1">data</span></strong><span class="kobospan" id="kobo.640.1"> file to its home directory, in case the </span><a id="_idIndexMarker775" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.641.1">user exists but the </span><strong class="source-inline"><span class="kobospan" id="kobo.642.1">data</span></strong><span class="kobospan" id="kobo.643.1"> file doesn’t. </span><span class="kobospan" id="kobo.643.2">This statement takes the form of a </span><em class="italic"><span class="kobospan" id="kobo.644.1">nested </span></em><span><em class="italic"><span class="kobospan" id="kobo.645.1">if statement</span></em></span><span><span class="kobospan" id="kobo.646.1">:</span></span></p></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer375">
<span class="kobospan" id="kobo.647.1"><img alt="Figure 10.13 – A nested if statement" src="image/B19121_10_13.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.648.1">Figure 10.13 – A nested if statement</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.649.1">Run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.650.1">mytasks.sh</span></strong><span class="kobospan" id="kobo.651.1"> script and confirm that the users were created and that the </span><strong class="source-inline1"><span class="kobospan" id="kobo.652.1">data</span></strong><span class="kobospan" id="kobo.653.1"> file was copied to their </span><span><span class="kobospan" id="kobo.654.1">home directories:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer376">
<span class="kobospan" id="kobo.655.1"><img alt="Figure 10.14 – Testing user creation and data file copying" src="image/B19121_10_14.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.656.1">Figure 10.14 – Testing user creation and data file copying</span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.657.1">Rerun the </span><a id="_idIndexMarker776" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.658.1">test for user creation and data file copy to confirm </span><span><span class="kobospan" id="kobo.659.1">the condition:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer377">
<span class="kobospan" id="kobo.660.1"><img alt="Figure 10.15 – Creation and copy condition confirmed" src="image/B19121_10_15.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.661.1">Figure 10.15 – Creation and copy condition confirmed</span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.662.1">Add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.663.1">lucas</span></strong><span class="kobospan" id="kobo.664.1"> user to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.665.1">user</span></strong><span class="kobospan" id="kobo.666.1"> file and run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.667.1">mytasks.sh</span></strong><span class="kobospan" id="kobo.668.1"> script to confirm the creation of the user and that the </span><strong class="source-inline1"><span class="kobospan" id="kobo.669.1">data</span></strong><span class="kobospan" id="kobo.670.1"> file </span><span><span class="kobospan" id="kobo.671.1">was copied:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer378">
<span class="kobospan" id="kobo.672.1"><img alt="Figure 10.16 – Adding the lucas user" src="image/B19121_10_16.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.673.1">Figure 10.16 – Adding the lucas user</span></p>
<ol class="calibre13">
<li value="8" class="calibre14"><span class="kobospan" id="kobo.674.1">Run the </span><a id="_idIndexMarker777" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.675.1">script and review the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.676.1">log</span></strong></span><span><span class="kobospan" id="kobo.677.1"> file:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer379">
<span class="kobospan" id="kobo.678.1"><img alt="Figure 10.17 – Reviewing user creation and copying the data file" src="image/B19121_10_17.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.679.1">Figure 10.17 – Reviewing user creation and copying the data file</span></p>
<ol class="calibre13">
<li value="9" class="calibre14"><span class="kobospan" id="kobo.680.1">The nested </span><strong class="source-inline1"><span class="kobospan" id="kobo.681.1">if</span></strong><span class="kobospan" id="kobo.682.1"> statement works and results in the version of the script being changed. </span><span class="kobospan" id="kobo.682.2">Since this is a working version that meets the needs of the routine, this makes it the first version of </span><span><span class="kobospan" id="kobo.683.1">the script:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.684.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.685.1">Version: 1.0 </span></strong><span class="kobospan1" id="kobo.686.1">→ Add user creation and customization</span></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.687.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.688.1">You can find the </span><strong class="source-inline1"><span class="kobospan" id="kobo.689.1">mytasks.sh</span></strong><span class="kobospan" id="kobo.690.1"> script in this book’s GitHub repository </span><span><span class="kobospan" id="kobo.691.1">at </span></span><a href="https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter10/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.692.1">https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter10/</span></span></a><span><span class="kobospan" id="kobo.693.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.694.1">This small script </span><a id="_idIndexMarker778" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.695.1">exemplifies how to simplify routine day-to-day tasks. </span><span class="kobospan" id="kobo.695.2">If you have any doubts about whether a routine could be a Bash script, remember one of the most well-known statements </span><span><span class="kobospan" id="kobo.696.1">among SysAdmins:</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.697.1">“</span><em class="italic"><span class="kobospan" id="kobo.698.1">If you typed it twice, you should have scripted </span></em><span><em class="italic"><span class="kobospan" id="kobo.699.1">it once.</span></em></span><span><span class="kobospan" id="kobo.700.1">”</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.701.1">The problems come when you’re modifying the scripts and managing </span><span><span class="kobospan" id="kobo.702.1">their versions.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.703.1">A tool that could help us when we need to manage different versions of scripts or configuration files </span><span><span class="kobospan" id="kobo.704.1">is Git.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.705.1">Let’s learn a little bit about </span><span><span class="kobospan" id="kobo.706.1">this tool.</span></span></p>
<h2 id="_idParaDest-151" class="calibre7"><a id="_idTextAnchor216" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.707.1">Git</span></h2>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.708.1">Git</span></strong><span class="kobospan" id="kobo.709.1"> is a form of </span><a id="_idIndexMarker779" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.710.1">control version software designed by </span><em class="italic"><span class="kobospan" id="kobo.711.1">Linus Torvalds</span></em><span class="kobospan" id="kobo.712.1"> and released in 2007. </span><span class="kobospan" id="kobo.712.2">It maintains versions of applications, prioritizes </span><em class="italic"><span class="kobospan" id="kobo.713.1">efficiency</span></em><span class="kobospan" id="kobo.714.1">, </span><em class="italic"><span class="kobospan" id="kobo.715.1">reliability</span></em><span class="kobospan" id="kobo.716.1">, and </span><em class="italic"><span class="kobospan" id="kobo.717.1">compatibility</span></em><span class="kobospan" id="kobo.718.1">, and provides a record of changes to the files. </span><span class="kobospan" id="kobo.718.2">It also coordinates the work that several people do on shared files in a </span><span><span class="kobospan" id="kobo.719.1">code repository.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.720.1">Git has supported the growth of open source software in recent years, making collaboration between programmers around the </span><span><span class="kobospan" id="kobo.721.1">world easier.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.722.1">Version control allows you to record changes that have been made to a file or set of files over time so that specific versions can be </span><span><span class="kobospan" id="kobo.723.1">retrieved later.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.724.1">Git is a </span><em class="italic"><span class="kobospan" id="kobo.725.1">distributed version control system</span></em><span class="kobospan" id="kobo.726.1">. </span><span class="kobospan" id="kobo.726.2">Besides the central repository, the clients replicate the entire repository, including its complete history. </span><span class="kobospan" id="kobo.726.3">Thus, if a server fails, any of the repository clients could get copied back to the server to restore it. </span><span class="kobospan" id="kobo.726.4">Each clone is a complete backup of </span><span><span class="kobospan" id="kobo.727.1">all data.</span></span></p>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.728.1">GitLab</span></strong><span class="kobospan" id="kobo.729.1"> and </span><strong class="bold"><span class="kobospan" id="kobo.730.1">GitHub</span></strong><span class="kobospan" id="kobo.731.1"> provide the </span><a id="_idIndexMarker780" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.732.1">most important </span><em class="italic"><span class="kobospan" id="kobo.733.1">Git-based</span></em><span class="kobospan" id="kobo.734.1"> web services. </span><span class="kobospan" id="kobo.734.2">Each of them </span><a id="_idIndexMarker781" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.735.1">allows us to share repositories of our projects, both </span><em class="italic"><span class="kobospan" id="kobo.736.1">private </span></em><span><em class="italic"><span class="kobospan" id="kobo.737.1">and public</span></em></span><span><span class="kobospan" id="kobo.738.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.739.1">To access GitHub, use your preferred browser and navigate to </span><a href="https://github.com/login" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.740.1">https://github.com/login</span></a><span class="kobospan" id="kobo.741.1">. </span><span class="kobospan" id="kobo.741.2">Log in or create </span><a id="_idIndexMarker782" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.742.1">your account by following the instructions on </span><span><span class="kobospan" id="kobo.743.1">the page:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer380">
<span class="kobospan" id="kobo.744.1"><img alt="Figure 10.18 – GitHub login page" src="image/B19121_10_18.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.745.1">Figure 10.18 – GitHub login page</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.746.1">To access </span><a id="_idIndexMarker783" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.747.1">GitLab, use </span><a id="_idIndexMarker784" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.748.1">your preferred browser and navigate to </span><a href="https://gitlab.com/users/login" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.749.1">https://gitlab.com/users/login</span></a><span class="kobospan" id="kobo.750.1">. </span><span class="kobospan" id="kobo.750.2">Log in </span><a id="_idIndexMarker785" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.751.1">or register to create your account by </span><a id="_idIndexMarker786" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.752.1">following the instructions on the page. </span><span class="kobospan" id="kobo.752.2">Also, consider signing in using </span><a id="_idIndexMarker787" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.753.1">other web services such as </span><strong class="bold"><span class="kobospan" id="kobo.754.1">Google</span></strong><span class="kobospan" id="kobo.755.1">, </span><strong class="bold"><span class="kobospan" id="kobo.756.1">GitHub</span></strong><span class="kobospan" id="kobo.757.1">, </span><strong class="bold"><span class="kobospan" id="kobo.758.1">Twitter</span></strong><span class="kobospan" id="kobo.759.1">, </span><strong class="bold"><span class="kobospan" id="kobo.760.1">Bitbucket</span></strong><span class="kobospan" id="kobo.761.1">, or </span><strong class="bold"><span class="kobospan" id="kobo.762.1">Salesforce</span></strong><span class="kobospan" id="kobo.763.1"> for authentication. </span><span class="kobospan" id="kobo.763.2">Each service will ask you if you want GitLab to access </span><span><span class="kobospan" id="kobo.764.1">your account:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer381">
<span class="kobospan" id="kobo.765.1"><img alt="Figure 10.19 – GitLab – The Sign in page" src="image/B19121_10_19.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.766.1">Figure 10.19 – GitLab – The Sign in page</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.767.1">Now, let’s learn </span><a id="_idIndexMarker788" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.768.1">how to work with Git. </span><span class="kobospan" id="kobo.768.2">We use a local repository, but it could live on a dedicated server or a web </span><span><span class="kobospan" id="kobo.769.1">service platform.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.770.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.771.1">The examples that follow illustrate how to use Git, so the public repository on the web could use either of the two free services. </span><span><em class="italic"><span class="kobospan" id="kobo.772.1">Choose wisely</span></em></span><span><span class="kobospan" id="kobo.773.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.774.1">Let’s start with </span><span><span class="kobospan" id="kobo.775.1">the basics.</span></span></p>
</div>


<div id="_idContainer434" class="calibre2">
<h2 id="_idParaDest-152" class="calibre7"><a id="_idTextAnchor217" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.776.1">The basics</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.777.1">Git handles files </span><a id="_idIndexMarker789" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.778.1">as a set of snapshots of a mini filesystem. </span><span class="kobospan" id="kobo.778.2">Most operations in Git only need local files and resources to work. </span><span class="kobospan" id="kobo.778.3">Everything in Git gets verified before storage. </span><span class="kobospan" id="kobo.778.4">Therefore, it is identified by a </span><em class="italic"><span class="kobospan" id="kobo.779.1">checksum</span></em><span class="kobospan" id="kobo.780.1"> (as an identification number). </span><span class="kobospan" id="kobo.780.2">Git generally </span><span><span class="kobospan" id="kobo.781.1">adds information.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.782.1">Git has three main states that files come in: </span><em class="italic"><span class="kobospan" id="kobo.783.1">modified</span></em><span class="kobospan" id="kobo.784.1">, </span><em class="italic"><span class="kobospan" id="kobo.785.1">staged</span></em><span class="kobospan" id="kobo.786.1">, </span><span><span class="kobospan" id="kobo.787.1">and </span></span><span><em class="italic"><span class="kobospan" id="kobo.788.1">committed</span></em></span><span><span class="kobospan" id="kobo.789.1">:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.790.1">Modified</span></strong><span class="kobospan" id="kobo.791.1"> means that </span><a id="_idIndexMarker790" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.792.1">the file has changed but the changes have not been committed to the </span><span><span class="kobospan" id="kobo.793.1">database yet</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.794.1">Staged</span></strong><span class="kobospan" id="kobo.795.1"> means that </span><a id="_idIndexMarker791" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.796.1">a modified file, in its current version, gets marked to go to the next </span><span><span class="kobospan" id="kobo.797.1">commit instance</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.798.1">Committed</span></strong><span class="kobospan" id="kobo.799.1"> means that </span><a id="_idIndexMarker792" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.800.1">the changes are stored in the </span><span><span class="kobospan" id="kobo.801.1">local database</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.802.1">The following </span><a id="_idIndexMarker793" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.803.1">figure illustrates the state changes of a file </span><span><span class="kobospan" id="kobo.804.1">within Git:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer382">
<span class="kobospan" id="kobo.805.1"><img alt="Figure 10.20 – File state change flow in ﻿Git" src="image/B19121_10_20.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.806.1">Figure 10.20 – File state change flow in Git</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.807.1">In </span><a href="B19121_02.xhtml#_idTextAnchor087" class="pcalibre1 calibre6 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.808.1">Chapter 2</span></em></span></a><span class="kobospan" id="kobo.809.1">, we installed Git on our workstation. </span><span class="kobospan" id="kobo.809.2">Let’s set up our session and create a sample repository. </span><span class="kobospan" id="kobo.809.3">Follow </span><span><span class="kobospan" id="kobo.810.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.811.1">As a </span><em class="italic"><span class="kobospan" id="kobo.812.1">non-root user</span></em><span class="kobospan" id="kobo.813.1">, set up a username and associate it with an email address. </span><span class="kobospan" id="kobo.813.2">This data gets saved with the changes that are made. </span><span class="kobospan" id="kobo.813.3">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.814.1">git </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.815.1">config</span></strong></span><span><span class="kobospan" id="kobo.816.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.817.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.818.1">git config --global user.name "username"</span></strong><span class="kobospan1" id="kobo.819.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.820.1">git config --global user.email user@your-mail.com</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.821.1">Create a directory and switch </span><span><span class="kobospan" id="kobo.822.1">to it:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.823.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.824.1">mkdir git-basics </span></strong><span class="kobospan1" id="kobo.825.1">; </span><strong class="bold1"><span class="kobospan1" id="kobo.826.1">cd git-basics</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.827.1">Initialize the directory as a </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.828.1">git</span></strong></span><span><span class="kobospan" id="kobo.829.1"> repository:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.830.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.831.1">git init .</span></strong><span class="kobospan1" id="kobo.832.1">
Initialized empty Git repository in /home/username/git-basics/.git/</span></pre><p class="calibre3"><span class="kobospan" id="kobo.833.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.834.1">git-basics</span></strong><span class="kobospan" id="kobo.835.1"> directory is now a </span><strong class="source-inline"><span class="kobospan" id="kobo.836.1">git</span></strong><span class="kobospan" id="kobo.837.1"> repo, so it might contain one of the states </span><span><span class="kobospan" id="kobo.838.1">mentioned previously:</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer383">
<span class="kobospan" id="kobo.839.1"><img alt="Figure 10.21 – The git-basics directory" src="image/B19121_10_21.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.840.1">Figure 10.21 – The git-basics directory</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.841.1">To be able to </span><a id="_idIndexMarker794" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.842.1">see the state of the repository, add a custom configuration in the </span><span><span class="kobospan" id="kobo.843.1">user’s profile.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.844.1">Add the following lines to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.845.1">.bashrc</span></strong><span class="kobospan" id="kobo.846.1"> file of </span><span><span class="kobospan" id="kobo.847.1">the user:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.848.1">
#
# Lines added for git-prompt
#
</span><strong class="bold1"><span class="kobospan1" id="kobo.849.1">git_prompt_sh='/usr/share/git-core/contrib/completion/git-prompt.sh'</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.850.1">if [ -f ${git_prompt_sh} ]; then</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.851.1">  source ${git_prompt_sh}</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.852.1">  export GIT_PS1_SHOWDIRTYSTATE=true</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.853.1">  export GIT_PS1_SHOWUNTRACKEDFILES=true</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.854.1">  export PS1='[\u@\h \W$(declare -F __git_ps1 &amp;&gt;/dev/null &amp;&amp; __git_ps1 " (%s)")]\$ '</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.855.1">fi</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer384">
<span class="kobospan" id="kobo.856.1"><img alt="Figure 10.22 – Adding git-prompt to the .bashrc file" src="image/B19121_10_22.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.857.1">Figure 10.22 – Adding git-prompt to the .bashrc file</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.858.1">After saving </span><a id="_idIndexMarker795" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.859.1">this change to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.860.1">.bashrc</span></strong><span class="kobospan" id="kobo.861.1"> file, return to the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.862.1">git-basics</span></strong></span><span><span class="kobospan" id="kobo.863.1"> directory:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer385">
<span class="kobospan" id="kobo.864.1"><img alt="Figure 10.23 – git-basics" src="image/B19121_10_23.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.865.1">Figure 10.23 – git-basics</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.866.1">Note that the prompt now shows the initial branch of the repo, which is </span><span><span class="kobospan" id="kobo.867.1">named </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.868.1">master</span></strong></span><span><span class="kobospan" id="kobo.869.1">.</span></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.870.1">master</span></strong><span class="kobospan" id="kobo.871.1"> is the initial name of the branch by default. </span><span class="kobospan" id="kobo.871.2">Before we start adding files, let’s rename </span><span><span class="kobospan" id="kobo.872.1">the branch.</span></span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.873.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.874.1">git branch</span></strong><span class="kobospan" id="kobo.875.1"> command to change the branch’s name from </span><strong class="source-inline1"><span class="kobospan" id="kobo.876.1">master</span></strong> <span><span class="kobospan" id="kobo.877.1">to </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.878.1">main</span></strong></span><span><span class="kobospan" id="kobo.879.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.880.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.881.1">git branch –m master main</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer386">
<span class="kobospan" id="kobo.882.1"><img alt="Figure 10.24 – Renaming the initial branch" src="image/B19121_10_24.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.883.1">Figure 10.24 – Renaming the initial branch</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.884.1">Now, it’s time to add files to </span><span><span class="kobospan" id="kobo.885.1">the repository.</span></span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.886.1">Create a Python </span><a id="_idIndexMarker796" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.887.1">script called </span><strong class="source-inline1"><span class="kobospan" id="kobo.888.1">my-script.py</span></strong><span class="kobospan" id="kobo.889.1"> with the </span><span><span class="kobospan" id="kobo.890.1">following content:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.891.1">
name = input("What's your name? </span><span class="kobospan1" id="kobo.891.2">")
print(name + " Welcome!")</span></pre><p class="calibre3"><span class="kobospan" id="kobo.892.1">Upon running this script, you will asked for your name and you’ll see a </span><span><span class="kobospan" id="kobo.893.1">welcome message.</span></span></p></li> <li class="calibre14"><span class="kobospan" id="kobo.894.1">After saving the file, review the status of the repository by running the </span><strong class="source-inline1"><span class="kobospan" id="kobo.895.1">git </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.896.1">status</span></strong></span><span><span class="kobospan" id="kobo.897.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.898.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.899.1">git status</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer387">
<span class="kobospan" id="kobo.900.1"><img alt="Figure 10.25 – Reviewing the status of the repository" src="image/B19121_10_25.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.901.1">Figure 10.25 – Reviewing the status of the repository</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.902.1">The output of </span><a id="_idIndexMarker797" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.903.1">the command shows that the repository has changed. </span><span class="kobospan" id="kobo.903.2">Note that some files are not </span><em class="italic"><span class="kobospan" id="kobo.904.1">tracked</span></em><span class="kobospan" id="kobo.905.1"> until their </span><span><span class="kobospan" id="kobo.906.1">status changes.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.907.1">At the </span><em class="italic"><span class="kobospan" id="kobo.908.1">prompt</span></em><span class="kobospan" id="kobo.909.1">, you should now see the </span><strong class="source-inline"><span class="kobospan" id="kobo.910.1">%</span></strong><span class="kobospan" id="kobo.911.1"> symbol, which indicates that a file has been added to </span><span><span class="kobospan" id="kobo.912.1">the repository.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.913.1">Let’s look at some other symbols that were added to the prompt concerning the </span><span><span class="kobospan" id="kobo.914.1">repository’s status:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span><span class="kobospan" id="kobo.915.1">Unstaged (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.916.1">*</span></strong></span><span><span class="kobospan" id="kobo.917.1">)</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.918.1">Staged (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.919.1">+</span></strong></span><span><span class="kobospan" id="kobo.920.1">)</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.921.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.922.1">To learn more about </span><strong class="source-inline1"><span class="kobospan" id="kobo.923.1">git-prompt</span></strong><span class="kobospan" id="kobo.924.1">, refer to the documentation of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.925.1">git-prompt.sh</span></strong><span class="kobospan" id="kobo.926.1"> script </span><span><span class="kobospan" id="kobo.927.1">at </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.928.1">/usr/share/git-core/contrib/completion/git-prompt.sh</span></strong></span><span><span class="kobospan" id="kobo.929.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.930.1">Now, let’s change the </span><span><span class="kobospan" id="kobo.931.1">repository’s status.</span></span></p>
<ol class="calibre13">
<li value="9" class="calibre14"><span class="kobospan" id="kobo.932.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.933.1">git add</span></strong><span class="kobospan" id="kobo.934.1"> command to add the file to </span><span><span class="kobospan" id="kobo.935.1">the repository:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.936.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.937.1">git add my-script.py</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer388">
<span class="kobospan" id="kobo.938.1"><img alt="Figure 10.26 – Changing the repository’s status" src="image/B19121_10_26.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.939.1">Figure 10.26 – Changing the repository’s status</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.940.1">Now, the repository’s status appears as </span><strong class="source-inline"><span class="kobospan" id="kobo.941.1">staged</span></strong><span class="kobospan" id="kobo.942.1">, and the prompt displays the respective </span><span><span class="kobospan" id="kobo.943.1">symbol (</span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.944.1">+</span></strong></span><span><span class="kobospan" id="kobo.945.1">).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.946.1">Before we store </span><a id="_idIndexMarker798" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.947.1">the changes in the database, we need to test the file and review that no other changes need to </span><span><span class="kobospan" id="kobo.948.1">be made.</span></span></p>
<ol class="calibre13">
<li value="10" class="calibre14"><span class="kobospan" id="kobo.949.1">Run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.950.1">my-script.py</span></strong><span class="kobospan" id="kobo.951.1"> script and verify that it </span><span><span class="kobospan" id="kobo.952.1">works fine:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.953.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.954.1">python my-script.py</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer389">
<span class="kobospan" id="kobo.955.1"><img alt="Figure 10.27 – Testing the my-script.py script" src="image/B19121_10_27.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.956.1">Figure 10.27 – Testing the my-script.py script</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.957.1">Since the script ran successfully, let’s commit to adding the file to </span><span><span class="kobospan" id="kobo.958.1">the repository.</span></span></p>
<ol class="calibre13">
<li value="11" class="calibre14"><span class="kobospan" id="kobo.959.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.960.1">git commit</span></strong><span class="kobospan" id="kobo.961.1"> command to change the status of the branch to </span><strong class="source-inline1"><span class="kobospan" id="kobo.962.1">committed</span></strong><span class="kobospan" id="kobo.963.1"> so that you can apply the change that was made to the repository. </span><span class="kobospan" id="kobo.963.2">This command supports adding a comment. </span><span class="kobospan" id="kobo.963.3">This comment helps notify you about the modifications that are made in the repository by providing a brief description of </span><span><span class="kobospan" id="kobo.964.1">the changes:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.965.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.966.1">git commit –m "Adding my-script.py script"</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.967.1">Review the history of changes that were made to the repository by running the </span><strong class="source-inline"><span class="kobospan" id="kobo.968.1">git </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.969.1">log</span></strong></span><span><span class="kobospan" id="kobo.970.1"> command:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.971.1">$ </span><strong class="bold1"><span class="kobospan1" id="kobo.972.1">git log</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer390">
<span class="kobospan" id="kobo.973.1"><img alt="Figure 10.28 – Committing and reviewing the repository’s history" src="image/B19121_10_28.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.974.1">Figure 10.28 – Committing and reviewing the repository’s history</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.975.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.976.1">If you have </span><a id="_idIndexMarker799" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.977.1">doubts about how to add a good commit message, please visit the online resource </span><em class="italic"><span class="kobospan" id="kobo.978.1">Conventional Commits</span></em> <span><span class="kobospan" id="kobo.979.1">at </span></span><a href="https://www.conventionalcommits.org/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.980.1">https://www.conventionalcommits.org/</span></span></a><span><span class="kobospan" id="kobo.981.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.982.1">With these </span><a id="_idIndexMarker800" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.983.1">simple steps, our script repository has </span><em class="italic"><span class="kobospan" id="kobo.984.1">version control</span></em><span class="kobospan" id="kobo.985.1"> and is managed </span><span><span class="kobospan" id="kobo.986.1">by Git.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.987.1">Having a repository that contains the scripts that are used for daily tasks, aside from acting as a backup, can be turned into a collaborative resource for our area. </span><span class="kobospan" id="kobo.987.2">If we wish to publish it on a web platform, we need to </span><em class="italic"><span class="kobospan" id="kobo.988.1">remove sensitive data</span></em><span class="kobospan" id="kobo.989.1"> from it so that we can turn it into a valuable resource for </span><span><span class="kobospan" id="kobo.990.1">the community.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.991.1">Now, let’s learn how to publish both script directories in a public repository on </span><span><span class="kobospan" id="kobo.992.1">the internet.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.993.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.994.1">For this example, I’m using a repository on GitHub, but it could be created the same way on any </span><em class="italic"><span class="kobospan" id="kobo.995.1">Git-based web platform</span></em><span class="kobospan" id="kobo.996.1"> of </span><span><span class="kobospan" id="kobo.997.1">your choice.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.998.1">To create the </span><a id="_idIndexMarker801" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.999.1">repository on any web platform, follow </span><span><span class="kobospan" id="kobo.1000.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.1001.1">Log into the </span><span><span class="kobospan" id="kobo.1002.1">web platform:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer391">
<span class="kobospan" id="kobo.1003.1"><img alt="Figure 10.29 – Web platform dashboard" src="image/B19121_10_29.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1004.1">Figure 10.29 – Web platform dashboard</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1005.1">Click on the plus (</span><strong class="bold"><span class="kobospan" id="kobo.1006.1">+</span></strong><span class="kobospan" id="kobo.1007.1">) button and click on </span><span><strong class="bold"><span class="kobospan" id="kobo.1008.1">New repository</span></strong></span><span><span class="kobospan" id="kobo.1009.1">.</span></span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.1010.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1011.1">Create a new repository</span></strong><span class="kobospan" id="kobo.1012.1"> screen </span><span><span class="kobospan" id="kobo.1013.1">will appear:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer392">
<span class="kobospan" id="kobo.1014.1"><img alt="Figure 10.30 – The Create a new repository screen" src="image/B19121_10_30.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1015.1">Figure 10.30 – The Create a new repository screen</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1016.1">Enter the </span><a id="_idIndexMarker802" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1017.1">repository’s name and a brief description of its use. </span><span class="kobospan" id="kobo.1017.2">Leave the repository set to </span><strong class="bold"><span class="kobospan" id="kobo.1018.1">Public</span></strong><span class="kobospan" id="kobo.1019.1"> and choose to </span><strong class="bold"><span class="kobospan" id="kobo.1020.1">Add a README file</span></strong><span class="kobospan" id="kobo.1021.1">. </span><span class="kobospan" id="kobo.1021.2">This file provides a welcome message or a detailed description of the </span><span><span class="kobospan" id="kobo.1022.1">repository’s usage.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1023.1">Once you’re finished, click </span><span><strong class="bold"><span class="kobospan" id="kobo.1024.1">Create repository</span></strong></span><span><span class="kobospan" id="kobo.1025.1">.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.1026.1">The repository will be created. </span><span class="kobospan" id="kobo.1026.2">Click the </span><strong class="bold"><span class="kobospan" id="kobo.1027.1">Code</span></strong><span class="kobospan" id="kobo.1028.1"> button and copy the </span><strong class="bold"><span class="kobospan" id="kobo.1029.1">HTTPS</span></strong><span class="kobospan" id="kobo.1030.1"> address of </span><span><span class="kobospan" id="kobo.1031.1">the repository:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer393">
<span class="kobospan" id="kobo.1032.1"><img alt="Figure 10.31 – Public repository" src="image/B19121_10_31.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1033.1">Figure 10.31 – Public repository</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1034.1">Let’s copy the remote repository </span><span><span class="kobospan" id="kobo.1035.1">as local.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.1036.1">Create a working </span><a id="_idIndexMarker803" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1037.1">directory and switch to it. </span><span class="kobospan" id="kobo.1037.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1038.1">git clone</span></strong><span class="kobospan" id="kobo.1039.1"> command to download a copy of </span><span><span class="kobospan" id="kobo.1040.1">the repository:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1041.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1042.1">git clone https://github.com/alex-sysadmin/daily-tasks-scripts.git</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer394">
<span class="kobospan" id="kobo.1043.1"><img alt="Figure 10.32 – Cloning the repository" src="image/B19121_10_32.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1044.1">Figure 10.32 – Cloning the repository</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.1045.1">Switch to the repository, verify the </span><em class="italic"><span class="kobospan" id="kobo.1046.1">main branch</span></em><span class="kobospan" id="kobo.1047.1">, and review the files </span><span><span class="kobospan" id="kobo.1048.1">contained within:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer395">
<span class="kobospan" id="kobo.1049.1"><img alt="Figure 10.33 – Verifying the repository" src="image/B19121_10_33.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1050.1">Figure 10.33 – Verifying the repository</span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.1051.1">Copy the directory </span><a id="_idIndexMarker804" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1052.1">of the Bash script example and the preceding example script into </span><span><span class="kobospan" id="kobo.1053.1">this directory:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer396">
<span class="kobospan" id="kobo.1054.1"><img alt="Figure 10.34 – The daily-tasks-scripts repository" src="image/B19121_10_34.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1055.1">Figure 10.34 – The daily-tasks-scripts repository</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1056.1">Before adding the files with Git, note that the </span><strong class="source-inline"><span class="kobospan" id="kobo.1057.1">class</span></strong><span class="kobospan" id="kobo.1058.1"> directory, from the Bash script, has some ownership issues. </span><span class="kobospan" id="kobo.1058.2">Also, take note of the </span><strong class="source-inline"><span class="kobospan" id="kobo.1059.1">log</span></strong><span class="kobospan" id="kobo.1060.1"> file, which is not needed in the repository but is created when the script is run. </span><span class="kobospan" id="kobo.1060.2">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1061.1">users</span></strong><span class="kobospan" id="kobo.1062.1"> file contains </span><em class="italic"><span class="kobospan" id="kobo.1063.1">sensitive information</span></em><span class="kobospan" id="kobo.1064.1"> about the users that have been created. </span><span class="kobospan" id="kobo.1064.2">Both files must remain, but their contents must be restarted (this is referred to as </span><em class="italic"><span class="kobospan" id="kobo.1065.1">blanking</span></em><span class="kobospan" id="kobo.1066.1">). </span><span class="kobospan" id="kobo.1066.2">Fix </span><span><span class="kobospan" id="kobo.1067.1">these issues:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer397">
<span class="kobospan" id="kobo.1068.1"><img alt="Figure 10.35 – Fixing issues" src="image/B19121_10_35.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1069.1">Figure 10.35 – Fixing issues</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1070.1">The preceding </span><a id="_idIndexMarker805" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1071.1">example directory, </span><strong class="source-inline"><span class="kobospan" id="kobo.1072.1">git-basics</span></strong><span class="kobospan" id="kobo.1073.1">, is also a repository. </span><span class="kobospan" id="kobo.1073.2">Remove the hidden </span><strong class="source-inline"><span class="kobospan" id="kobo.1074.1">.git</span></strong><span class="kobospan" id="kobo.1075.1"> directory inside it so that Git doesn’t take it as a </span><em class="italic"><span class="kobospan" id="kobo.1076.1">submodule</span></em><span class="kobospan" id="kobo.1077.1"> of the main repository. </span><span class="kobospan" id="kobo.1077.2">A backup of our scripts is all </span><span><span class="kobospan" id="kobo.1078.1">we need:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer398">
<span class="kobospan" id="kobo.1079.1"><img alt="Figure 10.36 – Removing the .git directory" src="image/B19121_10_36.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1080.1">Figure 10.36 – Removing the .git directory</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1081.1">With the files ready, let’s add them to </span><span><span class="kobospan" id="kobo.1082.1">the repository.</span></span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.1083.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1084.1">git add</span></strong><span class="kobospan" id="kobo.1085.1"> command to add all the files to </span><span><span class="kobospan" id="kobo.1086.1">the repository:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1087.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1088.1">git add .</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.1089.1">Commit the changes to the repository by adding the corresponding comment. </span><span class="kobospan" id="kobo.1089.2">Then, run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1090.1">git </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.1091.1">commit</span></strong></span><span><span class="kobospan" id="kobo.1092.1"> command:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer399">
<span class="kobospan" id="kobo.1093.1"><img alt="Figure 10.37 – Committing changes to the repository" src="image/B19121_10_37.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1094.1">Figure 10.37 – Committing changes to the repository</span></p>
<ol class="calibre13">
<li value="9" class="calibre14"><span class="kobospan" id="kobo.1095.1">Let’s synchronize the </span><em class="italic"><span class="kobospan" id="kobo.1096.1">local changes</span></em><span class="kobospan" id="kobo.1097.1"> with the </span><em class="italic"><span class="kobospan" id="kobo.1098.1">remote repository</span></em><span class="kobospan" id="kobo.1099.1">. </span><span class="kobospan" id="kobo.1099.2">Set the </span><em class="italic"><span class="kobospan" id="kobo.1100.1">original repository</span></em><span class="kobospan" id="kobo.1101.1"> as the </span><em class="italic"><span class="kobospan" id="kobo.1102.1">upstream repository</span></em><span class="kobospan" id="kobo.1103.1"> to reference it. </span><span class="kobospan" id="kobo.1103.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1104.1">git push</span></strong><span class="kobospan" id="kobo.1105.1"> command to </span><a id="_idIndexMarker806" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1106.1">set up the </span><span><span class="kobospan" id="kobo.1107.1">upstream repository:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1108.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1109.1">git push --set-upstream origin main</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer400">
<span class="kobospan" id="kobo.1110.1"><img alt="Figure 10.38 – Pushing changes to the repository" src="image/B19121_10_38.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1111.1">Figure 10.38 – Pushing changes to the repository</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1112.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1113.1">The authentication for the repository depends on the web platform in use. </span><span class="kobospan" id="kobo.1113.2">In the case of GitHub, it requests a </span><em class="italic"><span class="kobospan" id="kobo.1114.1">token</span></em><span class="kobospan" id="kobo.1115.1">. </span><span class="kobospan" id="kobo.1115.2">To generate one, go to </span><strong class="bold"><span class="kobospan" id="kobo.1116.1">Settings</span></strong><span class="kobospan" id="kobo.1117.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.1118.1">Developer settings</span></strong><span class="kobospan" id="kobo.1119.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.1120.1">Personal access token</span></strong><span class="kobospan" id="kobo.1121.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.1122.1">Generate new token</span></strong><span class="kobospan" id="kobo.1123.1"> and copy it to a </span><span><span class="kobospan" id="kobo.1124.1">safe place.</span></span></p>
<ol class="calibre13">
<li value="10" class="calibre14"><span class="kobospan" id="kobo.1125.1">The modified files will appear on the </span><span><span class="kobospan" id="kobo.1126.1">web platform:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer401">
<span class="kobospan" id="kobo.1127.1"><img alt="Figure 10.39 – The repository on GitHub" src="image/B19121_10_39.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1128.1">Figure 10.39 – The repository on GitHub</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1129.1">With that, we have a </span><a id="_idIndexMarker807" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1130.1">collaborative repository of the scripts that will be used in our </span><span><span class="kobospan" id="kobo.1131.1">day-to-day tasks.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1132.1">At the same time, the repository serves as a backup of </span><span><span class="kobospan" id="kobo.1133.1">our scripts.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1134.1">Let’s take a walk through the alternatives that could help us make </span><span><span class="kobospan" id="kobo.1135.1">a backup.</span></span></p>
<h1 id="_idParaDest-153" class="calibre5"><a id="_idTextAnchor218" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1136.1">Don’t forget to back up</span></h1>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1137.1">Back up: A SysAdmin must back up the entire system, and always verify </span></em><span><em class="italic"><span class="kobospan" id="kobo.1138.1">the backup.</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1139.1">Backing up is </span><a id="_idIndexMarker808" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1140.1">the most </span><span><span class="kobospan" id="kobo.1141.1">basic task.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1142.1">Good practice begins with good habits. </span><span class="kobospan" id="kobo.1142.2">One of the habits that I have made over the years is to back up a file before editing it, either in the file path or by creating a </span><span><span class="kobospan" id="kobo.1143.1">backup directory:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer402">
<span class="kobospan" id="kobo.1144.1"><img alt="Figure 10.40 – Backing up before modifying" src="image/B19121_10_40.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1145.1">Figure 10.40 – Backing up before modifying</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1146.1">On the surface, it doesn’t seem like a big task. </span><span class="kobospan" id="kobo.1146.2">However, if you incorporate this step into your tasks, then you have a simple backup of the files that you </span><span><span class="kobospan" id="kobo.1147.1">work with.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1148.1">Besides copying </span><a id="_idIndexMarker809" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1149.1">files to change, another good habit is to create a package that contains archives or </span><span><span class="kobospan" id="kobo.1150.1">compressed files.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1151.1">Let’s see how </span><span><span class="kobospan" id="kobo.1152.1">this works.</span></span></p>
<h2 id="_idParaDest-154" class="calibre7"><a id="_idTextAnchor219" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1153.1">Archiving and compression</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1154.1">First </span><a id="_idIndexMarker810" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1155.1">of all, note the </span><a id="_idIndexMarker811" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1156.1">difference between an </span><strong class="bold"><span class="kobospan" id="kobo.1157.1">archive</span></strong><span class="kobospan" id="kobo.1158.1"> file and a </span><span><strong class="bold"><span class="kobospan" id="kobo.1159.1">compressed</span></strong></span><span><span class="kobospan" id="kobo.1160.1"> file:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.1161.1">An </span><strong class="bold"><span class="kobospan" id="kobo.1162.1">archive</span></strong><span class="kobospan" id="kobo.1163.1"> file consists of </span><em class="italic"><span class="kobospan" id="kobo.1164.1">files and directories</span></em><span class="kobospan" id="kobo.1165.1"> stored in a single file. </span><span class="kobospan" id="kobo.1165.2">The archive file </span><a id="_idIndexMarker812" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1166.1">remains uncompressed – it uses the same disk space as all the individual files and directories </span><span><span class="kobospan" id="kobo.1167.1">are combined.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1168.1">A </span><strong class="bold"><span class="kobospan" id="kobo.1169.1">compressed</span></strong><span class="kobospan" id="kobo.1170.1"> file also </span><a id="_idIndexMarker813" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1171.1">consists of files and directories stored in a single file. </span><span class="kobospan" id="kobo.1171.2">However, they are stored in such a way that they use less disk space than all the individual files and </span><span><span class="kobospan" id="kobo.1172.1">directories combined.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1173.1">An archive file itself is not compressed, but a compressed file could contain an </span><span><span class="kobospan" id="kobo.1174.1">archive file.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1175.1">Linux provides several utilities for compressing and decompressing files. </span><span class="kobospan" id="kobo.1175.2">The following table shows the most </span><span><span class="kobospan" id="kobo.1176.1">used utilities:</span></span></p>
<table class="no-table-style" id="table001-4">
<colgroup class="calibre10">
<col class="calibre11"/>
<col class="calibre11"/>
<col class="calibre11"/>
</colgroup>
<tbody class="calibre12">
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1177.1">Utility</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1178.1">Syntax</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1179.1">Examples</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1180.1">gzip</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1181.1">gzip &lt;file&gt;</span></strong></span></p>
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1182.1">gunzip &lt;file&gt;</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1183.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1184.1">gzip test</span></strong></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1185.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1186.1">gunzip test.gz</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1187.1">bzip2</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1188.1">bzip2 &lt;file&gt;</span></strong></span></p>
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1189.1">bunzip2 &lt;file&gt;</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1190.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1191.1">bzip2 test</span></strong></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1192.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1193.1">bunzip2 test.bz2</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1194.1">xz</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1195.1">xz &lt;file&gt;</span></strong></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1196.1">xz -</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1197.1">d &lt;file&gt;</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1198.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1199.1">xz test</span></strong></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1200.1">$ xz -</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1201.1">d test.xz</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1202.1">zip</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1203.1">zip .</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1204.1">zip-file &lt;file&gt;</span></strong></span></p>
<p class="calibre3"><span><strong class="source-inline"><span class="kobospan" id="kobo.1205.1">unzip &lt;.zip-file&gt;</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1206.1">$ zip </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1207.1">test.zip test</span></strong></span></p>
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1208.1">$ </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1209.1">unzip test.zip</span></strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1210.1">Table 10.1 – Compress and decompress utilities</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1211.1">Let’s look at the difference between the utilities in the compression algorithms that are used </span><span><span class="kobospan" id="kobo.1212.1">by each:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.1213.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.1214.1">gzip</span></strong><span class="kobospan" id="kobo.1215.1"> utility compresses the </span><a id="_idIndexMarker814" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1216.1">size of files using </span><strong class="bold"><span class="kobospan" id="kobo.1217.1">Lempel-Ziv</span></strong><span class="kobospan" id="kobo.1218.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1219.1">LZ77</span></strong><span class="kobospan" id="kobo.1220.1">) encoding. </span><span class="kobospan" id="kobo.1220.2">Each file gets replaced by one with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1221.1">.</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.1222.1">gz </span></strong></span><span><span class="kobospan" id="kobo.1223.1">extension.</span></span></li>
<li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.1224.1">bzip2</span></strong><span class="kobospan" id="kobo.1225.1"> compresses files using the </span><em class="italic"><span class="kobospan" id="kobo.1226.1">Burrows-Wheeler</span></em><span class="kobospan" id="kobo.1227.1"> block-sorting text compression algorithm and </span><em class="italic"><span class="kobospan" id="kobo.1228.1">Huffman encoding</span></em><span class="kobospan" id="kobo.1229.1">. </span><span class="kobospan" id="kobo.1229.2">Each file gets replaced with another file with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1230.1">.</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.1231.1">bz2</span></strong></span><span><span class="kobospan" id="kobo.1232.1"> extension.</span></span></li>
<li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.1233.1">xz</span></strong><span class="kobospan" id="kobo.1234.1"> uses </span><a id="_idIndexMarker815" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1235.1">the </span><strong class="bold"><span class="kobospan" id="kobo.1236.1">Lempel-Ziv-Markov chain algorithm</span></strong><span class="kobospan" id="kobo.1237.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1238.1">LZMA</span></strong><span class="kobospan" id="kobo.1239.1">) </span><span><span class="kobospan" id="kobo.1240.1">for compression/decompression.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1241.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.1242.1">.zip</span></strong><span class="kobospan" id="kobo.1243.1"> format uses a </span><em class="italic"><span class="kobospan" id="kobo.1244.1">32-bit CRC algorithm</span></em><span class="kobospan" id="kobo.1245.1">. </span><span class="kobospan" id="kobo.1245.2">It includes two copies of the metadata for each entry to provide greater protection against </span><span><span class="kobospan" id="kobo.1246.1">data loss.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1247.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1248.1">To learn more </span><a id="_idIndexMarker816" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1249.1">about compression utilities, refer to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1250.1">gzip</span></strong><span class="kobospan" id="kobo.1251.1">, </span><strong class="source-inline1"><span class="kobospan" id="kobo.1252.1">bzip2</span></strong><span class="kobospan" id="kobo.1253.1">, </span><strong class="source-inline1"><span class="kobospan" id="kobo.1254.1">xz</span></strong><span class="kobospan" id="kobo.1255.1">, and </span><strong class="source-inline1"><span class="kobospan" id="kobo.1256.1">zip</span></strong> <span><span class="kobospan" id="kobo.1257.1">man pages.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1258.1">In practical use cases, compression utilities share the same goal: </span><em class="italic"><span class="kobospan" id="kobo.1259.1">to reduce the space usage</span></em><span class="kobospan" id="kobo.1260.1"> of the file in question. </span><span class="kobospan" id="kobo.1260.2">Beyond the algorithm, what needs to be considered is the size of space </span><a id="_idIndexMarker817" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1261.1">usage that the file reduces. </span><span class="kobospan" id="kobo.1261.2">This is due to portability reasons. </span><span class="kobospan" id="kobo.1261.3">The following illustrative example shows the differences practically. </span><span class="kobospan" id="kobo.1261.4">However, note that </span><a id="_idIndexMarker818" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1262.1">more compression or decompression requires more resources (CPU </span><span><span class="kobospan" id="kobo.1263.1">and memory).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1264.1">Another best practice habit is to </span><em class="italic"><span class="kobospan" id="kobo.1265.1">compress</span></em><span class="kobospan" id="kobo.1266.1"> backups so that any space that’s used doesn’t become an issue. </span><span class="kobospan" id="kobo.1266.2">This can also be enhanced if we compress </span><span><span class="kobospan" id="kobo.1267.1">file archives.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1268.1">In Linux, we can use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1269.1">tar</span></strong><span class="kobospan" id="kobo.1270.1"> tool to create, manage, and extract archive files. </span><span class="kobospan" id="kobo.1270.2">With this command, many files that are stored in a single archive file become portable. </span><span class="kobospan" id="kobo.1270.3">A </span><strong class="source-inline"><span class="kobospan" id="kobo.1271.1">tar</span></strong><span class="kobospan" id="kobo.1272.1"> archive is a structured sequence of metadata and file data with </span><span><span class="kobospan" id="kobo.1273.1">an index.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1274.1">Archives might be compressed when they’re created using one of the supported compression algorithms. </span><span class="kobospan" id="kobo.1274.2">Besides creating archive files, the </span><strong class="source-inline"><span class="kobospan" id="kobo.1275.1">tar</span></strong><span class="kobospan" id="kobo.1276.1"> command provides further options, such as listing the contents of an archive without extracting it or extracting files from compressed and </span><span><span class="kobospan" id="kobo.1277.1">uncompressed archives.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1278.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1279.1">tar</span></strong><span class="kobospan" id="kobo.1280.1"> command’s </span><a id="_idIndexMarker819" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1281.1">options provide us with </span><em class="italic"><span class="kobospan" id="kobo.1282.1">three </span></em><span><em class="italic"><span class="kobospan" id="kobo.1283.1">different styles</span></em></span><span><span class="kobospan" id="kobo.1284.1">:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.1285.1">In the </span><em class="italic"><span class="kobospan" id="kobo.1286.1">traditional style</span></em><span class="kobospan" id="kobo.1287.1">, the first argument is a group of option letters, and the arguments that follow supply arguments to those options that </span><span><span class="kobospan" id="kobo.1288.1">need them.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1289.1">In the </span><em class="italic"><span class="kobospan" id="kobo.1290.1">UNIX or short option style</span></em><span class="kobospan" id="kobo.1291.1">, each option letter comes preceded by a single hyphen (</span><strong class="source-inline1"><span class="kobospan" id="kobo.1292.1">-</span></strong><span class="kobospan" id="kobo.1293.1">). </span><span class="kobospan" id="kobo.1293.2">If an option has an argument, the argument follows it, either as a separate word on the command line or immediately after </span><span><span class="kobospan" id="kobo.1294.1">the option.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1295.1">In </span><em class="italic"><span class="kobospan" id="kobo.1296.1">GNU or long option style</span></em><span class="kobospan" id="kobo.1297.1">, each option begins with two hyphens (</span><strong class="source-inline1"><span class="kobospan" id="kobo.1298.1">--</span></strong><span class="kobospan" id="kobo.1299.1">) and has a meaningful name, consisting of lowercase letters and hyphens. </span><span class="kobospan" id="kobo.1299.2">The long option could be abbreviated to its initial letters. </span><span class="kobospan" id="kobo.1299.3">Long option arguments are supplied as separate words on the command line, immediately following the option, or separated from the option by an equals (</span><strong class="source-inline1"><span class="kobospan" id="kobo.1300.1">=</span></strong><span class="kobospan" id="kobo.1301.1">) sign with no intervening whitespace. </span><span class="kobospan" id="kobo.1301.2">Optional arguments should always use the </span><span><span class="kobospan" id="kobo.1302.1">latter method.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1303.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1304.1">tar</span></strong><span class="kobospan" id="kobo.1305.1"> command requires an </span><a id="_idIndexMarker820" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1306.1">action with at least one option. </span><span class="kobospan" id="kobo.1306.2">The most common actions and options are shown in the </span><span><span class="kobospan" id="kobo.1307.1">following table:</span></span></p>
<table class="no-table-style" id="table002-2">
<colgroup class="calibre10">
<col class="calibre11"/>
<col class="calibre11"/>
<col class="calibre11"/>
<col class="calibre11"/>
</colgroup>
<thead class="calibre19">
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1308.1">Description</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1309.1">Traditional Style</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1310.1">Short Style</span></strong></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.1311.1">Long Style</span></strong></span></p>
</td>
</tr>
</thead>
<tbody class="calibre12">
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1312.1">Creates an </span><span><span class="kobospan" id="kobo.1313.1">archive file</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1314.1">c</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1315.1">-c</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1316.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1317.1">create</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1318.1">Lists the content of an </span><span><span class="kobospan" id="kobo.1319.1">archive file</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1320.1">t</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1321.1">-t</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1322.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1323.1">list</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1324.1">Extracts an </span><span><span class="kobospan" id="kobo.1325.1">archive file</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1326.1">x</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1327.1">-x</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1328.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1329.1">extract</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1330.1">Shows the currently archived or </span><span><span class="kobospan" id="kobo.1331.1">extracted files</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1332.1">v</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1333.1">-v</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1334.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1335.1">verbose</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1336.1">Use this option with the name of the file to create </span><span><span class="kobospan" id="kobo.1337.1">or open</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1338.1">f</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1339.1">-f</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1340.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1341.1">file</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1342.1">Keeps the original permissions of the files by </span><span><span class="kobospan" id="kobo.1343.1">extracting them</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1344.1">p</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1345.1">-p</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1346.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1347.1">preserve-permissions</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1348.1">Uses the file suffix to determine the algorithm to use </span><span><span class="kobospan" id="kobo.1349.1">for compression</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1350.1">a</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1351.1">-a</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1352.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1353.1">auto-compress</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1354.1">Uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.1355.1">gzip</span></strong> <span><span class="kobospan" id="kobo.1356.1">compression algorithm</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1357.1">z</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1358.1">-z</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1359.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1360.1">gzip</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1361.1">Uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.1362.1">bzip2</span></strong> <span><span class="kobospan" id="kobo.1363.1">compression algorithm</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1364.1">j</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1365.1">-j</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1366.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1367.1">bzip2</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1368.1">Uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.1369.1">xz</span></strong> <span><span class="kobospan" id="kobo.1370.1">compression algorithm</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1371.1">J</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1372.1">-J</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1373.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1374.1">xz</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1375.1">Uses an </span><span><span class="kobospan" id="kobo.1376.1">LZ-variant algorithm</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1377.1">Z</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1378.1">-Z</span></strong></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1379.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1380.1">compress</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1381.1">Enables extended attribute support and stores </span><span><span class="kobospan" id="kobo.1382.1">file-extended attributes</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><span class="kobospan" id="kobo.1383.1">NA</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><span class="kobospan" id="kobo.1384.1">NA</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1385.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1386.1">xattrs</span></strong></span></p>
</td>
</tr>
<tr class="no-table-style1">
<td class="no-table-style2">
<p class="calibre3"><span class="kobospan" id="kobo.1387.1">Enables SELinux context support and stores </span><span><span class="kobospan" id="kobo.1388.1">SELinux contexts</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><span class="kobospan" id="kobo.1389.1">NA</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><span><span class="kobospan" id="kobo.1390.1">NA</span></span></p>
</td>
<td class="no-table-style2">
<p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.1391.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1392.1">selinux</span></strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1393.1">Table 10.2 – Common tar command actions and options</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1394.1">Let’s analyze </span><a id="_idIndexMarker821" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1395.1">an example of how to create an archive of compressed files </span><a id="_idIndexMarker822" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1396.1">with two different compression algorithms so that we can compare the space </span><span><span class="kobospan" id="kobo.1397.1">that’s used.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1398.1">As a non-root user, in our backup directory, use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1399.1">tar</span></strong><span class="kobospan" id="kobo.1400.1"> command to create an archive file of the day-to-day </span><span><span class="kobospan" id="kobo.1401.1">script repository.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1402.1">Follow </span><span><span class="kobospan" id="kobo.1403.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.1404.1">First, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1405.1">gzip</span></strong><span class="kobospan" id="kobo.1406.1"> compression algorithm option. </span><span class="kobospan" id="kobo.1406.2">Run the following </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1407.1">tar</span></strong></span><span><span class="kobospan" id="kobo.1408.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1409.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1410.1">tar czvf daily-tasks-scripts.bkp.tar.gz ../wdir/daily-tasks-scripts</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer403">
<span class="kobospan" id="kobo.1411.1"><img alt="Figure 10.41 – Creating an archive with the tar command" src="image/B19121_10_41.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1412.1">Figure 10.41 – Creating an archive with the tar command</span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.1413.1">Now use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1414.1">bzip2</span></strong><span class="kobospan" id="kobo.1415.1"> compression </span><a id="_idIndexMarker823" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1416.1">algorithm and create the file </span><a id="_idIndexMarker824" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1417.1">archive from the same directory by running the following </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1418.1">tar</span></strong></span><span><span class="kobospan" id="kobo.1419.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1420.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1421.1">tar cjvf daily-tasks-scripts.bkp.tar.bz2 ../wdir/daily-tasks-scripts</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer404">
<span class="kobospan" id="kobo.1422.1"><img alt="Figure 10.42 – Using the bzip2 compression algorithm with the tar command" src="image/B19121_10_42.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1423.1">Figure 10.42 – Using the bzip2 compression algorithm with the tar command</span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.1424.1">Check the </span><a id="_idIndexMarker825" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1425.1">size of </span><a id="_idIndexMarker826" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1426.1">both file archives to compare the </span><span><span class="kobospan" id="kobo.1427.1">compression rate:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer405">
<span class="kobospan" id="kobo.1428.1"><img alt="Figure 10.43 – Comparing file sizes" src="image/B19121_10_43.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1429.1">Figure 10.43 – Comparing file sizes</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1430.1">As we can see, the repository’s directory size is </span><span><strong class="source-inline"><span class="kobospan" id="kobo.1431.1">42272</span></strong></span><span><span class="kobospan" id="kobo.1432.1"> bytes:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.1433.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1434.1">du -sb ../wdir/daily-tasks-scripts</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1435.1">42272 </span></strong><span class="kobospan1" id="kobo.1436.1">../wdir/daily-tasks-scripts</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.1437.1">The size of the archive file, when compressed with the </span><strong class="source-inline"><span class="kobospan" id="kobo.1438.1">gzip</span></strong><span class="kobospan" id="kobo.1439.1"> algorithm, is </span><span><strong class="source-inline"><span class="kobospan" id="kobo.1440.1">18947</span></strong></span><span><span class="kobospan" id="kobo.1441.1"> bytes:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.1442.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1443.1">du -sb daily-tasks-scripts.bkp.tar.gz</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1444.1">18947</span></strong><span class="kobospan1" id="kobo.1445.1"> daily-tasks-scripts.bkp.tar.gz</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.1446.1">The size of the archive file, when compressed with the </span><strong class="source-inline"><span class="kobospan" id="kobo.1447.1">bzip2</span></strong><span class="kobospan" id="kobo.1448.1"> algorithm, is </span><span><strong class="source-inline"><span class="kobospan" id="kobo.1449.1">18594</span></strong></span><span><span class="kobospan" id="kobo.1450.1"> bytes:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.1451.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1452.1">du -sb daily-tasks-scripts.bkp.tar.bz2</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1453.1">18594</span></strong><span class="kobospan1" id="kobo.1454.1"> daily-tasks-scripts.bkp.tar.bz2</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.1455.1">Let’s take a closer look at what </span><span><span class="kobospan" id="kobo.1456.1">this means:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.1457.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.1458.1">gzip</span></strong><span class="kobospan" id="kobo.1459.1"> compression algorithm reduced the size of the repository </span><span><span class="kobospan" id="kobo.1460.1">by 44.82%</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1461.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.1462.1">bzip2</span></strong><span class="kobospan" id="kobo.1463.1"> compression algorithm reduced the size of the repository </span><span><span class="kobospan" id="kobo.1464.1">by 43.98%</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1465.1">The difference </span><a id="_idIndexMarker827" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1466.1">is minimal, and these are the most used formats for </span><a id="_idIndexMarker828" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1467.1">backups. </span><span class="kobospan" id="kobo.1467.2">It is up to you to decide which one to use – just remember: </span><em class="italic"><span class="kobospan" id="kobo.1468.1">don’t forget to </span></em><span><em class="italic"><span class="kobospan" id="kobo.1469.1">back up!</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1470.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1471.1">To learn more about archiving files, refer to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1472.1">tar</span></strong> <span><span class="kobospan" id="kobo.1473.1">man page.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1474.1">As mentioned in the previous section, the Git repository also helps us back up the information contained in it. </span><span class="kobospan" id="kobo.1474.2">It also provides us with a snapshot of the data at the time it </span><span><span class="kobospan" id="kobo.1475.1">was taken.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1476.1">So, let’s learn how to manage versions </span><span><span class="kobospan" id="kobo.1477.1">with Git.</span></span></p>
<h2 id="_idParaDest-155" class="calibre7"><a id="_idTextAnchor220" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1478.1">Version management with Git</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1479.1">To learn how </span><a id="_idIndexMarker829" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1480.1">Git handles versioning, we’ll use the example from the previous section. </span><span class="kobospan" id="kobo.1480.2">As a </span><em class="italic"><span class="kobospan" id="kobo.1481.1">non-root user</span></em><span class="kobospan" id="kobo.1482.1">, switch to the </span><strong class="source-inline"><span class="kobospan" id="kobo.1483.1">daily-tasks-scripts</span></strong><span class="kobospan" id="kobo.1484.1"> repository directory and follow </span><span><span class="kobospan" id="kobo.1485.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.1486.1">As a good habit, ensure that the local repository keeps updated and in sync with the remote repository before starting. </span><span class="kobospan" id="kobo.1486.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1487.1">git fetch</span></strong><span class="kobospan" id="kobo.1488.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.1489.1">git pull</span></strong><span class="kobospan" id="kobo.1490.1"> commands to </span><span><span class="kobospan" id="kobo.1491.1">do so:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1492.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1493.1">git fetch --all</span></strong><span class="kobospan1" id="kobo.1494.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1495.1">git pull --all</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer406">
<span class="kobospan" id="kobo.1496.1"><img alt="Figure 10.44 – Keeping the repository updated and in sync" src="image/B19121_10_44.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1497.1">Figure 10.44 – Keeping the repository updated and in sync</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1498.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1499.1">git fetch</span></strong><span class="kobospan" id="kobo.1500.1"> command extracts all the data from a remote project that doesn’t already exist locally. </span><span class="kobospan" id="kobo.1500.2">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1501.1">git fetch</span></strong><span class="kobospan" id="kobo.1502.1"> command only downloads the data to the local repository – it doesn’t merge it or change anything you’re currently working on. </span><span class="kobospan" id="kobo.1502.2">The changes have to be </span><span><span class="kobospan" id="kobo.1503.1">merged manually.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1504.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1505.1">git pull</span></strong><span class="kobospan" id="kobo.1506.1"> command incorporates changes from a remote repository into the current branch of the </span><span><span class="kobospan" id="kobo.1507.1">local repository.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1508.1">As another good practice, Git gives you the option to branch the repository. </span><span class="kobospan" id="kobo.1508.2">Branching means deviating from the main line of development and continuing to work without altering that </span><span><span class="kobospan" id="kobo.1509.1">main line.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1510.1">To change the repository without altering its original content, let’s create </span><span><span class="kobospan" id="kobo.1511.1">a branch.</span></span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.1512.1">Create the enhancement branch of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1513.1">daily-tasks-scripts</span></strong><span class="kobospan" id="kobo.1514.1"> repository. </span><span class="kobospan" id="kobo.1514.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1515.1">git branch</span></strong><span class="kobospan" id="kobo.1516.1"> command and the appropriate </span><span><span class="kobospan" id="kobo.1517.1">branch name:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1518.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1519.1">git branch acallejas/repo-enhancement</span></strong></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.1520.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1521.1">Include the author of the changes in the </span><em class="italic"><span class="kobospan" id="kobo.1522.1">branch name</span></em><span class="kobospan" id="kobo.1523.1"> as </span><span><span class="kobospan" id="kobo.1524.1">good practice.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1525.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1526.1">git branch</span></strong><span class="kobospan" id="kobo.1527.1"> command only creates the branch. </span><span class="kobospan" id="kobo.1527.2">To switch to it, use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1528.1">git switch</span></strong><span class="kobospan" id="kobo.1529.1"> command and the </span><span><span class="kobospan" id="kobo.1530.1">branch’s name.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1531.1">Both commands can be combined to create the branch and switch to it. </span><span class="kobospan" id="kobo.1531.2">To do this, use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1532.1">git switch</span></strong><span class="kobospan" id="kobo.1533.1"> command with the </span><strong class="source-inline"><span class="kobospan" id="kobo.1534.1">-</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1535.1">c</span></strong></span><span><span class="kobospan" id="kobo.1536.1"> option:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.1537.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1538.1">git switch -c acallejas/repo-enhancement</span></strong></pre> <p class="calibre3"><span class="kobospan" id="kobo.1539.1">When creating the repository, we added a </span><strong class="source-inline"><span class="kobospan" id="kobo.1540.1">README.md</span></strong><span class="kobospan" id="kobo.1541.1"> file that serves to document </span><a id="_idIndexMarker830" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1542.1">the use of the repository. </span><span class="kobospan" id="kobo.1542.2">Let’s update this file so that we can document </span><span><span class="kobospan" id="kobo.1543.1">our repository.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.1544.1">Update the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1545.1">README.md</span></strong><span class="kobospan" id="kobo.1546.1"> file so that it documents </span><span><span class="kobospan" id="kobo.1547.1">the repository:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer407">
<span class="kobospan" id="kobo.1548.1"><img alt="Figure 10.45 – Updating the README.md file" src="image/B19121_10_45.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1549.1">Figure 10.45 – Updating the README.md file</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1550.1">Note that the </span><strong class="source-inline"><span class="kobospan" id="kobo.1551.1">README.md</span></strong><span class="kobospan" id="kobo.1552.1"> file format uses the Markdown language. </span><span class="kobospan" id="kobo.1552.2">Markdown is a </span><em class="italic"><span class="kobospan" id="kobo.1553.1">markup language</span></em><span class="kobospan" id="kobo.1554.1"> that appears to human readers when it’s in its source </span><span><span class="kobospan" id="kobo.1555.1">code form.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1556.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1557.1">To learn more </span><a id="_idIndexMarker831" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1558.1">about the basic syntax of the Markdown language, refer to the </span><em class="italic"><span class="kobospan" id="kobo.1559.1">Markdown guide</span></em> <span><span class="kobospan" id="kobo.1560.1">at </span></span><a href="https://www.markdownguide.org/basic-syntax" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1561.1">https://www.markdownguide.org/basic-syntax</span></span></a><span><span class="kobospan" id="kobo.1562.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1563.1">Save the </span><a id="_idIndexMarker832" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1564.1">changes and compare the differences between this branch and the </span><span><span class="kobospan" id="kobo.1565.1">main branch.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.1566.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1567.1">git diff</span></strong><span class="kobospan" id="kobo.1568.1"> command to display the differences between </span><span><span class="kobospan" id="kobo.1569.1">the branches:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1570.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1571.1">git diff</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer408">
<span class="kobospan" id="kobo.1572.1"><img alt="Figure 10.46 – Displaying the differences between the branches" src="image/B19121_10_46.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1573.1">Figure 10.46 – Displaying the differences between the branches</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1574.1">The lines that begin with plus (</span><strong class="source-inline"><span class="kobospan" id="kobo.1575.1">+</span></strong><span class="kobospan" id="kobo.1576.1">) signs state the differences in the </span><strong class="source-inline"><span class="kobospan" id="kobo.1577.1">README.md</span></strong><span class="kobospan" id="kobo.1578.1"> file between the versions of </span><span><span class="kobospan" id="kobo.1579.1">the branches.</span></span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.1580.1">Add and commit the changes to the file to update </span><span><span class="kobospan" id="kobo.1581.1">the branch:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1582.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1583.1">git add README.md</span></strong><span class="kobospan1" id="kobo.1584.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1585.1">git commit –m "Updating README.md file"</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.1586.1">Update the </span><a id="_idIndexMarker833" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1587.1">remote repository with the local enhancement branch. </span><span class="kobospan" id="kobo.1587.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1588.1">git push</span></strong><span class="kobospan" id="kobo.1589.1"> command and the branch’s name to </span><span><span class="kobospan" id="kobo.1590.1">do so:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1591.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1592.1">git push –u origin acallejas/repo-enhancement</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer409">
<span class="kobospan" id="kobo.1593.1"><img alt="Figure 10.47 – Updating the remote repository" src="image/B19121_10_47.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1594.1">Figure 10.47 – Updating the remote repository</span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.1595.1">For the local repository, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1596.1">git branch</span></strong><span class="kobospan" id="kobo.1597.1"> command to show the branches of the local repository. </span><span class="kobospan" id="kobo.1597.2">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.1598.1">-r</span></strong><span class="kobospan" id="kobo.1599.1"> option lists the remote branches while </span><strong class="source-inline1"><span class="kobospan" id="kobo.1600.1">-a</span></strong><span class="kobospan" id="kobo.1601.1"> lists </span><span><span class="kobospan" id="kobo.1602.1">all branches:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1603.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1604.1">git branch</span></strong><span class="kobospan1" id="kobo.1605.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1606.1">git branch -r</span></strong><span class="kobospan1" id="kobo.1607.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1608.1">git branch -a</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer410">
<span class="kobospan" id="kobo.1609.1"><img alt="Figure 10.48 – Listing the branches" src="image/B19121_10_48.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1610.1">Figure 10.48 – Listing the branches</span></p>
<ol class="calibre13">
<li value="8" class="calibre14"><span class="kobospan" id="kobo.1611.1">The web </span><a id="_idIndexMarker834" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1612.1">platform also displays the branches. </span><span class="kobospan" id="kobo.1612.2">Navigate to the repository and click on the </span><span><strong class="bold"><span class="kobospan" id="kobo.1613.1">Branches</span></strong></span><span><span class="kobospan" id="kobo.1614.1"> link:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer411">
<span class="kobospan" id="kobo.1615.1"><img alt="Figure 10.49 – Branches" src="image/B19121_10_49.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1616.1">Figure 10.49 – Branches</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1617.1">The changes haven’t been applied to the </span><em class="italic"><span class="kobospan" id="kobo.1618.1">main branch</span></em><span class="kobospan" id="kobo.1619.1"> yet. </span><span class="kobospan" id="kobo.1619.2">To do this, we need to </span><em class="italic"><span class="kobospan" id="kobo.1620.1">merge</span></em><span class="kobospan" id="kobo.1621.1"> the branch with the enhancements. </span><span class="kobospan" id="kobo.1621.2">This should be done through a </span><span><span class="kobospan" id="kobo.1622.1">pull request.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1623.1">Let’s integrate the enhancements into the </span><span><em class="italic"><span class="kobospan" id="kobo.1624.1">main branch</span></em></span><span><span class="kobospan" id="kobo.1625.1">.</span></span></p>
<ol class="calibre13">
<li value="9" class="calibre14"><span class="kobospan" id="kobo.1626.1">In the </span><strong class="bold"><span class="kobospan" id="kobo.1627.1">Branches</span></strong><span class="kobospan" id="kobo.1628.1"> window, click </span><a id="_idIndexMarker835" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1629.1">on the </span><strong class="bold"><span class="kobospan" id="kobo.1630.1">New pull </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.1631.1">request</span></strong></span><span><span class="kobospan" id="kobo.1632.1"> button:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer412">
<span class="kobospan" id="kobo.1633.1"><img alt="Figure 10.50 – The Branches window" src="image/B19121_10_50.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1634.1">Figure 10.50 – The Branches window</span></p>
<ol class="calibre13">
<li value="10" class="calibre14"><span class="kobospan" id="kobo.1635.1">In the </span><strong class="bold"><span class="kobospan" id="kobo.1636.1">Open a pull request</span></strong><span class="kobospan" id="kobo.1637.1"> window, fill in the title and description fields of </span><span><span class="kobospan" id="kobo.1638.1">the change:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer413">
<span class="kobospan" id="kobo.1639.1"><img alt="Figure 10.51 – The Open a pull request window" src="image/B19121_10_51.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1640.1">Figure 10.51 – The Open a pull request window</span></p>
<ol class="calibre13">
<li value="11" class="calibre14"><span class="kobospan" id="kobo.1641.1">In this </span><a id="_idIndexMarker836" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1642.1">window, at the bottom, find and verify the details of </span><span><span class="kobospan" id="kobo.1643.1">the change.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1644.1">In the right column, in the </span><strong class="bold"><span class="kobospan" id="kobo.1645.1">Reviewers</span></strong><span class="kobospan" id="kobo.1646.1"> section, select members of the team to </span><em class="italic"><span class="kobospan" id="kobo.1647.1">review the changes before merging them</span></em><span class="kobospan" id="kobo.1648.1">, as </span><span><span class="kobospan" id="kobo.1649.1">good practice.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1650.1">Once the request is ready, click on the </span><strong class="bold"><span class="kobospan" id="kobo.1651.1">Create pull </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.1652.1">request</span></strong></span><span><span class="kobospan" id="kobo.1653.1"> button.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1654.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1655.1">Pull requests</span></strong><span class="kobospan" id="kobo.1656.1"> window will appear, providing an overview of </span><span><span class="kobospan" id="kobo.1657.1">the change:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer414">
<span class="kobospan" id="kobo.1658.1"><img alt="Figure 10.52 – The Pull requests screen" src="image/B19121_10_52.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1659.1">Figure 10.52 – The Pull requests screen</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1660.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1661.1">Commits</span></strong><span class="kobospan" id="kobo.1662.1"> tab lists the </span><a id="_idIndexMarker837" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1663.1">changes committed, while the </span><strong class="bold"><span class="kobospan" id="kobo.1664.1">Files changed</span></strong><span class="kobospan" id="kobo.1665.1"> tab displays the difference between versions of the </span><span><span class="kobospan" id="kobo.1666.1">changed files.</span></span></p>
<ol class="calibre13">
<li value="15" class="calibre14"><span class="kobospan" id="kobo.1667.1">If you agree with the merger of the branches, click on the </span><strong class="bold"><span class="kobospan" id="kobo.1668.1">Merge pull </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.1669.1">request</span></strong></span><span><span class="kobospan" id="kobo.1670.1"> button.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1671.1">On confirming the merge, the repository on the web platform will display the changes that have </span><span><span class="kobospan" id="kobo.1672.1">been made:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer415">
<span class="kobospan" id="kobo.1673.1"><img alt="Figure 10.53 – Remote repository updated" src="image/B19121_10_53.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1674.1">Figure 10.53 – Remote repository updated</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1675.1">Let’s update </span><a id="_idIndexMarker838" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1676.1">the </span><span><span class="kobospan" id="kobo.1677.1">local repository.</span></span></p>
<ol class="calibre13">
<li value="17" class="calibre14"><span class="kobospan" id="kobo.1678.1">In the local repository, switch to the main branch and </span><span><span class="kobospan" id="kobo.1679.1">update it:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer416">
<span class="kobospan" id="kobo.1680.1"><img alt="Figure 10.54 – Local repository updated" src="image/B19121_10_54.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1681.1">Figure 10.54 – Local repository updated</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1682.1">By using the branches of the repository, a backup of our script directory of day-to-day tasks </span><span><span class="kobospan" id="kobo.1683.1">becomes available.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1684.1">By archiving files to Git repositories, a backup could exist. </span><span class="kobospan" id="kobo.1684.2">Of course, there are software solutions that ease this task, even IT areas in charge of it. </span><span class="kobospan" id="kobo.1684.3">But the best </span><a id="_idIndexMarker839" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1685.1">practice is, regardless of these solutions, as the first law of the SysAdmin says: </span><em class="italic"><span class="kobospan" id="kobo.1686.1">always back up</span></em><span class="kobospan" id="kobo.1687.1">. </span><span class="kobospan" id="kobo.1687.2">These activities, like many others, can be run in an automated fashion using scripts and/or </span><span><span class="kobospan" id="kobo.1688.1">scheduled tasks.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1689.1">Now, let’s look at a tool that might make it easier to automate tasks </span><span><span class="kobospan" id="kobo.1690.1">in Linux.</span></span></p>
<h1 id="_idParaDest-156" class="calibre5"><a id="_idTextAnchor221" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1691.1">Automating with Ansible</span></h1>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1692.1">Automate: A SysAdmin should automate as much as possible, except if it conflicts with the </span></em><span><em class="italic"><span class="kobospan" id="kobo.1693.1">first law.</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1694.1">Previously, we discussed </span><a id="_idIndexMarker840" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1695.1">one of the most well-known statements </span><span><span class="kobospan" id="kobo.1696.1">among SysAdmins:</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1697.1">“</span><em class="italic"><span class="kobospan" id="kobo.1698.1">If you typed it twice, you should have scripted </span></em><span><em class="italic"><span class="kobospan" id="kobo.1699.1">it once.</span></em></span><span><span class="kobospan" id="kobo.1700.1">”</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1701.1">If a task gets scripted, it could be scheduled and, with this, automated. </span><span class="kobospan" id="kobo.1701.2">This means that the task must run without the </span><span><span class="kobospan" id="kobo.1702.1">SysAdmin’s intervention.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1703.1">However, not all scheduled tasks might be automated. </span><span class="kobospan" id="kobo.1703.2">The easiest way to determine this is by applying the </span><em class="italic"><span class="kobospan" id="kobo.1704.1">principles </span></em><span><em class="italic"><span class="kobospan" id="kobo.1705.1">of automation</span></em></span><span><span class="kobospan" id="kobo.1706.1">:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.1707.1">The rule of </span><span><strong class="bold"><span class="kobospan" id="kobo.1708.1">algorithmic thinking</span></strong></span><p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1709.1">Everything is a system</span></em><span class="kobospan" id="kobo.1710.1">. </span><span class="kobospan" id="kobo.1710.2">Algorithmic thinking is a way of getting to a solution through a clear definition of the steps needed – </span><em class="italic"><span class="kobospan" id="kobo.1711.1">nothing happens </span></em><span><em class="italic"><span class="kobospan" id="kobo.1712.1">by magic</span></em></span><span><span class="kobospan" id="kobo.1713.1">.</span></span></p></li>
<li class="calibre14"><span class="kobospan" id="kobo.1714.1">The rule </span><span><span class="kobospan" id="kobo.1715.1">of </span></span><span><strong class="bold"><span class="kobospan" id="kobo.1716.1">bottlenecks</span></strong></span><p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1717.1">Bad decisions propagate</span></em><span class="kobospan" id="kobo.1718.1">. </span><span class="kobospan" id="kobo.1718.2">Every system, regardless of how well it works, has at least one constraint (</span><em class="italic"><span class="kobospan" id="kobo.1719.1">a bottleneck</span></em><span class="kobospan" id="kobo.1720.1">) that </span><span><span class="kobospan" id="kobo.1721.1">limits performance.</span></span></p></li>
<li class="calibre14"><span class="kobospan" id="kobo.1722.1">The rule </span><span><span class="kobospan" id="kobo.1723.1">of </span></span><span><strong class="bold"><span class="kobospan" id="kobo.1724.1">autonomy</span></strong></span><p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1725.1">Humans always play a role</span></em><span class="kobospan" id="kobo.1726.1">. </span><span class="kobospan" id="kobo.1726.2">This challenges the idea that automation means completely eliminating the human element. </span><span class="kobospan" id="kobo.1726.3">Using the rule of algorithmic thinking, humans are another layer of abstraction in </span><span><span class="kobospan" id="kobo.1727.1">the system.</span></span></p></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1728.1">Taking these </span><a id="_idIndexMarker841" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1729.1">principles into account and applying them allows us to define an ideal </span><span><span class="kobospan" id="kobo.1730.1">automation solution.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1731.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1732.1">Ansible project</span></strong><span class="kobospan" id="kobo.1733.1"> is an open </span><a id="_idIndexMarker842" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1734.1">source community sponsored by Red Hat, the developer of the automation tool. </span><span class="kobospan" id="kobo.1734.2">Ansible is available in the official Fedora </span><span><span class="kobospan" id="kobo.1735.1">Linux repositories.</span></span></p>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.1736.1">Ansible</span></strong><span class="kobospan" id="kobo.1737.1"> is an automation tool that focuses on simplicity and ease of use as its primary goals. </span><span class="kobospan" id="kobo.1737.2">Ansible enables us to configure systems, manage packages, and, in an advanced way, orchestrate tasks that support the continuous </span><span><span class="kobospan" id="kobo.1738.1">delivery cycle.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1739.1">Ansible works </span><a id="_idIndexMarker843" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1740.1">in two </span><span><span class="kobospan" id="kobo.1741.1">separate layers:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><em class="italic"><span class="kobospan" id="kobo.1742.1">Control plane</span></em><span class="kobospan" id="kobo.1743.1"> (in the cloud): Generate instances and manage </span><span><span class="kobospan" id="kobo.1744.1">their resources</span></span></li>
<li class="calibre14"><em class="italic"><span class="kobospan" id="kobo.1745.1">On instance</span></em><span class="kobospan" id="kobo.1746.1">: Syart and stop services, push configuration files, install packages, </span><span><span class="kobospan" id="kobo.1747.1">and more</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1748.1">Through OpenSSH, an agentless service, Ansible manages systems and performs the tasks </span><span><span class="kobospan" id="kobo.1749.1">described previously.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1750.1">Let’s start with the basics </span><span><span class="kobospan" id="kobo.1751.1">of Ansible.</span></span></p>
<h2 id="_idParaDest-157" class="calibre7"><a id="_idTextAnchor222" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1752.1">The basics</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1753.1">The Ansible </span><a id="_idIndexMarker844" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1754.1">use cases approach deals with automating processes. </span><span class="kobospan" id="kobo.1754.2">Let’s look at some of the most </span><span><span class="kobospan" id="kobo.1755.1">common options:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span><span class="kobospan" id="kobo.1756.1">Provisioning</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.1757.1">Configuration management</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.1758.1">Application deployment</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.1759.1">Continuous delivery</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.1760.1">Security </span><span><span class="kobospan" id="kobo.1761.1">and compliance</span></span></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.1762.1">Orchestration</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1763.1">Ansible divides </span><a id="_idIndexMarker845" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1764.1">process automation into a variety of work </span><span><span class="kobospan" id="kobo.1765.1">unit levels:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.1766.1">Tasks</span></strong><span class="kobospan" id="kobo.1767.1">: A task is the smallest unit of work. </span><span class="kobospan" id="kobo.1767.2">It could consist of an action such as </span><em class="italic"><span class="kobospan" id="kobo.1768.1">install a database</span></em><span class="kobospan" id="kobo.1769.1">, </span><em class="italic"><span class="kobospan" id="kobo.1770.1">install a web server</span></em><span class="kobospan" id="kobo.1771.1">, or </span><em class="italic"><span class="kobospan" id="kobo.1772.1">copy this configuration file to </span></em><span><em class="italic"><span class="kobospan" id="kobo.1773.1">the server</span></em></span><span><span class="kobospan" id="kobo.1774.1">.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.1775.1">Plays</span></strong><span class="kobospan" id="kobo.1776.1">: A play consists of several tasks. </span><span class="kobospan" id="kobo.1776.2">For example, the play </span><em class="italic"><span class="kobospan" id="kobo.1777.1">Prepare a database for a web service</span></em><span class="kobospan" id="kobo.1778.1"> could consist of the </span><span><span class="kobospan" id="kobo.1779.1">following tasks:</span></span><ol class="calibre18"><li class="alphabets"><span class="kobospan" id="kobo.1780.1">Install the </span><span><span class="kobospan" id="kobo.1781.1">database package.</span></span></li><li class="alphabets"><span class="kobospan" id="kobo.1782.1">Set the password for the </span><span><span class="kobospan" id="kobo.1783.1">database administrator.</span></span></li><li class="alphabets"><span class="kobospan" id="kobo.1784.1">Create </span><span><span class="kobospan" id="kobo.1785.1">the database.</span></span></li><li class="alphabets"><span class="kobospan" id="kobo.1786.1">Define the access to </span><span><span class="kobospan" id="kobo.1787.1">the database.</span></span></li></ol></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.1788.1">Playbook</span></strong><span class="kobospan" id="kobo.1789.1">: A playbook consists of several plays. </span><span class="kobospan" id="kobo.1789.2">For example, the playbook </span><em class="italic"><span class="kobospan" id="kobo.1790.1">Install a website with a database backend</span></em><span class="kobospan" id="kobo.1791.1"> could consist of the </span><span><span class="kobospan" id="kobo.1792.1">following tasks:</span></span><ol class="calibre18"><li class="alphabets" value="1"><span class="kobospan" id="kobo.1793.1">Configure the </span><span><span class="kobospan" id="kobo.1794.1">database server.</span></span></li><li class="alphabets"><span class="kobospan" id="kobo.1795.1">Configure the </span><span><span class="kobospan" id="kobo.1796.1">web server.</span></span></li></ol></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1797.1">The task automation process within Ansible requires two types of nodes to be defined: </span><em class="italic"><span class="kobospan" id="kobo.1798.1">control</span></em><span class="kobospan" id="kobo.1799.1"> and </span><em class="italic"><span class="kobospan" id="kobo.1800.1">managed</span></em><span class="kobospan" id="kobo.1801.1">. </span><span class="kobospan" id="kobo.1801.2">The control node is the machine from where Ansible is running and the managed nodes are the machines where the tasks </span><span><span class="kobospan" id="kobo.1802.1">take place:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer417">
<span class="kobospan" id="kobo.1803.1"><img alt="Figure 10.55 – Ansible nodes" src="image/B19121_10_55.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1804.1">Figure 10.55 – Ansible nodes</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1805.1">Let’s learn how to prepare our workstation as the Ansible </span><span><span class="kobospan" id="kobo.1806.1">control node.</span></span></p>
<h2 id="_idParaDest-158" class="calibre7"><a id="_idTextAnchor223" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1807.1">First steps</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1808.1">So, let’s start </span><a id="_idIndexMarker846" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1809.1">with installing and configuring Ansible. </span><span class="kobospan" id="kobo.1809.2">Follow </span><span><span class="kobospan" id="kobo.1810.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.1811.1">Ansible is </span><a id="_idIndexMarker847" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1812.1">available in the official Fedora Linux repositories. </span><span class="kobospan" id="kobo.1812.2">Install the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1813.1">ansible</span></strong><span class="kobospan" id="kobo.1814.1"> package using the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1815.1">dnf</span></strong></span><span><span class="kobospan" id="kobo.1816.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1817.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1818.1">sudo dnf install ansible</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.1819.1">The default configuration file of Ansible resides in the </span><strong class="source-inline"><span class="kobospan" id="kobo.1820.1">/etc/ansible/ansible.cfg</span></strong><span class="kobospan" id="kobo.1821.1"> file, but as a best practice, create a custom file to get better control of </span><span><span class="kobospan" id="kobo.1822.1">automated tasks.</span></span></p></li> <li class="calibre14"><span class="kobospan" id="kobo.1823.1">Inside the working directory, create a directory named </span><strong class="source-inline1"><span class="kobospan" id="kobo.1824.1">ansible</span></strong><span class="kobospan" id="kobo.1825.1"> and switch </span><span><span class="kobospan" id="kobo.1826.1">to it:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1827.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1828.1">mkdir ansible; cd ansible</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.1829.1">Inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1830.1">ansible</span></strong><span class="kobospan" id="kobo.1831.1"> directory, create a configuration file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.1832.1">ansible.cfg</span></strong><span class="kobospan" id="kobo.1833.1">. </span><span class="kobospan" id="kobo.1833.2">Only add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1834.1">defaults</span></strong><span class="kobospan" id="kobo.1835.1"> section and set up the name of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1836.1">inventory</span></strong><span class="kobospan" id="kobo.1837.1"> file, something </span><span><span class="kobospan" id="kobo.1838.1">like this:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.1839.1">[defaults]</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1840.1">inventory = inventory</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.1841.1">Ansible does </span><a id="_idIndexMarker848" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1842.1">not install an agent on the managed nodes. </span><span class="kobospan" id="kobo.1842.2">Instead, it bases its </span><a id="_idIndexMarker849" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1843.1">communication with them through </span><strong class="bold"><span class="kobospan" id="kobo.1844.1">SSH keys</span></strong><span class="kobospan" id="kobo.1845.1">. </span><span class="kobospan" id="kobo.1845.2">So, let’s create </span><a id="_idIndexMarker850" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1846.1">a key that we’ll use to manage </span><span><span class="kobospan" id="kobo.1847.1">the nodes.</span></span></p></li> <li class="calibre14"><span class="kobospan" id="kobo.1848.1">Create an </span><strong class="source-inline1"><span class="kobospan" id="kobo.1849.1">ssh</span></strong><span class="kobospan" id="kobo.1850.1"> key pair and specify </span><strong class="source-inline1"><span class="kobospan" id="kobo.1851.1">rsa</span></strong><span class="kobospan" id="kobo.1852.1"> with </span><strong class="source-inline1"><span class="kobospan" id="kobo.1853.1">2048</span></strong><span class="kobospan" id="kobo.1854.1"> bits. </span><span class="kobospan" id="kobo.1854.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1855.1">ssh-keygen</span></strong><span class="kobospan" id="kobo.1856.1"> command to </span><span><span class="kobospan" id="kobo.1857.1">do so:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1858.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1859.1">ssh-keygen -t rsa -b 2048</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer418">
<span class="kobospan" id="kobo.1860.1"><img alt="Figure 10.56 – Generating the ssh key pair" src="image/B19121_10_56.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1861.1">Figure 10.56 – Generating the ssh key pair</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1862.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1863.1">ssh-keygen</span></strong><span class="kobospan" id="kobo.1864.1"> command will ask you to confirm the path where the key should be generated. </span><span class="kobospan" id="kobo.1864.2">Note that the path must not be the </span><em class="italic"><span class="kobospan" id="kobo.1865.1">default path</span></em><span class="kobospan" id="kobo.1866.1"> but inside the working directory in the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.1867.1">ansible</span></strong></span><span><span class="kobospan" id="kobo.1868.1"> directory.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1869.1">After this, the command prompts you to enter a passphrase instead of the user’s login password. </span><span class="kobospan" id="kobo.1869.2">As the connection must run </span><em class="italic"><span class="kobospan" id="kobo.1870.1">unattended</span></em><span class="kobospan" id="kobo.1871.1">, leave this field empty and hit </span><em class="italic"><span class="kobospan" id="kobo.1872.1">Enter</span></em><span class="kobospan" id="kobo.1873.1"> twice to confirm the creation of the </span><span><span class="kobospan" id="kobo.1874.1">key pair.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1875.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1876.1">To learn more about creating SSH keys, refer to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1877.1">ssh-keygen</span></strong> <span><span class="kobospan" id="kobo.1878.1">man page.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1879.1">This command </span><a id="_idIndexMarker851" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1880.1">generates the SSH key pair, which consists of a </span><em class="italic"><span class="kobospan" id="kobo.1881.1">public key</span></em><span class="kobospan" id="kobo.1882.1"> and a </span><span><em class="italic"><span class="kobospan" id="kobo.1883.1">private key</span></em></span><span><span class="kobospan" id="kobo.1884.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1885.1">Let’s test </span><a id="_idIndexMarker852" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1886.1">the communication with the key without using the user’s </span><span><span class="kobospan" id="kobo.1887.1">access password.</span></span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.1888.1">To test communication with the SSH key, copy the key to the same workstation. </span><span class="kobospan" id="kobo.1888.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1889.1">ssh-copy-id</span></strong><span class="kobospan" id="kobo.1890.1"> command to </span><span><span class="kobospan" id="kobo.1891.1">do so:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1892.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1893.1">ssh-copy-id -i id_rsa.pub localhost</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer419">
<span class="kobospan" id="kobo.1894.1"><img alt="Figure 10.57 – Copying the ssh public key" src="image/B19121_10_57.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1895.1">Figure 10.57 – Copying the ssh public key</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1896.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.1897.1">ssh-copy-id</span></strong><span class="kobospan" id="kobo.1898.1"> command copies the public key to the machine where the trust relationship gets established. </span><span class="kobospan" id="kobo.1898.2">In our case, this is the </span><span><span class="kobospan" id="kobo.1899.1">workstation itself.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1900.1">To copy the key, the command asks for the user’s one-time </span><span><span class="kobospan" id="kobo.1901.1">login password.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1902.1">Once access is granted, the command copies the content of the public key to the </span><strong class="source-inline"><span class="kobospan" id="kobo.1903.1">authorized_keys</span></strong><span class="kobospan" id="kobo.1904.1"> file in the hidden </span><strong class="source-inline"><span class="kobospan" id="kobo.1905.1">.ssh</span></strong><span class="kobospan" id="kobo.1906.1"> directory inside the user’s </span><span><span class="kobospan" id="kobo.1907.1">home directory.</span></span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.1908.1">To test the connection, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1909.1">ssh</span></strong><span class="kobospan" id="kobo.1910.1"> command to offer the </span><span><span class="kobospan" id="kobo.1911.1">private key:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1912.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1913.1">ssh -i id_rsa localhost</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer420">
<span class="kobospan" id="kobo.1914.1"><img alt="Figure 10.58 – Testing the trust relationship" src="image/B19121_10_58.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1915.1">Figure 10.58 – Testing the trust relationship</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1916.1">The connection </span><a id="_idIndexMarker853" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1917.1">that uses the private key must allow access and </span><a id="_idIndexMarker854" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1918.1">run remote commands without requesting the </span><span><span class="kobospan" id="kobo.1919.1">user’s password.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1920.1">Now, let’s configure and automate simple tasks </span><span><span class="kobospan" id="kobo.1921.1">with Ansible.</span></span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.1922.1">Create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1923.1">inventory</span></strong><span class="kobospan" id="kobo.1924.1"> file, adding </span><strong class="source-inline1"><span class="kobospan" id="kobo.1925.1">workstation</span></strong><span class="kobospan" id="kobo.1926.1"> as a managed node, indicating the private key as a variable for the host. </span><span class="kobospan" id="kobo.1926.2">In the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1927.1">inventory</span></strong><span class="kobospan" id="kobo.1928.1"> file, add the </span><span><span class="kobospan" id="kobo.1929.1">following lines:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.1930.1">[workstation]</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1931.1">localhost</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1932.1">[workstation:vars]</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1933.1">ansible_ssh_private_key_file=/home/acallejas/wdir/ansible/id_rsa</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.1934.1">Let’s test the communication to the managed nodes using ad hoc commands. </span><span class="kobospan" id="kobo.1934.2">Ad hoc commands allow us to run basic tasks from the </span><span><span class="kobospan" id="kobo.1935.1">command line.</span></span></p></li> <li class="calibre14"><span class="kobospan" id="kobo.1936.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1937.1">ansible</span></strong><span class="kobospan" id="kobo.1938.1"> command, along with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1939.1">ping</span></strong><span class="kobospan" id="kobo.1940.1"> module, to verify the connection to all </span><span><span class="kobospan" id="kobo.1941.1">managed nodes:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1942.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1943.1">ansible all -m ping</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer421">
<span class="kobospan" id="kobo.1944.1"><img alt="Figure 10.59 – Testing communication with all managed nodes" src="image/B19121_10_59.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1945.1">Figure 10.59 – Testing communication with all managed nodes</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1946.1">This ad hoc </span><a id="_idIndexMarker855" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1947.1">command allows us to run any operating system command </span><a id="_idIndexMarker856" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1948.1">by passing it as an argument using the </span><strong class="source-inline"><span class="kobospan" id="kobo.1949.1">-a</span></strong><span class="kobospan" id="kobo.1950.1"> or </span><strong class="source-inline"><span class="kobospan" id="kobo.1951.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.1952.1">args</span></strong></span><span><span class="kobospan" id="kobo.1953.1"> option:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.1954.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1955.1">ansible workstation -a "hostname"</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer422">
<span class="kobospan" id="kobo.1956.1"><img alt="Figure 10.60 – Using ad hoc commands" src="image/B19121_10_60.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1957.1">Figure 10.60 – Using ad hoc commands</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1958.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1959.1">For more information, refer to the </span><em class="italic"><span class="kobospan" id="kobo.1960.1">Introduction to ad hoc commands</span></em><span class="kobospan" id="kobo.1961.1"> section of the Ansible documentation </span><span><span class="kobospan" id="kobo.1962.1">at </span></span><a href="https://docs.ansible.com/ansible/latest/command_guide/intro_adhoc.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1963.1">https://docs.ansible.com/ansible/latest/command_guide/intro_adhoc.html</span></span></a><span><span class="kobospan" id="kobo.1964.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1965.1">As mentioned previously, the </span><em class="italic"><span class="kobospan" id="kobo.1966.1">tasks</span></em><span class="kobospan" id="kobo.1967.1"> and the set of them (</span><em class="italic"><span class="kobospan" id="kobo.1968.1">plays</span></em><span class="kobospan" id="kobo.1969.1">) get grouped into a file. </span><span class="kobospan" id="kobo.1969.2">This file allows </span><a id="_idIndexMarker857" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1970.1">us to run them </span><em class="italic"><span class="kobospan" id="kobo.1971.1">sequentially or selectively</span></em><span class="kobospan" id="kobo.1972.1">. </span><span class="kobospan" id="kobo.1972.2">These files are </span><span><span class="kobospan" id="kobo.1973.1">called </span></span><span><em class="italic"><span class="kobospan" id="kobo.1974.1">playbooks</span></em></span><span><span class="kobospan" id="kobo.1975.1">.</span></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.1976.1">Playbooks</span></em><span class="kobospan" id="kobo.1977.1"> come written in </span><strong class="source-inline"><span class="kobospan" id="kobo.1978.1">YAML</span></strong><span class="kobospan" id="kobo.1979.1"> format. </span><span class="kobospan" id="kobo.1979.2">This format, due to its simplicity, is based on a tree structure, which makes it more human-readable than a </span><strong class="source-inline"><span class="kobospan" id="kobo.1980.1">JSON</span></strong><span class="kobospan" id="kobo.1981.1"> or </span><strong class="source-inline"><span class="kobospan" id="kobo.1982.1">XML</span></strong><span class="kobospan" id="kobo.1983.1"> file. </span><span class="kobospan" id="kobo.1983.2">This means that it </span><a id="_idIndexMarker858" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1984.1">maintains its ideal of being the simplest </span><span><span class="kobospan" id="kobo.1985.1">implementation tool.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1986.1">Let’s analyze a </span><em class="italic"><span class="kobospan" id="kobo.1987.1">playbook</span></em><span class="kobospan" id="kobo.1988.1"> through a simple example. </span><span class="kobospan" id="kobo.1988.2">The following </span><em class="italic"><span class="kobospan" id="kobo.1989.1">playbook</span></em><span class="kobospan" id="kobo.1990.1"> runs the </span><em class="italic"><span class="kobospan" id="kobo.1991.1">tasks</span></em><span class="kobospan" id="kobo.1992.1"> to verify that a web server has the </span><strong class="source-inline"><span class="kobospan" id="kobo.1993.1">httpd</span></strong><span class="kobospan" id="kobo.1994.1"> package installed </span><span><span class="kobospan" id="kobo.1995.1">and running:</span></span></p>
<pre class="console">
<strong class="bold1"><span class="kobospan1" id="kobo.1996.1">verify_webserver.yaml</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer423">
<span class="kobospan" id="kobo.1997.1"><img alt="Figure 10.61 – Ansible playbook" src="image/B19121_10_61.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1998.1">Figure 10.61 – Ansible playbook</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1999.1">Let’s take a </span><span><span class="kobospan" id="kobo.2000.1">closer look:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.2001.1">&lt;1&gt;</span></strong> <strong class="bold"><span class="kobospan" id="kobo.2002.1">Identification block</span></strong><span class="kobospan" id="kobo.2003.1">: This assigns a </span><em class="italic"><span class="kobospan" id="kobo.2004.1">name</span></em><span class="kobospan" id="kobo.2005.1"> to the play and the </span><em class="italic"><span class="kobospan" id="kobo.2006.1">hosts</span></em><span class="kobospan" id="kobo.2007.1"> in the inventory where the </span><span><span class="kobospan" id="kobo.2008.1">play applies.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.2009.1">&lt;2&gt;</span></strong> <strong class="bold"><span class="kobospan" id="kobo.2010.1">Variables block</span></strong><span class="kobospan" id="kobo.2011.1">: This declares the </span><em class="italic"><span class="kobospan" id="kobo.2012.1">variables</span></em><span class="kobospan" id="kobo.2013.1"> used in </span><span><span class="kobospan" id="kobo.2014.1">the play.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.2015.1">&lt;3&gt;</span></strong> <strong class="bold"><span class="kobospan" id="kobo.2016.1">Tasks block</span></strong><span class="kobospan" id="kobo.2017.1">: This declares the </span><em class="italic"><span class="kobospan" id="kobo.2018.1">tasks</span></em><span class="kobospan" id="kobo.2019.1"> to run in </span><span><span class="kobospan" id="kobo.2020.1">the play.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.2021.1">In the preceding example, the </span><em class="italic"><span class="kobospan" id="kobo.2022.1">play</span></em><span class="kobospan" id="kobo.2023.1"> consists of </span><span><span class="kobospan" id="kobo.2024.1">two </span></span><span><em class="italic"><span class="kobospan" id="kobo.2025.1">tasks</span></em></span><span><span class="kobospan" id="kobo.2026.1">:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.2027.1">Verify that the </span><strong class="source-inline1"><span class="kobospan" id="kobo.2028.1">httpd</span></strong><span class="kobospan" id="kobo.2029.1"> package has been installed as the </span><span><span class="kobospan" id="kobo.2030.1">latest version</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.2031.1">Verify that the </span><strong class="source-inline1"><span class="kobospan" id="kobo.2032.1">httpd</span></strong><span class="kobospan" id="kobo.2033.1"> service has been enabled </span><span><span class="kobospan" id="kobo.2034.1">and started</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.2035.1">For each of </span><a id="_idIndexMarker859" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2036.1">these tasks, the play uses two modules: </span><strong class="source-inline"><span class="kobospan" id="kobo.2037.1">ansible.builtin.package</span></strong> <span><span class="kobospan" id="kobo.2038.1">and </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.2039.1">ansible.builtin.service</span></strong></span><span><span class="kobospan" id="kobo.2040.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2041.1">The modules </span><a id="_idIndexMarker860" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2042.1">consist of small units of code that perform tasks using instructions from the operating system. </span><span class="kobospan" id="kobo.2042.2">In the preceding example, the </span><strong class="source-inline"><span class="kobospan" id="kobo.2043.1">ansible.builtin.package</span></strong><span class="kobospan" id="kobo.2044.1"> module uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.2045.1">dnf</span></strong><span class="kobospan" id="kobo.2046.1"> command to determine the </span><em class="italic"><span class="kobospan" id="kobo.2047.1">installation status</span></em><span class="kobospan" id="kobo.2048.1"> of </span><span><span class="kobospan" id="kobo.2049.1">the package.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2050.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.2051.1">ansible.builtin.service</span></strong><span class="kobospan" id="kobo.2052.1"> module uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.2053.1">systemctl</span></strong><span class="kobospan" id="kobo.2054.1"> command to determine the </span><em class="italic"><span class="kobospan" id="kobo.2055.1">status of </span></em><span><em class="italic"><span class="kobospan" id="kobo.2056.1">the service</span></em></span><span><span class="kobospan" id="kobo.2057.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2058.1">Since the syntax of the playbooks uses the </span><strong class="source-inline"><span class="kobospan" id="kobo.2059.1">YAML</span></strong><span class="kobospan" id="kobo.2060.1"> file format, they are prone to indentation failures. </span><span class="kobospan" id="kobo.2060.2">Ansible provides a tool to check the syntax of playbooks – that is, the </span><strong class="source-inline"><span class="kobospan" id="kobo.2061.1">ansible-playbook</span></strong><span class="kobospan" id="kobo.2062.1"> command with the </span><strong class="source-inline"><span class="kobospan" id="kobo.2063.1">--</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.2064.1">syntax-check</span></strong></span><span><span class="kobospan" id="kobo.2065.1"> option:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.2066.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.2067.1">ansible-playbook --syntax-check verify_webserver.yaml</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer424">
<span class="kobospan" id="kobo.2068.1"><img alt="Figure 10.62 – Verifying the syntax of the playbook" src="image/B19121_10_62.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2069.1">Figure 10.62 – Verifying the syntax of the playbook</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2070.1">The output of this command explains the syntax error. </span><span class="kobospan" id="kobo.2070.2">The error message shows where you can find the </span><span><span class="kobospan" id="kobo.2071.1">runtime error.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2072.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.2073.1">Although the error message displays the error’s location, it could be a result of an error that wasn’t caused by the displayed location. </span><span class="kobospan" id="kobo.2073.2">As a best practice, confirm the correct indentation on the lines before the </span><span><span class="kobospan" id="kobo.2074.1">error message.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2075.1">After editing the playbook and fixing the error, run the syntax </span><span><span class="kobospan" id="kobo.2076.1">check again:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.2077.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.2078.1">ansible-playbook --syntax-check verify_webserver.yaml</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer425">
<span class="kobospan" id="kobo.2079.1"><img alt="Figure 10.63 – Running the syntax check on the playbook once more" src="image/B19121_10_63.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2080.1">Figure 10.63 – Running the syntax check on the playbook once more</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2081.1">This output </span><a id="_idIndexMarker861" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2082.1">indicates that our playbook has the correct syntax and is ready </span><span><span class="kobospan" id="kobo.2083.1">to run.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2084.1">Another test </span><a id="_idIndexMarker862" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2085.1">tool provided by Ansible consists of running it in </span><em class="italic"><span class="kobospan" id="kobo.2086.1">dry-run mode</span></em><span class="kobospan" id="kobo.2087.1">. </span><span class="kobospan" id="kobo.2087.2">Use the </span><strong class="source-inline"><span class="kobospan" id="kobo.2088.1">ansible-playbook</span></strong><span class="kobospan" id="kobo.2089.1"> command with the </span><strong class="source-inline"><span class="kobospan" id="kobo.2090.1">--check</span></strong><span class="kobospan" id="kobo.2091.1"> option to run in </span><span><span class="kobospan" id="kobo.2092.1">dry-run mode:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.2093.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.2094.1">ansible-playbook --check verify_webserver.yaml</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer426">
<span class="kobospan" id="kobo.2095.1"><img alt="Figure 10.64 – Running the playbook in dry-run mode" src="image/B19121_10_64.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2096.1">Figure 10.64 – Running the playbook in dry-run mode</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2097.1">Dry-run mode doesn’t send any error message, so it is considered positive. </span><span class="kobospan" id="kobo.2097.2">Note that no change occurred; the playbook only tested if the tasks could be run on the </span><span><span class="kobospan" id="kobo.2098.1">managed node.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2099.1">Now that there are no errors in the tests, run </span><span><span class="kobospan" id="kobo.2100.1">the playbook:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.2101.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.2102.1">ansible-playbook verify_webserver.yaml</span></strong></pre> <div class="calibre2">
<div class="img---figure" id="_idContainer427">
<span class="kobospan" id="kobo.2103.1"><img alt="Figure 10.65 – Running the playbook" src="image/B19121_10_65.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2104.1">Figure 10.65 – Running the playbook</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2105.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.2106.1">failed=0</span></strong><span class="kobospan" id="kobo.2107.1"> output </span><a id="_idIndexMarker863" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2108.1">indicates that the tasks were </span><span><span class="kobospan" id="kobo.2109.1">finished successfully.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2110.1">As predicted, in dry-run mode, the playbook does not </span><span><span class="kobospan" id="kobo.2111.1">generate errors.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2112.1">Confirm this </span><a id="_idIndexMarker864" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2113.1">by logging into the host and verifying that the tasks </span><span><span class="kobospan" id="kobo.2114.1">are running:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer428">
<span class="kobospan" id="kobo.2115.1"><img alt="Figure 10.66 – Verifying tasks" src="image/B19121_10_66.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2116.1">Figure 10.66 – Verifying tasks</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2117.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.2118.1">To learn </span><a id="_idIndexMarker865" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2119.1">more about Ansible, refer to the Ansible documentation </span><span><span class="kobospan" id="kobo.2120.1">at </span></span><a href="https://docs.ansible.com/index.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.2121.1">https://docs.ansible.com/index.html</span></span></a><span><span class="kobospan" id="kobo.2122.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2123.1">Automating with Ansible simplifies </span><span><span class="kobospan" id="kobo.2124.1">day-to-day tasks.</span></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.2125.1">Automate as much as possible, so long as that automation </span></em><span><em class="italic"><span class="kobospan" id="kobo.2126.1">impacts backups.</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2127.1">Automating enables us to get free time. </span><span class="kobospan" id="kobo.2127.2">Free time must be used to develop or learn new skills. </span><em class="italic"><span class="kobospan" id="kobo.2128.1">A SysAdmin never </span></em><span><em class="italic"><span class="kobospan" id="kobo.2129.1">stops learning</span></em></span><span><span class="kobospan" id="kobo.2130.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2131.1">Finally, let’s take a look at a few resources where we can learn about and develop </span><span><span class="kobospan" id="kobo.2132.1">new skills.</span></span></p>
<h1 id="_idParaDest-159" class="calibre5"><a id="_idTextAnchor224" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2133.1">Never-ending study</span></h1>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.2134.1">Study: A SysAdmin must have free time to study, so long this free time does not conflict with the first or </span></em><span><em class="italic"><span class="kobospan" id="kobo.2135.1">second law.</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2136.1">Infrastructure profiles have been evolving the most in recent years. </span><span class="kobospan" id="kobo.2136.2">It is not that it is going to disappear as a job role, but it is reinventing itself and new skills are emerging. </span><span class="kobospan" id="kobo.2136.3">Thus, professionals must gain </span><span><span class="kobospan" id="kobo.2137.1">new knowledge.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2138.1">The best advice is to always go back to the basics – that is, to programming and coding. </span><span class="kobospan" id="kobo.2138.2">Knowing all sides of the system is what assures the </span><em class="italic"><span class="kobospan" id="kobo.2139.1">SysAdmin</span></em><span class="kobospan" id="kobo.2140.1"> that they can continue to play a fundamental role. </span><span class="kobospan" id="kobo.2140.2">Each new technology can mean better work in less time with greater control of </span><span><span class="kobospan" id="kobo.2141.1">the system.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2142.1">When new technology comes along, it takes time to study and implement it while keeping the system active, all while increasing productive </span><span><span class="kobospan" id="kobo.2143.1">leisure time.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2144.1">A SysAdmin needs commitment to continuous learning while keeping up to date with the latest technology trends and </span><span><span class="kobospan" id="kobo.2145.1">best practices.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2146.1">In these same years, the boom of online education took place. </span><span class="kobospan" id="kobo.2146.2">Among the many resources available, there are several to take </span><span><span class="kobospan" id="kobo.2147.1">advantage of.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2148.1">Let’s review those that could develop our skills as </span><span><span class="kobospan" id="kobo.2149.1">a SysAdmin:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.2150.1">A great place to develop </span><strong class="source-inline1"><span class="kobospan" id="kobo.2151.1">vim</span></strong><span class="kobospan" id="kobo.2152.1"> editor skills is VimTricks. </span><strong class="bold"><span class="kobospan" id="kobo.2153.1">VimTricks</span></strong><span class="kobospan" id="kobo.2154.1"> (</span><a href="https://vimtricks.com/" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.2155.1">https://vimtricks.com/</span></a><span class="kobospan" id="kobo.2156.1">) collects the </span><a id="_idIndexMarker866" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2157.1">necessary tricks, how-tos, guides, videos, links, and plugins and posts them on their social networks and as an e-newsletter. </span><span class="kobospan" id="kobo.2157.2">The site offers an extensive archive of published material, as well as a book and the possibility to register to receive the </span><span><span class="kobospan" id="kobo.2158.1">e-newsletter regularly:</span></span></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer429">
<span class="kobospan" id="kobo.2159.1"><img alt="Figure 10.67 – The VimTricks web page" src="image/B19121_10_67.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2160.1">Figure 10.67 – The VimTricks web page</span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.2161.1">Another recommendation is a page that brings together the tools and training needed to </span><a id="_idIndexMarker867" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2162.1">develop with the new </span><strong class="bold"><span class="kobospan" id="kobo.2163.1">Red Hat</span></strong><span class="kobospan" id="kobo.2164.1"> technologies – that </span><span><span class="kobospan" id="kobo.2165.1">is, </span></span><a href="https://developers.redhat.com/:" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.2166.1">https://developers.redhat.com/:</span></span></a></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer430">
<span class="kobospan" id="kobo.2167.1"><img alt="Figure 10.68 – The Red Hat Developer web page" src="image/B19121_10_68.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2168.1">Figure 10.68 – The Red Hat Developer web page</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2169.1">Red Hat Developer is a community that provides tools, training, and technical talks designed to help developers improve their skills and keep up-to-date on the technologies that are shaping </span><span><span class="kobospan" id="kobo.2170.1">the future.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2171.1">Subscribers have access to weekly DevNation technical talks, technology deep dives, and open </span><span><span class="kobospan" id="kobo.2172.1">source tutorials.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2173.1">The subscription is free – just sign up and you’ll also get access to other official Red Hat learning and </span><span><span class="kobospan" id="kobo.2174.1">reference sites.</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.2175.1">As a form of support to help you get solid knowledge of Ansible and automate tasks with this tool, you can go </span><span><span class="kobospan" id="kobo.2176.1">to </span></span><a href="https://www.ansiblepilot.com/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.2177.1">https://www.ansiblepilot.com/</span></span></a><span><span class="kobospan" id="kobo.2178.1">:</span></span></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer431">
<span class="kobospan" id="kobo.2179.1"><img alt="Figure 10.69 – The Ansible Pilot learning page" src="image/B19121_10_69.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2180.1">Figure 10.69 – The Ansible Pilot learning page</span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.2181.1">Luca Berton</span></em><span class="kobospan" id="kobo.2182.1">, Ansible automation expert and author of several books on automation, offers many examples, pieces of code, and videos of automating tasks of all kinds on his site. </span><span class="kobospan" id="kobo.2182.2">This is a great place to learn and practice </span><span><span class="kobospan" id="kobo.2183.1">task automation.</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.2184.1">Kubernetes</span></strong><span class="kobospan" id="kobo.2185.1"> is the </span><em class="italic"><span class="kobospan" id="kobo.2186.1">new paradigm of technology</span></em><span class="kobospan" id="kobo.2187.1">. </span><span class="kobospan" id="kobo.2187.2">It is an open source container </span><a id="_idIndexMarker868" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2188.1">orchestrator that manages scalable applications. </span><span class="kobospan" id="kobo.2188.2">A good place to start with this technology </span><span><span class="kobospan" id="kobo.2189.1">is </span></span><a href="https://kubebyexample.com/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.2190.1">https://kubebyexample.com/</span></span></a><span><span class="kobospan" id="kobo.2191.1">:</span></span></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer432">
<span class="kobospan" id="kobo.2192.1"><img alt="Figure 10.70 – The Kube by Example web page" src="image/B19121_10_70.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2193.1">Figure 10.70 – The Kube by Example web page</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2194.1">With Kube by Example, you can learn about Linux principles, the basics of Kubernetes, developing applications deployed on the platform, and applicable security best practices. </span><span class="kobospan" id="kobo.2194.2">It includes lots of downloadable code, practical examples, and videos so that learning can </span><span><span class="kobospan" id="kobo.2195.1">flow naturally.</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.2196.1">At </span><strong class="bold"><span class="kobospan" id="kobo.2197.1">Packt Publishing</span></strong><span class="kobospan" id="kobo.2198.1"> we don’t lag behind. </span><span class="kobospan" id="kobo.2198.2">You can access free learning content </span><span><span class="kobospan" id="kobo.2199.1">at </span></span><a href="https://www.packtpub.com/free-learning" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.2200.1">https://www.packtpub.com/free-learning</span></span></a><span><span class="kobospan" id="kobo.2201.1">:</span></span></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer433">
<span class="kobospan" id="kobo.2202.1"><img alt="Figure 10.71 – Packt free learning" src="image/B19121_10_71.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.2203.1">Figure 10.71 – Packt free learning</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2204.1">By registering, you will have unlimited access to thousands of learning materials such as e-books and video courses – free content forever! </span><span class="kobospan" id="kobo.2204.2">Don’t miss the opportunity and sign up for your </span><span><span class="kobospan" id="kobo.2205.1">free trial.</span></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.2206.1">Remember, a SysAdmin is always </span></em><span><em class="italic"><span class="kobospan" id="kobo.2207.1">reinventing themselves.</span></em></span></p>
<p class="calibre3"><em class="italic"><span class="kobospan" id="kobo.2208.1">It’s not magic. </span><span class="kobospan" id="kobo.2208.2">It’s talent </span></em><span><em class="italic"><span class="kobospan" id="kobo.2209.1">and sweat.</span></em></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2210.1">There is a lot of reference material that could guide you in your development as a </span><em class="italic"><span class="kobospan" id="kobo.2211.1">SysAdmin</span></em><span class="kobospan" id="kobo.2212.1">. </span><span class="kobospan" id="kobo.2212.2">However, if you want to look at it from a simple point of view, these three principles should help you create good habits that generate </span><span><span class="kobospan" id="kobo.2213.1">good practices.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2214.1">I hope you find </span><span><span class="kobospan" id="kobo.2215.1">them useful.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2216.1">In the next chapter, we will discuss the use and practical application of operating </span><span><span class="kobospan" id="kobo.2217.1">system tuning.</span></span></p>
<h1 id="_idParaDest-160" class="calibre5"><a id="_idTextAnchor225" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2218.1">Summary</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.2219.1">In this chapter, we reviewed the path to becoming a SysAdsmin and proposed three basic rules for the acquisition of </span><span><span class="kobospan" id="kobo.2220.1">good habits.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2221.1">First, we looked at </span><em class="italic"><span class="kobospan" id="kobo.2222.1">backing up</span></em><span class="kobospan" id="kobo.2223.1"> any information with which we have contact with the system. </span><span class="kobospan" id="kobo.2223.2">This backup will ensure that changes that are made can be returned safely in case they’re needed. </span><span class="kobospan" id="kobo.2223.3">It also provides a snapshot of the system at a certain point in time. </span><span class="kobospan" id="kobo.2223.4">Next, we looked at various task </span><em class="italic"><span class="kobospan" id="kobo.2224.1">automation</span></em><span class="kobospan" id="kobo.2225.1"> techniques to streamline our daily routine. </span><span class="kobospan" id="kobo.2225.2">This principle lightens your workload and allows SysAdmins to get free time that might be occupied with expanding their knowledge. </span><span class="kobospan" id="kobo.2225.3">The last point we considered was to </span><em class="italic"><span class="kobospan" id="kobo.2226.1">never stop learning</span></em><span class="kobospan" id="kobo.2227.1">. </span><span class="kobospan" id="kobo.2227.2">Since technology is advancing faster and faster, this should be taken as </span><span><span class="kobospan" id="kobo.2228.1">a responsibility.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.2229.1">In the following chapters, we will make use of these principles and apply them to various particular aspects of </span><em class="italic"><span class="kobospan" id="kobo.2230.1">systems administration</span></em><span class="kobospan" id="kobo.2231.1">. </span><span class="kobospan" id="kobo.2231.2">We will start by learning how to tune </span><span><span class="kobospan" id="kobo.2232.1">operating systems.</span></span></p>
</div>
</body></html>