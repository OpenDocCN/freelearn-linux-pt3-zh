["```\n[emcleroy@rhel1 ~]$ sudo systemctl enable --now nfs-server\nCreated symlink /etc/systemd/system/multi-user.target.wants/nfs-server.service → /usr/lib/systemd/system/nfs-server.service.\n```", "```\n[emcleroy@rhel1 ~]$ sudo firewall-cmd --permanent --add-service=nfs\nsuccess\n[emcleroy@rhel1 ~]$ sudo firewall-cmd --reload\nSuccess\n```", "```\n[emcleroy@rhel1 ~]$ sudo su -\n[root@rhel1 ~]# cd\n[root@rhel1 ~]# mkdir -p /share/folder\n```", "```\n[root@rhel1 ~]# exportfs -r\n[root@rhel1 ~]#\n```", "```\n[root@rhel1 ~]# exportfs\n/share/folder   rhel2\n/share/folder   rhel3\n/share/folder   192.168.1.0/24\n/share/folder   *example.com\n```", "```\n[root@rhel3 ~]# mkdir –p /share\n[root@rhel3 ~]# mount -t nfs 192.168.1.198:/share/folder /share\n```", "```\n---\n- hosts: exports\n  become: true\n  become_method: sudo\n```", "```\n  tasks:\n  - name: Make sure Directory exists\n    file:\n      path: /share/folder\n      owner: root\n      state: directory\n```", "```\n  - name: Install nfs utilities\n    package:\n      name: nfs-utils\n      state: \"2.3.3-46.el8\"\n```", "```\n  - name: the directory is shared\n    copy:\n      content: \"/share/folder *(rw,no_root_squash)\\n\"\n      dest: /etc/exports\n```", "```\n  - name: Enable and Start NFS Service\n    service:\n      name: nfs-server\n      state: started\n      enabled: yes\n```", "```\n  - name: Open firewall for NFS-Server\n    firewalld:\n      service: nfs\n      immediate: yes\n      permanent: yes\n      state: enabled\n```", "```\n---\n- hosts: clients\n  become: true\n  become_method: sudo\n  tasks:\n  - name: Install nfs utilities\n    package:\n      name: nfs-utils\n      state: present\n  - name: Add the NFS share and mount it with fstab\n    mount:\n      path: /share\n      src: 192.168.1.198:/share/folder\n      state: mounted\n      fstype: nfs\n```", "```\n[emcleroy@rhel1 ~]$ sudo dnf install samba -y\n```", "```\n[emcleroy@rhel1 ~]$ sudo mkdir -p /share/smbfolder\n```", "```\n[emcleroy@rhel1 ~]$ sudo systemctl enable --now smb\nCreated symlink /etc/systemd/system/multi-user.target.wants/smb.service → /usr/lib/systemd/system/smb.service.\n```", "```\n[emcleroy@rhel1 ~]$ sudo firewall-cmd --permanent --add-service=samba\nsuccess\n[emcleroy@rhel1 ~]$ sudo firewall-cmd  --reload\nsuccess\n```", "```\n[emcleroy@rhel1 ~]$ sudo groupadd admins\n[emcleroy@rhel1 ~]$ sudo chgrp admins /share/smbfolder/\n```", "```\n[emcleroy@rhel1 ~]$ sudo semanage fcontext -a -t samba_share_t \"/share/smbfolder(/.*)?\"\n[emcleroy@rhel1 ~]$ sudo restorecon -Rv /share/smbfolder\n```", "```\n[emcleroy@rhel1 ~]$sudo vi /etc/samba/smb.conf\n```", "```\n[emcleroy@rhel1 ~]$ sudo adduser -M sambauser -s /sbin/nologin\n[emcleroy@rhel1 ~]$ sudo smbpasswd -a sambauser\nNew SMB password:\nRetype new SMB password:\nAdded user sambauser.\n```", "```\n[emcleroy@rhel1 ~]$ sudo systemctl start smb\n```", "```\n[root@rhel2 ~]# dnf install cifs-utils\n[root@rhel2 ~]# mkdir –p /share/folder\n[root@rhel2 ~]# mount -t cifs -o username=sambauser //192.168.1.198/smbshareconfig /share/folder\n```", "```\n[global]\nworkgroup = SAMBA\nsecurity = domain\n```", "```\n[smbshareconfig]\npath = /smb/smbfolder\nvalid users = systemadmin1, @engineers\nwrite list = @engineers\n```", "```\n[emcleroy@rhel1 ~]$ vi /tmp/creds.txt\n```", "```\nusername=smbuser\npassword=redhat\n```", "```\n//rhel1.example.com/smbshareconfig /mnt/shared cifs credentials=/tmp/creds.txt,multiuser 0 0\n```", "```\n[emcleroy@rhel3 ~]$ mkdir smb_playbook\n[emcleroy@rhel3 ~]$ cd smb_playbook/\n[emcleroy@rhel3 smb_playbook]$ vi smb_playbook.yml\n---\n- hosts: sambashare\n  become: true\n  become_method: sudo\n```", "```\n  tasks:\n    - name: Install Samba and Samba-Client\n      package:\n        name:\n          - samba\n          - samba-client\n          - cifs-utils\n        state: latest\n```", "```\n    - name: Create groups that are allowed\n      group:\n        name: \"admins\"\n        system: yes\n```", "```\n    - name: Add SMB user\n      user:\n        name: \"smbuser\"\n        shell: \"/sbin/nologin\"\n        create_home: no\n        system: yes\n    - name: Set SMB password for user\n      command: smbpasswd -s -a smbuser\n      args:\n        stdin: \"redhat\\nredhat\"\n```", "```\n    - name: Add SMB users to the groups that are allowed\n      user:\n        name: \"smbuser\"\n        group: \"admins\"\n        append: \"true\"\n```", "```\n    - name: Create the directory to share\n      file:\n        path: \"/shared/smbfolder\"\n        owner: \"root\"\n        group: \"admins\"\n        mode: \"2775\"\n        state: \"directory\"\n        setype: \"samba_share_t\"\n```", "```\n    - name: Add the directory to the smb.conf file\n      blockinfile:\n        path: /etc/samba/smb.conf\n        block: |\n          [sambasharefolder]\n                    path = /shared/smbfolder\n                    writeable = yes\n                    valid users = sambauser, @admins\n                    write list = @admins\n```", "```\n    - name: Start or restart SMB for changes and enable it\n      service:\n        name: \"smb\"\n        state: \"restarted\"\n        enabled: \"true\"\n```", "```\n    - name: Add firewall rules to allow connectivity out\n      firewalld:\n        service: \"samba\"\n        state: \"enabled\"\n        immediate: \"true\"\n        permanent: \"true\"\n```", "```\n[emcleroy@rhel3 smb_playbook]$ ansible-playbook -i inventory smb_playbook.yml -u emcleroy -k --ask-become-pass\n```", "```\n---\n- hosts: sambaclient\n  become: true\n  become_method: sudo\n  tasks:\n    - name: Install Samba and Samba-Client\n      package:\n        name:\n          - samba\n          - samba-client\n          - cifs-utils\n        state: latest\n    - name: Create a credential txt file\n      copy:\n        content: \"username=smbuser\\npassword=redhat\\n\"\n        dest: /tmp/creds.txt\n        owner: \"root\"\n        group: \"root\"\n        mode: \"0600\"\n```", "```\n    - name: mount directory created\n      file:\n        path: \"/mnt/shared\"\n        state: directory\n        owner: \"root\"\n        group: \"root\"\n    - name: Mount the SMB share.\n      shell: \"mount -t cifs //192.168.1.198/smbfolder/mnt/shared -o credentials=/tmp/creds.txt\"\n```"]