<html><head></head><body>
<div id="_idContainer367">
<h1 class="chapter-number" id="_idParaDest-257"><a id="_idTextAnchor346"/><span class="koboSpan" id="kobo.1.1">12</span></h1>
<h1 id="_idParaDest-258"><a id="_idTextAnchor347"/><span class="koboSpan" id="kobo.2.1">Navigating Ansible Waters</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this chapter, we’ll walk through several recipes that will expand your knowledge on installing </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Oracle Linux Automation Manager</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">OLAM</span></strong><span class="koboSpan" id="kobo.7.1">), managing its foundation, creating playbooks, maximizing those playbooks, and helping you understand the capabilities of OLAM. </span><span class="koboSpan" id="kobo.7.2">Each recipe will open your eyes to the full scope of what automation can accomplish; from patching to deploying fully functional hybrid cloud environments, OLAM can change the direction in which you think of computing and open your mind to a new world of rinse and repeat. </span><span class="koboSpan" id="kobo.7.3">The following are the touch points of a small subsection of what automation </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">can simplify.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer296">
<span class="koboSpan" id="kobo.9.1"><img alt="Figure 12.1 – Automation touch points" src="image/B18349_12_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.10.1">Figure 12.1 – Automation touch points</span></p>
<p><span class="koboSpan" id="kobo.11.1">In this chapter, the following recipes will cover the installation, configuration, and usability of the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">OLAM platform:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.13.1">Installing OLAM</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Zip through configuring and managing OLAM from the </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">foundation up</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">OLAM isn’t fantasy football, but they both </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">use playbooks</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Controlling the </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">patching chaos</span></span></li>
<li><span class="koboSpan" id="kobo.20.1">Look </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">beyond automation</span></span></li>
<li><span class="koboSpan" id="kobo.22.1">Set it and </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">forget it</span></span></li>
</ul>
<h1 id="_idParaDest-259"><a id="_idTextAnchor348"/><span class="koboSpan" id="kobo.24.1">Installing OLAM</span></h1>
<p><span class="koboSpan" id="kobo.25.1">Since the dawn of time we, as the human</span><a id="_idIndexMarker1074"/><span class="koboSpan" id="kobo.26.1"> race, have tried to make things easier, quicker, and more efficient. </span><span class="koboSpan" id="kobo.26.2">However, I’m sure most of us have heard from our parents, “</span><em class="italic"><span class="koboSpan" id="kobo.27.1">Never take shortcuts</span></em><span class="koboSpan" id="kobo.28.1">," or “</span><em class="italic"><span class="koboSpan" id="kobo.29.1">When I was a kid, I had to walk to and from school uphill, in the snow, with one leg, both ways.</span></em><span class="koboSpan" id="kobo.30.1">” These anecdotes really never change; they evolve as we get to our parent’s age, and we try to pass on our wisdom to the next generation. </span><span class="koboSpan" id="kobo.30.2">Well, what if I told you that you could have your cake and eat it too? </span><span class="koboSpan" id="kobo.30.3">Automation is the evolution of computing and the automation of repeatable tasks. </span><span class="koboSpan" id="kobo.30.4">Now, of course, we can’t automate everything, and there are certain tasks that aren’t worth the effort to automate, because they’re not repeatable or the factors change to the point that automation would break </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">the process.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">The dictionary definition of automation is “</span><em class="italic"><span class="koboSpan" id="kobo.33.1">the application of technology, programs, robotics, or process to achieve outcomes with minimal human input</span></em><span class="koboSpan" id="kobo.34.1">." </span><span class="koboSpan" id="kobo.34.2">Note </span><em class="italic"><span class="koboSpan" id="kobo.35.1">process</span></em><span class="koboSpan" id="kobo.36.1"> – the process in which we change, execute, or alter the outcome of a result. </span><span class="koboSpan" id="kobo.36.2">Automation is that process change. </span><span class="koboSpan" id="kobo.36.3">We can automate the installation of an application, such as the installation of Microsoft Office, or an antivirus; we’ve been automating these processes since the beginning of the world of computing. </span><span class="koboSpan" id="kobo.36.4">Now, we carry automation to the next level. </span><span class="koboSpan" id="kobo.36.5">Take, for instance, Ansible Tower, Red Hat’s version of automation. </span><span class="koboSpan" id="kobo.36.6">Both Ansible and OLAM are built on AWX, which is a powerful and modern web UI and API that allows you to easily manage your organization’s Ansible playbook, inventories, vault, and credentials. </span><span class="koboSpan" id="kobo.36.7">With AWX, you can streamline your automation processes and simplify your infrastructure management tasks, all from a single, user-friendly interface.  </span><span class="koboSpan" id="kobo.36.8">For instance, say that a university computer science professor has a lab to prepare every week; the lab has 50 students, and each one requires a separate virtual lab to participate. </span><span class="koboSpan" id="kobo.36.9">The professor wouldn’t want to sit there and rebuild the lab environment every week. </span><span class="koboSpan" id="kobo.36.10">With Ansible, a playbook (not the football playbook, but an outline and functional requirements) can be put together to execute a subset of commands automating the creation of that lab environment. </span><span class="koboSpan" id="kobo.36.11">By creating that playbook, an engineer can alter a few variables to change the number of virtual machines, memory, vCPU, or any other resource or application being used. </span><span class="koboSpan" id="kobo.36.12">Essentially, Ansible and the Ansible playbook shorten the process of creating that lab exponentially, making it repeatable and saving the professor from recreating it </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">every week.</span></span></p>
<p><span class="koboSpan" id="kobo.38.1">OLAM is an automation suite and comes bundled as an open source Linux distribution (Oracle Linux), based on AWX and Ansible Tower. </span><span class="koboSpan" id="kobo.38.2">OLAM is a configurable automation platform, much like Ansible, with the ability to create, manage and change playbooks. </span><span class="koboSpan" id="kobo.38.3">OLAM is installed</span><a id="_idIndexMarker1075"/><span class="koboSpan" id="kobo.39.1"> with a UI, as you’ll see later in this recipe, as well as a CLI. </span><span class="koboSpan" id="kobo.39.2">Both the UI and CLI are fully functional and have all the granularity of Ansible Tower, available at no cost, with a premier support subscription. </span><span class="koboSpan" id="kobo.39.3">OLAM can be used, as shown in the following figure, to create playbooks that can automate processes within multiple arenas, from on-premise virtualization farms and HCI environments to application deployments, reaching into multiple cloud platforms and hybrid </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">cloud distributions.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer297">
<span class="koboSpan" id="kobo.41.1"><img alt="Figure 12.2 – The playbook hierarchy" src="image/B18349_12_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.42.1">Figure 12.2 – The playbook hierarchy</span></p>
<p><span class="koboSpan" id="kobo.43.1">In this recipe, we’ll be installing OLAM. </span><span class="koboSpan" id="kobo.43.2">As with any application installation, we need to prepare a base environment to install the application on – in this case, Oracle Linux 8 of course. </span><span class="koboSpan" id="kobo.43.3">We’ll need to prepare and configure that OS, which we will not be walking through in detail, as that was covered in a previous recipe in this book. </span><span class="koboSpan" id="kobo.43.4">However, it is advisable that you install the OS with </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">a GUI.</span></span></p>
<h2 id="_idParaDest-260"><a id="_idTextAnchor349"/><span class="koboSpan" id="kobo.45.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.46.1">We’ll be installing OLAM</span><a id="_idIndexMarker1076"/><span class="koboSpan" id="kobo.47.1"> in </span><strong class="bold"><span class="koboSpan" id="kobo.48.1">Oracle Cloud Infrastructure</span></strong><span class="koboSpan" id="kobo.49.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.50.1">OCI</span></strong><span class="koboSpan" id="kobo.51.1">) as a virtual machine. </span><span class="koboSpan" id="kobo.51.2">Refer to </span><em class="italic"><span class="koboSpan" id="kobo.52.1">Chapters 3</span></em><span class="koboSpan" id="kobo.53.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.54.1">4</span></em><span class="koboSpan" id="kobo.55.1"> on navigating and configuring OCI virtual machines. </span><span class="koboSpan" id="kobo.55.2">We’ll briefly walk through the creation of the VM in the </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.57.1">Navigate to OCI </span><strong class="bold"><span class="koboSpan" id="kobo.58.1">Instances</span></strong><span class="koboSpan" id="kobo.59.1">, to create</span><a id="_idIndexMarker1077"/><span class="koboSpan" id="kobo.60.1"> a host instance </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">for OLAM:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer298">
<span class="koboSpan" id="kobo.62.1"><img alt="Figure 12.3 – Instances for VM Creation" src="image/B18349_12_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.63.1">Figure 12.3 – Instances for VM Creation</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.64.1">You’ll want to create an instance, by clicking on </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.65.1">Create instance</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer299">
<span class="koboSpan" id="kobo.67.1"><img alt="Figure 12.4 – Instance Creation" src="image/B18349_12_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.68.1">Figure 12.4 – Instance Creation</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.69.1">You can name your instance, and select a compartment to host </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">the VM:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer300">
<span class="koboSpan" id="kobo.71.1"><img alt="Figure 12.5 – Name your instance" src="image/B18349_12_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.72.1">Figure 12.5 – Name your instance</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.73.1">After naming</span><a id="_idIndexMarker1078"/><span class="koboSpan" id="kobo.74.1"> the VM, you can select the location, or </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">Availability Domain</span></strong><span class="koboSpan" id="kobo.76.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.77.1">AD</span></strong><span class="koboSpan" id="kobo.78.1">) you want to host the VM. </span><span class="koboSpan" id="kobo.78.2">The AD we’re using</span><a id="_idIndexMarker1079"/><span class="koboSpan" id="kobo.79.1"> is the default AD </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">for OCI:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer301">
<span class="koboSpan" id="kobo.81.1"><img alt="Figure 12.6 – Availability Domain" src="image/B18349_12_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.82.1">Figure 12.6 – Availability Domain</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.83.1">We’re giving our VM 8 GB of RAM and 2 vCPUs, so we’ll want to select the correct host configuration. </span><span class="koboSpan" id="kobo.83.2">You’ll want to edit and change the shape as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">following screenshot:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer302">
<span class="koboSpan" id="kobo.85.1"><img alt="Figure 12.7 – Image Size and Shape" src="image/B18349_12_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.86.1">Figure 12.7 – Image Size and Shape</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.87.1">Edit the shape by clicking</span><a id="_idIndexMarker1080"/><span class="koboSpan" id="kobo.88.1"> on </span><strong class="bold"><span class="koboSpan" id="kobo.89.1">Change shape</span></strong><span class="koboSpan" id="kobo.90.1"> and select your shape as shown under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.91.1">Shape name</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer303">
<span class="koboSpan" id="kobo.93.1"><img alt="Figure 12.8 – VM Shape Selection" src="image/B18349_12_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.94.1">Figure 12.8 – VM Shape Selection</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.95.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.96.1">VM.Standard.E3.FLEX</span></strong><span class="koboSpan" id="kobo.97.1"> shape allows</span><a id="_idIndexMarker1081"/><span class="koboSpan" id="kobo.98.1"> you to specify </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">your resources:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer304">
<span class="koboSpan" id="kobo.100.1"><img alt="Figure 12.9 – VM Resource Configuration" src="image/B18349_12_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.101.1">Figure 12.9 – VM Resource Configuration</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.102.1">We’re going to select 8 GB of RAM (memory) and 2 vCPUs. </span><span class="koboSpan" id="kobo.102.2">The minimal requirements for OLAM are 2 vCPU’s and 4 GB </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">of RAM:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer305">
<span class="koboSpan" id="kobo.104.1"><img alt="Figure 12.10 – VM Resource Selections" src="image/B18349_12_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.105.1">Figure 12.10 – VM Resource Selections</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.106.1">After configuring your VM resources, you’ll have to configure your access keys (</span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">public key):</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer306">
<span class="koboSpan" id="kobo.108.1"><img alt="Figure 12.11 – SSH Key choices" src="image/B18349_12_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">Figure 12.11 – SSH Key choices</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.110.1">You can either create, upload, paste, or continue</span><a id="_idIndexMarker1082"/><span class="koboSpan" id="kobo.111.1"> without a key. </span><span class="koboSpan" id="kobo.111.2">We’re going to paste our key, by selecting the key, and copying the </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">pasted key:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer307">
<span class="koboSpan" id="kobo.113.1"><img alt="Figure 12.12 – SSH Key Pasting" src="image/B18349_12_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.114.1">Figure 12.12 – SSH Key Pasting</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.115.1">After configuring your key, scroll down to the end of the instance screen, and click </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.117.1">Create</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer308">
<span class="koboSpan" id="kobo.119.1"><img alt="Figure 12.13 – VM Creation" src="image/B18349_12_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.120.1">Figure 12.13 – VM Creation</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.121.1">Once you’ve created your instance, access</span><a id="_idIndexMarker1083"/><span class="koboSpan" id="kobo.122.1"> the VM using SSH with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.123.1">opc</span></strong><span class="koboSpan" id="kobo.124.1"> user and </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">your key:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.126.1">% ssh -i sshkey_private_lab opc@193.122.148.147</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.127.1">The authenticity of host '193.122.148.147 (193.122.148.147)' can't be established.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.128.1">ED25519 key fingerprint is SHA256:nF+ilxdx0SpWZZxiFZOJFvektZc8YhBI76j1Qm64w3A.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.129.1">This key is not known by any other names</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.130.1">Are you sure you want to continue connecting (yes/no/[fingerprint])? </span><span class="koboSpan" id="kobo.130.2">yes</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.131.1">Warning: Permanently added '193.122.148.147' (ED25519) to the list of known hosts.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.132.1">Activate the web console with: systemctl enable --now cockpit.socket</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.133.1">[opc@instance-20231213-2350 ~]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.134.1">Adding a YUM repository </span><a id="_idIndexMarker1084"/><span class="koboSpan" id="kobo.135.1">isn’t difficult at all, and it enables you to update, install, deinstall, or patch certain aspects at the OS and kernel levels, including applications. </span><span class="koboSpan" id="kobo.135.2">As mentioned earlier in the chapter, you can add these repositories, via DNF to the OS, while walking through the GUI, or later after the installation. </span><span class="koboSpan" id="kobo.135.3">Either way, you’ll have to either have access to the outside, meaning we’ll have to be able to reach out of the environment to Oracle repositories or a local mirror set up. </span><span class="koboSpan" id="kobo.135.4">We’re not going to walk through setting up a local mirror, but we will walk through adding the repos </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">using DNF:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.137.1">
[</span><strong class="bold"><span class="koboSpan" id="kobo.138.1">opc@olam-test ~]$ sudo DNF -y install oraclelinux-release-el8</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.139.1">Ksplice for Oracle Linux 8 (x86_64)                                                39 MB/s | 3.2 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.140.1">MySQL 8.0 for Oracle Linux 8 (x86_64)                                              38 MB/s | 3.0 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.141.1">MySQL 8.0 Tools Community for Oracle Linux 8 (x86_64)                             7.3 MB/s | 491 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.142.1">MySQL 8.0 Connectors Community for Oracle Linux 8 (x86_64)                        600 kB/s |  30 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.143.1">Oracle Software for OCI users on Oracle Linux 8 (x86_64)                           96 MB/s |  93 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.144.1">Oracle Linux 8 BaseOS Latest (x86_64)                                             118 MB/s |  62 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.145.1">Oracle Linux 8 Application Stream (x86_64)                                        114 MB/s |  48 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.146.1">Oracle Linux 8 Addons (x86_64)                                                     56 MB/s | 6.9 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.147.1">Latest Unbreakable Enterprise Kernel Release 7 for Oracle Linux 8 (x86_64)         95 MB/s |  18 MB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.148.1">Package oraclelinux-release-el8-1.0-32.el8.x86_64 is already installed.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.149.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.150.1">Nothing to do.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.151.1">Complete!</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.152.1">As shown in the preceding code, we’re adding several repos; most of these are required for either OS-level patches or </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">installing OLAM.</span></span></p></li> <li><span class="koboSpan" id="kobo.154.1">One of the most important aspects</span><a id="_idIndexMarker1085"/><span class="koboSpan" id="kobo.155.1"> of all the prerequisites is the ability for an application to see outside of the internal system into the ecosystem; in order to do this, we need to open up a portal outside of the internal system – in other words, we open firewall ports, as </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.157.1">[opc@olam-test ~]$ sudo firewall-cmd --add-port=27199/tcp --permanent</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.158.1">success</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.159.1">[opc@olam-test ~]$ sudo firewall-cmd --add-service=http --permanent</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.160.1">success</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.161.1">[opc@olam-test ~]$ sudo firewall-cmd --add-service=https --permanent</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.162.1">success</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.163.1">[opc@olam-test ~]$ sudo firewall-cmd --reload</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.164.1">success</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.165.1">[opc@olam-test ~]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.166.1">After we open those</span><a id="_idIndexMarker1086"/><span class="koboSpan" id="kobo.167.1"> ports, we’re going to have to enable the repo we just installed with DNF. </span><span class="koboSpan" id="kobo.167.2">This can be done before configuring the firewall </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">as well:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.169.1">[opc@olam-test ~]$ sudo DNF config-manager --enable ol8_baseos_latest</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.170.1">[opc@olam-test ~]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.171.1">After enabling that repo, we need to install and configure the OLAM repo, as </span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.173.1">[opc@olam-test ~]$ sudo DNF install oraclelinux-automation-manager-release-el8</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.174.1">Oracle Linux 8 BaseOS Latest Oracle Linux 8</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.175.1"> Application Stream Oracle</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.176.1">Linux 8 Addons</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.177.1">Truncated for size</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.178.1">Complete!</span></strong></pre></li> <li><span class="koboSpan" id="kobo.179.1">As we did with the base repo, we need to enable the OLAM repo </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">as well:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.181.1">
[</span><strong class="bold"><span class="koboSpan" id="kobo.182.1">opc@olam-test ~]$ sudo DNF config-manager --enable ol8_automation2 ol8_addons ol8_UEKR7 ol8_appstream</span></strong></pre></li> <li><span class="koboSpan" id="kobo.183.1">After enabling the newer OLAM repository, we need to disable the </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">old one:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.185.1">[opc@olam-test ~]$ sudo DNF config-manager --disable ol8_automation</span></strong></pre></li> <li><span class="koboSpan" id="kobo.186.1">Once that is done, we’ve completed</span><a id="_idIndexMarker1087"/><span class="koboSpan" id="kobo.187.1"> the prerequisites for the OLAM installation from an application perspective. </span><span class="koboSpan" id="kobo.187.2">However, we need to prepare the database for OLAM now. </span><span class="koboSpan" id="kobo.187.3">In order to do this, we need to install and configure the database module. </span><span class="koboSpan" id="kobo.187.4">OLAM uses a Postgres database, which is SQL-based. </span><span class="koboSpan" id="kobo.187.5">The following is the command to install </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">that module:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.189.1">[opc@olam-test ~]$ sudo DNF module reset postgresql</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.190.1">Oracle Linux 8 BaseOS Latest (x86_64)                                       157 kB/s | 3.6 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.191.1">Oracle Linux 8 Application Stream (x86_64)                                  233 kB/s | 3.9 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.192.1">Oracle Linux 8 Addons (x86_64)                                              153 kB/s | 3.0 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.193.1">Oracle Linux Automation Manager 2.0 based on the open source projects Ansib 3.1 MB/s | 644 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.194.1">Latest Unbreakable Enterprise Kernel Release 7 for Oracle Linux 8 (x86_64)  147 kB/s | 3.0 kB     00:00</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.195.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.196.1">Nothing to do.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.197.1">Complete!</span></strong></pre></li> <li><span class="koboSpan" id="kobo.198.1">Once we install the module, it needs to </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">be enabled:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.200.1">[opc@olam-test ~]$ sudo DNF module enable postgresql:13</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.201.1">Last metadata expiration check: 0:00:54 ago on Tue 22 Aug 2023 07:12:29 PM GMT.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.202.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.203.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.204.1"> Package                  Architecture            Version                     Repository                Size</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.205.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.206.1">Enabling module streams:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.207.1"> postgresql                                       13</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.208.1">Transaction Summary</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.209.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.210.1">Is this ok [y/N]: y</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.211.1">Complete!</span></strong></pre></li> <li><span class="koboSpan" id="kobo.212.1">Now that we’ve installed and enabled the Postgres</span><a id="_idIndexMarker1088"/><span class="koboSpan" id="kobo.213.1"> module, we can install </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">the database:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.215.1">[opc@olam-test ~]$ sudo DNF install postgresql-server</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.216.1">Last metadata expiration check: 0:02:35 ago on Tue 22 Aug 2023 07:12:29 PM GMT.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.217.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.218.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.219.1"> Package                Arch        Version                                         Repository          Size</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.220.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.221.1">Installing:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.222.1"> postgresql-server      x86_64      13.11-1.0.1.module+el8.8.0+21141+00b1aed9      ol8_appstream      5.6 M</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.223.1">Installing dependencies:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.224.1"> libpq                  x86_64      13.5-1.el8                                     ol8_appstream      198 k</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.225.1"> postgresql             x86_64      13.11-1.0.1.module+el8.8.0+21141+00b1aed9      ol8_appstream      1.5 M</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.226.1">Transaction Summary</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.227.1">============================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.228.1">Install  3 Packages</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.229.1">The output has been truncated…</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.230.1">Installed:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.231.1">  libpq-13.5-1.el8.x86_64</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.232.1">  postgresql-13.11-1.0.1.module+el8.8.0+21141+00b1aed9.x86_64</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.233.1">  postgresql-server-13.11-1.0.1.module+el8.8.0+21141+00b1aed9.x86_64</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.234.1">Complete!</span></strong></pre></li> <li><span class="koboSpan" id="kobo.235.1">Initiating the database</span><a id="_idIndexMarker1089"/><span class="koboSpan" id="kobo.236.1"> is next. </span><span class="koboSpan" id="kobo.236.2">This prepares it for use and allows data to be overwritten if </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">already present:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.238.1">[opc@olam-test ~]$ sudo postgresql-setup --initdb</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.239.1"> * Initializing database in '/var/lib/pgsql/data'</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.240.1"> * Initialized, logs are in /var/lib/pgsql/initdb_postgresql.log</span></strong></pre></li> <li><span class="koboSpan" id="kobo.241.1">After the initiation, you’ll want</span><a id="_idIndexMarker1090"/><span class="koboSpan" id="kobo.242.1"> to change the password schema to </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">match requirements:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.244.1">[opc@olam-test ~]$ sudo sed -i "s/#password_encryption.*/password_encryption = scram-sha-256/" /var/lib/pgsql/data/postgresql.conf</span></strong></pre></li> <li><span class="koboSpan" id="kobo.245.1">Now, we will enable the database, as </span><span class="No-Break"><span class="koboSpan" id="kobo.246.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.247.1">[opc@olam-test ~]$ sudo systemctl enable --now postgresql</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.248.1">Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /usr/lib/systemd/system/postgresql.service.</span></strong></pre></li> <li><span class="koboSpan" id="kobo.249.1">After enabling the database, we want to make sure everything is prepared for the OLAM installation, so we’ll want to get the status of the database. </span><span class="koboSpan" id="kobo.249.2">The following is the command to display </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">the status:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.251.1">[opc@olam-test ~]$ sudo systemctl status postgresql</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.252.1">● postgresql.service - PostgreSQL database server</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.253.1">   Loaded: loaded (/usr/lib/systemd/system/postgresql.service; enabled; vendor preset: disabled)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.254.1">   Active: active (running) since Tue 2023-08-22 19:18:44 GMT; 23s ago</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.255.1">  Process: 46810 ExecStartPre=/usr/libexec/postgresql-check-db-dir postgresql (code=exited, status=0/SUCCES&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.256.1"> Main PID: 46813 (postmaster)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.257.1">    Tasks: 8 (limit: 22519)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.258.1">   Memory: 16.9M</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.259.1">   CGroup: /system.slice/postgresql.service</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.260.1">           ├─46813 /usr/bin/postmaster -D /var/lib/pgsql/data</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.261.1">           ├─46814 postgres: logger</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.262.1">           ├─46816 postgres: checkpointer</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.263.1">           ├─46817 postgres: background writer</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.264.1">           ├─46818 postgres: walwriter</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.265.1">           ├─46819 postgres: autovacuum launcher</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.266.1">           ├─46820 postgres: stats collector</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.267.1">           └─46821 postgres: logical replication launcher</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.268.1">Aug 22 19:18:44 olam-test systemd[1]: Starting PostgreSQL database server...</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.269.1">Aug 22 19:18:44 olam-test postmaster[46813]: 2023-08-22 19:18:44.097 GMT [46813] LOG:  redirecting log outp&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.270.1">Aug 22 19:18:44 olam-test postmaster[46813]: 2023-08-22 19:18:44.097 GMT [46813] HINT:  Future log output w&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.271.1">Aug 22 19:18:44 olam-test systemd[1]: Started PostgreSQL database server.</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.272.1">As you see in the preceding code, </span><strong class="source-inline"><span class="koboSpan" id="kobo.273.1">active (running)</span></strong><span class="koboSpan" id="kobo.274.1"> tells you that the database is active and</span><a id="_idIndexMarker1091"/><span class="koboSpan" id="kobo.275.1"> running, and you’re ready to start the installation </span><span class="No-Break"><span class="koboSpan" id="kobo.276.1">of OLAM.</span></span></p></li> </ol>
<p><span class="koboSpan" id="kobo.277.1">Once this is done, we’re ready to get into the meat and potatoes – </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">installing OLAM.</span></span></p>
<h2 id="_idParaDest-261"><a id="_idTextAnchor350"/><span class="koboSpan" id="kobo.279.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.280.1">After we’ve completed</span><a id="_idIndexMarker1092"/><span class="koboSpan" id="kobo.281.1"> the prerequisites, we’re ready to move on to the installation. </span><span class="koboSpan" id="kobo.281.2">Remember that the firewall ports, installing the YUM repositories and Postgres, and enabling them are important. </span><span class="koboSpan" id="kobo.281.3">Without these prerequisites, you will not be able to move forward and the installation </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">will fail:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.283.1">The first step to install OLAM is the creation of the AWX user. </span><span class="koboSpan" id="kobo.283.2">Remember that AWX is the foundation that OLAM is built on, so this is </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">really important:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.285.1">[opc@olam-test ~]$ sudo su - postgres -c "createuser -S -P awx"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.286.1">Enter password for new role: welcome1</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.287.1">Enter it again: welcome1</span></strong></pre></li> <li><span class="koboSpan" id="kobo.288.1"> Now, that we’ve installed the database engine, we’re going to install the database, as </span><span class="No-Break"><span class="koboSpan" id="kobo.289.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.290.1">[opc@olam-test ~]$ sudo su - postgres -c "createdb -O awx awx"</span></strong></pre></li> <li><span class="koboSpan" id="kobo.291.1">After we install the database, we want to edit the </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">config file:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.293.1">[root@olam-test ~]# vi /var/lib/pgsql/data/pg_hba.conf</span></strong></pre></li> <li><span class="koboSpan" id="kobo.294.1">Do you remember when we defined the password variables? </span><span class="koboSpan" id="kobo.294.2">Here, we’re notating that in the host-based authentication config file, highlighted in the following snippet.  </span><span class="koboSpan" id="kobo.294.3">After we’re finished, we’ll want to make sure to save and exit </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">the configuration:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.296.1">
# TYPE  DATABASE        USER            ADDRESS                  METHOD
# "local" is for Unix domain socket connections only
local   all             all                                      peer
# IPv4 local connections:
host    all             all             127.0.0.1/32             ident
# IPv6 local connections:
host    all             all             ::1/128                  ident
# Allow replication connections from localhost, by a user with the
# replication privilege.
</span><span class="koboSpan" id="kobo.296.2">local   replication     all                                      peer
host    replication     all             127.0.0.1/32             ident
host    replication     all             ::1/128                  ident
</span><strong class="bold"><span class="koboSpan" id="kobo.297.1">host all all 0.0.0.0/0 scram-sha-256</span></strong></pre></li> <li><span class="koboSpan" id="kobo.298.1">Now, we’re going</span><a id="_idIndexMarker1093"/><span class="koboSpan" id="kobo.299.1"> to edit the Postgres config file; this further defines the database and how it’s accessed. </span><span class="koboSpan" id="kobo.299.2">You’ll want to annotate this with the NAT (mapping private addresses to a public IP in the simplest of terms) address of the host – that is, your virtual machine. </span><span class="koboSpan" id="kobo.299.3">The editable section is between the quotation marks – </span><strong class="source-inline"><span class="koboSpan" id="kobo.300.1">'OCI </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">NAT Address'</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.303.1">[root@olam-test ~]# vi /var/lib/pgsql/data/postgresql.conf</span></strong><span class="koboSpan" id="kobo.304.1">
#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------
# - Connection Settings -
</span><strong class="bold"><span class="koboSpan" id="kobo.305.1">listen_addresses = 'OCI NAT Address'</span></strong><span class="koboSpan" id="kobo.306.1"> – IP address in ifconfig
#listen_addresses = 'localhost'         # what IP address(es) to listen on;</span></pre></li> <li><span class="koboSpan" id="kobo.307.1">After editing that file, again, make sure to save and exit that configuration. </span><span class="koboSpan" id="kobo.307.2">After you have saved the file, you’ll want to restart Postgres to make sure all of your changes have </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">been committed:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.309.1">[root@olam-test ~]# systemctl restart postgresql</span></strong></pre></li> <li><span class="koboSpan" id="kobo.310.1">After all these changes</span><a id="_idIndexMarker1094"/><span class="koboSpan" id="kobo.311.1"> have been committed, I always like to update all the YUM repos and make sure we have all the updates loaded. </span><span class="koboSpan" id="kobo.311.2">In order to do this, we have to update our system. </span><span class="koboSpan" id="kobo.311.3">The following is the DNF command to update </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">the repositories:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.313.1">[root@olam-test ~]# DNF update -y</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.314.1">Last metadata expiration check: 1:43:57 ago on Tue 22 Aug 2023 10:48:21 PM GMT.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.315.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.316.1">============================================================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.317.1"> Package                                   Architecture       Version                                      Repository                     Size</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.318.1">============================================================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.319.1">The output has been truncated for length.</span></strong></pre></li> <li><span class="koboSpan" id="kobo.320.1">After you’ve updated</span><a id="_idIndexMarker1095"/><span class="koboSpan" id="kobo.321.1"> all of the YUM repositories, take a quick look at the preceding code, and note all of the repos we added and enabled in the previous section. </span><span class="koboSpan" id="kobo.321.2">You’ll want to restart your virtual machine to make sure all the changes </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">are reflected:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.323.1">[root@olam-test ~]# reboot</span></strong></pre></li> <li><span class="koboSpan" id="kobo.324.1">The following is the command and the output to </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">install OLAM:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.326.1">[root@olam-test ~]# DNF -y install ol-automation-manager</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.327.1">Last metadata expiration check: 1:52:46 ago on Tue 22 Aug 2023 10:48:21 PM GMT.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.328.1">Dependencies resolved.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.329.1">============================================================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.330.1"> Package                              Architecture    Version                                               Repository                   Size</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.331.1">============================================================================================================================================</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.332.1">Installing:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.333.1"> ol-automation-manager                x86_64          2.0.1-3.el8                                          ol8_automation2             41 M</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.334.1">Installing dependencies:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.335.1">The output has been truncated for length</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.336.1">[root@olam-test ~]# vi /etc/redis.conf</span></strong></pre></li> <li><span class="koboSpan" id="kobo.337.1">Now, you’ll want to exit root, which is very important; you cannot continue as root </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">for AWX:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.339.1">[root@olam-test ~]# exit</span></strong></pre></li> <li><span class="koboSpan" id="kobo.340.1">Here’s where we’ll be changing our user to </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">awx</span></strong><span class="koboSpan" id="kobo.342.1"> to continue </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">the installation:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.344.1">[opc@olam-test ~]# su -l awx -s /bin/bash</span></strong></pre></li> <li><span class="koboSpan" id="kobo.345.1">Since OLAM runs in a cloud-native</span><a id="_idIndexMarker1096"/><span class="koboSpan" id="kobo.346.1"> environment, we’re using Podman to orchestrate the tuning and creation of that fabric. </span><span class="koboSpan" id="kobo.346.2">The following is the command to use the latest version of Podman to migrate to and create that environment within your </span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">virtual machine:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.348.1">[awx@olam-test ~]$ podman system migrate</span></strong></pre></li> <li><span class="koboSpan" id="kobo.349.1">Now, we’re going to pull down the latest version of OLAM from the Oracle Docker registry, by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.351.1">[awx@olam-test ~]$ podman pull container-registry.oracle.com/oracle_linux_automation_manager/olam-ee:latest</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.352.1">Trying to pull container-registry.oracle.com/oracle_linux_automation_manager/olam-ee:latest...</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.353.1">Getting image source signatures</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.354.1">Copying blob 1ca7c848b9e5 done</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.355.1">Copying blob a2cd216732a7 done</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.356.1">Copying blob 13ec27f79a4b done</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.357.1">Copying blob 0b5aff3da93f done</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.358.1">Copying config b764e737f4 done</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.359.1">Writing manifest to image destination</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.360.1">Storing signatures</span></strong></pre></li> <li><span class="koboSpan" id="kobo.361.1">Now, we want to migrate our environment to </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">the containers:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.363.1">[awx@olam-test ~]$ awx-manage migrate</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.364.1">Operations to perform:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.365.1">  Apply all migrations: auth, conf, contenttypes, main, oauth2_provider, sessions, sites, social_django, sso, taggit</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.366.1">Running migrations:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.367.1">The output has been truncated for length.</span></strong></pre></li> <li><span class="koboSpan" id="kobo.368.1">Now, we want to create </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">our user:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.370.1">[awx@olam-test ~]$ awx-manage createsuperuser --username admin --email bubba@nobody.com</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.371.1">Password:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.372.1">Password (again)</span></strong></pre></li> <li><span class="koboSpan" id="kobo.373.1">After we’ve created our environment</span><a id="_idIndexMarker1097"/><span class="koboSpan" id="kobo.374.1"> and user, we need to configure that environment. </span><span class="koboSpan" id="kobo.374.2">This will write the encryption key and annotate the location, address, hostname, and other identifiers. </span><span class="koboSpan" id="kobo.374.3">However, the VM-specific data </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">is necessary:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.376.1">[awx@olam-test ~]$ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/tower/tower.key -out /etc/tower/tower.crt</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.377.1">Generating a RSA private key</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.378.1">....................................+++++</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.379.1">...............................................................................+++++</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.380.1">writing new private key to '/etc/tower/tower.key'</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.381.1">-----</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.382.1">You are about to be asked to enter information that will be incorporated</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.383.1">into your certificate request.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.384.1">What you are about to enter is what is called a Distinguished Name or a DN.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.385.1">There are quite a few fields but you can leave some blank</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.386.1">For some fields there will be a default value,</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.387.1">If you enter '.', the field will be left blank.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.388.1">-----</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.389.1">Country Name (2 letter code) [XX]:01</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.390.1">State or Province Name (full name) []:Florida</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.391.1">Locality Name (eg, city) [Default City]:Miami</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.392.1">Organization Name (eg, company) [Default Company Ltd]:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.393.1">Organizational Unit Name (eg, section) []:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.394.1">Common Name (eg, your name or your server's hostname) []:olam-test</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.395.1">Email Address []:email@email.com</span></strong></pre></li> <li><span class="koboSpan" id="kobo.396.1">We want to exit the </span><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">awx</span></strong><span class="koboSpan" id="kobo.398.1"> user now and </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">su</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.400.1">to root:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.401.1">[awx@olam-test ~]$ exit</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.402.1">[awx@olam-test ~]$ sudo su - root</span></strong></pre></li> <li><span class="koboSpan" id="kobo.403.1">Now, we want to set up our web</span><a id="_idIndexMarker1098"/><span class="koboSpan" id="kobo.404.1"> server. </span><span class="koboSpan" id="kobo.404.2">This is done with a typical, widely distributed, canned configuration, as </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.406.1">cat &lt;&lt; EOF | sudo tee /etc/nginx/nginx.conf &gt; /dev/null</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.407.1">&gt; user nginx;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.408.1">&gt; worker_processes auto;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.409.1">&gt; error_log /var/log/nginx/error.log;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.410.1">&gt; pid /run/nginx.pid;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.411.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.412.1">&gt; # Load dynamic modules. </span><span class="koboSpan" id="kobo.412.2">See /usr/share/doc/nginx/README.dynamic.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.413.1">&gt; include /usr/share/nginx/modules/*.conf;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.414.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.415.1">&gt; events {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.416.1">&gt;     worker_connections 1024;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.417.1">&gt; }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.418.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.419.1">&gt; http {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.420.1">&gt;     log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.421.1">&gt;                       '$status $body_bytes_sent "$http_referer" '</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.422.1">&gt;                       '"$http_user_agent" "$http_x_forwarded_for"';</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.423.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.424.1">&gt;     access_log  /var/log/nginx/access.log  main;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.425.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.426.1">&gt;     sendfile            on;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.427.1">&gt;     tcp_nopush          on;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.428.1">&gt;     tcp_nodelay         on;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.429.1">&gt;     keepalive_timeout   65;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.430.1">&gt;     types_hash_max_size 2048;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.431.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.432.1">&gt;     include             /etc/nginx/mime.types;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.433.1">&gt;     default_type        application/octet-stream;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.434.1">&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.435.1">&gt;     # Load modular configuration files from the /etc/nginx/conf.d directory.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.436.1">&gt;     # See http://nginx.org/en/docs/ngx_core_module.html#include</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.437.1">&gt;     # for more information.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.438.1">&gt;     include /etc/nginx/conf.d/*.conf;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.439.1">&gt; }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.440.1">&gt; EOF</span></strong></pre></li> <li><span class="koboSpan" id="kobo.441.1">Now, we want to provision</span><a id="_idIndexMarker1099"/><span class="koboSpan" id="kobo.442.1"> our instance, which we define in the following code. </span><span class="koboSpan" id="kobo.442.2">First, we have to switch the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.443.1">awx</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.444.1"> user:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.445.1">[root@olam-test ~]# sudo su -l awx -s /bin/bash</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.446.1">[awx@olam-test ~]$ awx-manage provision_instance --hostname=10.0.0.193 --node_type=hybrid</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.447.1">Successfully registered instance 10.0.0.193</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.448.1">(changed: True)</span></strong></pre></li> <li><span class="koboSpan" id="kobo.449.1">We’ll register the default environments by running the </span><span class="No-Break"><span class="koboSpan" id="kobo.450.1">following command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.451.1">[awx@olam-test ~]$ awx-manage register_default_execution_environments</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.452.1">'OLAM EE (latest)' Default Execution Environment registered.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.453.1">'OLAM EE (latest)' Default Execution Environment updated.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.454.1">Control Plane Execution Environment registered.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.455.1">(changed: True)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.456.1">[awx@olam-test ~]$ awx-manage register_queue --queuename=controlplane --hostnames=10.0.0.193</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.457.1">Creating instance group controlplane</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.458.1">Added instance 10.0.0.193 to controlplane</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.459.1">(changed: True)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.460.1">controlplane</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.461.1">(changed: True)</span></strong></pre></li> <li><span class="koboSpan" id="kobo.462.1">Now, we need to edit the receptor</span><a id="_idIndexMarker1100"/><span class="koboSpan" id="kobo.463.1"> configuration file, which provides address information so that our OLAM landing page’s address is identified. </span><span class="koboSpan" id="kobo.463.2">We’re going to need to switch </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">user</span></strong><span class="koboSpan" id="kobo.465.1"> to root, if you’re not already root, </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">again here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.467.1">[root@olam-test ~]# vi /etc/receptor/receptor.conf</span></strong><span class="koboSpan" id="kobo.468.1">
---
- node:
    </span><strong class="bold"><span class="koboSpan" id="kobo.469.1">id: 10.0.0.44</span></strong><span class="koboSpan" id="kobo.470.1">
- log-level: debug
- tcp-listener:
    port: 27199
#- work-signing:
#    privatekey: /etc/receptor/work_private_key.pem
#    tokenexpiration: 1m
#- work-verification:
#    publickey: /etc/receptor/work_public_key.pem
#- tcp-peer:
#    address: 100.100.253.53:27199
#    redial: true
#- tls-server:
#    name: mutual-tls
#    cert: /etc/receptor/certs/awx.crt
#    key: /etc/receptor/certs/awx.key
#    requireclientcert: true
#    clientcas: /etc/receptor/certs/ca.crt
- control-service:
    service: control
    filename: /var/run/receptor/receptor.sock
- work-command:
    worktype: local
    command: /var/lib/ol-automation-manager/venv/awx/bin/ansible-runner
    params: worker
    allowruntimeparams: true
#    verifysignature: true</span></pre></li> <li><span class="koboSpan" id="kobo.471.1">Now, we’re going to enable the OLAM</span><a id="_idIndexMarker1101"/><span class="koboSpan" id="kobo.472.1"> service by running the following command; this begins the process of </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">accessing OLAM:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.474.1">[root@olam-test ~]# systemctl enable --now ol-automation-manager.service</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.475.1">Created symlink /etc/systemd/system/multi-user.target.wants/ol-automation-manager.service → /usr/lib/systemd/system/ol-automation-manager.service.</span></strong></pre></li> <li><span class="koboSpan" id="kobo.476.1">Now, we want to preload our data by running the following command. </span><span class="koboSpan" id="kobo.476.2">Once this is done, we’ll be ready to log in to our OLAM instance, and our installation will </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">be complete:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.478.1">[awx@olam-test ~]$ awx-manage create_preload_data</span></strong></pre></li> <li><span class="koboSpan" id="kobo.479.1">Here, you’ll want to enter your OCI public IP address – </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">https://'public_IP'</span></strong><span class="koboSpan" id="kobo.481.1">.  </span><span class="koboSpan" id="kobo.481.2">You can find this in your OCI console, within your VM configuration. </span><span class="koboSpan" id="kobo.481.3">You will be asked to enter your password twice. </span><span class="koboSpan" id="kobo.481.4">Once this is done, your OLAM installation is complete and your console </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">is configured.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer309">
<span class="koboSpan" id="kobo.483.1"><img alt="Figure 12.14 – OLAM password creation" src="image/B18349_12_14.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.484.1">Figure 12.14 – OLAM password creation</span></p>
<h1 id="_idParaDest-262"><a id="_idTextAnchor351"/><span class="koboSpan" id="kobo.485.1">Zip through configuring and managing OLAM from the foundation up</span></h1>
<p><span class="koboSpan" id="kobo.486.1">Managing OLAM can be done</span><a id="_idIndexMarker1102"/><span class="koboSpan" id="kobo.487.1"> either through the UI</span><a id="_idIndexMarker1103"/><span class="koboSpan" id="kobo.488.1"> or via the CLI.  </span><span class="koboSpan" id="kobo.488.2">Here, we’ll be working through the UI. </span><span class="koboSpan" id="kobo.488.3">Think of it this way – OLAM is the platform on which you’ll be managing your projects, inventories, playbooks, and automation through either your UI or CLI. </span><span class="koboSpan" id="kobo.488.4">Projects are at the top layer, and the hierarchy descends from there to playbooks and, eventually, triggering automations. </span><span class="koboSpan" id="kobo.488.5">Whether you use the UI or CLI, you’ll have granular control over your </span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">key environments.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer310">
<span class="koboSpan" id="kobo.490.1"><img alt="Figure 12.15 – The OLAM hierarchy" src="image/B18349_12_15.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.491.1">Figure 12.15 – The OLAM hierarchy</span></p>
<p><span class="koboSpan" id="kobo.492.1">This recipe will walk you through</span><a id="_idIndexMarker1104"/><span class="koboSpan" id="kobo.493.1"> viewing, understanding, and executing</span><a id="_idIndexMarker1105"/><span class="koboSpan" id="kobo.494.1"> basic commands in your OLAM environment, creating projects, managing groups, and adding </span><span class="No-Break"><span class="koboSpan" id="kobo.495.1">to inventories.</span></span></p>
<h2 id="_idParaDest-263"><a id="_idTextAnchor352"/><span class="koboSpan" id="kobo.496.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.497.1">As shown in the following figure, and in the previous recipe, you’ll want to log in to your </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">OLAM environment:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer311">
<span class="koboSpan" id="kobo.499.1"><img alt="Figure 12.16 – OLAM first-time login" src="image/B18349_12_16.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.500.1">Figure 12.16 – OLAM first-time login</span></p>
<p><span class="koboSpan" id="kobo.501.1">The first and highest level in the OLAM</span><a id="_idIndexMarker1106"/><span class="koboSpan" id="kobo.502.1"> hierarchy is the project. </span><span class="koboSpan" id="kobo.502.2">You must</span><a id="_idIndexMarker1107"/><span class="koboSpan" id="kobo.503.1"> create a project, and that will be the host to all the playbooks and automation in that hierarchy. </span><span class="koboSpan" id="kobo.503.2">You can have multiple projects that are assigned to different assets and inventories. </span><span class="koboSpan" id="kobo.503.3">Let's see how to do that in the </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">following steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.505.1">In order to create a project, you’ll want to go to the </span><strong class="bold"><span class="koboSpan" id="kobo.506.1">Resources</span></strong><span class="koboSpan" id="kobo.507.1"> tab and navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.508.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.509.1">Projects</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.510.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer312">
<span class="koboSpan" id="kobo.511.1"><img alt="Figure 12.17 – The OLAM Projects option" src="image/B18349_12_17.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.512.1">Figure 12.17 – The OLAM Projects option</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.513.1">Once in </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">Projects</span></strong><span class="koboSpan" id="kobo.515.1">, click </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">Add</span></strong><span class="koboSpan" id="kobo.517.1">. </span><span class="koboSpan" id="kobo.517.2">This will open</span><a id="_idIndexMarker1108"/><span class="koboSpan" id="kobo.518.1"> up a window where </span><a id="_idIndexMarker1109"/><span class="koboSpan" id="kobo.519.1">you can define </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">the project.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer313">
<span class="koboSpan" id="kobo.521.1"><img alt="Figure 12.18 – Adding a project" src="image/B18349_12_18.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.522.1">Figure 12.18 – Adding a project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.523.1">Once you’ve opened up your project configuration page, you’ll want to strategize how you want your project</span><a id="_idIndexMarker1110"/><span class="koboSpan" id="kobo.524.1"> to look. </span><span class="koboSpan" id="kobo.524.2">In this case, we’re creating</span><a id="_idIndexMarker1111"/><span class="koboSpan" id="kobo.525.1"> a test environment, and we have set up two separate test nodes for lab purposes.  </span><span class="koboSpan" id="kobo.525.2">Defaults are used for the playbook directory as well as the </span><span class="No-Break"><span class="koboSpan" id="kobo.526.1">project path.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer314">
<span class="koboSpan" id="kobo.527.1"><img alt="Figure 12.19 – The project variables" src="image/B18349_12_19.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.528.1">Figure 12.19 – The project variables</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.529.1">After you’ve configured your project, you will want to save that information, which will bring you to a screen showing your fully </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">configured project.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer315">
<span class="koboSpan" id="kobo.531.1"><img alt="Figure 12.20 – The project configuration page" src="image/B18349_12_20.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.532.1">Figure 12.20 – The project configuration page</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.533.1">Once you’ve configured</span><a id="_idIndexMarker1112"/><span class="koboSpan" id="kobo.534.1"> your project, you’ll want</span><a id="_idIndexMarker1113"/><span class="koboSpan" id="kobo.535.1"> to configure your credentials, much like your project, as </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">shown here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer316">
<span class="koboSpan" id="kobo.537.1"><img alt="Figure 12.21 – The Credentials option" src="image/B18349_12_21.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.538.1">Figure 12.21 – The Credentials option</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.539.1">The next step is to add </span><a id="_idIndexMarker1114"/><span class="koboSpan" id="kobo.540.1">your credential </span><a id="_idIndexMarker1115"/><span class="koboSpan" id="kobo.541.1">data for your </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">opc</span></strong><span class="koboSpan" id="kobo.543.1"> user </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">and machine.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer317">
<span class="koboSpan" id="kobo.545.1"><img alt="Figure 12.22 – Credential addition" src="image/B18349_12_22.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.546.1">Figure 12.22 – Credential addition</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.547.1">You’ll want to either copy</span><a id="_idIndexMarker1116"/><span class="koboSpan" id="kobo.548.1"> or create a key, which you’ll use</span><a id="_idIndexMarker1117"/><span class="koboSpan" id="kobo.549.1"> to access machines. </span><span class="koboSpan" id="kobo.549.2">Paste it into the </span><strong class="bold"><span class="koboSpan" id="kobo.550.1">SSH Private Key</span></strong><span class="koboSpan" id="kobo.551.1"> section, and enter the names of your key </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">and user.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer318">
<span class="koboSpan" id="kobo.553.1"><img alt="Figure 12.23 – Credential variables and the SSH private key" src="image/B18349_12_23.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.554.1">Figure 12.23 – Credential variables and the SSH private key</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.555.1">After you save the credential, the configured</span><a id="_idIndexMarker1118"/><span class="koboSpan" id="kobo.556.1"> credential will be</span><a id="_idIndexMarker1119"/><span class="koboSpan" id="kobo.557.1"> displayed, as </span><span class="No-Break"><span class="koboSpan" id="kobo.558.1">shown here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer319">
<span class="koboSpan" id="kobo.559.1"><img alt="Figure 12.24 – Credential configuration page" src="image/B18349_12_24.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.560.1">Figure 12.24 – Credential configuration page</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.561.1">Next, you’ll need to add </span><a id="_idIndexMarker1120"/><span class="koboSpan" id="kobo.562.1">an inventory. </span><span class="koboSpan" id="kobo.562.2">Remember</span><a id="_idIndexMarker1121"/><span class="koboSpan" id="kobo.563.1"> that two test virtual machines were created for this, and in this recipe, they will be used as test environments. </span><span class="koboSpan" id="kobo.563.2">Select </span><strong class="bold"><span class="koboSpan" id="kobo.564.1">Inventories</span></strong><span class="koboSpan" id="kobo.565.1">, and follow the next steps to define the inventory </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">after selecting.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer320">
<span class="koboSpan" id="kobo.567.1"><img alt="Figure 12.25 – The Inventories option" src="image/B18349_12_25.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.568.1">Figure 12.25 – The Inventories option</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.569.1">Click on </span><strong class="bold"><span class="koboSpan" id="kobo.570.1">Add</span></strong><span class="koboSpan" id="kobo.571.1"> to create</span><a id="_idIndexMarker1122"/><span class="koboSpan" id="kobo.572.1"> and define your </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">new </span></span><span class="No-Break"><a id="_idIndexMarker1123"/></span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">inventory:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer321">
<span class="koboSpan" id="kobo.575.1"><img alt="Figure 12.26 – Adding an inventory" src="image/B18349_12_26.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.576.1">Figure 12.26 – Adding an inventory</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.577.1">You’ll define your inventory</span><a id="_idIndexMarker1124"/><span class="koboSpan" id="kobo.578.1"> with a name, using the </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">default </span></span><span class="No-Break"><a id="_idIndexMarker1125"/></span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">organization:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer322">
<span class="koboSpan" id="kobo.581.1"><img alt="Figure 12.27 – Inventory variables" src="image/B18349_12_27.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.582.1">Figure 12.27 – Inventory variables</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.583.1">The configured test inventory is </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">shown here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer323">
<span class="koboSpan" id="kobo.585.1"><img alt="Figure 12.28 – The inventory configuration page" src="image/B18349_12_28.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.586.1">Figure 12.28 – The inventory configuration page</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.587.1">After creating</span><a id="_idIndexMarker1126"/><span class="koboSpan" id="kobo.588.1"> an inventory, we have to add</span><a id="_idIndexMarker1127"/><span class="koboSpan" id="kobo.589.1"> hosts to it. </span><span class="koboSpan" id="kobo.589.2">This will involve adding machines that we can test automation on. </span><span class="koboSpan" id="kobo.589.3">Select </span><strong class="bold"><span class="koboSpan" id="kobo.590.1">Hosts</span></strong><span class="koboSpan" id="kobo.591.1"> in the menu selection, and then the host from the list, as </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">shown here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer324">
<span class="koboSpan" id="kobo.593.1"><img alt="Figure 12.29 – The Hosts option" src="image/B18349_12_29.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.594.1">Figure 12.29 – The Hosts option</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.595.1">You can then add </span><a id="_idIndexMarker1128"/><span class="koboSpan" id="kobo.596.1">your new host, as </span><span class="No-Break"><span class="koboSpan" id="kobo.597.1">shown</span></span><span class="No-Break"><a id="_idIndexMarker1129"/></span><span class="No-Break"><span class="koboSpan" id="kobo.598.1"> here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer325">
<span class="koboSpan" id="kobo.599.1"><img alt="Figure 12.30 – Adding a host" src="image/B18349_12_30.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.600.1">Figure 12.30 – Adding a host</span></p>
<ol>
<li value="15"><span class="koboSpan" id="kobo.601.1">The following is the configuration</span><a id="_idIndexMarker1130"/><span class="koboSpan" id="kobo.602.1"> page to create your new host; make </span><a id="_idIndexMarker1131"/><span class="koboSpan" id="kobo.603.1">sure to select the inventory you </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">just created:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer326">
<span class="koboSpan" id="kobo.605.1"><img alt="Figure 12.31 – The host variables" src="image/B18349_12_31.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.606.1">Figure 12.31 – The host variables</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.607.1">Make sure to save your configuration. </span><span class="koboSpan" id="kobo.607.2">Once you have done so, the host configuration will </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">be displayed.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer327">
<span class="koboSpan" id="kobo.609.1"><img alt="Figure 12.32 – The host configuration page" src="image/B18349_12_32.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.610.1">Figure 12.32 – The host configuration page</span></p>
<ol>
<li value="17"><span class="koboSpan" id="kobo.611.1">You’ll have to repeat this, as only one host</span><a id="_idIndexMarker1132"/><span class="koboSpan" id="kobo.612.1"> was created here; to show</span><a id="_idIndexMarker1133"/><span class="koboSpan" id="kobo.613.1"> multiplicity, two hosts need to be created to mimic a </span><span class="No-Break"><span class="koboSpan" id="kobo.614.1">working environment.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer328">
<span class="koboSpan" id="kobo.615.1"><img alt="Figure 12.33 – Hosts" src="image/B18349_12_33.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.616.1">Figure 12.33 – Hosts</span></p>
<p><span class="koboSpan" id="kobo.617.1">The setup and basic configuration of OLAM are complete. </span><span class="koboSpan" id="kobo.617.2">In the following recipes, we’ll review how to run playbooks and further</span><a id="_idIndexMarker1134"/><span class="koboSpan" id="kobo.618.1"> advanced configurations of OLAM. </span><span class="koboSpan" id="kobo.618.2">In the next recipe, we’ll test our final configuration</span><a id="_idIndexMarker1135"/><span class="koboSpan" id="kobo.619.1"> by running a command against the two test </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">servers created.</span></span></p>
<h2 id="_idParaDest-264"><a id="_idTextAnchor353"/><span class="koboSpan" id="kobo.621.1">How to do it…</span></h2>
<ol>
<li><span class="koboSpan" id="kobo.622.1">After adding the two hosts, you can test-run a set of commands against them. </span><span class="koboSpan" id="kobo.622.2">To run the commands, you’ll need to navigate back to </span><strong class="bold"><span class="koboSpan" id="kobo.623.1">Hosts</span></strong><span class="koboSpan" id="kobo.624.1"> and click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.625.1">Run Command</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer329">
<span class="koboSpan" id="kobo.627.1"><img alt="Figure 12.34 – Running simple commands on hosts" src="image/B18349_12_34.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.628.1">Figure 12.34 – Running simple commands on hosts</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.629.1">You’ll choose the module(s) you’ll want to run – in this case, </span><strong class="bold"><span class="koboSpan" id="kobo.630.1">shell</span></strong><span class="koboSpan" id="kobo.631.1"> (which runs a shell script) – and </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">Forks</span></strong><span class="koboSpan" id="kobo.633.1"> will be the number</span><a id="_idIndexMarker1136"/><span class="koboSpan" id="kobo.634.1"> of times that the shell script will be executed – in this case, twice</span><a id="_idIndexMarker1137"/><span class="koboSpan" id="kobo.635.1"> because we have two nodes. </span><span class="koboSpan" id="kobo.635.2">Here, we’re using </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">uptime</span></strong><span class="koboSpan" id="kobo.637.1"> as the variable argument. </span><span class="koboSpan" id="kobo.637.2">This runs in a shell environment, much like you would run it in any </span><span class="No-Break"><span class="koboSpan" id="kobo.638.1">Linux environment.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer330">
<span class="koboSpan" id="kobo.639.1"><img alt="Figure 12.35 – The command variables" src="image/B18349_12_35.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.640.1">Figure 12.35 – The command variables</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.641.1">We’ll have to define</span><a id="_idIndexMarker1138"/><span class="koboSpan" id="kobo.642.1"> the environment</span><a id="_idIndexMarker1139"/><span class="koboSpan" id="kobo.643.1"> we want to run in, which is </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">OLAM </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.645.1">EE (latest)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer331">
<span class="koboSpan" id="kobo.647.1"><img alt="Figure 12.36 – The execution environment" src="image/B18349_12_36.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.648.1">Figure 12.36 – The execution environment</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.649.1">These are the credentials</span><a id="_idIndexMarker1140"/><span class="koboSpan" id="kobo.650.1"> we used before on the two test </span><a id="_idIndexMarker1141"/><span class="koboSpan" id="kobo.651.1">nodes </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">we created:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer332">
<span class="koboSpan" id="kobo.653.1"><img alt="Figure 12.37 – The credentials selection" src="image/B18349_12_37.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.654.1">Figure 12.37 – The credentials selection</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.655.1">The following is the output</span><a id="_idIndexMarker1142"/><span class="koboSpan" id="kobo.656.1"> to the test; as you can see, the uptime</span><a id="_idIndexMarker1143"/><span class="koboSpan" id="kobo.657.1"> is listed for each environment, </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">olam-target-1</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.659.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">olam-target-2</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer333">
<span class="koboSpan" id="kobo.662.1"><img alt="Figure 12.38 – The command run output" src="image/B18349_12_38.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.663.1">Figure 12.38 – The command run output</span></p>
<h1 id="_idParaDest-265"><a id="_idTextAnchor354"/><span class="koboSpan" id="kobo.664.1">OLAM isn’t fantasy football, but they both use playbooks</span></h1>
<p><span class="koboSpan" id="kobo.665.1">Most of us know about fantasy</span><a id="_idIndexMarker1144"/><span class="koboSpan" id="kobo.666.1"> football, where we</span><a id="_idIndexMarker1145"/><span class="koboSpan" id="kobo.667.1"> follow teams, draft players, and bet on winners and losers. </span><span class="koboSpan" id="kobo.667.2">Well, we’re not betting anything here, other than whether our environment will work, but we are using something called a </span><strong class="bold"><span class="koboSpan" id="kobo.668.1">playbook</span></strong><span class="koboSpan" id="kobo.669.1">. </span><span class="koboSpan" id="kobo.669.2">Consider a playbook much like that</span><a id="_idIndexMarker1146"/><span class="koboSpan" id="kobo.670.1"> used by a football coach to train their team; it’s the same concept. </span><span class="koboSpan" id="kobo.670.2">We’re predefining an environment or event, and programmatically architecting it to behave in the way we tell it, creating or changing the environment we are defining, or even reclaiming resources (taking back CPU, RAM, and disk space from</span><a id="_idIndexMarker1147"/><span class="koboSpan" id="kobo.671.1"> decommissioned environments). </span><span class="koboSpan" id="kobo.671.2">Whatever we define within the constraints of OLAM, we </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">can execute.</span></span></p>
<p><span class="koboSpan" id="kobo.673.1">In order to create our playbook, we need to figure out who, what, where, when, and maybe </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">even why:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.675.1">Who – What resources groups are </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">we targeting?</span></span></li>
<li><span class="koboSpan" id="kobo.677.1">What – What kind of resources are we targeting? </span><span class="koboSpan" id="kobo.677.2">A VM? </span><span class="koboSpan" id="kobo.677.3">A </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">physical machine?</span></span></li>
<li><span class="koboSpan" id="kobo.679.1">Where – Where are these resources located? </span><span class="koboSpan" id="kobo.679.2">In a CSP, VM farm, or </span><span class="No-Break"><span class="koboSpan" id="kobo.680.1">physical server?</span></span></li>
<li><span class="koboSpan" id="kobo.681.1">When – When are we going to execute on the environment? </span><span class="koboSpan" id="kobo.681.2">Is it event-based (meaning do we clear disk space when a log fills </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">up </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.683.1">/tmp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">)?</span></span></li>
<li><span class="koboSpan" id="kobo.685.1">Why – Why are we targeting this environment? </span><span class="koboSpan" id="kobo.685.2">Is it a database server and logs are maxing out disk space, a web server is over utilized, or an event is having a </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">repeat affect?</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.687.1">A playbook can be triggered in many different ways, In AIOps, we focus on triggers; these can be an SNMP trap, agent-based triggers (such as a full disk, as shown previously), or a directed event from a platform. </span><span class="koboSpan" id="kobo.687.2">Let’s return to the other four variables – who, what, where, and when; </span><em class="italic"><span class="koboSpan" id="kobo.688.1">who</span></em><span class="koboSpan" id="kobo.689.1"> is which environment, </span><em class="italic"><span class="koboSpan" id="kobo.690.1">what</span></em><span class="koboSpan" id="kobo.691.1"> is what machines are used, </span><em class="italic"><span class="koboSpan" id="kobo.692.1">where</span></em><span class="koboSpan" id="kobo.693.1"> is the location of the environment(s), and </span><em class="italic"><span class="koboSpan" id="kobo.694.1">when</span></em><span class="koboSpan" id="kobo.695.1"> is when this playbook will run, and whether it will be triggered or run at a certain time. </span><span class="koboSpan" id="kobo.695.2">All or any of these are plausible and can be </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">gradually defined.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer334">
<span class="koboSpan" id="kobo.697.1"><img alt="Figure 12.39 – Playbooks and their touch points" src="image/B18349_12_39.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.698.1">Figure 12.39 – Playbooks and their touch points</span></p>
<h2 id="_idParaDest-266"><a id="_idTextAnchor355"/><span class="koboSpan" id="kobo.699.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.700.1">Getting ready to build your own playbooks</span><a id="_idIndexMarker1148"/><span class="koboSpan" id="kobo.701.1"> and/or utilize existing</span><a id="_idIndexMarker1149"/><span class="koboSpan" id="kobo.702.1"> ones isn’t the monumental task it seems. </span><span class="koboSpan" id="kobo.702.2">In this recipe, we’ll explore adding a Git repository</span><a id="_idIndexMarker1150"/><span class="koboSpan" id="kobo.703.1"> to your OLAM instance. </span><span class="koboSpan" id="kobo.703.2">This is done for a </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">few reasons:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.705.1">Version control – control your code, who edits it, and the versions you’re on.  </span><span class="koboSpan" id="kobo.705.2">Remember that things change, including infrastructure and OS versions. </span><span class="koboSpan" id="kobo.705.3">You want to keep track of what changes in your playbooks so that you can adjust to </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">the changes.</span></span></li>
<li><span class="koboSpan" id="kobo.707.1">Keeping track of your playbooks – save them, collaborate, and share. </span><span class="koboSpan" id="kobo.707.2">You can share your templates and reuse them. </span><span class="koboSpan" id="kobo.707.3">Remember that one of the most important reasons why automation is so useful is repetition, limiting the need for human interaction in </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">repetitive steps.</span></span></li>
<li><span class="koboSpan" id="kobo.709.1">Git gives you a pipeline into your templates and allows you to easily add playbooks you’ve written to templates</span><a id="_idIndexMarker1151"/><span class="koboSpan" id="kobo.710.1"> that you’ve written </span><span class="No-Break"><span class="koboSpan" id="kobo.711.1">and created.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.712.1">In order to add a Git repository</span><a id="_idIndexMarker1152"/><span class="koboSpan" id="kobo.713.1"> to OLAM, you’ll need to first</span><a id="_idIndexMarker1153"/><span class="koboSpan" id="kobo.714.1"> create it and add it to your </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">OLAM project:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.716.1">First, go to the </span><strong class="bold"><span class="koboSpan" id="kobo.717.1">Projects</span></strong><span class="koboSpan" id="kobo.718.1"> tab, as </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">shown here.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer335">
<span class="koboSpan" id="kobo.720.1"><img alt="Figure 12.40 – Projects menu" src="image/B18349_12_40.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.721.1">Figure 12.40 – Projects menu</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.722.1">Navigate to the test project we created, or create a new one – in this case, Oracle was created, since we’re going to add the Oracle sample playbooks </span><span class="No-Break"><span class="koboSpan" id="kobo.723.1">to OLAM.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer336">
<span class="koboSpan" id="kobo.724.1"><img alt="Figure 12.41 – Adding a project" src="image/B18349_12_41.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.725.1">Figure 12.41 – Adding a project</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.726.1">Enter the information</span><a id="_idIndexMarker1154"/><span class="koboSpan" id="kobo.727.1"> for the project, including</span><a id="_idIndexMarker1155"/><span class="koboSpan" id="kobo.728.1"> your </span><span class="No-Break"><span class="koboSpan" id="kobo.729.1">Git data:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer337">
<span class="koboSpan" id="kobo.730.1"><img alt="Figure 12.42 – Project configuration and variables for the Oracle Git repository" src="image/B18349_12_42.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.731.1">Figure 12.42 – Project configuration and variables for the Oracle Git repository</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.732.1">Then, save the project, which will bring you to your project’s </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.733.1">Details</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.734.1"> screen.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer338">
<span class="koboSpan" id="kobo.735.1"><img alt="Figure 12.43 – The Oracle Git project details" src="image/B18349_12_43.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.736.1">Figure 12.43 – The Oracle Git project details</span></p>
<h2 id="_idParaDest-267"><a id="_idTextAnchor356"/><span class="koboSpan" id="kobo.737.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.738.1">Once you’ve added your Git</span><a id="_idIndexMarker1156"/><span class="koboSpan" id="kobo.739.1"> account data, as well as the Oracle</span><a id="_idIndexMarker1157"/><span class="koboSpan" id="kobo.740.1"> Ansible playbook samples, you can start to create a new template with your Oracle Hello </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">World playbook:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.742.1">You’ll need to, once again, navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.744.1">Templates</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer339">
<span class="koboSpan" id="kobo.746.1"><img alt="Figure 12.44 – The Templates option" src="image/B18349_12_44.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.747.1">Figure 12.44 – The Templates option</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.748.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.749.1">Add</span></strong><span class="koboSpan" id="kobo.750.1"> to create</span><a id="_idIndexMarker1158"/><span class="koboSpan" id="kobo.751.1"> a </span><span class="No-Break"><span class="koboSpan" id="kobo.752.1">new</span></span><span class="No-Break"><a id="_idIndexMarker1159"/></span><span class="No-Break"><span class="koboSpan" id="kobo.753.1"> template.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer340">
<span class="koboSpan" id="kobo.754.1"><img alt="Figure 12.45 – Adding a job template" src="image/B18349_12_45.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.755.1">Figure 12.45 – Adding a job template</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.756.1">Complete the worksheet with the correct variable, as we did in the </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">previous recipe.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer341">
<span class="koboSpan" id="kobo.758.1"><img alt="Figure 12.46 – The job template variables" src="image/B18349_12_46.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.759.1">Figure 12.46 – The job template variables</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.760.1">This time, we’re going</span><a id="_idIndexMarker1160"/><span class="koboSpan" id="kobo.761.1"> to select a playbook</span><a id="_idIndexMarker1161"/><span class="koboSpan" id="kobo.762.1"> from the Oracle samples </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">we selected.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer342">
<span class="koboSpan" id="kobo.764.1"><img alt="Figure 12.47 – The Oracle Git sample playbook selection" src="image/B18349_12_47.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.765.1">Figure 12.47 – The Oracle Git sample playbook selection</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.766.1">We want to select the</span><a id="_idIndexMarker1162"/><span class="koboSpan" id="kobo.767.1"> Oracle Hello </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">World </span></span><span class="No-Break"><a id="_idIndexMarker1163"/></span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">playbook:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer343">
<span class="koboSpan" id="kobo.770.1"><img alt="Figure 12.48 – The Hello World playbook" src="image/B18349_12_48.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.771.1">Figure 12.48 – The Hello World playbook</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.772.1">Make sure to</span><a id="_idIndexMarker1164"/><span class="koboSpan" id="kobo.773.1"> assign </span><strong class="bold"><span class="koboSpan" id="kobo.774.1">Privileged Escalation</span></strong><span class="koboSpan" id="kobo.775.1"> access </span><a id="_idIndexMarker1165"/><span class="koboSpan" id="kobo.776.1">to </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">the template.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer344">
<span class="koboSpan" id="kobo.778.1"><img alt="Figure 12.49 – Job privilege credentials" src="image/B18349_12_49.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.779.1">Figure 12.49 – Job privilege credentials</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.780.1">Save your template, which </span><a id="_idIndexMarker1166"/><span class="koboSpan" id="kobo.781.1">will bring you </span><a id="_idIndexMarker1167"/><span class="koboSpan" id="kobo.782.1">to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.783.1">Details</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.784.1"> page.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer345">
<span class="koboSpan" id="kobo.785.1"><img alt="Figure 12.50 – The job configuration details" src="image/B18349_12_50.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.786.1">Figure 12.50 – The job configuration details</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.787.1">You can launch</span><a id="_idIndexMarker1168"/><span class="koboSpan" id="kobo.788.1"> the template</span><a id="_idIndexMarker1169"/><span class="koboSpan" id="kobo.789.1"> to see </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">the results.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer346">
<span class="koboSpan" id="kobo.791.1"><img alt="Figure 12.51 – The job launch" src="image/B18349_12_51.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.792.1">Figure 12.51 – The job launch</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.793.1">Remember that</span><a id="_idIndexMarker1170"/><span class="koboSpan" id="kobo.794.1"> your results</span><a id="_idIndexMarker1171"/><span class="koboSpan" id="kobo.795.1"> will appear under the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.796.1">Output</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.797.1"> tab.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer347">
<span class="koboSpan" id="kobo.798.1"><img alt="Figure 12.52 – The job output and results" src="image/B18349_12_52.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.799.1">Figure 12.52 – The job output and results</span></p>
<h1 id="_idParaDest-268"><a id="_idTextAnchor357"/><span class="koboSpan" id="kobo.800.1">Controlling the patching chaos</span></h1>
<p><span class="koboSpan" id="kobo.801.1">Patching is a curse word</span><a id="_idIndexMarker1172"/><span class="koboSpan" id="kobo.802.1"> to many, a comfort to some, and necessary to all. </span><span class="koboSpan" id="kobo.802.2">There is certainly a rational fear regarding patching on when to patch, how to patch, and what to patch. </span><span class="koboSpan" id="kobo.802.3">The who, what, where, when, and how words apply here too. </span><span class="koboSpan" id="kobo.802.4">These concerns are legitimate; I mean who wants to patch? </span><span class="koboSpan" id="kobo.802.5">It can be messy, and it’s time-consuming. </span><span class="koboSpan" id="kobo.802.6">We may not be able to mitigate the concerns, but we can shorten the time taken to automate. </span><span class="koboSpan" id="kobo.802.7">This is one aspect where automation helps to speed up operations, and it eases the frustration of having to patch </span><span class="No-Break"><span class="koboSpan" id="kobo.803.1">multiple environments.</span></span></p>
<p><span class="koboSpan" id="kobo.804.1">A common automation question is, "What can we do to minimize what we can, and what do we have to do manually?" </span><span class="koboSpan" id="kobo.804.2">The concept that we’ll be able to create a playbook for anything and automate everything is simply not realistic. </span><span class="koboSpan" id="kobo.804.3">Firstly, there are some things we wouldn’t want to automate, and that depends on who you work for, or your organization’s policies and </span><strong class="bold"><span class="koboSpan" id="kobo.805.1">standard operating procedures</span></strong><span class="koboSpan" id="kobo.806.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.807.1">SOPs</span></strong><span class="koboSpan" id="kobo.808.1">) toward automation. </span><span class="koboSpan" id="kobo.808.2">I’ve worked with certain defense</span><a id="_idIndexMarker1173"/><span class="koboSpan" id="kobo.809.1"> contractors and agencies that have multiple boards voting on what automations are allowed, and they were very particular</span><a id="_idIndexMarker1174"/><span class="koboSpan" id="kobo.810.1"> on what was and wasn’t approved. </span><span class="koboSpan" id="kobo.810.2">However, overall, automation is a great equalizer in saving us time </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1">and energy.</span></span></p>
<p><span class="koboSpan" id="kobo.812.1">This recipe will walk through patching at a high level and help you understand how automation can go beyond, saving time and energy by automating </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">repeatable steps.</span></span></p>
<h2 id="_idParaDest-269"><a id="_idTextAnchor358"/><span class="koboSpan" id="kobo.814.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.815.1">Before we institute any playbooks, we have to make sure we have all the prerequisites in place, including writing the playbook itself. </span><span class="koboSpan" id="kobo.815.2">In this case, we will write a basic playbook, update the YUM repository on two servers, and reboot those servers after the update is complete. </span><span class="koboSpan" id="kobo.815.3">This can be expanded into multiple OSs, kernels, and/or application patching – the sky’s </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">the limit.</span></span></p>
<h2 id="_idParaDest-270"><a id="_idTextAnchor359"/><span class="koboSpan" id="kobo.817.1">How to do it…</span></h2>
<ol>
<li><span class="koboSpan" id="kobo.818.1">As mentioned previously, we need to first examine and create a new playbook for our patching effort here. </span><span class="koboSpan" id="kobo.818.2">In order to do that, we will navigate to our </span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">template (playbook):</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer348">
<span class="koboSpan" id="kobo.820.1"><img alt="Figure 12.53 – The Templates option" src="image/B18349_12_53.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.821.1">Figure 12.53 – The Templates option</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.822.1">As mentioned previously, we have</span><a id="_idIndexMarker1175"/><span class="koboSpan" id="kobo.823.1"> the template we wrote earlier. </span><span class="koboSpan" id="kobo.823.2">However, we’re going to click on </span><strong class="bold"><span class="koboSpan" id="kobo.824.1">Add</span></strong><span class="koboSpan" id="kobo.825.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">create another.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer349">
<span class="koboSpan" id="kobo.827.1"><img alt="Figure 12.54 – Adding a template" src="image/B18349_12_54.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.828.1">Figure 12.54 – Adding a template</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.829.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.830.1">Add </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.831.1">job template</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer350">
<span class="koboSpan" id="kobo.833.1"><img alt="Figure 12.55 – Adding a job template" src="image/B18349_12_55.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.834.1">Figure 12.55 – Adding a job template</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.835.1">You’ll want to follow the same flow</span><a id="_idIndexMarker1176"/><span class="koboSpan" id="kobo.836.1"> that we used for the initial template we created. </span><span class="koboSpan" id="kobo.836.2">However, this time, we’re going to select a </span><span class="No-Break"><span class="koboSpan" id="kobo.837.1">different playbook:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer351">
<span class="koboSpan" id="kobo.838.1"><img alt="Figure 12.56 – Adding job variables" src="image/B18349_12_56.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.839.1">Figure 12.56 – Adding job variables</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.840.1">We’ll name this one </span><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">Patching</span></strong><span class="koboSpan" id="kobo.842.1">, and we’ll select</span><a id="_idIndexMarker1177"/><span class="koboSpan" id="kobo.843.1"> the updated </span><span class="No-Break"><span class="koboSpan" id="kobo.844.1">YUM playbook.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer352">
<span class="koboSpan" id="kobo.845.1"><img alt="Figure 12.57 – The playbook selection" src="image/B18349_12_57.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.846.1">Figure 12.57 – The playbook selection</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.847.1">As shown in the following</span><a id="_idIndexMarker1178"/><span class="koboSpan" id="kobo.848.1"> screenshot, the template is </span><span class="No-Break"><span class="koboSpan" id="kobo.849.1">fully populated.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer353">
<span class="koboSpan" id="kobo.850.1"><img alt="Figure 12.58 – Job variables" src="image/B18349_12_58.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.851.1">Figure 12.58 – Job variables</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.852.1">Make sure to give your</span><a id="_idIndexMarker1179"/><span class="koboSpan" id="kobo.853.1"> template </span><strong class="bold"><span class="koboSpan" id="kobo.854.1">Privileged Escalation</span></strong><span class="koboSpan" id="kobo.855.1"> access, meaning </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">admin access.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer354">
<span class="koboSpan" id="kobo.857.1"><img alt="Figure 12.59 – Privilege Escalation" src="image/B18349_12_59.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.858.1">Figure 12.59 – Privilege Escalation</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.859.1">Save your template, which</span><a id="_idIndexMarker1180"/><span class="koboSpan" id="kobo.860.1"> will bring you to your template’s </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.861.1">Details</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.862.1"> screen.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer355">
<span class="koboSpan" id="kobo.863.1"><img alt="Figure 12.60 – The job configuration details and launch" src="image/B18349_12_60.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.864.1">Figure 12.60 – The job configuration details and launch</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.865.1">Execute your template</span><a id="_idIndexMarker1181"/><span class="koboSpan" id="kobo.866.1"> and playbook by clicking on </span><strong class="bold"><span class="koboSpan" id="kobo.867.1">Launch</span></strong><span class="koboSpan" id="kobo.868.1">. </span><span class="koboSpan" id="kobo.868.2">The output of your template will be under the </span><strong class="bold"><span class="koboSpan" id="kobo.869.1">Output</span></strong><span class="koboSpan" id="kobo.870.1"> tab and will show any errors, omissions, and/or success. </span><span class="koboSpan" id="kobo.870.2">Remember to read through the output because you can have successful output with errors and/or </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1">skipped/missed steps.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer356">
<span class="koboSpan" id="kobo.872.1"><img alt="Figure 12.61 – The job output and results" src="image/B18349_12_61.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.873.1">Figure 12.61 – The job output and results</span></p>
<h1 id="_idParaDest-271"><a id="_idTextAnchor360"/><span class="koboSpan" id="kobo.874.1">Look beyond automation</span></h1>
<p><span class="koboSpan" id="kobo.875.1">Before we can create any resources, we need to have a place to create those resources. </span><span class="koboSpan" id="kobo.875.2">In this case, we’re using OCI as our incubator, so obviously, we need to add OCI to our OLAM instance. </span><span class="koboSpan" id="kobo.875.3">In order to do this, we need to create credentials to allow OLAM to access OCI. </span><span class="koboSpan" id="kobo.875.4">This doesn’t stop at OCI. </span><span class="koboSpan" id="kobo.875.5">OLAM is your doorway into hybrid cloud solutions. </span><span class="koboSpan" id="kobo.875.6">You can deploy on-premises solutions through virtualization fabrics and HCI solutions such as VxRail, VMware, and OpenStack. </span><span class="koboSpan" id="kobo.875.7">We won’t be covering hybrid cloud solutions in this recipe, although we did cover hybrid cloud in past recipes, such as migrating a virtual machine as a template into OCI or uploading an image to create an AMI image in AWS. </span><span class="koboSpan" id="kobo.875.8">These techniques can also be used</span><a id="_idIndexMarker1182"/><span class="koboSpan" id="kobo.876.1"> in hybrid cloud scenarios, working with and moving workloads’ ingress and egress to </span><strong class="bold"><span class="koboSpan" id="kobo.877.1">cloud service providers</span></strong><span class="koboSpan" id="kobo.878.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.879.1">CSPs</span></strong><span class="koboSpan" id="kobo.880.1">). </span><span class="koboSpan" id="kobo.880.2">As you can see, the possibilities are there, and they </span><span class="No-Break"><span class="koboSpan" id="kobo.881.1">are endless.</span></span></p>
<p><span class="koboSpan" id="kobo.882.1">To delve a little further into </span><strong class="bold"><span class="koboSpan" id="kobo.883.1">IaC</span></strong><span class="koboSpan" id="kobo.884.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.885.1">Infrastructure as Code</span></strong><span class="koboSpan" id="kobo.886.1">), we have to look at the definition of infrastructure</span><a id="_idIndexMarker1183"/><span class="koboSpan" id="kobo.887.1"> as a service. </span><span class="koboSpan" id="kobo.887.2">Take a step back and reframe the way you think about infrastructure, and then reconstitute that in your head as moving numbers, fields, and landscapes. </span><span class="koboSpan" id="kobo.887.3">That’s what IaC is; it’s an ever-evolving landscape that keeps on changing its definition to match what the end state is. </span><span class="koboSpan" id="kobo.887.4">Have you ever played the game </span><em class="italic"><span class="koboSpan" id="kobo.888.1">Tetris</span></em><span class="koboSpan" id="kobo.889.1">? </span><span class="koboSpan" id="kobo.889.2">IaC looks and feels like </span><em class="italic"><span class="koboSpan" id="kobo.890.1">Tetris</span></em><span class="koboSpan" id="kobo.891.1">, although, in this case, we win every time; we’re just fitting pieces next to one another, creating an environment that matches what we need it to look like. </span><span class="koboSpan" id="kobo.891.2">There are so many different variables we can use to transform our everyday tasks into IaC – for example, expanding compute, storage, and/or network.  </span><span class="koboSpan" id="kobo.891.3">For example, imagine we have virtual machine A, an image for web servers. </span><span class="koboSpan" id="kobo.891.4">We have two web servers deployed for a small university. </span><span class="koboSpan" id="kobo.891.5">That university has challenges during general admissions periods and needs to expand seamlessly. </span><span class="koboSpan" id="kobo.891.6">We can use autoscaling or workload expansion to implement new web servers, supplementing the university’s needs until the requirement expires. </span><span class="koboSpan" id="kobo.891.7">These examples are a little more intensive than the example in this recipe, but it’s essential to see the value of code as we move along this freeway of change in an evolving </span><span class="No-Break"><span class="koboSpan" id="kobo.892.1">IT landscape.</span></span></p>
<h2 id="_idParaDest-272"><a id="_idTextAnchor361"/><span class="koboSpan" id="kobo.893.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.894.1">Ansible provides building blocks</span><a id="_idIndexMarker1184"/><span class="koboSpan" id="kobo.895.1"> for platform configuration and managing compute instances. </span><span class="koboSpan" id="kobo.895.2">In this recipe, we’re going to take a different look at Ansible, and we’ll see how to use it to write a playbook to instantiate a new virtual machine in OCI. </span><span class="koboSpan" id="kobo.895.3">We’re going to learn the basics of playbooks, beyond using the predefined Oracle basics we explored a couple of recipes ago, to discover the benefits of IaC through Ansible, and we’ll also learn how to create a foundation for Ansible to be used in the form of playbooks. </span><span class="koboSpan" id="kobo.895.4">Lastly, you’ll learn how to create playbooks and configure and manage resources </span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">on OCI.</span></span></p>
<p><span class="koboSpan" id="kobo.897.1">To start, we need to configure our environment. </span><span class="koboSpan" id="kobo.897.2">This includes connecting</span><a id="_idIndexMarker1185"/><span class="koboSpan" id="kobo.898.1"> our OLAM instance to OCI. </span><span class="koboSpan" id="kobo.898.2">This will allow us to execute our playbook in our </span><span class="No-Break"><span class="koboSpan" id="kobo.899.1">OCI tenancy.</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.900.1">First, we need to go </span><span class="No-Break"><span class="koboSpan" id="kobo.901.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.902.1">Credentials</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer357">
<span class="koboSpan" id="kobo.904.1"><img alt="Figure 12.62 – The Credentials option" src="image/B18349_12_62.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.905.1">Figure 12.62 – The Credentials option</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.906.1">You’ll want to add</span><a id="_idIndexMarker1186"/><span class="koboSpan" id="kobo.907.1"> a credential </span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">for OCI.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer358">
<span class="koboSpan" id="kobo.909.1"><img alt="Figure 12.63 – Adding credentials" src="image/B18349_12_63.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.910.1">Figure 12.63 – Adding credentials</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.911.1">You’ll have to collect the following</span><a id="_idIndexMarker1187"/><span class="koboSpan" id="kobo.912.1"> information from your OCI tenancy – the user </span><strong class="bold"><span class="koboSpan" id="kobo.913.1">Oracle Cloud Identifier</span></strong><span class="koboSpan" id="kobo.914.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.915.1">OCID</span></strong><span class="koboSpan" id="kobo.916.1">), fingerprint, tenant OCID, and region. </span><span class="koboSpan" id="kobo.916.2">All these can be found under </span><strong class="bold"><span class="koboSpan" id="kobo.917.1">User</span></strong><span class="koboSpan" id="kobo.918.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.919.1">User settings</span></strong><span class="koboSpan" id="kobo.920.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.921.1">API Keys</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.923.1">Navigate and log in to your OCI console, and go to the user (the person icon on the </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">right-hand side):</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer359">
<span class="koboSpan" id="kobo.925.1"><img alt="Figure 12.64 – The user icon on the right-hand side" src="image/B18349_12_64.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.926.1">Figure 12.64 – The user icon on the right-hand side</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.927.1">Then, navigate to </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.928.1">User settings</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.929.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer360">
<span class="koboSpan" id="kobo.930.1"><img alt="Figure 12.65 – The OCI User settings option" src="image/B18349_12_65.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.931.1">Figure 12.65 – The OCI User settings option</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.932.1">All the data will be under </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.933.1">API Keys</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.934.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer361">
<span class="koboSpan" id="kobo.935.1"><img alt="Figure 12.66 – The OCI API Keys menu" src="image/B18349_12_66.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.936.1">Figure 12.66 – The OCI API Keys menu</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.937.1">Make sure to select</span><a id="_idIndexMarker1188"/><span class="koboSpan" id="kobo.938.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.939.1">View Configuration </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.940.1">file</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.941.1"> option:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer362">
<span class="koboSpan" id="kobo.942.1"><img alt="Figure 12.67 – Configuration file" src="image/B18349_12_67.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.943.1">Figure 12.67 – Configuration file</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.944.1">All the data you need for the OCI setting in OLAM will be in this </span><span class="No-Break"><span class="koboSpan" id="kobo.945.1">configuration file:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer363">
<span class="koboSpan" id="kobo.946.1"><img alt="Figure 12.68 – The configuration file details" src="image/B18349_12_68.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.947.1">Figure 12.68 – The configuration file details</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.948.1">Enter all the </span><span class="No-Break"><span class="koboSpan" id="kobo.949.1">collected information.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer364">
<span class="koboSpan" id="kobo.950.1"><img alt="Figure 12.69 – The credential variables for the OCI user OCID, fingerprint, and tenant OCID" src="image/B18349_12_69.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.951.1">Figure 12.69 – The credential variables for the OCI user OCID, fingerprint, and tenant OCID</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.952.1">Don’t forget to cut and paste</span><a id="_idIndexMarker1189"/><span class="koboSpan" id="kobo.953.1"> in the private user key used to access your OCI account.  </span><span class="koboSpan" id="kobo.953.2">This is the key you have on your system that you use to log in </span><span class="No-Break"><span class="koboSpan" id="kobo.954.1">to OCI.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer365">
<span class="koboSpan" id="kobo.955.1"><img alt="Figure 12.70 – The OCI private key" src="image/B18349_12_70.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.956.1">Figure 12.70 – The OCI private key</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.957.1">Save the credential, which will bring you to the </span><strong class="bold"><span class="koboSpan" id="kobo.958.1">Details</span></strong><span class="koboSpan" id="kobo.959.1"> page, showing you a summary of the credential</span><a id="_idIndexMarker1190"/><span class="koboSpan" id="kobo.960.1"> you </span><span class="No-Break"><span class="koboSpan" id="kobo.961.1">just configured.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer366">
<span class="koboSpan" id="kobo.962.1"><img alt="Figure 12.71 – The OCI OLAM credential configuration details" src="image/B18349_12_71.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.963.1">Figure 12.71 – The OCI OLAM credential configuration details</span></p>
<h2 id="_idParaDest-273"><a id="_idTextAnchor362"/><span class="koboSpan" id="kobo.964.1">How to do it…</span></h2>
<ol>
<li value="1"><span class="koboSpan" id="kobo.965.1">Check the version</span><a id="_idIndexMarker1191"/><span class="koboSpan" id="kobo.966.1"> of </span><span class="No-Break"><span class="koboSpan" id="kobo.967.1">Ansible core:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.968.1">[opc@olam-target-1 ~]$ ansible --version</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.969.1">ansible [core 2.14.2]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.970.1">  config file = /etc/ansible/ansible.cfg</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.971.1">  configured module search path = ['/home/opc/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.972.1">  ansible python module location = /usr/lib/python3.11/site-packages/ansible</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.973.1">  ansible collection location = /home/opc/.ansible/collections:/usr/share/ansible/collections</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.974.1">  executable location = /usr/bin/ansible</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.975.1">  python version = 3.11.2 (main, Jun 14 2023, 13:00:29) [GCC 8.5.0 20210514 (Red Hat 8.5.0-18.0.2)] (/usr/bin/python3.11)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.976.1">  jinja version = 3.1.2</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.977.1">  libyaml = True</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.978.1">[opc@olam-target-1 ~]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.979.1">Create</span><a id="_idIndexMarker1192"/> <span class="No-Break"><span class="koboSpan" id="kobo.980.1">an inventory:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.981.1">[opc@olam-target-1 ~]$ mkdir ~/ol-automation</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.982.1">[opc@olam-target-1 ol-automation]$ vi inventory</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.983.1">130.61.100.96</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.984.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.985.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.986.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.987.1">~</span></strong></pre></li> <li><span class="koboSpan" id="kobo.988.1">View and confirm</span><a id="_idIndexMarker1193"/><span class="koboSpan" id="kobo.989.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.990.1">inventory list:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.991.1">[opc@olam-target-1 ol-automation]$ ansible-inventory -i inventory --list</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.992.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.993.1">    "_meta": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.994.1">        "hostvars": {}</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.995.1">    },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.996.1">    "all": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.997.1">        "children": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.998.1">            "ungrouped"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.999.1">        ]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1000.1">    },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1001.1">    "ungrouped": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1002.1">        "hosts": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1003.1">            "130.61.100.96"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1004.1">        ]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1005.1">    }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1006.1">}</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1007.1">[opc@olam-target-1 ol-automation]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1008.1">Add a group</span><a id="_idIndexMarker1194"/><span class="koboSpan" id="kobo.1009.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.1010.1">the inventory:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1011.1">[opc@olam-target-1 ol-automation]$ vi inventory</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1012.1">[preproduction]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1013.1">130.61.100.96</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1014.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1015.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1016.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1017.1">~</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1018.1">Run the inventory </span><a id="_idIndexMarker1195"/><span class="koboSpan" id="kobo.1019.1">list again, as </span><span class="No-Break"><span class="koboSpan" id="kobo.1020.1">shown here:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1021.1">[opc@olam-target-1 ol-automation]$ ansible-inventory -i inventory --list</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1022.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1023.1">    "_meta": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1024.1">        "hostvars": {}</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1025.1">    },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1026.1">    "all": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1027.1">        "children": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1028.1">            "ungrouped",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1029.1">            "preproduction"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1030.1">        ]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1031.1">    },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1032.1">    "preproduction": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1033.1">        "hosts": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1034.1">            "130.61.100.96"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1035.1">        ]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1036.1">    }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1037.1">}</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1038.1">Run </span><strong class="source-inline"><span class="koboSpan" id="kobo.1039.1">ping</span></strong><span class="koboSpan" id="kobo.1040.1"> to verify</span><a id="_idIndexMarker1196"/> <span class="No-Break"><span class="koboSpan" id="kobo.1041.1">your inventory:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1042.1">[opc@olam-target-1 ol-automation]$ ansible all -i inventory -m ping</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1043.1">olam-target-1 | SUCCESS =&gt; {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1044.1">    "ansible_facts": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1045.1">        "discovered_interpreter_python": "/usr/bin/python"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1046.1">    },</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1047.1">    "changed": false,</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1048.1">    "ping": "pong"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1049.1">}</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1050.1">Create</span><a id="_idIndexMarker1197"/> <span class="No-Break"><span class="koboSpan" id="kobo.1051.1">your playbook:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1052.1">[opc@olam-target-1 ansible]$ sudo vi packt.yml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1053.1">---</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1054.1">- hosts: olam-target-2</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1055.1">  tasks:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1056.1">    - name: Print message</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1057.1">      debug:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1058.1">        msg: Hello from Packt Oracle Linux 8 Cookbook</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1059.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1060.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1061.1">~</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1062.1">~</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1063.1">Run </span><span class="No-Break"><span class="koboSpan" id="kobo.1064.1">your</span></span><span class="No-Break"><a id="_idIndexMarker1198"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1065.1"> playbook:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1066.1">[opc@olam-target-1 ansible]$ ansible-playbook -i inventory packt.yml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1067.1">PLAY [all] *********************************************************************</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1068.1">TASK [Gathering Facts] *********************************************************</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1069.1">[WARNING]: Platform linux on host olam-target-2 is using the discovered Python</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1070.1">interpreter at /usr/bin/python, but future installation of another Python</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1071.1">interpreter could change this. </span><span class="koboSpan" id="kobo.1071.2">See https://docs.ansible.com/ansible/2.14.2/referen</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1072.1">ce_appendices/interpreter_discovery.html for more information.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1073.1">ok: [olam-target-2]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1074.1">TASK [Print message] ***********************************************************</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1075.1">ok: [olam-target-2] =&gt; {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1076.1">    "msg": "Hello from Packt Oracle Linux 8 Cookbook"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1077.1">}</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1078.1">PLAY RECAP *********************************************************************</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1079.1">olam-target-2: ok=2    changed=0    unreachable=0    failed=0    skipped=0     rescued=0    ignored=0</span></strong></pre></li> </ol>
<h1 id="_idParaDest-274"><a id="_idTextAnchor363"/><span class="koboSpan" id="kobo.1080.1">Set it and forget it</span></h1>
<p><span class="koboSpan" id="kobo.1081.1">In Ansible playbooks, loops</span><a id="_idIndexMarker1199"/><span class="koboSpan" id="kobo.1082.1"> provide flexibility and efficiency to automate Oracle Linux environments or any Linux environment through OLAM. </span><span class="koboSpan" id="kobo.1082.2">Users can define dictionaries in their playbooks and use loop statements. </span><span class="koboSpan" id="kobo.1082.3">Dictionaries</span><a id="_idIndexMarker1200"/><span class="koboSpan" id="kobo.1083.1"> are like books, with all your infrastructure or applications in lists, and they can be used to describe variables in an automation. </span><span class="koboSpan" id="kobo.1083.2">This allows a set of tasks to be executed for each item in the loop, reducing the need for repetitive coding and making playbooks more concise </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">and manageable.</span></span></p>
<p><span class="koboSpan" id="kobo.1085.1">For instance, if you want to install multiple packages on a group of Oracle Linux servers without loops, you would need to write separate tasks for each package and server. </span><span class="koboSpan" id="kobo.1085.2">However, by using loops in OLAM with Ansible, you</span><a id="_idIndexMarker1201"/><span class="koboSpan" id="kobo.1086.1"> can define a list of packages and a list of servers and iterate over them, installing t</span><a id="_idTextAnchor364"/><a id="_idTextAnchor365"/><span class="koboSpan" id="kobo.1087.1">he packages on each server in a </span><span class="No-Break"><span class="koboSpan" id="kobo.1088.1">single task.</span></span></p>
<h2 id="_idParaDest-275"><a id="_idTextAnchor366"/><span class="koboSpan" id="kobo.1089.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.1090.1">In the previous recipe, we’ve shown that OLAM has additional features and capabilities that enhance automation capabilities, through either the web-based UI or the command line. </span><span class="koboSpan" id="kobo.1090.2">Users can granularly and visually define and manage their automation workflows, simplifying the process of creating and managing complex automation tasks. </span><span class="koboSpan" id="kobo.1090.3">Furthermore, this provides a centralized platform to manage and monitor the execution of </span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">Ansible playbooks.</span></span></p>
<p><span class="koboSpan" id="kobo.1092.1">In the following example, we have two sample servers, the same </span><strong class="source-inline"><span class="koboSpan" id="kobo.1093.1">target-1</span></strong><span class="koboSpan" id="kobo.1094.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1095.1">target-2</span></strong><span class="koboSpan" id="kobo.1096.1"> servers from the previous recipe, and we need to change the permissions of a specific user on both servers. </span><span class="koboSpan" id="kobo.1096.2">Without using loops, we would need to write separate tasks for each server, resulting in redundant code. </span><span class="koboSpan" id="kobo.1096.3">However, by utilizing loops, we can simplify the playbook and make it </span><span class="No-Break"><span class="koboSpan" id="kobo.1097.1">more efficient.</span></span></p>
<p><span class="koboSpan" id="kobo.1098.1">In this example, we will start</span><a id="_idIndexMarker1202"/><span class="koboSpan" id="kobo.1099.1"> by defining the playbook’s name and the target hosts, using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1100.1">hosts</span></strong><span class="koboSpan" id="kobo.1101.1"> directive. </span><span class="koboSpan" id="kobo.1101.2">We will also set </span><strong class="source-inline"><span class="koboSpan" id="kobo.1102.1">become</span></strong><span class="koboSpan" id="kobo.1103.1"> as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1104.1">true</span></strong><span class="koboSpan" id="kobo.1105.1">, indicating that the playbook should run with </span><span class="No-Break"><span class="koboSpan" id="kobo.1106.1">administrative privileges:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1107.1">
```yaml
---
- name: Change User Permissions
  hosts: server_group
  become: true
  vars:
    target_users:
      - user1
      - user2
  tasks:
    - name: Change user permissions
      file:
        path: /home/{{ item }}/documents
        owner: {{ item }}
        group: {{ item }}
        mode: "0755"
      with_items: "{{ target_users }}"
```</span></pre> <p><span class="koboSpan" id="kobo.1108.1">Next, we define a variable, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1109.1">target_users</span></strong><span class="koboSpan" id="kobo.1110.1">, that contains a list of users for whom we want to change permissions. </span><span class="koboSpan" id="kobo.1110.2">In this case, we have </span><strong class="source-inline"><span class="koboSpan" id="kobo.1111.1">user1</span></strong><span class="koboSpan" id="kobo.1112.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1113.1">user2</span></strong><span class="koboSpan" id="kobo.1114.1"> as our </span><span class="No-Break"><span class="koboSpan" id="kobo.1115.1">target users.</span></span></p>
<p><span class="koboSpan" id="kobo.1116.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1117.1">tasks</span></strong><span class="koboSpan" id="kobo.1118.1"> section contains a single task named </span><strong class="source-inline"><span class="koboSpan" id="kobo.1119.1">Change user permissions</span></strong><span class="koboSpan" id="kobo.1120.1">. </span><span class="koboSpan" id="kobo.1120.2">This task uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1121.1">file</span></strong><span class="koboSpan" id="kobo.1122.1"> module to change the ownership, group, and mode of the </span><span class="No-Break"><span class="koboSpan" id="kobo.1123.1">specified directory.</span></span></p>
<p><span class="koboSpan" id="kobo.1124.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">with_items</span></strong><span class="koboSpan" id="kobo.1126.1"> loop is used</span><a id="_idIndexMarker1203"/><span class="koboSpan" id="kobo.1127.1"> to iterate over the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1128.1">target_users</span></strong><span class="koboSpan" id="kobo.1129.1"> list. </span><span class="koboSpan" id="kobo.1129.2">Each iteration of the loop sets the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1130.1">item</span></strong><span class="koboSpan" id="kobo.1131.1"> variable to the current user from the list. </span><span class="koboSpan" id="kobo.1131.2">This variable is then used in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1132.1">path</span></strong><span class="koboSpan" id="kobo.1133.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1134.1">owner</span></strong><span class="koboSpan" id="kobo.1135.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1136.1">group</span></strong><span class="koboSpan" id="kobo.1137.1"> parameters of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1138.1">file</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1139.1"> module.</span></span></p>
<p><span class="koboSpan" id="kobo.1140.1">By using this loop, the playbook will execute the task for each user in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">target_users</span></strong><span class="koboSpan" id="kobo.1142.1"> list, effectively changing the permissions for both user and </span><span class="No-Break"><span class="koboSpan" id="kobo.1143.1">folder permissions:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1144.1">
```yaml
- name: Change user permissions
  hosts: all
  tasks:
    - name: Change permissions for users
      file:
        path: /path/to/directory
        owner: "{{ item }}"
        state: directory
      loop: "{{ users }}"
```</span></pre> <p><span class="koboSpan" id="kobo.1145.1">In the preceding example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1146.1">file</span></strong><span class="koboSpan" id="kobo.1147.1"> is used to change the ownership of the specified directory to each user in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1148.1">users</span></strong><span class="koboSpan" id="kobo.1149.1"> list. </span><span class="koboSpan" id="kobo.1149.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1150.1">item</span></strong><span class="koboSpan" id="kobo.1151.1"> variable represents the current user in </span><span class="No-Break"><span class="koboSpan" id="kobo.1152.1">the loop.</span></span></p>
<p><span class="koboSpan" id="kobo.1153.1">By following these steps, you can write and execute an Ansible loop in OLAM to change user permissions in different servers and the described directories. </span><span class="koboSpan" id="kobo.1153.2">This will allow you to automate the process and ensure consistent permissions across multiple systems, among many other aspects of administering </span><span class="No-Break"><span class="koboSpan" id="kobo.1154.1">multiple environments.</span></span></p>
<h2 id="_idParaDest-276"><a id="_idTextAnchor367"/><span class="koboSpan" id="kobo.1155.1">How to do it…</span></h2>
<ol>
<li><span class="koboSpan" id="kobo.1156.1">You’ll need to write the playbook</span><a id="_idIndexMarker1204"/><span class="koboSpan" id="kobo.1157.1"> first; I have used the demo project for </span><span class="No-Break"><span class="koboSpan" id="kobo.1158.1">simplicity purposes:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1159.1">[opc@olam-test /]$ cd /var/lib/awx/</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1160.1">[opc@olam-test awx]$ ls</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1161.1">awxfifo  projects  rsyslog  uwsgi.stats  venv</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1162.1">[opc@olam-test awx]$ cd projects/</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1163.1">[opc@olam-test projects]$ cd demo_bundled/</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1164.1">[opc@olam-test demo_bundled]$ ls</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1165.1">httpd.yaml  permissions.yaml  yum_update.yaml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1166.1">[opc@olam-test demo_bundled]$</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1167.1">[opc@olam-test demo_bundled]$ sudo vi change_permissions.yaml</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1168.1">---</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1169.1">- name: Change file permissions</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1170.1">  hosts: olam-test-1, olam-test-2</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1171.1">  become: true</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1172.1">  tasks:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1173.1">    - name: Change permissions for /tmp/changedir</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1174.1">      file:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1175.1">        path: /tmp/changedir</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1176.1">        owner: root</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1177.1">        group: root</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1178.1">        mode: "0755"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1179.1">```</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1180.1">[opc@olam-target-2 tmp]$ ls -ltr</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1181.1">total 0</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1182.1">drwxr-xr-x. </span><span class="koboSpan" id="kobo.1182.2">2 root root 6 Oct 18 11:53 unified-monitoring-agent</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1183.1">drwxrwxr-x. </span><span class="koboSpan" id="kobo.1183.2">2 opc  opc  6 Oct 26 15:27 changedir</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1184.1">[opc@olam-target-2 tmp]$</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1185.1">Each component of the playbook</span><a id="_idIndexMarker1205"/><span class="koboSpan" id="kobo.1186.1"> is separated into its own section to simplify the loop topology. </span><span class="koboSpan" id="kobo.1186.2">The following components </span><span class="No-Break"><span class="koboSpan" id="kobo.1187.1">are included:</span></span><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">name</span></strong><span class="koboSpan" id="kobo.1189.1">: This is the name of </span><span class="No-Break"><span class="koboSpan" id="kobo.1190.1">the playbook.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1191.1">hosts</span></strong><span class="koboSpan" id="kobo.1192.1">: This specifies the target servers where the playbook will be executed. </span><span class="koboSpan" id="kobo.1192.2">You can define the hosts directly in the playbook or use an </span><span class="No-Break"><span class="koboSpan" id="kobo.1193.1">inventory file.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1194.1">become: true</span></strong><span class="koboSpan" id="kobo.1195.1">: This allows the playbook to run with elevated privileges, which might be required to change </span><span class="No-Break"><span class="koboSpan" id="kobo.1196.1">user permissions.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1197.1">tasks</span></strong><span class="koboSpan" id="kobo.1198.1">: This section contains the list of tasks to </span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1">be executed.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1200.1">name</span></strong><span class="koboSpan" id="kobo.1201.1">: This is a description of </span><span class="No-Break"><span class="koboSpan" id="kobo.1202.1">the task.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">file</span></strong><span class="koboSpan" id="kobo.1204.1">: This module is used to change the permissions of </span><span class="No-Break"><span class="koboSpan" id="kobo.1205.1">a directory.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1206.1">path</span></strong><span class="koboSpan" id="kobo.1207.1">: This is the path to the directory where you want to </span><span class="No-Break"><span class="koboSpan" id="kobo.1208.1">change permissions.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1209.1">owner</span></strong><span class="koboSpan" id="kobo.1210.1">: This parameter specifies the username that the ownership should be changed to. </span><span class="koboSpan" id="kobo.1210.2">In this example, we used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">item</span></strong><span class="koboSpan" id="kobo.1212.1"> variable, which represents the current user in </span><span class="No-Break"><span class="koboSpan" id="kobo.1213.1">the loop.</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1214.1">state</span></strong><span class="koboSpan" id="kobo.1215.1">: </span><strong class="source-inline"><span class="koboSpan" id="kobo.1216.1">directory</span></strong><span class="koboSpan" id="kobo.1217.1">: This ensures that the path is </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">a directory.</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.1219.1">OLAM will execute the playbook on the specified servers, changing the user permissions for the specified directory to users </span><strong class="source-inline"><span class="koboSpan" id="kobo.1220.1">user1</span></strong><span class="koboSpan" id="kobo.1221.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1222.1">user2</span></strong><span class="koboSpan" id="kobo.1223.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.1224.1">this example.</span></span></li>
<li><span class="koboSpan" id="kobo.1225.1">Make sure to replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.1226.1">/path/to/directory</span></strong><span class="koboSpan" id="kobo.1227.1"> with the actual path of the directory you want to change permissions for, and update the list of users as per </span><span class="No-Break"><span class="koboSpan" id="kobo.1228.1">your requirements.</span></span></li>
<li><span class="koboSpan" id="kobo.1229.1">Ensure that you have proper</span><a id="_idIndexMarker1206"/><span class="koboSpan" id="kobo.1230.1"> SSH connectivity and the necessary privileges to change permissions on the target servers. </span><span class="koboSpan" id="kobo.1230.2">The following code snippet is a simple, canned YAML file depicting </span><span class="No-Break"><span class="koboSpan" id="kobo.1231.1">file permissions:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1232.1">
```yaml
---
- name: Change file permissions
  hosts: olam-test-1, olam-test-2
  become: true
  tasks:
    - name: Change permissions for /tmp/changedir
      file:
        path: /tmp/changedir
        owner: root
        group: root
        mode: "0755"
```</span></pre></li> <li><span class="koboSpan" id="kobo.1233.1">OLAM will run the playbook on the specified servers, changing the permissions of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1234.1">/tmp/changedir</span></strong><span class="koboSpan" id="kobo.1235.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1236.1">root:root</span></strong><span class="koboSpan" id="kobo.1237.1">, with a mode </span><span class="No-Break"><span class="koboSpan" id="kobo.1238.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1239.1">0755</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1240.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.1241.1">Save the </span><span class="No-Break"><span class="koboSpan" id="kobo.1242.1">playbook file.</span></span></li>
<li><span class="koboSpan" id="kobo.1243.1">Ensure you have proper SSH connectivity to the </span><span class="No-Break"><span class="koboSpan" id="kobo.1244.1">target servers.</span></span></li>
<li><span class="koboSpan" id="kobo.1245.1">Open the OLAM web-based </span><span class="No-Break"><span class="koboSpan" id="kobo.1246.1">user interface.</span></span></li>
<li><span class="koboSpan" id="kobo.1247.1">Create a new playbook in OLAM, or open an </span><span class="No-Break"><span class="koboSpan" id="kobo.1248.1">existing one.</span></span></li>
<li><span class="koboSpan" id="kobo.1249.1">Copy the content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1250.1">change_permissions.yaml</span></strong><span class="koboSpan" id="kobo.1251.1"> playbook file into the playbook editor </span><span class="No-Break"><span class="koboSpan" id="kobo.1252.1">in OLAM.</span></span></li>
<li><span class="koboSpan" id="kobo.1253.1">Save the playbook </span><span class="No-Break"><span class="koboSpan" id="kobo.1254.1">in OLAM.</span></span></li>
<li><span class="koboSpan" id="kobo.1255.1">Execute the playbook by selecting the target servers (</span><strong class="source-inline"><span class="koboSpan" id="kobo.1256.1">olam-test-1</span></strong><span class="koboSpan" id="kobo.1257.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1258.1">olam-test-2</span></strong><span class="koboSpan" id="kobo.1259.1">) from the inventory, or by manually specifying their </span><span class="No-Break"><span class="koboSpan" id="kobo.1260.1">IP addresses.</span></span></li>
<li><span class="koboSpan" id="kobo.1261.1">Click on the </span><strong class="bold"><span class="koboSpan" id="kobo.1262.1">Run</span></strong><span class="koboSpan" id="kobo.1263.1"> button in OLAM</span><a id="_idIndexMarker1207"/><span class="koboSpan" id="kobo.1264.1"> to execute </span><span class="No-Break"><span class="koboSpan" id="kobo.1265.1">the playbook.</span></span></li>
<li><span class="koboSpan" id="kobo.1266.1">OLAM will run the playbook on the specified servers, changing the permissions of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1267.1">/tmp/changedir</span></strong><span class="koboSpan" id="kobo.1268.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1269.1">root:root</span></strong><span class="koboSpan" id="kobo.1270.1">, with </span><span class="No-Break"><span class="koboSpan" id="kobo.1271.1">port </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1272.1">0755</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1273.1">.</span></span></li>
</ol>
</div>
</body></html>