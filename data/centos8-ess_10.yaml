- en: 12\. CentOS 8 Network Management
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 12. CentOS 8 网络管理
- en: It is difficult to envisage a CentOS 8 system that does not have at least one
    network connection, and harder still to imagine how such an isolated system could
    be of much practical use. The simple fact is that CentOS 8 is designed to provide
    enterprise level services over network and internet connections. A key part of
    learning how to administer a CentOS 8 system involves learning how to configure
    and manage the network interfaces installed on the system.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 很难想象一个 CentOS 8 系统没有至少一个网络连接，更难想象这样一个孤立的系统有什么实际用途。事实上，CentOS 8 被设计为提供通过网络和互联网连接的企业级服务。学习如何管理
    CentOS 8 系统的一个关键部分是学习如何配置和管理系统上安装的网络接口。
- en: This chapter is intended to provide an overview of network management on CentOS
    8 including the NetworkManager service and tools together with some other useful
    utilities.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章旨在概述 CentOS 8 上的网络管理，包括 NetworkManager 服务和工具，以及一些其他实用的工具。
- en: 12.1 An Introduction to NetworkManager
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 12.1 NetworkManager 简介
- en: NetworkManager is a service and set of tools designed specifically to make it
    easier to manage the networking configuration on Linux systems and is the default
    network management service on CentOS 8.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: NetworkManager 是一个服务和一组专门设计的工具，旨在简化 Linux 系统上的网络配置管理，是 CentOS 8 的默认网络管理服务。
- en: 'In addition to a service that runs in the background, NetworkManager also includes
    the following tools:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 除了在后台运行的服务外，NetworkManager 还包括以下工具：
- en: •nmcli - A tool for working with NetworkManager via the command-line. This tool
    is useful when access to a graphical environment is not available and can also
    be used within scripts to make network configuration changes.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: •nmcli - 一个通过命令行与 NetworkManager 配合使用的工具。这个工具在没有图形环境访问的情况下非常有用，也可以在脚本中使用，以进行网络配置更改。
- en: •nmtui - A basic text-based user interface for managing NetworkManager. This
    tool can be run within any terminal window and allows changes to be made by making
    menu selections and entering data. While useful for performing basic tasks, nmtui
    lacks many of the features provided by the nmcli tool.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: •nmtui - 一个基本的基于文本的用户界面，用于管理 NetworkManager。此工具可以在任何终端窗口中运行，并允许通过选择菜单和输入数据来进行更改。虽然在执行基本任务时有用，但
    nmtui 缺少 nmcli 工具提供的许多功能。
- en: •nm-connection-editor - A full graphical management tool providing access to
    most of the NetworkManager configuration options.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: •nm-connection-editor - 一个完整的图形管理工具，提供访问大多数 NetworkManager 配置选项的功能。
- en: •GNOME Settings - The Network screen of the GNOME desktop Settings application
    allows basic network management tasks to be performed.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: •GNOME 设置 - GNOME 桌面设置应用程序的网络屏幕允许执行基本的网络管理任务。
- en: •Cockpit Network Settings - The Network screen of the Cockpit web interface
    allows a range of network management tasks to be performed.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: •Cockpit 网络设置 - Cockpit Web 界面的网络屏幕允许执行一系列网络管理任务。
- en: Although there a number of different ways to manage the network environment
    on a CentOS 8 system, for the purposes of this chapter we will focus on the nmcli
    command. While the graphical tools are certainly useful when you have access to
    a desktop environment or Cockpit has been enabled, understanding the command-line
    interface is essential for situations where a command prompt is all that is available.
    Also, the graphical tools (Cockpit included) do not include all of the capabilities
    of the nmcli tool. Finally, once you have gained some familiarity with NetworkManager
    and nmcli, those skills will translate easily when using the more intuitive tool
    options. The same cannot be said of the graphical tool options. It is harder to
    use nmcli if, for example, you have only ever used nm-connection-editor.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在 CentOS 8 系统上有多种方式管理网络环境，但本章将重点介绍 nmcli 命令。虽然图形工具在您访问桌面环境或启用了 Cockpit 时非常有用，但在只有命令行界面的情况下，理解命令行界面是至关重要的。此外，图形工具（包括
    Cockpit）并不包括 nmcli 工具的所有功能。最后，一旦你对 NetworkManager 和 nmcli 有了一定的熟悉，这些技能可以轻松地转化为使用更直观的工具选项。而图形工具选项则不一定如此。例如，如果你只使用过
    nm-connection-editor，那么使用 nmcli 会更为困难。
- en: 12.2 Installing and Enabling NetworkManager
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 12.2 安装和启用 NetworkManager
- en: 'NetworkManager should be installed by default for most CentOS 8 installations.
    Use the rpm command to find out if it needs to be installed:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: NetworkManager 应该在大多数 CentOS 8 安装中默认安装。使用 rpm 命令查看是否需要安装：
- en: rpm -q NetworkManager
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: rpm -q NetworkManager
- en: NetworkManager-1.14.0-14.el8.x86_64
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: NetworkManager-1.14.0-14.el8.x86_64
- en: 'If necessary, install the package as follows:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如有必要，可以按以下方式安装软件包：
- en: dnf install NetworkManager
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: dnf install NetworkManager
- en: 'Once the package is installed, the NetworkManager daemon will need to be enabled
    so that it starts each time the system boots:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完软件包后，需要启用 NetworkManager 守护进程，以便每次系统启动时都能自动启动：
- en: systemctl enable NetworkManager
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: systemctl enable NetworkManager
- en: 'Finally, start the service running and check the status to verify that the
    launch was successful:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，启动服务并检查状态，以验证启动是否成功：
- en: systemctl start NetworkManager
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: systemctl start NetworkManager
- en: systemctl status NetworkManager
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: systemctl status NetworkManager
- en: ● NetworkManager.service - Network Manager
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ● NetworkManager.service - 网络管理器
- en: 'Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor
    >'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 已加载：已加载 (/usr/lib/systemd/system/NetworkManager.service; 已启用; vendor >
- en: 'Drop-In: /usr/lib/systemd/system/NetworkManager.service.d'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 'Drop-In: /usr/lib/systemd/system/NetworkManager.service.d'
- en: └─NetworkManager-ovs.conf
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: └─NetworkManager-ovs.conf
- en: 'Active: active (running) since Tue 2019-04-09 10:07:22 EDT; 2h 48min ago'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 激活状态：激活（运行中）自 2019-04-09 10:07:22 EDT 起； 2小时48分钟前
- en: .
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: .
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: 12.3 Basic nmcli Commands
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 12.3 基本的 nmcli 命令
- en: 'The nmcli command will have been installed as part of the Networkmanager package
    and can be executed from the command-line using the following syntax:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli 命令已作为 NetworkManager 包的一部分安装，并且可以通过命令行使用以下语法执行：
- en: nmcli [Options] Object {Command | help}
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli [选项] 对象 {命令 | 帮助}
- en: 'In the above syntax, Object will be one of general, networking, radio, connection,
    monitor, device or agent, all of which can be abbreviated to a few letters of
    the word (for example con, or even just the letter c, for connection). For example,
    all of the following commands will output help information relating to the device
    object:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述语法中，对象将是 general、networking、radio、connection、monitor、device 或 agent 中的一个，可以将其缩写为该词的几个字母（例如，connection
    可缩写为 con，甚至只用字母 c）。例如，以下所有命令都会输出与设备对象相关的帮助信息：
- en: nmcli device help
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli device help
- en: nmcli dev help
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli dev help
- en: nmcli d help
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli d help
- en: 'To check the overall status of NetworkManager on the system, use the following
    command:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查系统上 NetworkManager 的整体状态，请使用以下命令：
- en: nmcli general status
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli general status
- en: STATE CONNECTIVITY WIFI-HW WIFI WWAN-HW WWAN
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 状态 连接性 WIFI硬件 WIFI WWAN硬件 WWAN
- en: connected full enabled enabled enabled enabled
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 已连接 完全启用 启用 启用 启用 启用
- en: 'To check the status of the devices installed on a system, the following command
    can be used:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查系统上安装的设备状态，可以使用以下命令：
- en: nmcli dev status
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli dev status
- en: DEVICE TYPE STATE CONNECTION
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 设备 类型 状态 连接
- en: eno1 ethernet connected eno1
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: eno1 以太网 已连接 eno1
- en: wlp0s26u1u2 wifi connected zoneone
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: wlp0s26u1u2 wifi 已连接 zoneone
- en: virbr0 bridge connected virbr0
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0 桥接 已连接 virbr0
- en: lo loopback unmanaged --
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: lo 回环 未管理 --
- en: virbr0-nic tun unmanaged --
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0-nic tun 未管理 --
- en: 'The output may also be modified by using the -p (pretty) option to make the
    output more human friendly:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果还可以通过使用 -p（pretty）选项进行修改，使输出更具人性化：
- en: nmcli -p dev status
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli -p dev status
- en: =====================
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: =====================
- en: Status of devices
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 设备状态
- en: =====================
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: =====================
- en: DEVICE TYPE STATE CONNECTION
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 设备 类型 状态 连接
- en: '-------------------------------------------------------------------'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '-------------------------------------------------------------------'
- en: eno1 ethernet connected eno1
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: eno1 以太网 已连接 eno1
- en: wlp0s26u1u2 wifi connected zoneone
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: wlp0s26u1u2 wifi 已连接 zoneone
- en: virbr0 bridge connected virbr0
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0 桥接 已连接 virbr0
- en: lo loopback unmanaged --
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: lo 回环 未管理 --
- en: virbr0-nic tun unmanaged --
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0-nic tun 未管理 --
- en: 'Conversely, the -t option may be used to make the output more terse and suitable
    for automated processing:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，可以使用 -t 选项使输出更简洁，适合自动处理：
- en: nmcli -t dev status
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli -t dev status
- en: eno1:ethernet:connected:eno1
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: eno1:以太网:已连接:eno1
- en: wlp0s26u1u2:wifi:connected:emilyzone
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: wlp0s26u1u2:wifi:已连接:emilyzone
- en: virbr0:bridge:connected:virbr0
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0:桥接:已连接:virbr0
- en: 'lo:loopback:unmanaged:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 'lo:回环:未管理:'
- en: 'virbr0-nic:tun:unmanaged:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 'virbr0-nic:tun:未管理:'
- en: From the status output, we can see that the system has two physical devices
    installed, one Ethernet and the other a Wi-Fi device.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 从状态输出中，我们可以看到系统已安装两台物理设备，一台为以太网，另一台为 Wi-Fi 设备。
- en: The bridge (virbr) entries are virtual devices used to provide networking for
    virtual machines (the topic of virtualization will be covered starting with the
    chapter entitled [“An Overview of Virtualization Techniques”](../Text/Virtualization_Overview.xhtml#_idTextAnchor248)).
    The loopback interface is a special virtual device that allows the system to communicate
    with itself and is typically used to perform network diagnostics.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 桥接（virbr）条目是用于为虚拟机提供网络的虚拟设备（虚拟化技术概述章节将进行讨论，该章节名为[“虚拟化技术概述”](../Text/Virtualization_Overview.xhtml#_idTextAnchor248)）。回环接口是一种特殊的虚拟设备，允许系统与自身通信，通常用于进行网络诊断。
- en: When working with NetworkManager, it is important to understand the difference
    between a device and a connection. As described above, a device is either a physical
    or virtual network device while a connection is a network configuration that the
    device connects to.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 NetworkManager 时，了解设备和连接之间的区别非常重要。如上所述，设备可以是物理或虚拟网络设备，而连接是设备连接到的网络配置。
- en: 'The following command displays information about the connections configured
    on the system:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '以下命令显示了系统上配置的连接的信息:'
- en: nmcli con show
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con show
- en: NAME UUID TYPE DEVICE
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 名称 UUID 类型 设备
- en: zoneone 2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94 wifi wlp0s26u1u2
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: zoneone 2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94 wifi wlp0s26u1u2
- en: eno1 99d40009-6bb1-4182-baad-a103941c90ff ethernet eno1
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: eno1 99d40009-6bb1-4182-baad-a103941c90ff ethernet eno1
- en: virbr0 e13e9552-1765-42d1-b739-ff981668fbee bridge virbr0
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0 e13e9552-1765-42d1-b739-ff981668fbee bridge virbr0
- en: zonetwo f940a2d1-8c18-4a9e-bf29-817702429b8a wifi --
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: zonetwo f940a2d1-8c18-4a9e-bf29-817702429b8a wifi --
- en: zonethree fd65c5e5-3e92-4e9e-b924-1b0b07b70032 wifi --
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: zonethree fd65c5e5-3e92-4e9e-b924-1b0b07b70032 wifi --
- en: From the above output, we can see that the Wi-Fi device (wlp0s26u1u2) is connected
    to a wireless network named zoneone while the Ethernet device (eno1) is connected
    to a connection named eno1\. In addition to zoneone, NetworkManager has also listed
    two other Wi-Fi connections named zonetwo and zonethree, neither of which currently
    have a device connected.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述输出中，我们可以看到 Wi-Fi 设备（wlp0s26u1u2）连接到名为 zoneone 的无线网络，而以太网设备（eno1）连接到名为 eno1
    的连接。除了 zoneone，NetworkManager 还列出了另外两个名为 zonetwo 和 zonethree 的 Wi-Fi 连接，目前都没有设备连接。
- en: 'To find out the IP address allocated to a connection, the ip tool can be used
    with the address option:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '要查找分配给连接的 IP 地址，可以使用 ip 工具加上 address 选项:'
- en: ip address
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ip address
- en: 'This can also be abbreviated:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '这也可以简写为:'
- en: ip a
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ip a
- en: .
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: .
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: '3: wlp0s26u1u2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP
    group default qlen 1000'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '3: wlp0s26u1u2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP
    group default qlen 1000'
- en: link/ether 74:da:38:ee:be:50 brd ff:ff:ff:ff:ff:ff
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: link/ether 74:da:38:ee:be:50 brd ff:ff:ff:ff:ff:ff
- en: inet 192.168.1.121/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s26u1u2
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: inet 192.168.1.121/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s26u1u2
- en: valid_lft 57584sec preferred_lft 57584sec
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: valid_lft 57584秒 preferred_lft 57584秒
- en: .
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: .
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: The ip command will output information for all of the devices detected on the
    system. The above output shows that the Wi-Fi device has been assigned an IP address
    of 192.168.1.121.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: ip 命令将输出系统检测到的所有设备的信息。上述输出显示，Wi-Fi 设备已被分配 IP 地址 192.168.1.121。
- en: 'If we only wanted to list active connections, the nmcli command could have
    been used with the -a option:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '如果我们只想列出活动连接，可以使用 nmcli 命令加上 -a 选项:'
- en: nmcli con show -a
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con show -a
- en: NAME UUID TYPE DEVICE
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 名称 UUID 类型 设备
- en: emilyzone 2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94 wifi wlp0s26u1u2
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: emilyzone 2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94 wifi wlp0s26u1u2
- en: eno1 99d40009-6bb1-4182-baad-a103941c90ff ethernet eno1
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: eno1 99d40009-6bb1-4182-baad-a103941c90ff ethernet eno1
- en: virbr0 e13e9552-1765-42d1-b739-ff981668fbee bridge virbr0
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: virbr0 e13e9552-1765-42d1-b739-ff981668fbee bridge virbr0
- en: 'To switch the Wi-Fi device connection from zoneone to zonetwo, we can run the
    following command:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '要将 Wi-Fi 设备连接从 zoneone 切换到 zonetwo，可以运行以下命令:'
- en: nmcli device wifi connect zonetwo -ask
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli device wifi connect zonetwo -ask
- en: 'Password:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '密码:'
- en: 'The -ask flag causes nmcli to prompt the user to enter the password for the
    Wi-Fi network. To include the Wi-Fi password on the command-line (particularly
    useful if the command is being executed in a script), use the password option:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '-ask 标志会导致 nmcli 提示用户输入 Wi-Fi 网络的密码。要在命令行中包含 Wi-Fi 密码（特别是如果命令在脚本中执行时），请使用 password
    选项:'
- en: nmcli device wifi connect zonetwo password <password here>
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli device wifi connect zonetwo password <password here>
- en: 'The nmcli tool may also be used to scan for available Wi-Fi networks as follows:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 'nmcli 工具也可以用来扫描可用的 Wi-Fi 网络，如下所示:'
- en: nmcli device wifi list
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli device wifi list
- en: IN-USE SSID MODE CHAN RATE SIGNAL BARS SECURITY
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: IN-USE SSID MODE CHAN RATE SIGNAL BARS SECURITY
- en: zoneone Infra 6 195 Mbit/s 80 WPA2
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: zoneone Infra 6 195 Mbit/s 80 WPA2
- en: '* zonetwo Infra 11 130 Mbit/s 74 WPA1 WPA2'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '* zonetwo Infra 11 130 Mbit/s 74 WPA1 WPA2'
- en: 'A currently active connection can be deactivated as follows:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 当前激活的连接可以通过以下方式停用：
- en: nmcli con down <connection name>
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con down <连接名称>
- en: 'Similarly, an inactive connection can be brought back up at any time:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，任何时候都可以重新激活一个非活动连接：
- en: nmcli con up <connection name>
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con up <连接名称>
- en: 'When a connection is brought down, NetworkManager automatically searches for
    another connection, activates it and assigns it to the device to which the previous
    connection was established. To prevent a connection from being used in this situation,
    disable the autoconnect option as follows:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 当连接被停用时，NetworkManager 会自动搜索另一个连接，激活该连接并将其分配给先前建立连接的设备。为了防止在这种情况下使用某个连接，可以通过以下方式禁用自动连接选项：
- en: nmcli con mod <connection name> connection.autoconnect no
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con mod <连接名称> connection.autoconnect no
- en: 'The following command may be used to obtain additional information about a
    specific connection. This includes the current values for all the connection properties:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令可用于获取有关特定连接的更多信息。这包括所有连接属性的当前值：
- en: nmcli con show eno1
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con show eno1
- en: 'connection.id: eno1'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.id: eno1'
- en: 'connection.uuid: 99d40009-6bb1-4182-baad-a103941c90ff'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.uuid: 99d40009-6bb1-4182-baad-a103941c90ff'
- en: 'connection.stable-id: --'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.stable-id: --'
- en: 'connection.type: 802-3-ethernet'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.type: 802-3-ethernet'
- en: 'connection.interface-name: eno1'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.interface-name: eno1'
- en: 'connection.autoconnect: yes'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.autoconnect: yes'
- en: 'connection.autoconnect-priority: 0'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.autoconnect-priority: 0'
- en: 'connection.autoconnect-retries: -1 (default)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.autoconnect-retries: -1（默认值）'
- en: 'connection.multi-connect: 0 (default)'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.multi-connect: 0（默认值）'
- en: 'connection.auth-retries: -1'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.auth-retries: -1'
- en: 'connection.timestamp: 1554833695'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.timestamp: 1554833695'
- en: 'connection.read-only: no'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.read-only: no'
- en: 'connection.permissions: --'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.permissions: --'
- en: 'connection.zone: --'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.zone: --'
- en: 'connection.master: --'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.master: --'
- en: 'connection.slave-type: --'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.slave-type: --'
- en: 'connection.autoconnect-slaves: -1 (default)'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 'connection.autoconnect-slaves: -1（默认值）'
- en: .
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: .
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: .
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: 'All of these properties can be modified using nmcli with the modify option
    using the following syntax:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些属性都可以使用 nmcli 的 modify 选项进行修改，语法如下：
- en: nmcli con mod <connection name> connection.<property name> <setting>
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con mod <连接名称> connection.<属性名称> <设置>
- en: 12.4 Working with Connection Profiles
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 12.4 使用连接配置文件
- en: 'So far we have explored the use of connections without explaining how a connection
    is configured. The configuration of a connection is referred to as a connection
    profile and is stored in a file located in the /etc/sysconfig/network-scripts
    directory, the contents of which might read as follows:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经探讨了如何使用连接，但尚未解释如何配置连接。连接的配置被称为连接配置文件，并存储在 /etc/sysconfig/network-scripts
    目录中的一个文件中，该文件的内容可能如下所示：
- en: ls /etc/sysconfig/network-scripts
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ls /etc/sysconfig/network-scripts
- en: ifcfg-zoneone ifcfg-eno1 ifdown-ppp
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: ifcfg-zoneone ifcfg-eno1 ifdown-ppp
- en: ifcfg-zonethree ifcfg-zonetwo ifup-ppp keys-zonethree
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: ifcfg-zonethree ifcfg-zonetwo ifup-ppp keys-zonethree
- en: keys-zoneone keys-zonetwo
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: keys-zoneone keys-zonetwo
- en: Each of the files prefixed with ifcg- is an interface configuration file containing
    the connection profile for the corresponding connection while the key- files contain
    the passwords for the Wi-Fi connections.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 每个以 ifcg- 为前缀的文件都是一个接口配置文件，包含相应连接的连接配置文件，而 key- 文件则包含 Wi-Fi 连接的密码。
- en: 'Consider, for example, the contents of the ifcfg-eno1 file:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑 ifcfg-eno1 文件的内容：
- en: TYPE=Ethernet
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: TYPE=Ethernet
- en: PROXY_METHOD=none
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: PROXY_METHOD=none
- en: BROWSER_ONLY=no
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: BROWSER_ONLY=no
- en: DEFROUTE=yes
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: DEFROUTE=yes
- en: IPV4_FAILURE_FATAL=no
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: IPV4_FAILURE_FATAL=no
- en: NAME=eno1
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: NAME=eno1
- en: UUID=99d40009-6bb1-4182-baad-a103941c90ff
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: UUID=99d40009-6bb1-4182-baad-a103941c90ff
- en: DEVICE=eno1
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: DEVICE=eno1
- en: ONBOOT=yes
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: ONBOOT=yes
- en: BOOTPROTO=dhcp
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: BOOTPROTO=dhcp
- en: IPV6INIT=yes
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6INIT=yes
- en: IPV6_AUTOCONF=yes
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_AUTOCONF=yes
- en: IPV6_DEFROUTE=yes
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_DEFROUTE=yes
- en: IPV6_FAILURE_FATAL=no
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_FAILURE_FATAL=no
- en: IPV6_ADDR_GEN_MODE=stable-privacy
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_ADDR_GEN_MODE=stable-privacy
- en: 'The file contains basic information about the connection, including the type
    (Ethernet) of the device to which it is currently assigned (eno1) and the fact
    that the connection is to be automatically activated on system boot with an IP
    address obtained using DHCP. Changes to the connection profile can be implemented
    by modifying this file and instructing nmcli to reload the connection configuration
    files:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 该文件包含有关连接的基本信息，包括设备类型（以太网）以及当前分配的设备（eno1），并且该连接将在系统启动时自动激活，并通过 DHCP 获取 IP 地址。通过修改此文件并指示
    nmcli 重新加载连接配置文件，可以实现对连接配置文件的更改：
- en: nmcli con reload
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con reload
- en: 'New connection profiles can also be created manually or generated automatically
    by nmcli. As an example, assume that a new network device has been installed on
    the system. When this happens, the NetworkManager service will detect the new
    hardware and create a device for it. In the example below, the new device has
    been assigned the name eno2:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 新的连接配置文件也可以通过nmcli手动创建或自动生成。例如，假设系统中安装了新的网络设备。当发生这种情况时，NetworkManager服务会检测到新硬件并为其创建一个设备。在以下示例中，新设备已被分配了名称eno2：
- en: nmcli dev status
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli dev status
- en: DEVICE TYPE STATE CONNECTION
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: DEVICE TYPE STATE CONNECTION
- en: en01 ethernet connected eno1
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: en01以太网已连接 eno1
- en: eno2 ethernet connected Wired connection 1
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: eno2以太网已连接 有线连接1
- en: 'NetworkManager automatically detected the device, activated it and assigned
    it to a connection named “Wired connection 1”. This is a default connection over
    which we have no configuration control because there is no interface configuration
    file for it in /etc/sysconfig/network-scripts. The next steps are to delete the
    “Wired connection 1” connection and use nmcli to create a new connection and assign
    it to the device. The command to delete a connection is as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: NetworkManager自动检测到设备，激活了它并将其分配到名为“有线连接 1”的连接上。这是一个默认连接，我们无法对其进行配置控制，因为在/etc/sysconfig/network-scripts中没有该接口的配置文件。接下来的步骤是删除“有线连接
    1”连接，并使用nmcli创建一个新的连接并将其分配给设备。删除连接的命令如下：
- en: nmcli con delete "Wired connection 1"
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con delete "有线连接 1"
- en: 'Next, nmcli can be used to create a new connection profile configured either
    with a static IP address, or a dynamic IP address obtained from a DHCP server.
    To create a dynamic connection profile named dyn_ip, the following command would
    be used:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，可以使用nmcli创建一个新的连接配置文件，该配置文件可以使用静态IP地址，或者通过DHCP服务器获取动态IP地址。要创建一个名为dyn_ip的动态连接配置文件，可以使用以下命令：
- en: nmcli connection add type ethernet con-name dyn_ip ifname eno2
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli connection add type ethernet con-name dyn_ip ifname eno2
- en: Connection 'dyn_ip' (160d9e10-bbc8-439a-9c47-a2ec52990472) successfully added.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 连接‘dyn_ip’（160d9e10-bbc8-439a-9c47-a2ec52990472）成功添加。
- en: 'To create a new connection profile without locking it to a specific device,
    simply omit the ifname option in the command:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个新的连接配置文件，而不将其锁定到特定设备，只需在命令中省略ifname选项：
- en: nmcli connection add type ethernet con-name dyn_ip
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli connection add type ethernet con-name dyn_ip
- en: After the connection has been created, a file named ifcg-dyn_ip will have been
    added to the /etc/sysconfig/network-scripts directory.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 创建连接后，一个名为ifcg-dyn_ip的文件将被添加到/etc/sysconfig/network-scripts目录中。
- en: 'Alternatively, to create a connection named static_ip assigned a static IP
    address (in this case 192.168.1.200) the following command would be used:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，要创建一个名为static_ip的连接并分配静态IP地址（此例中为192.168.1.200），可以使用以下命令：
- en: nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24
    gw4 192.168.1.1
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24
    gw4 192.168.1.1
- en: Connection ‘static_ip’ (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully added.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 连接‘static_ip’（3fccafb3-e761-4271-b310-ad0f28ee8606）成功添加。
- en: 'The corresponding ifcg-static_ip file will read as follows:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 对应的ifcg-static_ip文件内容如下所示：
- en: TYPE=Ethernet
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: TYPE=Ethernet
- en: PROXY_METHOD=none
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: PROXY_METHOD=none
- en: BROWSER_ONLY=no
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: BROWSER_ONLY=no
- en: BOOTPROTO=none
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: BOOTPROTO=none
- en: IPADDR=192.168.1.200
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: IPADDR=192.168.1.200
- en: PREFIX=24
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: PREFIX=24
- en: GATEWAY=192.168.1.1
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: GATEWAY=192.168.1.1
- en: DEFROUTE=yes
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: DEFROUTE=yes
- en: IPV4_FAILURE_FATAL=no
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: IPV4_FAILURE_FATAL=no
- en: IPV6INIT=yes
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6INIT=yes
- en: IPV6_AUTOCONF=yes
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_AUTOCONF=yes
- en: IPV6_DEFROUTE=yes
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_DEFROUTE=yes
- en: IPV6_FAILURE_FATAL=no
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_FAILURE_FATAL=no
- en: IPV6_ADDR_GEN_MODE=stable-privacy
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: IPV6_ADDR_GEN_MODE=stable-privacy
- en: NAME=static_ip
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: NAME=static_ip
- en: UUID=3fccafb3-e761-4271-b310-ad0f28ee8606
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: UUID=3fccafb3-e761-4271-b310-ad0f28ee8606
- en: DEVICE=eno2
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: DEVICE=eno2
- en: ONBOOT=yes
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: ONBOOT=yes
- en: 'The command to add a new connection may be altered slightly to also assign
    both IPv4 and IPv6 static addresses:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 添加新连接的命令可以稍微修改，以便同时分配IPv4和IPv6静态地址：
- en: nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24
    gw4 192.168.1.1 gw4 192.168.1.1 ip6 cabf::4532 gw6 2010:dfa::1
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24
    gw4 192.168.1.1 gw4 192.168.1.1 ip6 cabf::4532 gw6 2010:dfa::1
- en: 12.5 Interactive Editing
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 12.5 交互式编辑
- en: 'In addition to using nmcli with command-line options, the tool also includes
    an interactive mode that can be used to create and modify connection profiles.
    The following transcript, for example, shows interactive mode being used to create
    a new Ethernet connection named demo_con:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用nmcli带有命令行选项外，该工具还包括一个交互模式，可以用于创建和修改连接配置文件。例如，以下记录展示了使用交互模式创建一个名为demo_con的新以太网连接：
- en: nmcli con edit
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con edit
- en: 'Valid connection types: 6lowpan, 802-11-olpc-mesh (olpc-mesh), 802-11-wireless
    (wifi), 802-3-ethernet (ethernet), adsl, bluetooth, bond, bridge, cdma, dummy,
    generic, gsm, infiniband, ip-tunnel, macsec, macvlan, ovs-bridge, ovs-interface,
    ovs-port, pppoe, team, tun, vlan, vpn, vxlan, wimax, wpan, bond-slave, bridge-slave,
    team-slave'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 有效的连接类型：6lowpan，802-11-olpc-mesh（olpc-mesh），802-11-wireless（wifi），802-3-ethernet（以太网），adsl，蓝牙，bond，桥接，cdma，dummy，generic，gsm，infiniband，ip-tunnel，macsec，macvlan，ovs-bridge，ovs-interface，ovs-port，pppoe，team，tun，vlan，vpn，vxlan，wimax，wpan，bond-slave，bridge-slave，team-slave
- en: 'Enter connection type: ethernet'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 输入连接类型：以太网
- en: ===| nmcli interactive connection editor |===
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: ===| nmcli 交互式连接编辑器 |===
- en: Adding a new ‘802-3-ethernet’ connection
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 添加一个新的 ‘802-3-ethernet’ 连接
- en: Type ‘help’ or ‘?’ for available commands.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 'help' 或 '?' 获取可用命令。
- en: Type ‘print’ to show all the connection properties.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 'print' 显示所有连接属性。
- en: Type ‘describe [<setting>.<prop>]’ for detailed property description.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 ‘describe [<setting>.<prop>]’ 查看详细属性描述。
- en: 'You may edit the following settings: connection, 802-3-ethernet (ethernet),
    802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以编辑以下设置：连接，802-3-ethernet（以太网），802-1x，dcb，sriov，ethtool，match，ipv4，ipv6，tc，代理
- en: nmcli> set connection.id demo_con
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 connection.id demo_con
- en: nmcli> set connection.interface eno1
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 connection.interface eno1
- en: nmcli> set connection.autoconnect yes
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 connection.autoconnect yes
- en: nmcli> set ipv4.method auto
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 ipv4.method 自动
- en: nmcli> set 802-3-ethernet.mtu auto
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 802-3-ethernet.mtu 自动
- en: nmcli> set ipv6.method auto
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 ipv6.method 自动
- en: nmcli> save
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 保存
- en: Saving the connection with ‘autoconnect=yes’. That might result in an immediate
    activation of the connection.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 保存连接并设置 ‘autoconnect=yes’。这可能会导致连接立即激活。
- en: Do you still want to save? (yes/no) [yes] yes
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 您是否仍希望保存？（是/否）[是] 是
- en: Connection ‘demo_con’ (cb837408-6c6f-4572-9548-4932f88b9275) successfully saved.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 连接 ‘demo_con’ (cb837408-6c6f-4572-9548-4932f88b9275) 已成功保存。
- en: nmcli> quit
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 退出
- en: 'The following transcript, on the other hand, modifies the previously created
    static_ip connection profile to use a different static IP address to the one originally
    specified:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 以下记录修改了先前创建的 static_ip 连接配置文件，使用不同于原始指定的静态 IP 地址：
- en: nmcli con edit static_ip
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con 编辑 static_ip
- en: ===| nmcli interactive connection editor |===
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: ===| nmcli 交互式连接编辑器 |===
- en: 'Editing existing ''802-3-ethernet'' connection: ''static_ip'''
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑现有的 '802-3-ethernet' 连接：'static_ip'
- en: Type 'help' or '?' for available commands.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 'help' 或 '?' 获取可用命令。
- en: Type 'print' to show all the connection properties.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 'print' 显示所有连接属性。
- en: Type 'describe [<setting>.<prop>]' for detailed property description.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 'describe [<setting>.<prop>]' 查看详细属性描述。
- en: 'You may edit the following settings: connection, 802-3-ethernet (ethernet),
    802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以编辑以下设置：连接，802-3-ethernet（以太网），802-1x，dcb，sriov，ethtool，match，ipv4，ipv6，tc，代理
- en: nmcli> print ipv4.addresses
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 打印 ipv4.addresses
- en: 'ipv4.addresses: 192.168.1.200/24'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 'ipv4.addresses: 192.168.1.200/24'
- en: nmcli> set ipv4.addresses 192.168.1.201/24
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 设置 ipv4.addresses 192.168.1.201/24
- en: nmcli> save
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 保存
- en: Connection 'static_ip' (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully updated.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 连接 'static_ip' (3fccafb3-e761-4271-b310-ad0f28ee8606) 已成功更新。
- en: nmcli> quit
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> 退出
- en: 'After modifying an existing connection, remember to instruct NetworkManager
    to reload the configuration profiles:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 修改现有连接后，请记得指示 NetworkManager 重新加载配置文件：
- en: nmcli con reload
  id: totrans-238
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con 重新加载
- en: 'When using interactive mode, it is useful to know that there is an extensive
    built-in help system available to learn how to use the tool. The help topics can
    be accessed by typing help or ? at the nmcli > prompt:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用交互模式时，了解有一个丰富的内置帮助系统可以帮助你学习如何使用该工具是非常有用的。帮助主题可以通过在 nmcli > 提示符下输入 help 或
    ? 来访问：
- en: nmcli> ?
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: nmcli> ?
- en: '------------------------------------------------------------------------------'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '------------------------------------------------------------------------------'
- en: '---[ Main menu ]---'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '---[ 主菜单 ]---'
- en: 'goto [<setting> | <prop>] :: go to a setting or property'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '转到 [<setting> | <prop>] :: 转到某个设置或属性'
- en: 'remove <setting>[.<prop>] | <prop> :: remove setting or reset property value'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '移除 <setting>[.<prop>] | <prop> :: 移除设置或重置属性值'
- en: 'set [<setting>.<prop> <value>] :: set property value'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '设置 [<setting>.<prop> <value>] :: 设置属性值'
- en: 'describe [<setting>.<prop>] :: describe property'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '描述 [<setting>.<prop>] :: 描述属性'
- en: 'print [all | <setting>[.<prop>]] :: print the connection'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '打印 [all | <setting>[.<prop>]] :: 打印连接'
- en: 'verify [all | fix] :: verify the connection'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '验证 [all | fix] :: 验证连接'
- en: 'save [persistent|temporary] :: save the connection'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '保存 [persistent|temporary] :: 保存连接'
- en: 'activate [<ifname>] [/<ap>|<nsp>] :: activate the connection'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '激活 [<ifname>] [/<ap>|<nsp>] :: 激活连接'
- en: 'back :: go one level up (back)'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '返回 :: 向上一层返回 (back)'
- en: 'help/? [<command>] :: print this help'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 'help/? [<command>] :: 打印帮助信息'
- en: 'nmcli <conf-option> <value> :: nmcli configuration'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 'nmcli <conf-option> <value> :: nmcli 配置'
- en: 'quit :: exit nmcli'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 'quit :: 退出 nmcli'
- en: '------------------------------------------------------------------------------'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '------------------------------------------------------------------------------'
- en: 12.6 Configuring NetworkManager Permissions
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 12.6 配置 NetworkManager 权限
- en: 'In addition to making it easier to manage networks on CentOS 8, NetworkManager
    also allows permissions to be specified for connections. The following command,
    for example, restricts a connection profile to root and user accounts named john
    and caitlyn:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 除了简化 CentOS 8 上的网络管理，NetworkManager 还允许为连接指定权限。例如，以下命令将连接配置文件限制为 root 用户和名为
    john 和 caitlyn 的用户帐户：
- en: nmcli con mod static_ip connection.permissions user:root,john,caitlyn
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: nmcli con mod static_ip connection.permissions user:root,john,caitlyn
- en: Once the connection profiles have been reloaded by NetworkManager, the static_ip
    connection will only be active and accessible to other users when at least one
    of the designated users is logged in to an active session on the system. As soon
    as the last of these users logs out, the connection will go down and remain inactive
    until one of the users signs back in.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦 NetworkManager 重新加载了连接配置文件，静态_ip 连接仅在至少有一个指定用户登录到系统的活跃会话时才会处于活动状态并可供其他用户访问。只要最后一个用户注销，连接将会断开并保持不活跃，直到其中一个用户重新登录。
- en: In addition, only users with permission are able to make changes to the connection
    status or configuration.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，只有具有权限的用户才能更改连接状态或配置。
- en: 12.7 Summary
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 12.7 总结
- en: Network management on CentOS 8 is handled by the NetworkManager service. NetworkManager
    views a network as consisting of network interface devices and connections. A
    network device can be a physical Ethernet or Wi-Fi device or a virtual device
    used by a virtual machine guest. Connections represent the network to which the
    devices connect and are configured by connection profiles. A configuration profile
    will, among other settings, define whether the connection has a static or dynamic
    IP address, the IP address of any gateway used by the network and whether or not
    the connection should be established automatically each time the system starts
    up.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: CentOS 8 上的网络管理由 NetworkManager 服务处理。NetworkManager 将网络视为由网络接口设备和连接组成。网络设备可以是物理以太网或
    Wi-Fi 设备，或是虚拟机客户机使用的虚拟设备。连接表示设备连接的网络，并通过连接配置文件进行配置。配置文件将定义连接是否具有静态或动态 IP 地址、网络使用的任何网关的
    IP 地址，以及系统启动时是否自动建立连接。
- en: NetworkManager can be administered using a number of different tools including
    the nmcli and nmtui command-line tools, the nm-connection-editor graphical tool
    and the network settings section of the Cockpit web interface. In general, the
    nmcli command-line tool provides the most features and flexibility.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: NetworkManager 可以使用多种工具进行管理，包括 nmcli 和 nmtui 命令行工具、nm-connection-editor 图形工具以及
    Cockpit 网络设置界面。通常，nmcli 命令行工具提供了最多的功能和灵活性。
