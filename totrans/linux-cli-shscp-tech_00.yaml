- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: '*Linux Command-Line and Shell Scripting Techniques* is a book that will help
    you learn how to use the **Command-Line Interface** (**CLI**) and to further expand
    your CLI knowledge with the ability to do scripting. It looks at a big collection
    of CLI commands, shell scripting basics (loops, variables, and functions), and
    advanced scripting topics – such as troubleshooting. It also includes two chapters
    with script examples that should get you further ahead in your understanding of
    scripting while also offering good insight into how the shell scripting process
    works.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*Linux命令行与Shell脚本技术* 是一本帮助你学习如何使用 **命令行界面** (**CLI**) 并进一步扩展你的CLI知识，掌握脚本编写能力的书籍。它涵盖了大量的CLI命令，Shell脚本基础（循环、变量、函数）和高级脚本主题——例如故障排除。它还包括两个带有脚本示例的章节，这些示例将帮助你加深对脚本的理解，并深入了解Shell脚本的工作过程。'
- en: Who this book is for
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适用对象
- en: This book is for beginners and professionals alike, as it doesn't necessarily
    need a lot of prior Linux knowledge. That's partially what this book is for –
    to get to grips with using the command line and to further that usage model to
    shell scripting. For more advanced users, there's a bulk of content about shell
    scripting and corresponding examples that will help you to organize and improve
    your knowledge about shell scripting.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书适合初学者和专业人士，因为它不一定需要大量的Linux基础知识。这部分正是本书的目的——帮助你掌握命令行的使用，并将这一使用模式扩展到 Shell
    脚本编写。对于更高级的用户，本书还包含大量关于 Shell 脚本和相关示例的内容，帮助你组织和提高对 Shell 脚本的理解。
- en: What this book covers
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书所涉及内容
- en: '[*Chapter 1*](B16269_01_Final_PD_ePub.xhtml#_idTextAnchor012), *Basics of the
    Shell and Text Terminal*, discusses the concept of the shell and text terminal,
    configuration of the Bash shell, using some basic shell commands, and using the
    screen to get access to multiple virtual terminals in text mode.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*](B16269_01_Final_PD_ePub.xhtml#_idTextAnchor012)，*Shell 和文本终端基础*，讨论了
    Shell 和文本终端的概念、Bash Shell 的配置、一些基础的 Shell 命令的使用，以及如何使用屏幕来访问多个文本模式的虚拟终端。'
- en: '[*Chapter 2*](B16269_02_Final_PD_ePub.xhtml#_idTextAnchor037), *Using Text
    Editors*, takes us to the highly subjective world of text editors, where discussions
    have been happening for the past 30-40 years on the topic of *best editor*. As
    a part of this chapter, we''re going to use vi(m), nano, and some more advanced
    vi(m) settings.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第二章*](B16269_02_Final_PD_ePub.xhtml#_idTextAnchor037)，*使用文本编辑器*，带我们进入了文本编辑器的高度主观世界，在过去的30到40年里，关于*最佳编辑器*的话题一直在讨论。本章的一部分，我们将使用
    vi(m)、nano，以及一些更高级的 vi(m) 设置。'
- en: '[*Chapter 3*](B16269_03_Final_PD_ePub.xhtml#_idTextAnchor053), *Using Commands
    and Services for Process Management*, is about using files, folders, and services,
    specifically, how to administer them, how to secure them (files and folders),
    and how to manage them (services). A big chunk of this chapter is related to ACLs
    and systemctl, essential tools for system administrators.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第三章*](B16269_03_Final_PD_ePub.xhtml#_idTextAnchor053)，*使用命令和服务进行进程管理*，讲述了如何使用文件、文件夹和服务，具体来说，如何管理它们，如何保护它们（文件和文件夹），以及如何管理它们（服务）。本章的重点之一是关于
    ACLs 和 systemctl，它们是系统管理员必备的工具。'
- en: '[*Chapter 4*](B16269_04_Final_PD_ePub.xhtml#_idTextAnchor077), *Using Shell
    to Configure and Troubleshoot Network*, is all about working with files, folders,
    and services – working with permissions, manipulating file content, archiving
    and compressing files, and managing services. Throughout this chapter, there will
    be a lot of simple commands that we will be using later when we go on to scripting,
    as well.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第四章*](B16269_04_Final_PD_ePub.xhtml#_idTextAnchor077)，*使用Shell配置和排除网络故障*，主要讲述如何使用文件、文件夹和服务——处理权限、操作文件内容、归档和压缩文件、以及管理服务。在这一章中，我们将使用许多简单命令，这些命令在后续的脚本编写过程中也会用到。'
- en: '[*Chapter 5*](B16269_05_Final_PD_ePub.xhtml#_idTextAnchor105), *Using Commands
    for File, Directory, and Service Management*, is about making sure that we know
    the basics of fundamental networking configuration – nmcli and netplan, FirewallD
    and ufw, DNS resolving, and diagnostics. These are some of the settings that we
    most commonly re-configure post-deployment, so deep insight into them is a necessity.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第五章*](B16269_05_Final_PD_ePub.xhtml#_idTextAnchor105)，*使用命令进行文件、目录和服务管理*，讲解了我们如何确保掌握基本的网络配置知识——nmcli
    和 netplan，FirewallD 和 ufw，DNS 解析和诊断。这些是我们在部署后最常重新配置的设置，因此对它们的深刻理解是必不可少的。'
- en: '[*Chapter 6*](B16269_06_Final_PD_ePub.xhtml#_idTextAnchor138), *Shell-Based
    Software Management*, takes us through two of the most commonly used packaging
    systems (`dnf/yum` and `apt`), as well as some more advanced concepts, such as
    using additional repositories, streams, and profiles, creating custom repositories,
    and third-party software. Every Linux deployment needs us to have knowledge about
    package management, so this chapter is all about that.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第六章*](B16269_06_Final_PD_ePub.xhtml#_idTextAnchor138)，*基于 Shell 的软件管理*，带我们了解两种最常用的打包系统（`dnf/yum`
    和 `apt`），以及一些更高级的概念，比如使用额外的仓库、流和配置文件，创建自定义仓库和第三方软件。每一个 Linux 部署都需要我们了解包管理，因此本章内容就是围绕这一点展开的。'
- en: '[*Chapter 7*](B16269_07_Final_PD_ePub.xhtml#_idTextAnchor160), *Network-Based
    File Synchronization*, teaches us about the most commonly used tools to send and
    receive files and connect to remote destinations via a network – `ssh and scp,
    rsync, and vsftpd`. For anything ranging from hosting a Linux distribution mirror
    all the way to synchronizing files and backups, this is mandatory knowledge.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第七章*](B16269_07_Final_PD_ePub.xhtml#_idTextAnchor160)，*基于网络的文件同步*，讲解了我们最常用的工具，帮助我们通过网络发送和接收文件以及连接到远程目的地
    —— `ssh 和 scp, rsync, 以及 vsftpd`。无论是托管 Linux 发行版镜像，还是同步文件和备份，这都是必备的知识。'
- en: '[*Chapter 8*](B16269_08_Final_PD_ePub.xhtml#_idTextAnchor178), *Using the Command
    Line to Find, Extract, and Manipulate Text Content,* is all about using basic
    and more advanced ways of manipulating text files and content. We start off by
    doing simple things such as `paste and dos2unix`, and then move on to some of
    the most used commands in the IT world – `cut,` (`e`)`grep, and sed`.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第八章*](B16269_08_Final_PD_ePub.xhtml#_idTextAnchor178)，*使用命令行查找、提取和操作文本内容*，介绍了如何使用基础和更高级的方式来操作文本文件和内容。我们从做一些简单的操作开始，例如
    `paste 和 dos2unix`，然后逐步过渡到 IT 领域最常用的命令 —— `cut,` (`e`)`grep, 和 sed`。'
- en: '[*Chapter 9*](B16269_09_Final_PD_ePub.xhtml#_idTextAnchor206), *An Introduction
    to Shell Scripting*, is the starting point for the second part of this book, which
    is all about shell scripting and using previously mentioned tools and commands
    to create shell scripts. This chapter is about the basics of shell scripting and
    working with general concepts, such as input, output, error, and shell script
    hygiene.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第九章*](B16269_09_Final_PD_ePub.xhtml#_idTextAnchor206)，*Shell 脚本入门*，是本书第二部分的起点，主要介绍
    Shell 脚本编写，并利用之前提到的工具和命令来创建 Shell 脚本。本章将讲解 Shell 脚本的基础知识，并探讨一些通用概念，比如输入、输出、错误和脚本的清洁性。'
- en: '[*Chapter 10*](B16269_10_Final_PD_ePub.xhtml#_idTextAnchor225), *Using Loops*,
    goes deep into the concept of loops. We cover all the most used loops here – the
    `for` loop, `break` and `continue`, the `while` loop, the test-if loop, the `case`
    loop, and logical looping with conditions such as `and`, `or`, and `not`. This
    will further enhance our ability to do more things in shell scripts.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第十章*](B16269_10_Final_PD_ePub.xhtml#_idTextAnchor225)，*使用循环*，深入讲解了循环的概念。我们将在本章讨论所有最常用的循环
    —— `for` 循环、`break` 和 `continue`、`while` 循环、test-if 循环、`case` 循环，以及带有条件（如 `and`、`or`
    和 `not`）的逻辑循环。这将进一步增强我们在 Shell 脚本中做更多事情的能力。'
- en: '[*Chapter 11*](B16269_11_Final_PD_ePub.xhtml#_idTextAnchor256), *Working with
    Variables*, is about using variables in our shell script code – shell variables,
    quoting and special characters in variable values, assigning external variables
    via commands, as well as some logical operations on variables. Variables are the
    spine of shell scripting, and all permanent and temporary data gets stored in
    them, so, for whatever purpose we''re developing a shell script, variables are
    a must-have.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第十一章*](B16269_11_Final_PD_ePub.xhtml#_idTextAnchor256)，*变量使用*，介绍了如何在 Shell
    脚本代码中使用变量 —— Shell 变量、变量值中的引号和特殊字符、通过命令赋值外部变量，以及一些关于变量的逻辑操作。变量是 Shell 脚本的核心，所有的永久和临时数据都存储在变量中，因此，无论我们开发什么目的的
    Shell 脚本，变量都是必不可少的。'
- en: '[*Chapter 12*](B16269_12_Final_PD_ePub.xhtml#_idTextAnchor283), *Using Arguments
    and Functions*, is about further customizing and modularizing the shell script
    code, as we can use functions to do that. For that purpose, we are going to use
    external and shell arguments, to do away with the static nature of most of our
    previous shell script examples.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第十二章*](B16269_12_Final_PD_ePub.xhtml#_idTextAnchor283)，*使用参数和函数*，进一步定制和模块化我们的
    Shell 脚本代码，因为我们可以使用函数来实现这一点。为此，我们将使用外部和 Shell 参数，摆脱大多数之前 Shell 脚本示例中的静态特性。'
- en: '[*Chapter 13*](B16269_13_Final_PD_ePub.xhtml#_idTextAnchor316), *Using Arrays*,
    is about using arrays to store and manipulate data. Arrays are just one of those
    structures – we need them, we learn to not necessarily like them, but we can''t
    live without them, especially as we venture into the world of working with their
    many different capabilities, such as indexing, adding and removing members, and
    working with files as a de facto array source.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第13章*](B16269_13_Final_PD_ePub.xhtml#_idTextAnchor316)，*使用数组*，讲述了如何使用数组存储和操作数据。数组只是其中一种数据结构——我们需要它们，虽然不一定喜欢它们，但在很多情况下却离不开它们，特别是在我们开始接触它们的多种不同功能时，比如索引、添加和移除成员，以及将文件作为事实上的数组源来使用。'
- en: '[*Chapter 14*](B16269_14_Final_PD_ePub.xhtml#_idTextAnchor328), *Interacting
    with Shell Scripts*, is about moving from the idea of shell script code as a purely
    text-driven principle, and going in the opposite direction – to create a TUI-based
    interface to interact with a script. We are also going to have a play with `expect`
    script, which makes it easier for us to create a script that''s waiting for specific
    output and then doing something based on that output, which can be useful for
    the configuration of third-party systems at times.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第14章*](B16269_14_Final_PD_ePub.xhtml#_idTextAnchor328)，*与Shell脚本的交互*，讲述了从将Shell脚本代码视为纯文本驱动的原则，转向相反的方向——创建一个基于TUI的界面来与脚本进行交互。我们还将尝试`expect`脚本，它使我们能够更轻松地创建一个等待特定输出并基于该输出执行某些操作的脚本，这在配置第三方系统时有时非常有用。'
- en: '[*Chapter 15*](B16269_15_Final_PD_ePub.xhtml#_idTextAnchor345), *Troubleshooting
    Shell Scripts*, deals with shell script troubleshooting – common mistakes, debugging
    output via echoing values during script execution, Bash `-xv`, and other concepts.
    This is the last chapter before we start dealing with the many script examples
    that we prepared for you to use both as a learning tool and to work with them
    in production, if you so desire.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第15章*](B16269_15_Final_PD_ePub.xhtml#_idTextAnchor345)，*Shell脚本故障排除*，处理Shell脚本故障排除——常见错误、通过在脚本执行期间输出值进行调试、Bash
    `-xv`选项及其他概念。这是我们开始处理许多脚本示例的最后一章，这些示例将作为学习工具供您使用，也可以在生产环境中使用，如果您愿意的话。'
- en: '[*Chapter 16*](B16269_16_Final_PD_ePub.xhtml#_idTextAnchor367), *Shell Script
    Examples for Server Management, Network Configuration, and Backups*, sets us off
    in the direction of simple shell scripts – nine different examples to be exact.
    Topics vary from simple, modular code that can be implemented in any shell script
    (for example, how to check if we''re executing a script as root), to more complex
    examples such as dealing with date and time, the interactive configuration of
    network settings and firewalls, as well as some backup script examples.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第16章*](B16269_16_Final_PD_ePub.xhtml#_idTextAnchor367)，*用于服务器管理、网络配置和备份的Shell脚本示例*，带领我们进入简单Shell脚本的世界——具体来说是九个不同的示例。主题涵盖了从可以在任何Shell脚本中实现的简单、模块化代码（例如，如何检查我们是否以root身份执行脚本），到更复杂的示例，如处理日期和时间、交互式配置网络设置和防火墙，以及一些备份脚本示例。'
- en: '[*Chapter 17*](B16269_17_Final_PD_ePub.xhtml#_idTextAnchor404), *Advanced Shell
    Script Examples*, deals with more complex examples, such as a script to modify
    web server and security settings, bulk-creating users and groups with random passwords,
    scripted KVM virtual machine installation, and scripted KVM virtual machine administration
    (start, stop, getting info, manipulating snapshots, and so on). These are examples
    that we use in everyday life to drive the point of shell scripting home, which
    is all about automating boring, repetitive tasks and offloading them to a script
    that can do all of that for us.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第17章*](B16269_17_Final_PD_ePub.xhtml#_idTextAnchor404)，*高级Shell脚本示例*，介绍了更复杂的示例，如修改Web服务器和安全设置的脚本、大量创建具有随机密码的用户和组的脚本、脚本化的KVM虚拟机安装以及脚本化的KVM虚拟机管理（启动、停止、获取信息、操作快照等）。这些是我们在日常生活中使用的示例，旨在强调Shell脚本的核心理念——即自动化枯燥、重复的任务，并将其委托给可以为我们完成这些工作的脚本。'
- en: To get the most out of this book
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何充分利用本书
- en: '![](img/B16269_Preface_Table_01.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B16269_Preface_Table_01.jpg)'
- en: Download the color images
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781800205192_ColorImages.pdf](_ColorImages.pdf).'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的截图/图表的彩色图像。您可以在此下载：[https://static.packt-cdn.com/downloads/9781800205192_ColorImages.pdf](_ColorImages.pdf)。
- en: Conventions used
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了若干文本约定。
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: *To configure the host side of the network, you need
    the tunctl command from the User Mode Linux (UML) project*.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '`文中的代码`：表示文中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入及 Twitter 账号。例如：*要配置网络的主机端，您需要从用户模式
    Linux（UML）项目中获取 tunctl 命令*。'
- en: 'A block of code is set as follows:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 一段代码块的格式如下：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出按如下格式书写：
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: *Click* **Flash** *from Etcher to write the image*.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示一个新术语、重要词汇或屏幕上看到的词汇。例如，菜单或对话框中的词语在文本中通常会显示为这样的样式。举个例子：*点击* **Flash**
    *从 Etcher 写入镜像*。'
- en: Tips or Important Notes
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 如此显示。
- en: Get in touch
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与我们联系
- en: Feedback from our readers is always welcome.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    mention the book title in the subject of your message and email us at [customercare@packtpub.com](mailto:customercare@packtpub.com).'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您对本书的任何部分有疑问，请在邮件主题中提到书名，并通过[客户关怀邮箱](mailto:customercare@packtpub.com)与我们联系。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](https://www.packtpub.com/support/errata),
    selecting your book, clicking on the Errata Submission Form link, and entering
    the details.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现了错误，请您向我们报告。请访问[www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并填写相关详情。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the Internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上遇到任何我们作品的非法复制品，我们将非常感激您能提供相关的网址或网站名称。请通过[版权邮箱](mailto:copyright@packt.com)与我们联系，并附上该素材的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](https://authors.packtpub.com).'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域有专长，且有兴趣写作或参与书籍编写，请访问[authors.packtpub.com](https://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you've read *Linux Command Line and Shell Scripting Cookbook*, we'd love
    to hear your thoughts! [Please click here to go straight to the Amazon review
    page](https://packt.link/r/1-800-20519-8) for this book and share your feedback.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您读完了*Linux 命令行与 Shell 脚本秘籍*，我们很期待听到您的想法！[请点击这里直接跳转到该书的亚马逊评论页面](https://packt.link/r/1-800-20519-8)并分享您的反馈。
- en: Your review is important to us and the tech community and will help us make
    sure we're delivering excellent quality content.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评价对我们和技术社区都非常重要，它将帮助我们确保提供优质的内容。
