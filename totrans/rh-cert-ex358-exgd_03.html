<html><head></head><body>
		<div id="_idContainer063">
			<h1 id="_idParaDest-38" class="chapter-number"><a id="_idTextAnchor039"/>3</h1>
			<h1 id="_idParaDest-39"><a id="_idTextAnchor040"/>Network Services with Automation – Introduction to Red Hat Linux Networking</h1>
			<p>This chapter will introduce you to the exciting world of Red Hat Enterprise Linux networking. We will go over the intricacies of setting up the network interfaces to start. This will be done by using the <strong class="source-inline">nmtui</strong> command, which opens a visual tool as the main option. With this knowledge, you will begin to understand how your server connects to the outside world through an understanding of <span class="No-Break">network interfaces.</span></p>
			<p>Further chapters will delve deeper into other network applications that can be used to automatically set things, such as the <strong class="bold">domain name system</strong> (<strong class="bold">DNS</strong>), and gain an IP through <strong class="bold">Dynamic Host Configuration Protocol</strong> (<strong class="bold">DHCP</strong>). In this chapter, we are going to showcase how to set up both static and dynamic configurations and ensure they start when the server is turned on. This will ensure you always have network connectivity to the world when you <span class="No-Break">need it.</span></p>
			<p>In this chapter, we’re going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>The beginning of your journey into <span class="No-Break">Linux networking</span></li>
				<li>Getting to know what the different terms mean and how they apply to what you are trying <span class="No-Break">to achieve</span></li>
				<li>Creating your basic network profile and getting online so you can get applications up <span class="No-Break">and running</span></li>
				<li>Automation of network services <span class="No-Break">using Ansible</span></li>
			</ul>
			<h1 id="_idParaDest-40"><a id="_idTextAnchor041"/>Technical requirements</h1>
			<p>The following items are necessary for following along with the chapter if you would like to gain hands-on knowledge of <span class="No-Break">the systems.</span></p>
			<h2 id="_idParaDest-41"><a id="_idTextAnchor042"/>Setting up GitHub access</h2>
			<p>Please refer to <a href="B18607_01.xhtml#_idTextAnchor016"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>, <em class="italic">Block Storage – Learning How to Provision Block Storage on Red Hat Enterprise Linux</em>, for information about how to gain access to this book’s GitHub repository. You will find the Ansible automation playbooks for this chapter at the following link: <a href="https://github.com/PacktPublishing/Red-Hat-Certified-Specialist-in-Services-Management-and-Automation-EX358-Exam-Guide/tree/main/Chapter03">https://github.com/PacktPublishing/Red-Hat-Certified-Specialist-in-Services-Management-and-Automation-EX358-Exam-Guide/tree/main/Chapter03</a>. Remember these are the suggested playbooks and are not the only way you can write them to make the playbooks work <span class="No-Break">for you.</span></p>
			<p>You can always change them by using <strong class="source-inline">raw</strong>, <strong class="source-inline">shell</strong>, or <strong class="source-inline">cmd</strong> to achieve the same results, but we are demonstrating the best way to accomplish our goals. Also, keep in mind that we are not using the FCQN that is needed in future versions of Ansible, as that will not be part on the exam as it is testing against <span class="No-Break">Ansible 2.9.</span></p>
			<h2 id="_idParaDest-42"><a id="_idTextAnchor043"/>Setting up your lab environment for networking</h2>
			<p>Please refer to the lab environment setup from the previous chapters if not already completed. You can also use this opportunity to create snapshots of your environment so that you can revert to them and do the hands-on exercises over and over again. This is outlined in <a href="B18607_02.xhtml#_idTextAnchor027"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, <em class="italic">Network File Storage – Expanding Your Knowledge of How to Share </em><span class="No-Break"><em class="italic">Data </em></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-43"><a id="_idTextAnchor044"/>The beginning of your journey into Linux networking!</h1>
			<p>There are fewer things more important<a id="_idIndexMarker128"/> than networking in today’s world. You may not realize it, but you are always connected wherever you go. This can be from your home internet to your cell phone or the Wi-Fi at your local coffee shop. These all run on networks that interconnect our worlds. This is what allows you to get to Google.com or Amazon.com to search for or buy things. Without networking, none of this would be possible as you couldn’t reach your destination. We will talk about networking in more depth over the next three chapters, but really, networking is used in all of this book – from SAN connectivity for storage to when you are connecting to <span class="No-Break">a database.</span></p>
			<h1 id="_idParaDest-44"><a id="_idTextAnchor045"/>Getting to know what the different terms mean and how they apply to what you are trying to achieve!</h1>
			<p>We are going to go over many different terms, starting<a id="_idIndexMarker129"/> out with abbreviations such as <strong class="bold">ETH</strong>, which stands for <strong class="bold">Ethernet</strong>. This is the physical connection used to plug your tower computer into a switch or router. This leads to what ETH <a id="_idIndexMarker130"/>uses to connect to the world, <strong class="bold">Internet Protocol</strong> (<strong class="bold">IP</strong>), or think of it as part of your home address to the world. And the other part of the address is your <strong class="bold">media access control</strong> (<strong class="bold">MAC</strong>) address, which is your unique hardware<a id="_idIndexMarker131"/> identifying number that is part of the physical ETH port. Think of IP as your city, state, and zip code, and your MAC as your street address. With the IP and MAC address put together, you are able to send and receive information as you would through the postal service only at over 1,000 times the speed. First up, we are going to create a basic internet connection manually and <span class="No-Break">through automation.</span></p>
			<h1 id="_idParaDest-45"><a id="_idTextAnchor046"/>Creating your basic network profile</h1>
			<p>Here we will focus on getting<a id="_idIndexMarker132"/> online so you can get applications up and running! First, we are going to configure our interface directly through network scripts. We want to determine the interface name we would like to change with the <span class="No-Break">following command:</span></p>
			<pre class="console">
[emcleroy@rhel1 ~]$ ip a</pre>
			<p>This is fully illustrated in the output of the command in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer041" class="IMG---Figure">
					<img src="image/Figure_3.01_B18607.jpg" alt="Figure 3.1 – Output from an IP command showing the interfaces"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.1 – Output from an IP command showing the interfaces</p>
			<p>In our case, we will be manipulating<a id="_idIndexMarker133"/> the <strong class="source-inline">enp0s3</strong> interface. This is the main interface, as the others are bridges and are not physical. The first interface is the loopback, which is used for the localhost connectivity for <span class="No-Break">on-server communication.</span></p>
			<p>Next, we can go to <strong class="source-inline">/etc/sysconfig/network-scripts/</strong>, where we will only find <strong class="source-inline">ifcfg-enp0s3</strong>. This is the interface configuration of the <strong class="source-inline">enp0s3</strong> connection. We can view it with the <span class="No-Break">following command:</span></p>
			<pre class="console">
[emcleroy@rhel1 network-scripts]$ vi ifcfg-enp0s3</pre>
			<p>The output of the command looks like <span class="No-Break">the following:</span></p>
			<div>
				<div id="_idContainer042" class="IMG---Figure">
					<img src="image/Figure_3.02_B18607.jpg" alt="Figure 3.2 – /etc/sysconfig/network-scripts/ifcfg-enp0s3 configuration"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.2 – /etc/sysconfig/network-scripts/ifcfg-enp0s3 configuration</p>
			<p>Please note that before<a id="_idIndexMarker134"/> you make any changes, you should make a copy of this file. Also, note that you will need to use the <strong class="source-inline">sudo</strong> command to escalate privileges have root privileges to configure <span class="No-Break">this file:</span></p>
			<pre class="console">
[emcleroy@rhel1 network-scripts]$ sudo su
[root@rhel1 network-scripts]# cp ifcfg-enp0s3 ifcfg-enp0s3.old</pre>
			<p>After copying the file so that you have a backup, you can now make your changes to the <span class="No-Break">interface configuration:</span></p>
			<pre class="console">
[root@rhel1 network-scripts]# vi ifcfg-enp0s3</pre>
			<p>An example of a change is to disable IPV6 DHCP, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer043" class="IMG---Figure">
					<img src="image/Figure_3.03_B18607.jpg" alt="Figure 3.3 – A change made to the ifcfg-enp0s3 configuration file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.3 – A change made to the ifcfg-enp0s3 configuration file</p>
			<p>This is just one of many things<a id="_idIndexMarker135"/> you can change. You can learn about all that you can modify using the supplied documentation during <span class="No-Break">the test.</span></p>
			<p>Secondly, we are going to use the <strong class="bold">NetworkManager command line interface</strong> (<strong class="bold">nmcli</strong>) to complete our setup of the interfaces. Through<a id="_idIndexMarker136"/> a series of commands, you can set up everything that can be found in <strong class="source-inline">/etc/sysconfig/network-scripts/ifcfg-enp0s3</strong>. Now, keep in mind<a id="_idIndexMarker137"/> there is a very well-documented <strong class="bold">manual</strong> (<strong class="bold">man</strong>) page for nmcli, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer044" class="IMG---Figure">
					<img src="image/Figure_3.04_B18607.jpg" alt="Figure 3.4 – Man page for the nmcli command"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.4 – Man page for the nmcli command</p>
			<p>This documentation<a id="_idIndexMarker138"/> will give you all of the information you need to control your interface. Let’s try changing the enp0s3 DNS for our interface, as shown in the preceding screenshot. Using the man page, we can see what command we require in the examples to meet these variable command needs, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer045" class="IMG---Figure">
					<img src="image/Figure_3.05_B18607.jpg" alt="Figure 3.5 – Example of the required nmcli command string from the man page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.5 – Example of the required nmcli command string from the man page</p>
			<p>As you can see, here we can use the following command to append a change to <span class="No-Break">the dns:</span></p>
			<pre class="console">
[emcleroy@rhel1 ~]$ sudo nmcli con modify enp0s3 +ipv4.dns 4.4.4.4</pre>
			<p>This change has only taken effect<a id="_idIndexMarker139"/> in the startup script of the interface. This interface change can now be seen in the network scripts, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer046" class="IMG---Figure">
					<img src="image/Figure_3.06_B18607.jpg" alt="Figure 3.6 – Results of the nmcli command string adding DNS3=4.4.4.4"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.6 – Results of the nmcli command string adding DNS3=4.4.4.4</p>
			<p>If we want to make the interface<a id="_idIndexMarker140"/> change now, we need to bring down the interface and then bring it back up. This can be accomplished by using the following commands<a id="_idIndexMarker141"/>, but ensure that you are on the machine via <strong class="bold">out-of-band management</strong> (<strong class="bold">OBM</strong>), as you will lose connectivity if this is your SSH connection to <span class="No-Break">the server:</span></p>
			<pre class="console">
[emcleroy@rhel1 ~]# sudo nmcli connection down enp0s3
[emcleroy@rhel1 ~]# sudo nmcli connection up enp0s3</pre>
			<p>Next, we are going<a id="_idIndexMarker142"/> to use the graphical interface through the <strong class="bold">NetworkManager text user interface</strong> (<span class="No-Break"><strong class="bold">nmtui</strong></span><span class="No-Break">) command:</span></p>
			<pre class="console">
[emcleroy@rhel1 ~]# nmtui</pre>
			<p>The result of running the <strong class="source-inline">nmtui</strong> command<a id="_idIndexMarker143"/> is shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer047" class="IMG---Figure">
					<img src="image/Figure_3.07_B18607.jpg" alt="Figure 3.7 – The nmtui tool invoked, and options first presented"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.7 – The nmtui tool invoked, and options first presented</p>
			<p>Choose <strong class="bold">Edit </strong><span class="No-Break"><strong class="bold">a connection</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer048" class="IMG---Figure">
					<img src="image/Figure_3.08_B18607.jpg" alt="Figure 3.8 – Interfaces that are already present and available to change using nmtui"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.8 – Interfaces that are already present and available to change using nmtui</p>
			<p>For this exercise, choose <strong class="bold">Ethernet</strong> | <span class="No-Break"><strong class="bold">enp0s3</strong></span><span class="No-Break">.</span></p>
			<p>As you can see here, <strong class="bold">Profile name</strong> matches the name of the interface. The <strong class="bold">Device </strong>field adds another element<a id="_idIndexMarker144"/> in the form of the MAC address. The <strong class="bold">Automatic</strong> configuration option dictates using a DHCP server to obtain your IP address automatically. We will get more into that in <span class="No-Break">later chapters:</span></p>
			<div>
				<div id="_idContainer049" class="IMG---Figure">
					<img src="image/Figure_3.09_B18607.jpg" alt="Figure 3.9 – Using nmtui to display the network interface and information"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.9 – Using nmtui to display the network interface and information</p>
			<p>Here you can<a id="_idIndexMarker145"/> see the information, which in our case is manually set so that we do not have IP changes in order to ensure <span class="No-Break">the following:</span></p>
			<div>
				<div id="_idContainer050" class="IMG---Figure">
					<img src="image/Figure_3.10_B18607.jpg" alt="Figure 3.10 – Using nmtui to make a change"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.10 – Using nmtui to make a change</p>
			<p>This is also where you set your gateway or the address for getting out to the rest of the network, in our case, <strong class="source-inline">192.168.1.1</strong>, and DNS servers, and since our router sits on <strong class="source-inline">192.168.1.1</strong> also runs DNS from AT&amp;T, for my purposes, it is my first DNS address. I follow this with a backup of a well-known DNS, such as <span class="No-Break">Google’s </span><span class="No-Break"><strong class="source-inline">8.8.8.8</strong></span><span class="No-Break">.</span></p>
			<p>From there you can set other<a id="_idIndexMarker146"/> things, such as search domains and specific routing. These are a few more advanced areas that we don’t need to cover <span class="No-Break">right now.</span></p>
			<p>Within this screen is where you can set your IPV6 information as well, such as automatically from a DHCP server or link-local to a manually <span class="No-Break">set one:</span></p>
			<div>
				<div id="_idContainer051" class="IMG---Figure">
					<img src="image/Figure_3.11_B18607.jpg" alt="Figure 3.11 – Exiting nmtui correctly to save changes"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.11 – Exiting nmtui correctly to save changes</p>
			<p>All of the configuration settings<a id="_idIndexMarker147"/> look in order for our purposes, and any of them can be changed later if found to be incorrect. Just make sure that you hit the <em class="italic">Num Lock</em> key as needed, or it will not accept <span class="No-Break">your input.</span></p>
			<p>Once complete, choose <strong class="bold">OK</strong> or <strong class="bold">Cancel</strong>. We are going to cancel, as this is how we would like the interface setup <span class="No-Break">to be.</span></p>
			<p>Next, if you made changes you have to reset the connection for them to take effect. If you have direct access, you can go back to the <strong class="bold">Activate a connection</strong> option within the nmtui screen. This activation window is shown as follows in the nmtui <span class="No-Break">GUI screenshot:</span></p>
			<div>
				<div id="_idContainer052" class="IMG---Figure">
					<img src="image/Figure_3.12_B18607.jpg" alt="Figure 3.12 – Using nmtui to activate and deactivate network interfaces that have been created"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.12 – Using nmtui to activate and deactivate network interfaces that have been created</p>
			<p>To do this, choose <strong class="bold">Deactivate</strong> followed by <strong class="bold">Reactivate</strong>. You can only do this if you have direct access; if not, you will lose connectivity<a id="_idIndexMarker148"/> to your server. There is another way of testing this if you know your settings are correct or hope they are if you don’t have direct server OBM. Just as with nmcli, we can repurpose one of those commands we learned earlier. This has to be run as root in order to ensure no password prompts or other things hang and cause the interface to <span class="No-Break">remain down:</span></p>
			<pre class="console">
[emcleroy@rhel1 ~]$ sudo su –
[root@rhel1 ~]# nmcli networking off &amp;&amp; nmcli networking on</pre>
			<p>Please understand that the recommendation<a id="_idIndexMarker149"/> is always to have remote onsite support or OBM, having had an unfortunate experience and a very long nervous car <span class="No-Break">ride later.</span></p>
			<h1 id="_idParaDest-46"><a id="_idTextAnchor047"/>Automation of network services using Ansible</h1>
			<p>Automating the setup<a id="_idIndexMarker150"/> of interfaces can be as simple or complex<a id="_idIndexMarker151"/> as you want to make it. Our recommendation<a id="_idIndexMarker152"/> is to start with installing the ansible galaxy system roles known as <strong class="bold">Red Hat Enterprise Linux</strong> (<strong class="bold">RHEL</strong>) system roles since we are using RHEL and not just any Linux. This can be accomplished by checking to see whether they are installed by ansible-galaxy first using the <span class="No-Break">following command:</span></p>
			<pre class="console">
[emcleroy@rhel3 ~]$ ansible-galaxy list
# /usr/share/ansible/roles
# /etc/ansible/roles</pre>
			<p>This confirms that the network role is missing. Running the following command installs <span class="No-Break">the roles:</span></p>
			<pre class="console">
[emcleroy@rhel3 ~]$ sudo dnf install rhel-system-roles</pre>
			<p>As you can see from this screenshot, the roles are now installed by running the <strong class="source-inline">$ ansible-galaxy </strong><span class="No-Break"><strong class="source-inline">list</strong></span><span class="No-Break"> command:</span></p>
			<div>
				<div id="_idContainer053" class="IMG---Figure">
					<img src="image/Figure_3.13_B18607.jpg" alt="Figure 3.13 – Screen seen after installing the system roles"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.13 – Screen seen after installing the system roles</p>
			<p>You can get explanations on the different<a id="_idIndexMarker153"/> system roles or examples<a id="_idIndexMarker154"/> in the following location: <strong class="source-inline">/usr/share/doc/rhel-system-roles-&lt;version&gt;/SUBSYSTEM/</strong>. The command for <strong class="source-inline">network</strong> looks like <span class="No-Break">the following:</span></p>
			<pre class="console">
[emcleroy@rhel3 network]$ cd /usr/share/doc/rhel-system-roles/network/</pre>
			<p>You can then look at the README or any of the numerous examples. The README is illustrated <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer054" class="IMG---Figure">
					<img src="image/Figure_3.14_B18607.jpg" alt="Figure 3.14 – Examples of playbooks you can use to create the skeleton of your playbook"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.14 – Examples of playbooks you can use to create the skeleton of your playbook</p>
			<p>We can now set up an inventory<a id="_idIndexMarker155"/> for the playbook with the proper IP<a id="_idIndexMarker156"/> and Mac addresses. If they are not known, we can set different things. Let’s start simple and just add the current IP of <strong class="source-inline">rhel1</strong> as shown in the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Move back to the <span class="No-Break">home directory:</span><pre class="source-code">
[emcleroy@rhel3 network]$ cd</pre></li>
				<li>Create a <span class="No-Break">playbook folder:</span><pre class="source-code">
[emcleroy@rhel3 ~]$ mkdir interface_playbook</pre></li>
				<li>Move into the working directory of the <span class="No-Break">playbook folder:</span><pre class="source-code">
[emcleroy@rhel3 ~]$ cd interface_playbook/</pre></li>
				<li>Create the <span class="No-Break">inventory file:</span><pre class="source-code">
[emcleroy@rhel3 interface_playbook]$ vi inventory</pre></li>
			</ol>
			<p>As shown in the following<a id="_idIndexMarker157"/> screenshot, we have the full inventory<a id="_idIndexMarker158"/> with a group <span class="No-Break">for </span><span class="No-Break"><strong class="source-inline">rhel1</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer055" class="IMG---Figure">
					<img src="image/Figure_3.15_B18607.jpg" alt="Figure 3.15 – Playbook inventory in order to pinpoint changes"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.15 – Playbook inventory in order to pinpoint changes</p>
			<p>Next, let’s write a playbook based on one of the items in the <strong class="source-inline">/usr/share/doc/rhel-system-roles/network/</strong>directory. Let’s make a change to the <span class="No-Break">DNS record.</span></p>
			<p>First, to see what a playbook looks like using the network roles since this will be our first introduction, please<a id="_idIndexMarker159"/> expand upon <strong class="source-inline">/usr/share/doc/rhel-system-roles/network/example-eth_simple_auto-playbook.yml</strong>. This is illustrated<a id="_idIndexMarker160"/> in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer056" class="IMG---Figure">
					<img src="image/Figure_3.16_B18607.jpg" alt="Figure 3.16 – Viewing ﻿an example in order to know what to do to set ﻿up the playbook"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.16 – Viewing an example in order to know what to do to set up the playbook</p>
			<p>As you can see here, it is slightly different as we are laying out the variables and then the role runs the playbook. Take that structure and apply it to your playbook. You can see in the following screenshot that we have changed some of the items such as hosts and names to match <span class="No-Break">our systems:</span></p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/Figure_3.17_B18607.jpg" alt="Figure 3.17 – ﻿Using an example from ﻿/usr/share/doc/rhel-system-roles/network/ to start ﻿the playbook"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.17 – Using an example from /usr/share/doc/rhel-system-roles/network/ to start the playbook</p>
			<p>After that, move on to checking<a id="_idIndexMarker161"/> out the <strong class="source-inline">README.md</strong> file for the variables<a id="_idIndexMarker162"/> you need. By exploring the <strong class="source-inline">README.md</strong> file, you can get examples towards the bottom, as shown in the following screenshot of a <span class="No-Break">persistent connection:</span></p>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/Figure_3.18_B18607.jpg" alt="Figure 3.18 – Using the README.md file from the systems role docs for more information"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.18 – Using the README.md file from the systems role docs for more information</p>
			<p>We are going to take that snippet<a id="_idIndexMarker163"/> and put it in our playbook, ensuring<a id="_idIndexMarker164"/> we change the information as needed (such as the MAC and IP addresses). We are going to combine the initial copy from the system and change it around to meet our static connection. This will allow us to add the DNS values. This can be seen <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer059" class="IMG---Figure">
					<img src="image/Figure_3.19_B18607.jpg" alt="Figure 3.19 – Combining the two examples and the server information to create a complete playbook"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.19 – Combining the two examples and the server information to create a complete playbook</p>
			<p>Now, with all of the playbook<a id="_idIndexMarker165"/> options all set, we should be able to merge<a id="_idIndexMarker166"/> the changes to the interface, and it should have the new DNS records. Here are the records before running <span class="No-Break">the playbook:</span></p>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/Figure_3.20_B18607.jpg" alt="Figure 3.20 – Verifying that the ﻿changes are not in place"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.20 – Verifying that the changes are not in place</p>
			<p>Next, we will run <span class="No-Break">the playbook:</span></p>
			<pre class="console">
[emcleroy@rhel3 interface_playbook]$ ansible-playbook -i inventory dns_change.yml -u emcleroy -k --ask-become-pass</pre>
			<p>As you can see in the following<a id="_idIndexMarker167"/> screenshot, it finished without<a id="_idIndexMarker168"/> any issues and shows one orange change, which should be our <span class="No-Break">DNS entry:</span></p>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/Figure_3.21_B18607.jpg" alt="Figure 3.21 – Running the playbook"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.21 – Running the playbook</p>
			<p>Now we can check the DNS<a id="_idIndexMarker169"/> records for <strong class="source-inline">rhel1</strong> and see whether they<a id="_idIndexMarker170"/> have changed correctly. As seen from the following screenshot, the changes <span class="No-Break">were successful:</span></p>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/Figure_3.22_B18607.jpg" alt="Figure 3.22 – Verifying the change﻿s took effect"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.22 – Verifying the changes took effect</p>
			<p>There are many changes you can use with the system roles that are not limited to just networking. These can<a id="_idIndexMarker171"/> be used for other parts of the exam<a id="_idIndexMarker172"/> and provide a helping hand that may be needed. So, keep in mind <strong class="source-inline">/usr/share/doc/rhel-system-roles/</strong> from the installation we did previously, which is installed as <span class="No-Break">a package.</span></p>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor048"/>Summary</h1>
			<p>This concludes our first steps into the world of networking. I hope learning about setting up your interfaces and changing how you talk to the world has helped you grow in some small way. In this chapter, you learned how to configure a network interface both manually and automatically. This allowed you to connect your server, thus, your application to the world using either a public or a private IP. Using tools such as nmtui and man pages make configuring these values more user-friendly. I hope we touched on all the parts you were particularly excited to see. We will go more in-depth into working with interfaces with <strong class="bold">Link Aggregation</strong> in our next chapter. This allows for many different traffic behaviors that can help you in your day-to-day job or if you need to set up failover, as I have in my home lab. For instance, if my primary internet connection goes down, my cellular network connection picks up where it left off. We are headed into more exciting areas of networking with many things to learn following that. Until the next chapter, breathe and remember this is a journey and it takes one step at a time. Also, don’t forget that the documents are a part of the exam area. Just do not rely too heavily on them as time is key and is <span class="No-Break">very limited.</span></p>
		</div>
	</body></html>