<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer210">
<p class="Chapter-Title" id="_idParaDest-117" lang="en-US" xml:lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">13. </span></span><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.2.1">Ubuntu 23.04 Network Management</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.3.1">It is difficult to envisage an Ubuntu system that does not have at least one network connection, and harder still to imagine how such an isolated system could be of much practical use. </span><span class="koboSpan" id="kobo.3.2">The simple fact is that Ubuntu is designed to provide enterprise-level services over network and internet connections. </span><span class="koboSpan" id="kobo.3.3">Therefore, a crucial part of learning how to administer an Ubuntu system involves learning how to configure and manage the network interfaces installed on the system.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.4.1">This chapter provides an overview of network management on Ubuntu, including the NetworkManager service and tools and some other useful utilities.</span></p>
<p class="Heading-1-1" id="_idParaDest-118" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.5.1">13.1 </span></span><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.6.1">An Introduction to NetworkManager</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.7.1">NetworkManager is a service and set of tools designed specifically to make it easier to manage the networking configuration on Linux systems and is the default network management service on Ubuntu.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.8.1">In addition to a service that runs in the background, NetworkManager also includes the following tools:</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.9.1">•</span></span><a id="_idIndexMarker261"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.10.1">nmcli</span></span><span class="koboSpan" id="kobo.11.1"> - A tool for working with NetworkManager via the command line. </span><span class="koboSpan" id="kobo.11.2">This tool is useful when access to a graphical environment is unavailable and can also be used within scripts to make network configuration changes.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.12.1">•</span></span><a id="_idIndexMarker262"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.13.1">nmtui</span></span><span class="koboSpan" id="kobo.14.1"> - A basic text-based user interface for managing NetworkManager. </span><span class="koboSpan" id="kobo.14.2">This tool can be run within any terminal window and allows changes to be made by making menu selections and entering data. </span><span class="koboSpan" id="kobo.14.3">While helpful in performing basic tasks, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.15.1">nmtui</span></span><span class="koboSpan" id="kobo.16.1"> lacks many of the features provided by the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.17.1">nmcli</span></span><span class="koboSpan" id="kobo.18.1"> tool.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.19.1">•</span></span><a id="_idIndexMarker263"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.20.1">nm-connection-editor</span></span><span class="koboSpan" id="kobo.21.1"> - A complete graphical management tool providing access to most NetworkManager configuration options.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.22.1">•</span></span><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.23.1">GNOME Settings</span></span><span class="koboSpan" id="kobo.24.1"> - The Network screen of the GNOME desktop Settings application allows basic network management tasks to be performed. </span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.25.1">•</span></span><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.26.1">Cockpit Network Settings</span></span><span class="koboSpan" id="kobo.27.1"> - The Network screen of the Cockpit web interface allows a range of network management tasks to be performed.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.28.1">Although there are several ways to manage the network environment on an Ubuntu system, this chapter will focus on the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.29.1">nmcli</span></span><span class="koboSpan" id="kobo.30.1"> command. </span><span class="koboSpan" id="kobo.30.2">While the graphical tools are certainly helpful when you have access to a desktop environment or Cockpit has been enabled, understanding the command-line interface is essential for situations where a command prompt is all that is available. </span><span class="koboSpan" id="kobo.30.3">Also, the graphical tools (Cockpit included) only include some of the capabilities of the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.31.1">nmcli</span></span><span class="koboSpan" id="kobo.32.1"> tool. </span><span class="koboSpan" id="kobo.32.2">Finally, once you are familiar with NetworkManager and </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.33.1">nmcli</span></span><span class="koboSpan" id="kobo.34.1">, those skills will translate easily when using the more intuitive tool options. </span><span class="koboSpan" id="kobo.34.2">The same cannot be said of the graphical tool options. </span><span class="koboSpan" id="kobo.34.3">It is harder to use </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.35.1">nmcli</span></span><span class="koboSpan" id="kobo.36.1"> if, for example, you have only ever used </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.37.1">nm-connection-editor</span></span><span class="koboSpan" id="kobo.38.1">.</span></p>
<p class="Heading-1-1" id="_idParaDest-119" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.39.1">13.2 </span></span><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.40.1">Installing and Enabling </span><a id="_idIndexMarker264"/><a id="_idIndexMarker265"/><span class="koboSpan" id="kobo.41.1">NetworkManager</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.42.1">NetworkManager should be installed by default for most Ubuntu installations. </span><span class="koboSpan" id="kobo.42.2">Use the </span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.43.1">apt</span></span><span class="My-Italic _idGenCharOverride-1"> </span><span class="koboSpan" id="kobo.44.1">command to find out if it needs to be installed:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.45.1"># apt -qq list network-manager</span></p>
<p class="Code"><span class="koboSpan" id="kobo.46.1">network-manager/lunar,now 1.42.4-1ubuntu2 amd64 [installed,automatic]</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.47.1">If necessary, install the package as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.48.1"># apt install network-manager</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.49.1">Once the package is installed, the NetworkManager daemon will need to be enabled so that it starts each time the system boots:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.50.1"># systemctl enable NetworkManager</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.51.1">Finally, start the service running and check the status to verify that the launch was successful:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.52.1"># systemctl start NetworkManager</span></p>
<p class="Code"><span class="koboSpan" id="kobo.53.1"># systemctl status NetworkManager</span></p>
<p class="Code"><span class="koboSpan" id="kobo.54.1">● NetworkManager.service - Network Manager</span></p>
<p class="Code"><span class="koboSpan" id="kobo.55.1">     Loaded: loaded (/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.56.1">     Active: active (running) since Sun 2023-07-16 12:46:48 EDT; 24h ago</span></p>
<p class="Code"><span class="koboSpan" id="kobo.57.1">       Docs: man:NetworkManager(8)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.58.1">   Main PID: 725 (NetworkManager)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.59.1">      Tasks: 3 (limit: 4352)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.60.1">     Memory: 11.9M</span></p>
<p class="Code"><span class="koboSpan" id="kobo.61.1">        CPU: 5.018s</span></p>
<p class="Code"><span class="koboSpan" id="kobo.62.1">     CGroup: /system.slice/NetworkManager.service</span></p>
<p class="Code"><span class="koboSpan" id="kobo.63.1">             └─725 /usr/sbin/NetworkManager --no-daemon</span></p>
<p class="Heading-1-1" id="_idParaDest-120" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.64.1">13.3 </span></span><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.65.1">Basic </span><a id="_idIndexMarker266"/><span class="koboSpan" id="kobo.66.1">nmcli Commands</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.67.1">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.68.1">nmcli</span></span><span class="koboSpan" id="kobo.69.1"> tool will have been installed as part of the NetworkManager package and can be executed from the command line using the following syntax:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.70.1"># nmcli [Options] Object {Command | help}</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.71.1">In the above syntax, Object will be one of general, networking, radio, connection, monitor, device, or agent, which can be abbreviated to a few letters of the word (for example, con, or even just the letter c, for connection). </span><span class="koboSpan" id="kobo.71.2">For example, all of the following commands will output help information relating to the device object:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.72.1"># nmcli device help</span></p>
<p class="Code"><span class="koboSpan" id="kobo.73.1"># nmcli dev help</span></p>
<p class="Code"><span class="koboSpan" id="kobo.74.1"># nmcli d help</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.75.1">To check the overall status of NetworkManager on the system, use the following command:</span><a id="_idIndexMarker267"/></p>
<p class="Code"><span class="koboSpan" id="kobo.76.1"># nmcli general status</span></p>
<p class="Code"><span class="koboSpan" id="kobo.77.1">STATE      CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN    </span></p>
<p class="Code"><span class="koboSpan" id="kobo.78.1">connected  full          enabled  enabled  enabled  enabled</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.79.1">To check the status of the devices installed on a system, the following command can be used:</span><a id="_idIndexMarker268"/></p>
<p class="Code"><span class="koboSpan" id="kobo.80.1"># nmcli dev status</span></p>
<p class="Code"><span class="koboSpan" id="kobo.81.1">DEVICE       TYPE      STATE      CONNECTION </span></p>
<p class="Code"><span class="koboSpan" id="kobo.82.1">eno1         ethernet  connected  eno1       </span></p>
<p class="Code"><span class="koboSpan" id="kobo.83.1">wlp0s26u1u2  wifi       connected  zoneone  </span></p>
<p class="Code"><span class="koboSpan" id="kobo.84.1">virbr0       bridge    connected  virbr0     </span></p>
<p class="Code"><span class="koboSpan" id="kobo.85.1">lo           loopback  unmanaged  --         </span></p>
<p class="Code"><span class="koboSpan" id="kobo.86.1">virbr0-nic   tun       unmanaged  --</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.87.1">The output may also be modified by using the -p (pretty) option to make the output more human-friendly:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.88.1"># nmcli -p dev status</span></p>
<p class="Code"><span class="koboSpan" id="kobo.89.1">=====================</span></p>
<p class="Code"><span class="koboSpan" id="kobo.90.1">  Status of devices</span></p>
<p class="Code"><span class="koboSpan" id="kobo.91.1">=====================</span></p>
<p class="Code"><span class="koboSpan" id="kobo.92.1">DEVICE       TYPE      STATE      CONNECTION </span></p>
<p class="Code"><span class="koboSpan" id="kobo.93.1">-------------------------------------------------------------------</span></p>
<p class="Code"><span class="koboSpan" id="kobo.94.1">eno1         ethernet  connected  eno1       </span></p>
<p class="Code"><span class="koboSpan" id="kobo.95.1">wlp0s26u1u2  wifi       connected  zoneone  </span></p>
<p class="Code"><span class="koboSpan" id="kobo.96.1">virbr0       bridge    connected  virbr0     </span></p>
<p class="Code"><span class="koboSpan" id="kobo.97.1">lo           loopback  unmanaged  --         </span></p>
<p class="Code"><span class="koboSpan" id="kobo.98.1">virbr0-nic   tun       unmanaged  -- </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.99.1">Conversely, the -t option may be used to make the output more terse and suitable for automated processing:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.100.1"># nmcli -t dev status</span></p>
<p class="Code"><span class="koboSpan" id="kobo.101.1">eno1:ethernet:connected:eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.102.1">wlp0s26u1u2:wifi:connected:emilyzone</span></p>
<p class="Code"><span class="koboSpan" id="kobo.103.1">virbr0:bridge:connected:virbr0</span></p>
<p class="Code"><span class="koboSpan" id="kobo.104.1">lo:loopback:unmanaged:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.105.1">virbr0-nic:tun:unmanaged:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.106.1">The status output shows that the system has two physical devices installed, one Ethernet and the other a WiFi device.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.107.1">The bridge (virbr) entries are virtual devices used to provide networking for virtual machines (the topic of virtualization will be covered starting with the chapter entitled </span><a href="Virtualization_Overview.xhtml#_idTextAnchor361"><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.108.1">“An Overview of Virtualization Techniques”</span></span></a><span class="koboSpan" id="kobo.109.1">). </span><span class="koboSpan" id="kobo.109.2">Finally, the </span><a id="_idIndexMarker269"/><span class="koboSpan" id="kobo.110.1">loopback interface is a special virtual device that allows the system to communicate with itself and is typically used to perform network diagnostics.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1">When working with NetworkManager, it is important to understand the difference between a device and a connection. </span><span class="koboSpan" id="kobo.111.2">As described above, a device is either a physical or virtual network device, while a connection is a network configuration that the device connects to.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.112.1">The following command displays information about the </span><a id="_idIndexMarker270"/><span class="koboSpan" id="kobo.113.1">connections configured on the system:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.114.1"># nmcli con show</span></p>
<p class="Code"><span class="koboSpan" id="kobo.115.1">NAME          UUID                                  TYPE      DEVICE      </span></p>
<p class="Code"><span class="koboSpan" id="kobo.116.1">zoneone       2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94  wifi       wlp0s26u1u2 </span></p>
<p class="Code"><span class="koboSpan" id="kobo.117.1">eno1          99d40009-6bb1-4182-baad-a103941c90ff  ethernet  eno1        </span></p>
<p class="Code"><span class="koboSpan" id="kobo.118.1">virbr0        e13e9552-1765-42d1-b739-ff981668fbee  bridge    virbr0      </span></p>
<p class="Code"><span class="koboSpan" id="kobo.119.1">zonetwo       f940a2d1-8c18-4a9e-bf29-817702429b8a  wifi       --          </span></p>
<p class="Code"><span class="koboSpan" id="kobo.120.1">zonethree     fd65c5e5-3e92-4e9e-b924-1b0b07b70032  wifi       --</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.121.1">The above output shows that the WiFi device (wlp0s26u1u2) is connected to a wireless network named zoneone while the Ethernet device (eno1) is connected to a connection named eno1. </span><span class="koboSpan" id="kobo.121.2">In addition to zoneone, NetworkManager has also listed two other WiFi connections named zonetwo and zonethree, neither of which currently has a device connected.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.122.1">To find out the IP address allocated to a connection, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.123.1">ip</span></span><span class="koboSpan" id="kobo.124.1"> tool can be used with the address option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.125.1"># </span><a id="_idIndexMarker271"/><span class="koboSpan" id="kobo.126.1">ip address</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.127.1">The above command can also be abbreviated:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.128.1"># ip a</span></p>
<p class="Code"><span class="koboSpan" id="kobo.129.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.130.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.131.1">3: wlp0s26u1u2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span></p>
<p class="Code"><span class="koboSpan" id="kobo.132.1">    link/ether 74:da:38:ee:be:50 brd ff:ff:ff:ff:ff:ff</span></p>
<p class="Code"><span class="koboSpan" id="kobo.133.1">    inet 192.168.1.121/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s26u1u2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.134.1">       valid_lft 57584sec preferred_lft 57584sec</span></p>
<p class="Code"><span class="koboSpan" id="kobo.135.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.136.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.137.1">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.138.1">ip</span></span><span class="koboSpan" id="kobo.139.1"> command will output information for all the devices detected on the system. </span><span class="koboSpan" id="kobo.139.2">For example, the above output shows that the WiFi device has been assigned an IP address of 192.168.1.121.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.140.1">If we only wanted to list active connections, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.141.1">nmcli</span></span><span class="koboSpan" id="kobo.142.1"> command could have been used with the -a option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.143.1"># nmcli con show -a</span></p>
<p class="Code"><span class="koboSpan" id="kobo.144.1">NAME       UUID                                  TYPE      DEVICE      </span></p>
<p class="Code"><span class="koboSpan" id="kobo.145.1">zoneone    2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94  wifi       wlp0s26u1u2 </span></p>
<p class="Code"><span class="koboSpan" id="kobo.146.1">eno1       99d40009-6bb1-4182-baad-a103941c90ff  ethernet  eno1        </span></p>
<p class="Code"><span class="koboSpan" id="kobo.147.1">virbr0     e13e9552-1765-42d1-b739-ff981668fbee  bridge    virbr0</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.148.1">To switch the WiFi device connection from zoneone to zonetwo, we can run the following command</span><a id="_idIndexMarker272"/><span class="koboSpan" id="kobo.149.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.150.1"># nmcli device wifi connect zonetwo -ask</span></p>
<p class="Code"><span class="koboSpan" id="kobo.151.1">Password:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.152.1">The -ask flag causes </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.153.1">nmcli</span></span><span class="koboSpan" id="kobo.154.1"> to prompt the user to enter the password for the WiFi network. </span><span class="koboSpan" id="kobo.154.2">To include the WiFi password on the command line (particularly useful if the command is being executed in a script), use the password option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.155.1"># nmcli device wifi connect zonetwo password &lt;password here&gt;</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.156.1">The </span><a id="_idIndexMarker273"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.157.1">nmcli</span></span><span class="koboSpan" id="kobo.158.1"> tool may also be used to scan for available WiFi networks as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.159.1"># nmcli device wifi list</span></p>
<p class="Code"><span class="koboSpan" id="kobo.160.1">IN-USE  SSID        MODE   CHAN  RATE        SIGNAL  BARS  SECURITY  </span></p>
<p class="Code"><span class="koboSpan" id="kobo.161.1">        zoneone     Infra  6     195 Mbit/s  80            WPA2      </span></p>
<p class="Code"><span class="koboSpan" id="kobo.162.1">*       zonetwo     Infra  11    130 Mbit/s  74            WPA1 WPA2</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.163.1">A currently active connection can be deactivated as follows</span><a id="_idIndexMarker274"/><span class="koboSpan" id="kobo.164.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.165.1"># nmcli con down &lt;connection name&gt;</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.166.1">Similarly, an inactive connection can be brought back up at any time</span><a id="_idIndexMarker275"/><span class="koboSpan" id="kobo.167.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.168.1"># nmcli con up &lt;connection name&gt;</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.169.1">When a connection is brought down, NetworkManager automatically searches for another connection, activates it, and assigns it to the device to which the previous connection was established. </span><span class="koboSpan" id="kobo.169.2">To prevent a connection from being used in this situation, disable the autoconnect option as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.170.1"># nmcli con mod &lt;connection name&gt; connection.autoconnect no</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.171.1">The following command may be used to obtain additional information about a specific connection. </span><span class="koboSpan" id="kobo.171.2">This includes the current values for all the connection properties:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.172.1"># nmcli con show eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.173.1">connection.id:                          eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.174.1">connection.uuid:                        99d40009-6bb1-4182-baad-a103941c90ff</span></p>
<p class="Code"><span class="koboSpan" id="kobo.175.1">connection.stable-id:                   --</span></p>
<p class="Code"><span class="koboSpan" id="kobo.176.1">connection.type:                        802-3-ethernet</span></p>
<p class="Code"><span class="koboSpan" id="kobo.177.1">connection.interface-name:              eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.178.1">connection.autoconnect:                 yes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.179.1">connection.autoconnect-priority:        0</span></p>
<p class="Code"><span class="koboSpan" id="kobo.180.1">connection.autoconnect-retries:         -1 (default)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.181.1">connection.multi-connect:               0 (default)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.182.1">connection.auth-retries:                -1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.183.1">connection.timestamp:                   1554833695</span></p>
<p class="Code"><span class="koboSpan" id="kobo.184.1">connection.read-only:                   no</span></p>
<p class="Code"><span class="koboSpan" id="kobo.185.1">connection.permissions:                 --</span></p>
<p class="Code"><span class="koboSpan" id="kobo.186.1">connection.zone:                        --</span></p>
<p class="Code"><span class="koboSpan" id="kobo.187.1">connection.master:                      --</span></p>
<p class="Code"><span class="koboSpan" id="kobo.188.1">connection.slave-type:                  --</span></p>
<p class="Code"><span class="koboSpan" id="kobo.189.1">connection.autoconnect-slaves:          -1 (default)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.190.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.191.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.192.1">All of these properties can be modified using </span><a id="_idIndexMarker276"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.193.1">nmcli</span></span><span class="koboSpan" id="kobo.194.1"> with the modify option using the following syntax:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.195.1"># nmcli con mod &lt;connection name&gt; connection.&lt;property name&gt; &lt;setting&gt;</span></p>
<p class="Heading-1-1" id="_idParaDest-121" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.196.1">13.4 </span></span><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.197.1">Working with </span><a id="_idIndexMarker277"/><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.198.1">Connection Profiles</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.199.1">So far, we have explored using connections without explaining how a connection is configured. </span><span class="koboSpan" id="kobo.199.2">The configuration of a connection is referred to as a connection profile and is stored in a file located in the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.200.1">/etc/NetworkManager/system-connections</span></span><span class="koboSpan" id="kobo.201.1"> directory, the contents of which might read as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.202.1"># ls /etc/NetworkManager/system-connections</span></p>
<p class="Code"><span class="koboSpan" id="kobo.203.1">zoneone.nmconnection    eno1.nmconnection       </span></p>
<p class="Code"><span class="koboSpan" id="kobo.204.1">zonethree.nmconnection  zonetwo.nmconnection</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1">Consider, for example, the contents of the eno1.nmconnection file:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.206.1">id=eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.207.1">uuid=efc69a99-17a3-3636-b68f-bfcc56a73844</span></p>
<p class="Code"><span class="koboSpan" id="kobo.208.1">type=ethernet</span></p>
<p class="Code"><span class="koboSpan" id="kobo.209.1">autoconnect-priority=-999</span></p>
<p class="Code"><span class="koboSpan" id="kobo.210.1">interface-name=eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.211.1">timestamp=1679678184</span></p>
<p class="Code"><span class="koboSpan" id="kobo.212.1">[ethernet]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.213.1">[ipv4]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.214.1">method=auto</span></p>
<p class="Code"><span class="koboSpan" id="kobo.215.1">[ipv6]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.216.1">addr-gen-mode=eui64</span></p>
<p class="Code"><span class="koboSpan" id="kobo.217.1">method=auto</span></p>
<p class="Code"><span class="koboSpan" id="kobo.218.1">[proxy]</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.219.1">The file contains basic information about the connection, including the type (Ethernet) of the device to which it is currently assigned (eno1) and the fact that the connection is to be automatically activated on system boot with an IP address obtained using DHCP (auto). </span><span class="koboSpan" id="kobo.219.2">Changes to the connection profile can be implemented by modifying this file and instructing </span><a id="_idIndexMarker279"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.220.1">nmcli</span></span><span class="koboSpan" id="kobo.221.1"> to reload the connection configuration files:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.222.1"># nmcli con reload</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.223.1">New connection profiles can also be created manually or generated automatically by </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.224.1">nmcli</span></span><span class="koboSpan" id="kobo.225.1">. </span><span class="koboSpan" id="kobo.225.2">For example, assume a new network device has been installed on the system. </span><span class="koboSpan" id="kobo.225.3">When this happens, the NetworkManager service will detect the new hardware and create a device for it. </span><span class="koboSpan" id="kobo.225.4">In the example below, the new device has been assigned the name eno2:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.226.1"># nmcli dev status</span></p>
<p class="Code"><span class="koboSpan" id="kobo.227.1">DEVICE      TYPE      STATE         CONNECTION </span></p>
<p class="Code"><span class="koboSpan" id="kobo.228.1">en01        ethernet  connected     eno1         </span></p>
<p class="Code"><span class="koboSpan" id="kobo.229.1">eno2        ethernet  connected     Wired connection 1</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.230.1">NetworkManager automatically detected the device, activated it, and assigned it to a connection named “Wired connection 1”. </span><span class="koboSpan" id="kobo.230.2">This is a default connection over which we have no configuration control because there is no interface configuration file for it in</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.231.1"> /etc/NetworkManager/system-connections</span></span><span class="koboSpan" id="kobo.232.1">. </span><span class="koboSpan" id="kobo.232.2">Therefore, the next steps are to delete the “Wired connection 1” connection and use </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.233.1">nmcli</span></span><span class="koboSpan" id="kobo.234.1"> to create a new connection and assign it to the device. </span><span class="koboSpan" id="kobo.234.2">The command to delete a connection is as follows</span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.235.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.236.1"># nmcli con delete "Wired connection 1"</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.237.1">Next, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.238.1">nmcli</span></span><span class="koboSpan" id="kobo.239.1"> can be used to create a new connection profile configured either with a static IP address or a dynamic IP address obtained from a DHCP server. </span><span class="koboSpan" id="kobo.239.2">To create a dynamic connection profile named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.240.1">dyn_ip</span></span><span class="koboSpan" id="kobo.241.1">, the following command would be used:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.242.1"># nmcli connection add type ethernet con-name dyn_ip ifname eno2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.243.1">Connection 'dyn_ip' (160d9e10-bbc8-439a-9c47-a2ec52990472) successfully added.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.244.1">To create a new connection profile without locking it to a specific device, simply omit the ifname option in the command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.245.1"># nmcli connection add type ethernet con-name dyn_ip</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.246.1">After creating the connection, a file named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.247.1">dyn_ip.nmconnection</span></span><span class="koboSpan" id="kobo.248.1"> will be added to the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.249.1">/etc/NetworkManager/system-connections</span></span><span class="koboSpan" id="kobo.250.1"> directory.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.251.1">Alternatively, to create a connection named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.252.1">static_ip</span></span><span class="koboSpan" id="kobo.253.1"> assigned a static IP address (in this case 192.168.1.200) the following command would be used</span><a id="_idIndexMarker281"/><span class="koboSpan" id="kobo.254.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.255.1"># nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24 gw4 192.168.1.1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.256.1">Connection 'static_ip' (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully added.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.257.1">The corresponding </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.258.1">static_ip.nmconnection</span></span><span class="koboSpan" id="kobo.259.1"> file will read as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.260.1">[connection]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.261.1">id=static_ip</span></p>
<p class="Code"><span class="koboSpan" id="kobo.262.1">uuid=41eca181-381c-4d12-b6c9-30446d4e29d1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.263.1">type=ethernet</span></p>
<p class="Code"><span class="koboSpan" id="kobo.264.1">interface-name=eno0</span></p>
<p class="Code"><span class="koboSpan" id="kobo.265.1">[ethernet]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.266.1">[ipv4]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.267.1">address1=192.168.1.200/24,192.168.1.1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.268.1">method=manual</span></p>
<p class="Code"><span class="koboSpan" id="kobo.269.1">[ipv6]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.270.1">addr-gen-mode=default</span></p>
<p class="Code"><span class="koboSpan" id="kobo.271.1">method=auto</span></p>
<p class="Code"><span class="koboSpan" id="kobo.272.1">[proxy]</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.273.1">The command to add a new connection may be altered slightly to assign both IPv4 and IPv6 static addresses:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.274.1"># nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24 gw4 192.168.1.1  gw4 192.168.1.1 ip6 cabf::4532 gw6 2010:dfa::1</span></p>
<p class="Heading-1-1" id="_idParaDest-122" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.275.1">13.5 </span></span><a id="_idTextAnchor231"/><span class="koboSpan" id="kobo.276.1">Interactive Editing</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.277.1">In addition to using </span><a id="_idIndexMarker282"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.278.1">nmcli</span></span><span class="koboSpan" id="kobo.279.1"> with command-line options, the tool also includes an interactive mode that can be used to create and modify connection profiles. </span><span class="koboSpan" id="kobo.279.2">The following transcript, for example, shows interactive mode being used to create a new Ethernet connection named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.280.1">demo_con</span></span><span class="koboSpan" id="kobo.281.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.282.1"># nmcli con edit</span></p>
<p class="Code"><span class="koboSpan" id="kobo.283.1">Valid connection types: 6lowpan, 802-11-olpc-mesh (olpc-mesh), 802-11-wireless (wifi), 802-3-ethernet (ethernet), adsl, bluetooth, bond, bridge, cdma, dummy, generic, gsm, infiniband, ip-tunnel, macsec, macvlan, ovs-bridge, ovs-interface, ovs-port, pppoe, team, tun, vlan, vpn, vxlan, wimax, wpan, bond-slave, bridge-slave, team-slave</span></p>
<p class="Code"><span class="koboSpan" id="kobo.284.1">Enter connection type: ethernet</span></p>
<p class="Code"><span class="koboSpan" id="kobo.285.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.286.1">===| nmcli interactive connection editor |===</span></p>
<p class="Code"><span class="koboSpan" id="kobo.287.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.288.1">Adding a new '802-3-ethernet' connection</span></p>
<p class="Code"><span class="koboSpan" id="kobo.289.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.290.1">Type 'help' or '?' </span><span class="koboSpan" id="kobo.290.2">for available commands.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.291.1">Type 'print' to show all the connection properties.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.292.1">Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.293.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.294.1">You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy</span></p>
<p class="Code"><span class="koboSpan" id="kobo.295.1">nmcli&gt; set connection.id demo_con</span></p>
<p class="Code"><span class="koboSpan" id="kobo.296.1">nmcli&gt; set connection.interface eno1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.297.1">nmcli&gt; set connection.autoconnect yes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.298.1">nmcli&gt; set ipv4.method auto </span></p>
<p class="Code"><span class="koboSpan" id="kobo.299.1">nmcli&gt; set 802-3-ethernet.mtu auto</span></p>
<p class="Code"><span class="koboSpan" id="kobo.300.1">nmcli&gt; set ipv6.method auto</span></p>
<p class="Code"><span class="koboSpan" id="kobo.301.1">nmcli&gt; save</span></p>
<p class="Code"><span class="koboSpan" id="kobo.302.1">Saving the connection with 'autoconnect=yes'. </span><span class="koboSpan" id="kobo.302.2">That might result in an immediate activation of the connection.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.303.1">Do you still want to save? </span><span class="koboSpan" id="kobo.303.2">(yes/no) [yes] yes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.304.1">Connection 'demo_con' (cb837408-6c6f-4572-9548-4932f88b9275) successfully saved.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.305.1">nmcli&gt; quit</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.306.1">The following transcript, on the other hand, modifies the previously created </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.307.1">static_ip</span></span><span class="koboSpan" id="kobo.308.1"> connection profile to use a different static IP address than the one originally specified:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.309.1"># nmcli con edit static_ip</span></p>
<p class="Code"><span class="koboSpan" id="kobo.310.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.311.1">===| nmcli interactive connection editor |===</span></p>
<p class="Code"><span class="koboSpan" id="kobo.312.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.313.1">Editing existing '802-3-ethernet' connection: 'static_ip'</span></p>
<p class="Code"><span class="koboSpan" id="kobo.314.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.315.1">Type 'help' or '?' </span><span class="koboSpan" id="kobo.315.2">for available commands.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.316.1">Type 'print' to show all the connection properties.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.317.1">Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.318.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.319.1">You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy</span></p>
<p class="Code"><span class="koboSpan" id="kobo.320.1">nmcli&gt; print ipv4.addresses</span></p>
<p class="Code"><span class="koboSpan" id="kobo.321.1">ipv4.addresses: 192.168.1.200/24</span></p>
<p class="Code"><span class="koboSpan" id="kobo.322.1">nmcli&gt; set ipv4.addresses 192.168.1.201/24</span></p>
<p class="Code"><span class="koboSpan" id="kobo.323.1">nmcli&gt; save</span></p>
<p class="Code"><span class="koboSpan" id="kobo.324.1">Connection 'static_ip' (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully updated.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.325.1">nmcli&gt; quit</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.326.1">After modifying an existing connection, remember to instruct NetworkManager to reload the configuration profiles:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.327.1"># nmcli con reload</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.328.1">When using interactive mode, it is useful to know that an extensive built-in help system is available to learn how to use the tool. </span><span class="koboSpan" id="kobo.328.2">The help topics can be accessed by typing help or ? </span><span class="koboSpan" id="kobo.328.3">at the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.329.1">nmcli &gt; </span></span><span class="koboSpan" id="kobo.330.1">prompt:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.331.1">nmcli&gt; ?</span></p>
<p class="Code"><span class="koboSpan" id="kobo.332.1">------------------------------------------------------------------------------</span></p>
<p class="Code"><span class="koboSpan" id="kobo.333.1">---[ Main menu ]---</span></p>
<p class="Code"><span class="koboSpan" id="kobo.334.1">goto     [&lt;setting&gt; | &lt;prop&gt;]        :: go to a setting or property</span></p>
<p class="Code"><span class="koboSpan" id="kobo.335.1">remove   &lt;setting&gt;[.&lt;prop&gt;] | &lt;prop&gt; :: remove setting or reset property value</span></p>
<p class="Code"><span class="koboSpan" id="kobo.336.1">set      [&lt;setting&gt;.&lt;prop&gt; &lt;value&gt;]  :: set property value</span></p>
<p class="Code"><span class="koboSpan" id="kobo.337.1">describe [&lt;setting&gt;.&lt;prop&gt;]          :: describe property</span></p>
<p class="Code"><span class="koboSpan" id="kobo.338.1">print    [all | &lt;setting&gt;[.&lt;prop&gt;]]  :: print the connection</span></p>
<p class="Code"><span class="koboSpan" id="kobo.339.1">verify   [all | fix]                  :: verify the connection</span></p>
<p class="Code"><span class="koboSpan" id="kobo.340.1">save     [persistent|temporary]      :: save the connection</span></p>
<p class="Code"><span class="koboSpan" id="kobo.341.1">activate [&lt;ifname&gt;] [/&lt;ap&gt;|&lt;nsp&gt;]    :: activate the connection</span></p>
<p class="Code"><span class="koboSpan" id="kobo.342.1">back                                 :: go one level up (back)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.343.1">help/?   </span><span class="koboSpan" id="kobo.343.2">[&lt;command&gt;]                 :: print this help</span></p>
<p class="Code"><span class="koboSpan" id="kobo.344.1">nmcli    &lt;conf-option&gt; &lt;value&gt;       :: nmcli configuration</span></p>
<p class="Code"><span class="koboSpan" id="kobo.345.1">quit                                 :: exit nmcli</span></p>
<p class="Code"><span class="koboSpan" id="kobo.346.1">------------------------------------------------------------------------------</span></p>
<p class="Heading-1-1" id="_idParaDest-123" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.347.1">13.6 </span></span><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.348.1">Configuring </span><a id="_idIndexMarker283"/><a id="_idIndexMarker284"/><span class="koboSpan" id="kobo.349.1">NetworkManager Permissions</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.350.1">In addition to making it easier to manage networks on Ubuntu, NetworkManager also allows permissions to be specified for connections. </span><span class="koboSpan" id="kobo.350.2">The following command, for example, restricts a connection profile to root and user accounts named john and caitlyn:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.351.1"># nmcli con mod static_ip connection.permissions user:root,john,caitlyn</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.352.1">Once NetworkManager has reloaded the connection profiles, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.353.1">static_ip</span></span><span class="koboSpan" id="kobo.354.1"> connection will only be active and accessible to other users when at least one designated user is logged in to an active session on the system. </span><span class="koboSpan" id="kobo.354.2">As soon as the last of these users logs out, the connection will go down and remain inactive until one of the users signs back in.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.355.1">In addition, only users with permission can change the connection status or configuration.</span></p>
<p class="Heading-1-1" id="_idParaDest-124" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.356.1">13.7 </span></span><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.357.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.358.1">The NetworkManager service handles network management on Ubuntu. </span><span class="koboSpan" id="kobo.358.2">NetworkManager views a network as consisting of network interface devices and connections. </span><span class="koboSpan" id="kobo.358.3">A network device can be a physical Ethernet or WiFi device or a virtual device used by a virtual machine guest. </span><span class="koboSpan" id="kobo.358.4">Connections represent the network to which the devices connect and are configured by connection profiles. </span><span class="koboSpan" id="kobo.358.5">A configuration profile will, among other settings, define whether the connection has a static or dynamic IP address, the IP address of any gateway used by the network, and whether or not the connection should be established automatically each time the system starts up. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.359.1">NetworkManager can be administered using several tools, including the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.360.1">nmcli</span></span><span class="koboSpan" id="kobo.361.1"> and </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.362.1">nmtui</span></span><span class="koboSpan" id="kobo.363.1"> command-line tools, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.364.1">nm-connection-editor</span></span><span class="koboSpan" id="kobo.365.1"> graphical tool, and the network settings section of the Cockpit web interface. </span><span class="koboSpan" id="kobo.365.2">In general, the nmcli command-line tool provides the most features and flexibility. </span></p>
</div>
</body></html>