<html><head></head><body>
  <div id="_idContainer122" class="Basic-Text-Frame">
    <h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">8</span></h1>
    <h1 id="_idParaDest-133" class="chapterTitle"><span class="koboSpan" id="kobo.2.1">Basic Shell Script Construction</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.3.1">Yeah, I know. </span><span class="koboSpan" id="kobo.3.2">You’re dying to start creating some shell scripts, but haven’t been able to do that yet. </span><span class="koboSpan" id="kobo.3.3">So, in this chapter, we’ll look at the basics of shell script construction. </span><span class="koboSpan" id="kobo.3.4">We’ll then wrap things up by looking at some shell scripts that are both practical and useful.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.4.1">Many of the techniques that I’m presenting in this chapter work for any shell, but I’ll also present some that might only work on </span><code class="inlineCode"><span class="koboSpan" id="kobo.5.1">bash</span></code><span class="koboSpan" id="kobo.6.1">. </span><span class="koboSpan" id="kobo.6.2">So, just to keep things simple though, I’ll be sticking with </span><code class="inlineCode"><span class="koboSpan" id="kobo.7.1">bash</span></code><span class="koboSpan" id="kobo.8.1"> for now. </span><span class="koboSpan" id="kobo.8.2">In </span><em class="chapterRef"><span class="koboSpan" id="kobo.9.1">Chapter 22, Using the zsh Shell</span></em><span class="koboSpan" id="kobo.10.1">, I’ll show you techniques that are specific to </span><code class="inlineCode"><span class="koboSpan" id="kobo.11.1">zsh</span></code><span class="koboSpan" id="kobo.12.1">. </span><span class="koboSpan" id="kobo.12.2">In </span><em class="chapterRef"><span class="koboSpan" id="kobo.13.1">Chapter 19, Shell Script Portability</span></em><span class="koboSpan" id="kobo.14.1">, I’ll show you techniques that will work on a wide variety of shells.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.15.1">The topics that you’ll see in this chapter include:</span></p>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.16.1">Understanding basic shell script construction</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.17.1">Performing tests</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.18.1">Understanding subshells</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.19.1">Understanding scripting variables</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.20.1">Understanding array variables</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.21.1">Understanding variable expansion</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.22.1">Understanding command substitution</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.23.1">Understanding decisions and loops</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.24.1">Understanding positional parameters</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.25.1">Understanding exit codes</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.26.1">More information about echo</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.27.1">Looking at some real-world examples</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.28.1">All right, if you’re ready, let’s jump in.</span></p>
    <h1 id="_idParaDest-134" class="heading 1"><span class="koboSpan" id="kobo.29.1">Technical Requirements</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.30.1">Use any Linux distro that has </span><code class="inlineCode"><span class="koboSpan" id="kobo.31.1">bash</span></code><span class="koboSpan" id="kobo.32.1"> installed. </span><span class="koboSpan" id="kobo.32.2">If you’re a Mac user, you’ll want to use one of your Linux virtual machines, because some of the scripts use commands that won’t work on macOS. </span><span class="koboSpan" id="kobo.32.3">Feel free to follow along on your local machine as you go through this chapter, but also be aware that I will provide some actual hands-on labs.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.33.1">I’ve also included one hands-on exercise that uses a FreeBSD virtual machine. </span><span class="koboSpan" id="kobo.33.2">Create the FreeBSD virtual machine and install both </span><code class="inlineCode"><span class="koboSpan" id="kobo.34.1">sudo</span></code><span class="koboSpan" id="kobo.35.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.36.1">bash</span></code><span class="koboSpan" id="kobo.37.1">, as I showed you in the book’s </span><em class="chapterRef"><span class="koboSpan" id="kobo.38.1">Preface</span></em><span class="koboSpan" id="kobo.39.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.40.1">Also, as I explained in the </span><em class="chapterRef"><span class="koboSpan" id="kobo.41.1">Preface</span></em><span class="koboSpan" id="kobo.42.1">, you can download the scripts from the Github repository by doing:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.43.1">git clone https://github.com/PacktPublishing/The-Ultimate-Linux-Shell-Scripting-Guide.git
</span></code></pre>
    <h1 id="_idParaDest-135" class="heading 1"><span class="koboSpan" id="kobo.44.1">Understanding Basic Shell Script Construction</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.45.1">The first thing you’ll need to do</span><a id="_idIndexMarker404"/><span class="koboSpan" id="kobo.46.1"> when creating a shell script is to define which shell you want to use to interpret the script.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.47.1">You might have a particular reason for choosing one shell over another. </span><span class="koboSpan" id="kobo.47.2">That’s something we’ll talk about in </span><em class="chapterRef"><span class="koboSpan" id="kobo.48.1">Chapter 19, Shell Script Portability</span></em><span class="koboSpan" id="kobo.49.1">, and </span><em class="chapterRef"><span class="koboSpan" id="kobo.50.1">Chapter 22, Using the Z Shell</span></em><span class="koboSpan" id="kobo.51.1">.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.52.1">You’ll define the shell to use as the</span><a id="_idIndexMarker405"/><span class="koboSpan" id="kobo.53.1"> interpreter in the </span><strong class="keyWord"><span class="koboSpan" id="kobo.54.1">shebang line</span></strong><span class="koboSpan" id="kobo.55.1">, which is the first line of the script. </span><span class="koboSpan" id="kobo.55.2">It will look something like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.56.1">#!/bin/bash
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.57.1">Normally of course, a line that begins with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.58.1">#</span></code><span class="koboSpan" id="kobo.59.1"> sign would indicate a comment that would be ignored by the shell. </span><span class="koboSpan" id="kobo.59.2">The shebang line--and please don’t ask me why it’s called that--is an exception to that rule. </span><span class="koboSpan" id="kobo.59.3">In addition to defining a specific shell that you want to </span><a id="_idIndexMarker406"/><span class="koboSpan" id="kobo.60.1">use, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.61.1">/bin/bash</span></code><span class="koboSpan" id="kobo.62.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.63.1">/bin/zsh</span></code><span class="koboSpan" id="kobo.64.1">, you can also define the generic </span><code class="inlineCode"><span class="koboSpan" id="kobo.65.1">/bin/sh</span></code><span class="koboSpan" id="kobo.66.1"> shell to make your scripts more portable, so that they’ll run on a wider variety of shells and operating systems. </span><span class="koboSpan" id="kobo.66.2">Here’s how that looks:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.67.1">#!/bin/sh
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.68.1">This generic </span><code class="inlineCode"><span class="koboSpan" id="kobo.69.1">sh</span></code><span class="koboSpan" id="kobo.70.1"> shell is supposed to make it so that you can run your scripts on different systems that might or might not have </span><code class="inlineCode"><span class="koboSpan" id="kobo.71.1">bash</span></code><span class="koboSpan" id="kobo.72.1"> installed. </span><span class="koboSpan" id="kobo.72.2">But, it’s also problematic because the various shells that </span><code class="inlineCode"><span class="koboSpan" id="kobo.73.1">sh</span></code><span class="koboSpan" id="kobo.74.1"> represents aren’t fully compatible with each other. </span><span class="koboSpan" id="kobo.74.2">Here’s the breakdown of how it works:</span></p>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.75.1">On FreeBSD and possibly other </span><strong class="keyWord"><span class="koboSpan" id="kobo.76.1">Berkeley Software Distribution</span></strong><span class="koboSpan" id="kobo.77.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.78.1">BSD</span></strong><span class="koboSpan" id="kobo.79.1">)-type systems, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.80.1">sh</span></code><span class="koboSpan" id="kobo.81.1"> executable</span><a id="_idIndexMarker407"/><span class="koboSpan" id="kobo.82.1"> is the old-school Bourne shell, which is the ancestor of the Bourne Again Shell (</span><code class="inlineCode"><span class="koboSpan" id="kobo.83.1">bash</span></code><span class="koboSpan" id="kobo.84.1">).</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.85.1">On Red Hat-type systems, </span><code class="inlineCode"><span class="koboSpan" id="kobo.86.1">sh</span></code><span class="koboSpan" id="kobo.87.1"> is a symbolic link that points to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.88.1">bash</span></code><span class="koboSpan" id="kobo.89.1"> executable. </span><span class="koboSpan" id="kobo.89.2">Be aware that </span><code class="inlineCode"><span class="koboSpan" id="kobo.90.1">bash</span></code><span class="koboSpan" id="kobo.91.1"> can use certain programming features that the other shells in this list can’t use. </span><span class="koboSpan" id="kobo.91.2">(I’ll explain more about this in </span><em class="chapterRef"><span class="koboSpan" id="kobo.92.1">Chapter 19, Shell Script Portability</span></em><span class="koboSpan" id="kobo.93.1">.)</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.94.1">On Debian/Ubuntu-type systems, </span><code class="inlineCode"><span class="koboSpan" id="kobo.95.1">sh</span></code><span class="koboSpan" id="kobo.96.1"> is a symbolic link that points to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.97.1">dash</span></code><span class="koboSpan" id="kobo.98.1"> executable. </span><code class="inlineCode"><span class="koboSpan" id="kobo.99.1">dash</span></code><span class="koboSpan" id="kobo.100.1"> stands for </span><strong class="keyWord"><span class="koboSpan" id="kobo.101.1">Debian Almquist Shell</span></strong><span class="koboSpan" id="kobo.102.1">, which is a faster, more lightweight implementation of </span><code class="inlineCode"><span class="koboSpan" id="kobo.103.1">bash</span></code><span class="koboSpan" id="kobo.104.1">.</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.105.1">On Alpine Linux, </span><code class="inlineCode"><span class="koboSpan" id="kobo.106.1">sh</span></code><span class="koboSpan" id="kobo.107.1"> is a symbolic link that points to </span><code class="inlineCode"><span class="koboSpan" id="kobo.108.1">ash</span></code><span class="koboSpan" id="kobo.109.1">, which is a lightweight shell that’s part of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.110.1">busybox</span></code><span class="koboSpan" id="kobo.111.1"> executable. </span><span class="koboSpan" id="kobo.111.2">(On Alpine, </span><code class="inlineCode"><span class="koboSpan" id="kobo.112.1">bash</span></code><span class="koboSpan" id="kobo.113.1"> is not installed by default.)</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.114.1">On OpenIndiana, which is a </span><strong class="keyWord"><span class="koboSpan" id="kobo.115.1">Free Open Source Software</span></strong><span class="koboSpan" id="kobo.116.1"> fork of Oracle’s Solaris operating </span><a id="_idIndexMarker408"/><span class="koboSpan" id="kobo.117.1">system, </span><code class="inlineCode"><span class="koboSpan" id="kobo.118.1">sh</span></code><span class="koboSpan" id="kobo.119.1"> is a symbolic link that points to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.120.1">ksh93</span></code><span class="koboSpan" id="kobo.121.1"> shell. </span><span class="koboSpan" id="kobo.121.2">This shell, which is also known as the Korn shell, is </span><a id="_idIndexMarker409"/><span class="koboSpan" id="kobo.122.1">somewhat, but not completely, compatible with </span><code class="inlineCode"><span class="koboSpan" id="kobo.123.1">bash</span></code><span class="koboSpan" id="kobo.124.1">. </span><span class="koboSpan" id="kobo.124.2">(It was created by a guy named David Korn, and has nothing to do with any vegetable.)</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.125.1">On macOS, </span><code class="inlineCode"><span class="koboSpan" id="kobo.126.1">sh</span></code><span class="koboSpan" id="kobo.127.1"> is a symbolic link that points to </span><code class="inlineCode"><span class="koboSpan" id="kobo.128.1">bash</span></code><span class="koboSpan" id="kobo.129.1">. </span><span class="koboSpan" id="kobo.129.2">(Curiously, </span><code class="inlineCode"><span class="koboSpan" id="kobo.130.1">zsh</span></code><span class="koboSpan" id="kobo.131.1"> is the default login </span><a id="_idIndexMarker410"/><span class="koboSpan" id="kobo.132.1">shell on macOS, but </span><code class="inlineCode"><span class="koboSpan" id="kobo.133.1">bash</span></code><span class="koboSpan" id="kobo.134.1"> is still installed by default and is available for use.)</span></li>
    </ul>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.135.1">Be aware that using </span><code class="inlineCode"><span class="koboSpan" id="kobo.136.1">#!/bin/sh</span></code><span class="koboSpan" id="kobo.137.1"> in your scripts can be problematic. </span><span class="koboSpan" id="kobo.137.2">That’s because the various shells on the various operating systems that </span><code class="inlineCode"><span class="koboSpan" id="kobo.138.1">#!/bin/sh</span></code><span class="koboSpan" id="kobo.139.1"> represents aren’t fully compatible with each other. </span><span class="koboSpan" id="kobo.139.2">So, let’s say that you’re creating a script on a Red Hat machine, on which </span><code class="inlineCode"><span class="koboSpan" id="kobo.140.1">sh</span></code><span class="koboSpan" id="kobo.141.1"> points to </span><code class="inlineCode"><span class="koboSpan" id="kobo.142.1">bash</span></code><span class="koboSpan" id="kobo.143.1">. </span><span class="koboSpan" id="kobo.143.2">There’s a real possibility that the script won’t run on either a Debian or a FreeBSD machine, on which </span><code class="inlineCode"><span class="koboSpan" id="kobo.144.1">sh</span></code><span class="koboSpan" id="kobo.145.1"> points to </span><code class="inlineCode"><span class="koboSpan" id="kobo.146.1">dash</span></code><span class="koboSpan" id="kobo.147.1"> and Bourne shell, respectively. </span><span class="koboSpan" id="kobo.147.2">For that reason, we’ll concentrate on </span><code class="inlineCode"><span class="koboSpan" id="kobo.148.1">bash</span></code><span class="koboSpan" id="kobo.149.1"> for now, and will just use </span><code class="inlineCode"><span class="koboSpan" id="kobo.150.1">#!/bin/bash</span></code><span class="koboSpan" id="kobo.151.1"> as our shebang line. </span><span class="koboSpan" id="kobo.151.2">And, as I mentioned before, we’ll talk more about this topic in </span><em class="chapterRef"><span class="koboSpan" id="kobo.152.1">Chapter 19, Shell Script Portability</span></em><span class="koboSpan" id="kobo.153.1">.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.154.1">A shell script can be as simple or as complex as your needs dictate. </span><span class="koboSpan" id="kobo.154.2">It can be just one or more normal Linux/Unix commands put together in a list, to be performed sequentially. </span><span class="koboSpan" id="kobo.154.3">Or, you can have scripts that can approach the complexity of programs written in a higher-level programming language, such as C.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.155.1">Let’s start by taking a look at a very simple, one-command script.</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.156.1">#!/bin/bash
rsync -avhe ssh /var/www/html/course/images/ root@192.168.0.22:/var/www/html/course/images/
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.157.1">This is a simple one-line script that I used to use to back up my </span><code class="inlineCode"><span class="koboSpan" id="kobo.158.1">images</span></code><span class="koboSpan" id="kobo.159.1"> directory on one computer to a backup directory on a Debian computer. </span><span class="koboSpan" id="kobo.159.2">It uses </span><code class="inlineCode"><span class="koboSpan" id="kobo.160.1">rsync</span></code><span class="koboSpan" id="kobo.161.1">, with its appropriate options, to synchronize the two directories via a Secure Shell (</span><code class="inlineCode"><span class="koboSpan" id="kobo.162.1">ssh</span></code><span class="koboSpan" id="kobo.163.1">) session. </span><span class="koboSpan" id="kobo.163.2">(Although I normally don’t like to allow the root user to do </span><code class="inlineCode"><span class="koboSpan" id="kobo.164.1">ssh</span></code><span class="koboSpan" id="kobo.165.1"> logins, in this case it’s necessary. </span><span class="koboSpan" id="kobo.165.2">Obviously, I would only do this on a local network, and would never do it across the Internet.) Appropriately, I named the script </span><code class="inlineCode"><span class="koboSpan" id="kobo.166.1">rsync_with_debian</span></code><span class="koboSpan" id="kobo.167.1">. </span><span class="koboSpan" id="kobo.167.2">Before I could run the script, I had to add the executable permission, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.168.1">chmod u+x rsync_with_debian
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.169.1">On the second line of this </span><code class="inlineCode"><span class="koboSpan" id="kobo.170.1">rsync_with_debian</span></code><span class="koboSpan" id="kobo.171.1"> script, right after the shebang line, you see the exact same </span><a id="_idIndexMarker411"/><span class="koboSpan" id="kobo.172.1">command that I would have typed on the command-line if I didn’t have the script. </span><span class="koboSpan" id="kobo.172.2">So, you see, I’ve greatly simplified things by creating a script.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.173.1">To make this script available to all users on the system, place it in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.174.1">/usr/local/bin/</span></code><span class="koboSpan" id="kobo.175.1"> directory, which should be in everyone’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.176.1">PATH</span></code><span class="koboSpan" id="kobo.177.1"> setting.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.178.1">Before going further, let’s reinforce what you’ve just learned with a hands-on lab.</span></p>
    <h2 id="_idParaDest-136" class="heading 2"><span class="koboSpan" id="kobo.179.1">Hands-on Lab – Counting Logged-in Users</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.180.1">This lab will help you</span><a id="_idIndexMarker412"/><span class="koboSpan" id="kobo.181.1"> create a shell script that shows how many users are logged in, and then modify it so that only unique users are listed. </span><span class="koboSpan" id="kobo.181.2">(This script uses some of the text stream filters that you learned about in the previous two chapters.)</span></p>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.182.1">On one of your Linux virtual machines, create three additional user accounts. </span><span class="koboSpan" id="kobo.182.2">On your Fedora virtual machine, do it like this, except choose your own user names:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.183.1">sudo useradd vicky
sudo passwd vicky
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.184.1">On a Debian virtual machine, do it like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.185.1">sudo adduser vicky
</span></code></pre>
    <ol>
      <li class="numberedList" value="2"><span class="koboSpan" id="kobo.186.1">At the local terminal of the virtual machine, obtain its IP address, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.187.1">ip a
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.188.1">Open four terminal windows on your host machine. </span><span class="koboSpan" id="kobo.188.2">Using the IP address of your own virtual machine, log into your own account from one window, and then log into each of the other accounts from the other windows. </span><span class="koboSpan" id="kobo.188.3">The commands will look something like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.189.1">ssh vicky@192.168.0.9
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.190.1">From the terminal window where you’re logged in, view all of the users who are currently logged in, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.191.1">who
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.192.1">You should see </span><a id="_idIndexMarker413"/><span class="koboSpan" id="kobo.193.1">five users, because your own account will show up once for the local terminal log-in, and once for the remote </span><code class="inlineCode"><span class="koboSpan" id="kobo.194.1">ssh</span></code><span class="koboSpan" id="kobo.195.1"> log-in.</span></p>
    <ol>
      <li class="numberedList" value="5"><span class="koboSpan" id="kobo.196.1">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.197.1">logged-in.sh</span></code><span class="koboSpan" id="kobo.198.1"> script, and make it look like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.199.1">#!/bin/bash
users="$(who | wc -l)"
echo "There are currently $users users logged in."
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.200.1">I’m using the concept of </span><strong class="keyWord"><span class="koboSpan" id="kobo.201.1">command substitution</span></strong><span class="koboSpan" id="kobo.202.1"> to assign the output of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.203.1">who | wc -l</span></code><span class="koboSpan" id="kobo.204.1"> command to the value </span><a id="_idIndexMarker414"/><span class="koboSpan" id="kobo.205.1">of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.206.1">users</span></code><span class="koboSpan" id="kobo.207.1"> scripting variable. </span><span class="koboSpan" id="kobo.207.2">(I’ll tell you more about command substitution later, so don’t stress out about it just yet.) </span></p>
    <ol>
      <li class="numberedList" value="6"><span class="koboSpan" id="kobo.208.1">Make the script executable, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.209.1">chmod u+x logged-in.sh
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.210.1">Now, run the script, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.211.1">./logged-in.sh
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.212.1">The output should look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.213.1">There are currently 5 users logged in.
</span></code></pre>
    <p class="normal one"><span class="koboSpan" id="kobo.214.1">The problem here is that there are really only four users, because your own username is counted twice. </span><span class="koboSpan" id="kobo.214.2">So, let’s fix that.</span></p>
    <ol>
      <li class="numberedList" value="8"><span class="koboSpan" id="kobo.215.1">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.216.1">logged-in.sh</span></code><span class="koboSpan" id="kobo.217.1"> script so that it now looks like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.218.1">#!/bin/bash
users="$(who | wc -l)"
echo "There are currently $users users logged in."
</span><span class="koboSpan" id="kobo.218.2">echo
uniqusers="$(who | cut -d" " -f1 | sort | uniq | wc -l)"
echo "There are currently $uniqusers unique users logged in."
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.219.1">The variable </span><code class="inlineCode"><span class="koboSpan" id="kobo.220.1">uniqusers</span></code><span class="koboSpan" id="kobo.221.1"> is created by all of the commands that are piped to each other inside the </span><code class="inlineCode"><span class="koboSpan" id="kobo.222.1">()</span></code><span class="koboSpan" id="kobo.223.1">. </span><span class="koboSpan" id="kobo.223.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.224.1">cut</span></code><span class="koboSpan" id="kobo.225.1"> operation is delimited by a blank space (</span><code class="inlineCode"><span class="koboSpan" id="kobo.226.1">-d" "</span></code><span class="koboSpan" id="kobo.227.1">) and the first field (</span><code class="inlineCode"><span class="koboSpan" id="kobo.228.1">-f1</span></code><span class="koboSpan" id="kobo.229.1">) is what you will cut from the output of </span><code class="inlineCode"><span class="koboSpan" id="kobo.230.1">who</span></code><span class="koboSpan" id="kobo.231.1">. </span><span class="koboSpan" id="kobo.231.2">That</span><a id="_idIndexMarker415"/><span class="koboSpan" id="kobo.232.1"> output is piped to </span><code class="inlineCode"><span class="koboSpan" id="kobo.233.1">sort</span></code><span class="koboSpan" id="kobo.234.1"> and then to </span><code class="inlineCode"><span class="koboSpan" id="kobo.235.1">uniq</span></code><span class="koboSpan" id="kobo.236.1">, which will only send the names of unique users to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.237.1">wc -l</span></code><span class="koboSpan" id="kobo.238.1"> command.</span></p>
    <ol>
      <li class="numberedList" value="9"><span class="koboSpan" id="kobo.239.1">Run the script again, and the output should look like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.240.1">There are currently 5 users logged in.
</span><span class="koboSpan" id="kobo.240.2">There are currently 4 unique users logged in.
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.241.1">Make one last modification to the script to list the names of the unique users who are logged in. </span><span class="koboSpan" id="kobo.241.2">The completed script will look like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.242.1">#!/bin/bash
users="$(who | wc -l)"
echo "There are currently $users users logged in."
</span><span class="koboSpan" id="kobo.242.2">echo
uniqusers="$(who | cut -d" " -f1 | sort | uniq | wc -l)"
echo "There are currently $uniqusers unique users logged in."
</span><span class="koboSpan" id="kobo.242.3">echo
listusers="$(who | cut -d" " -f1 | sort | uniq)"
echo "These users are currently logged in: \n$listusers "
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.243.1">Run the script again, and you should get output that looks something like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.244.1">There are currently 5 users logged in.
</span><span class="koboSpan" id="kobo.244.2">There are currently 4 unique users logged in.
</span><span class="koboSpan" id="kobo.244.3">These users are currently logged in:
cleopatra
donnie
frank
vicky
</span></code></pre>
      </li>
    </ol>
    <p class="normal"><span class="koboSpan" id="kobo.245.1">Congratulations! </span><span class="koboSpan" id="kobo.245.2">You’ve just</span><a id="_idIndexMarker416"/><span class="koboSpan" id="kobo.246.1"> created your first shell script. </span><span class="koboSpan" id="kobo.246.2">Now, let’s do some testing.</span></p>
    <h1 id="_idParaDest-137" class="heading 1"><span class="koboSpan" id="kobo.247.1">Performing Tests</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.248.1">There will be times </span><a id="_idIndexMarker417"/><span class="koboSpan" id="kobo.249.1">when your scripts will need to test for a certain condition before making a decision on which action to take. </span><span class="koboSpan" id="kobo.249.2">You might need to check for the existence of a certain file or directory, whether certain permissions are set on a file or directory, or for a myriad of other things. </span><span class="koboSpan" id="kobo.249.3">There are three ways to perform a test, which are:</span></p>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.250.1">Use the keyword </span><code class="inlineCode"><span class="koboSpan" id="kobo.251.1">test</span></code><span class="koboSpan" id="kobo.252.1"> followed by a test condition, with another command joined to it with either a </span><code class="inlineCode"><span class="koboSpan" id="kobo.253.1">&amp;&amp;</span></code><span class="koboSpan" id="kobo.254.1"> or a </span><code class="inlineCode"><span class="koboSpan" id="kobo.255.1">||</span></code><span class="koboSpan" id="kobo.256.1"> construct.</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.257.1">Enclose the test condition within a set of square brackets.</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.258.1">Use an if. </span><span class="koboSpan" id="kobo.258.2">. </span><span class="koboSpan" id="kobo.258.3">.then construct</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.259.1">Let’s start by looking at the </span><code class="inlineCode"><span class="koboSpan" id="kobo.260.1">test</span></code><span class="koboSpan" id="kobo.261.1"> keyword.</span></p>
    <h2 id="_idParaDest-138" class="heading 2"><span class="koboSpan" id="kobo.262.1">Using the test Keyword</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.263.1">For our first example, let’s test to</span><a id="_idIndexMarker418"/><span class="koboSpan" id="kobo.264.1"> see whether a certain directory exists, and then create it if it doesn’t. </span><span class="koboSpan" id="kobo.264.2">Here’s how that works:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.265.1">[donnie@fedora ~]$ test -d graphics || mkdir graphics
[donnie@fedora ~]$ ls -ld graphics/
drwxr-xr-x. </span><span class="koboSpan" id="kobo.265.2">1 donnie donnie 0 Sep 26 15:41 graphics/
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.266.1">Now, let’s put that into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.267.1">test_graphics.sh</span></code><span class="koboSpan" id="kobo.268.1"> script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.269.1">#!/bin/bash
cd
pwd
test -d graphics || mkdir graphics
cd graphics
pwd
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.270.1">Let’s run this script to see what we get:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.271.1">[donnie@fedora ~]$ ./test_graphics.sh
/home/donnie
/home/donnie/graphics
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.272.1">As you may have</span><a id="_idIndexMarker419"/><span class="koboSpan" id="kobo.273.1"> guessed, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.274.1">-d </span></code><span class="koboSpan" id="kobo.275.1">operator stands for </span><em class="italic"><span class="koboSpan" id="kobo.276.1">directory</span></em><span class="koboSpan" id="kobo.277.1">. </span><span class="koboSpan" id="kobo.277.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.278.1">|| </span></code><span class="koboSpan" id="kobo.279.1">construct causes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.280.1">mkdir</span></code><span class="koboSpan" id="kobo.281.1"> command to run if the graphics directory doesn’t exist. </span><span class="koboSpan" id="kobo.281.2">And of course, if the directory already exists, it won’t get created again. </span><span class="koboSpan" id="kobo.281.3">This is a good safety measure that can prevent you from accidentally overwriting any existing files or directories. </span><span class="koboSpan" id="kobo.281.4">(I’ll show you a chart with more </span><code class="inlineCode"><span class="koboSpan" id="kobo.282.1">test </span></code><span class="koboSpan" id="kobo.283.1">operators in just a moment.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.284.1">Now, let’s look at the second way to perform a test.</span></p>
    <h2 id="_idParaDest-139" class="heading 2"><span class="koboSpan" id="kobo.285.1">Enclosing a test Condition Within Square Brackets</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.286.1">The second way to</span><a id="_idIndexMarker420"/><span class="koboSpan" id="kobo.287.1"> perform a test is to enclose the test condition within a pair of square brackets, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.288.1">[ -d graphics ]
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.289.1">First, note how you must have a blank space after the first bracket and before the second one. </span><span class="koboSpan" id="kobo.289.2">This tests for the existence of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.290.1">graphics</span></code><span class="koboSpan" id="kobo.291.1"> directory, just as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.292.1">test -d</span></code><span class="koboSpan" id="kobo.293.1"> construct did. </span><span class="koboSpan" id="kobo.293.2">Now, let’s put that into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.294.1">test_graphics_2.sh</span></code><span class="koboSpan" id="kobo.295.1"> script, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.296.1">#!/bin/bash
cd
pwd
[ -d graphics ] || mkdir graphics
cd graphics
pwd
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.297.1">Running this script </span><a id="_idIndexMarker421"/><span class="koboSpan" id="kobo.298.1">will give you the exact same output as the first script. </span><span class="koboSpan" id="kobo.298.2">Now, let’s put a twist on things. </span><span class="koboSpan" id="kobo.298.3">Modify the </span><code class="inlineCode"><span class="koboSpan" id="kobo.299.1">test_graphics_2.sh</span></code><span class="koboSpan" id="kobo.300.1"> script so that it looks like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.301.1">#!/bin/bash
cd
pwd
[ ! </span><span class="koboSpan" id="kobo.301.2">-d graphics ] &amp;&amp; mkdir graphics
cd graphics
pwd
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.302.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.303.1">!</span></code><span class="koboSpan" id="kobo.304.1"> is a negation operator, which makes the affected operator do the opposite of what it’s supposed to do. </span><span class="koboSpan" id="kobo.304.2">In this case, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.305.1">!</span></code><span class="koboSpan" id="kobo.306.1"> causes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.307.1">-d</span></code><span class="koboSpan" id="kobo.308.1"> operator to check for the </span><em class="italic"><span class="koboSpan" id="kobo.309.1">absence</span></em><span class="koboSpan" id="kobo.310.1"> of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.311.1">graphics</span></code><span class="koboSpan" id="kobo.312.1"> directory. </span><span class="koboSpan" id="kobo.312.2">To make this work properly, I also had to change the </span><code class="inlineCode"><span class="koboSpan" id="kobo.313.1">||</span></code><span class="koboSpan" id="kobo.314.1"> operator to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.315.1">&amp;&amp;</span></code><span class="koboSpan" id="kobo.316.1"> operator. </span><span class="koboSpan" id="kobo.316.2">(Also, note that there must be a blank space between the </span><code class="inlineCode"><span class="koboSpan" id="kobo.317.1">!</span></code><span class="koboSpan" id="kobo.318.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.319.1">-d</span></code><span class="koboSpan" id="kobo.320.1">.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.321.1">You can also test for numerical values, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.322.1">[ $var -eq 0 ]
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.323.1">You see that I’m calling up the value of the variable </span><code class="inlineCode"><span class="koboSpan" id="kobo.324.1">var</span></code><span class="koboSpan" id="kobo.325.1">, and testing to see if it is equal (</span><code class="inlineCode"><span class="koboSpan" id="kobo.326.1">-eq</span></code><span class="koboSpan" id="kobo.327.1">) to 0. </span><span class="koboSpan" id="kobo.327.2">Instead of using a negation (</span><code class="inlineCode"><span class="koboSpan" id="kobo.328.1">!</span></code><span class="koboSpan" id="kobo.329.1">) here to see if the variable is </span><em class="italic"><span class="koboSpan" id="kobo.330.1">not</span></em><span class="koboSpan" id="kobo.331.1"> equal to 0, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.332.1">-ne</span></code><span class="koboSpan" id="kobo.333.1"> operator. </span><span class="koboSpan" id="kobo.333.2">Let’s see how that looks in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.334.1">test_var.sh</span></code><span class="koboSpan" id="kobo.335.1"> script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.336.1">#!/bin/bash
var1=0
var2=1
[ $var1 -eq 0 ] &amp;&amp; echo "$var1 is equal to zero."
</span><span class="koboSpan" id="kobo.336.2">[ $var2 -ne 0 ] &amp;&amp; echo "$var2 is not equal to zero."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.337.1">Now, let’s run it:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.338.1">[donnie@fedora ~]$ ./test_var.sh
0 is equal to zero.
</span><span class="koboSpan" id="kobo.338.2">1 is not equal to zero.
</span><span class="koboSpan" id="kobo.338.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.339.1">The third way to</span><a id="_idIndexMarker422"/><span class="koboSpan" id="kobo.340.1"> perform a test is to use an </span><code class="inlineCode"><span class="koboSpan" id="kobo.341.1">if. </span><span class="koboSpan" id="kobo.341.2">. </span><span class="koboSpan" id="kobo.341.3">.then</span></code><span class="koboSpan" id="kobo.342.1"> construct, which we’ll briefly talk about next.</span></p>
    <h2 id="_idParaDest-140" class="heading 2"><span class="koboSpan" id="kobo.343.1">Using an if. </span><span class="koboSpan" id="kobo.343.2">. </span><span class="koboSpan" id="kobo.343.3">.then Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.344.1">Using an </span><code class="inlineCode"><span class="koboSpan" id="kobo.345.1">if. </span><span class="koboSpan" id="kobo.345.2">. </span><span class="koboSpan" id="kobo.345.3">.then</span></code><span class="koboSpan" id="kobo.346.1"> construct is</span><a id="_idIndexMarker423"/><span class="koboSpan" id="kobo.347.1"> handy when you have more complex test conditions. </span><span class="koboSpan" id="kobo.347.2">Here’s the most basic example, in the form of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.348.1">test_graphics_3.sh</span></code><span class="koboSpan" id="kobo.349.1"> script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.350.1">#!/bin/bash
cd
pwd
if [ ! </span><span class="koboSpan" id="kobo.350.2">-d graphics ]; then
        mkdir graphics
fi
cd graphics
pwd
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.351.1">This construct begins with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.352.1">if</span></code><span class="koboSpan" id="kobo.353.1"> statement, and ends with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.354.1">fi</span></code><span class="koboSpan" id="kobo.355.1"> statement. </span><span class="koboSpan" id="kobo.355.2">(That’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.356.1">if</span></code><span class="koboSpan" id="kobo.357.1"> spelled backwards.) Place a semi-colon after the test condition, followed by the keyword </span><code class="inlineCode"><span class="koboSpan" id="kobo.358.1">then</span></code><span class="koboSpan" id="kobo.359.1">. </span><span class="koboSpan" id="kobo.359.2">After that, specify the action that you want to perform, which in this case is </span><code class="inlineCode"><span class="koboSpan" id="kobo.360.1">mkdir graphics</span></code><span class="koboSpan" id="kobo.361.1">. </span><span class="koboSpan" id="kobo.361.2">Although indenting the action block isn’t necessary in shell scripting, as it is in other languages, it does help make the script more readable.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.362.1">Of course, there’s a lot more to </span><code class="inlineCode"><span class="koboSpan" id="kobo.363.1">if. </span><span class="koboSpan" id="kobo.363.2">. </span><span class="koboSpan" id="kobo.363.3">.then</span></code><span class="koboSpan" id="kobo.364.1"> constructs than just this. </span><span class="koboSpan" id="kobo.364.2">Not to worry though, because I’ll show you more about them in the </span><em class="chapterRef"><span class="koboSpan" id="kobo.365.1">Understanding Decisions and Loops</span></em><span class="koboSpan" id="kobo.366.1"> section. </span><span class="koboSpan" id="kobo.366.2">Before we get there though, I want to show you some more concepts that you can use to fancy up your </span><code class="inlineCode"><span class="koboSpan" id="kobo.367.1">if. </span><span class="koboSpan" id="kobo.367.2">. </span><span class="koboSpan" id="kobo.367.3">.then</span></code><span class="koboSpan" id="kobo.368.1"> constructs.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.369.1">Now, let’s look at the </span><a id="_idIndexMarker424"/><span class="koboSpan" id="kobo.370.1">various other types of tests that you can do.</span></p>
    <h2 id="_idParaDest-141" class="heading 2"><span class="koboSpan" id="kobo.371.1">Using Other Types of Tests</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.372.1">There are a lot more </span><a id="_idIndexMarker425"/><span class="koboSpan" id="kobo.373.1">kinds of tests that you can do, including text string comparisons, numerical comparisons, whether files or directories exist and what permissions are set on them. </span><span class="koboSpan" id="kobo.373.2">Here’s a chart of the more popular tests, along with their operators:</span></p>
    <table id="table001-4" class="table-container">
      <tbody>
        <tr>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.374.1">Operator</span></strong></p>
          </td>
          <td class="table-cell">
            <p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.375.1">Test</span></strong></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.376.1">-b filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.377.1">True if a block device file with the specified filename exists.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.378.1">-c filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.379.1">True if a character device file with the specified filename exists.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.380.1">-d directory_name</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.381.1">True if a directory with the specified directory name exists.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.382.1">-e filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.383.1">True if any type of file with the specified filename exists.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.384.1">-f filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.385.1">True if a regular file with the specified filename exists.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.386.1">-g filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.387.1">True if a file or directory has the SGID permission set.</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.388.1">-G filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.389.1">True if a file exists and is owned by the Effective Group ID</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.390.1">-h filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.391.1">True if the file exists and it’s a symbolic link</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.392.1">-k filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.393.1">True if the file or directory exists and has the sticky bit set</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.394.1">-L filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.395.1">True if the file exists and it’s a symbolic link. </span><span class="koboSpan" id="kobo.395.2">(This is the same as </span><code class="inlineCode"><span class="koboSpan" id="kobo.396.1">-h</span></code><span class="koboSpan" id="kobo.397.1">.)</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.398.1">-p filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.399.1">True if the file exists and it’s a named pipe</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.400.1">-O filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.401.1">True if the file exists and it’s owned by the Effective UID</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.402.1">-r filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.403.1">True if the file exists and it’s readable</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.404.1">-S filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.405.1">True if the file exists and it’s a socket</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.406.1">-s filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.407.1">True if the file exists and it’s non-zero bytes in size</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.408.1">-u filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.409.1">True if the file exists and it has the SUID bit set</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.410.1">-w filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.411.1">True if the file exists and it’s writable</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.412.1">-x filename</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.413.1">True if the file exists and it’s executable</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.414.1">file1 -nt file2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.415.1">True if file1 is newer than file2</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.416.1">file1 -ot file2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.417.1">True if file1 is older than file2</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.418.1">-z string</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.419.1">True if the length of the text string is 0</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.420.1">-n string</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.421.1">True if the length of the text string is not 0</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.422.1">string1 == string2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.423.1">True if the two text strings are identical</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.424.1">string1 != string2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.425.1">True if the two text strings are not identical</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.426.1">string1 &lt; string2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.427.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.428.1">string1</span></code><span class="koboSpan" id="kobo.429.1"> comes before </span><code class="inlineCode"><span class="koboSpan" id="kobo.430.1">string2</span></code><span class="koboSpan" id="kobo.431.1"> in alphabetical order</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.432.1">string1 &gt; string2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.433.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.434.1">string1</span></code><span class="koboSpan" id="kobo.435.1"> comes after </span><code class="inlineCode"><span class="koboSpan" id="kobo.436.1">string2</span></code><span class="koboSpan" id="kobo.437.1"> in alphabetical order</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.438.1">integer1 -eq integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.439.1">True if the two integers are equal</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.440.1">integer1 -ne integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.441.1">True if the two integers are not equal</span></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.442.1">integer1 -lt integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.443.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.444.1">integer1</span></code><span class="koboSpan" id="kobo.445.1"> is less than </span><code class="inlineCode"><span class="koboSpan" id="kobo.446.1">integer2</span></code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.447.1">integer1 -gt integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.448.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.449.1">integer1</span></code><span class="koboSpan" id="kobo.450.1"> is greater than </span><code class="inlineCode"><span class="koboSpan" id="kobo.451.1">integer2</span></code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.452.1">integer1 -le integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.453.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.454.1">integer1</span></code><span class="koboSpan" id="kobo.455.1"> is less than or equal to </span><code class="inlineCode"><span class="koboSpan" id="kobo.456.1">integer2</span></code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.457.1">integer1 -ge integer2</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.458.1">True if </span><code class="inlineCode"><span class="koboSpan" id="kobo.459.1">integer1</span></code><span class="koboSpan" id="kobo.460.1"> is greater than or equal to </span><code class="inlineCode"><span class="koboSpan" id="kobo.461.1">integer2</span></code></p>
          </td>
        </tr>
        <tr>
          <td class="table-cell">
            <p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.462.1">-o optionname</span></code></p>
          </td>
          <td class="table-cell">
            <p class="normal"><span class="koboSpan" id="kobo.463.1">True if a shell option is enabled</span></p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="normal"><span class="koboSpan" id="kobo.464.1">I know, that’s a lot of </span><a id="_idIndexMarker426"/><span class="koboSpan" id="kobo.465.1">stuff, isn’t it? </span><span class="koboSpan" id="kobo.465.2">But, that’s okay. </span><span class="koboSpan" id="kobo.465.3">If you don’t want to memorize all of this, just keep this chart handy for ready reference.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.466.1">Next up, let’s talk about subshells.</span></p>
    <h1 id="_idParaDest-142" class="heading 1"><span class="koboSpan" id="kobo.467.1">Understanding Subshells</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.468.1">When you perform a</span><a id="_idIndexMarker427"/><span class="koboSpan" id="kobo.469.1"> test using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.470.1">[ $var -ne 0 ]</span></code><span class="koboSpan" id="kobo.471.1"> construct, the test will invoke a </span><strong class="keyWord"><span class="koboSpan" id="kobo.472.1">subshell</span></strong><span class="koboSpan" id="kobo.473.1">. </span><span class="koboSpan" id="kobo.473.2">To prevent a test from invoking a subshell, use this construct, instead:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.474.1">[[ $var -ne 0 ]]
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.475.1">This can make your script run somewhat more efficiently, which might or might not be a huge deal for your particular script.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.476.1">This </span><code class="inlineCode"><span class="koboSpan" id="kobo.477.1">[[. </span><span class="koboSpan" id="kobo.477.2">. </span><span class="koboSpan" id="kobo.477.3">.]]</span></code><span class="koboSpan" id="kobo.478.1"> type of construct is also necessary when you perform tests that require matching a pattern to a regular expression. </span><span class="koboSpan" id="kobo.478.2">(Matching regular expressions won’t work within a </span><code class="inlineCode"><span class="koboSpan" id="kobo.479.1">[. </span><span class="koboSpan" id="kobo.479.2">. </span><span class="koboSpan" id="kobo.479.3">.]</span></code><span class="koboSpan" id="kobo.480.1"> construct.)</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.481.1">The downside of this </span><code class="inlineCode"><span class="koboSpan" id="kobo.482.1">[[. </span><span class="koboSpan" id="kobo.482.2">. </span><span class="koboSpan" id="kobo.482.3">.]]</span></code><span class="koboSpan" id="kobo.483.1"> construct is that you can’t use it on certain non-</span><code class="inlineCode"><span class="koboSpan" id="kobo.484.1">bash</span></code><span class="koboSpan" id="kobo.485.1"> shells, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.486.1">dash</span></code><span class="koboSpan" id="kobo.487.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.488.1">ash</span></code><span class="koboSpan" id="kobo.489.1">, or </span><code class="inlineCode"><span class="koboSpan" id="kobo.490.1">Bourne</span></code><span class="koboSpan" id="kobo.491.1">. </span><span class="koboSpan" id="kobo.491.2">(You’ll see that in </span><em class="chapterRef"><span class="koboSpan" id="kobo.492.1">Chapter 19, Shell Script Portability</span></em><span class="koboSpan" id="kobo.493.1">.)</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.494.1">Of course, you don’t know what regular expressions are just yet, and that’s okay. </span><span class="koboSpan" id="kobo.494.2">I’ll show you all about them in </span><em class="chapterRef"><span class="koboSpan" id="kobo.495.1">Chapter 9, Filtering Text with grep, sed, and Regular Expressions</span></em><span class="koboSpan" id="kobo.496.1">.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.497.1">At any rate, you can always try your scripts with subshells and without subshells, to see which works better for you.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.498.1">We’ve now looked at all three methods to perform testing. </span><span class="koboSpan" id="kobo.498.2">So, how about a bit of practice with a hands-on lab?</span></p>
    <h1 id="_idParaDest-143" class="heading 1"><span class="koboSpan" id="kobo.499.1">Hands-on Lab – Testing Conditions</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.500.1">For this step, download the </span><code class="inlineCode"><span class="koboSpan" id="kobo.501.1">tests-test.sh </span></code><span class="koboSpan" id="kobo.502.1">script from the Github repository. </span><span class="koboSpan" id="kobo.502.2">(It’s a rather long script that I can’t reproduce here, due to book formatting considerations.) Open the script in your</span><a id="_idIndexMarker428"/><span class="koboSpan" id="kobo.503.1"> text editor, and examine how it’s constructed. </span><span class="koboSpan" id="kobo.503.2">The first thing you’ll see is that it’s checking for the existence of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.504.1">myfile.txt</span></code><span class="koboSpan" id="kobo.505.1"> file, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.506.1">#!/bin/bash
[ -f myfile.txt ] &amp;&amp; echo "This file exists." </span><span class="koboSpan" id="kobo.506.2">|| echo "This file does not exist."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.507.1">After that, you’ll see the command to create the file if it doesn’t exist, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.508.1">echo "We will now create myfile.txt if it does not exist, and make it with only read permissions for $USER."
</span><span class="koboSpan" id="kobo.508.2">[ -f myfile.txt ] || touch myfile.txt
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.509.1">Next, you’ll see the command to set </span><code class="inlineCode"><span class="koboSpan" id="kobo.510.1">400</span></code><span class="koboSpan" id="kobo.511.1"> as the permissions setting, which means that the user has permission to read the file, and that nobody has permission to write to it. </span><span class="koboSpan" id="kobo.511.2">Then, we want to verify that all write permissions have been removed. </span><span class="koboSpan" id="kobo.511.3">Here’s how that looks:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.512.1">chmod 400 myfile.txt
ls -l myfile.txt
echo
echo "We will now see if myfile.txt is writable."
</span><span class="koboSpan" id="kobo.512.2">[ -w myfile.txt ] &amp;&amp; echo "This file is writable." </span><span class="koboSpan" id="kobo.512.3">|| echo "This file is not writable."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.513.1">After several more permissions settings manipulations and tests for them, you’ll see this stanza that tests for the existence of a directory, and creates it if it doesn’t exist:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.514.1">[ -d somedir ] || echo "somedir does not exist."
</span><span class="koboSpan" id="kobo.514.2">[ -d somedir ] || mkdir somedir &amp;&amp; echo "somedir has just been created."
</span><span class="koboSpan" id="kobo.514.3">ls -ld somedir
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.515.1">The final thing you’ll see is the stanza that tests for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.516.1">noclobber</span></code><span class="koboSpan" id="kobo.517.1"> option, sets it, and then tests for it again.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.518.1">After you’ve finished reviewing the script, run it to see what happens.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.519.1">For bonus points, retype</span><a id="_idIndexMarker429"/><span class="koboSpan" id="kobo.520.1"> the script into your own script file. </span><span class="koboSpan" id="kobo.520.2">Why? </span><span class="koboSpan" id="kobo.520.3">Well, a dirty little secret is that if you type code in yourself, it will help you better understand the concepts.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.521.1">For the next step, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.522.1">tests-test_2.sh</span></code><span class="koboSpan" id="kobo.523.1"> script with the following contents:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.524.1">#!/bin/bash
echo "We will now compare text strings."
</span><span class="koboSpan" id="kobo.524.2">string1="abcd"
string2="efgh"
[[ $string1 &gt; $string2 ]] &amp;&amp; echo "string1 comes after string2 alphabetically." </span><span class="koboSpan" id="kobo.524.3">|| echo "string1 comes before string2 alphabetically."
</span><span class="koboSpan" id="kobo.524.4">echo
echo "We will now compare numbers."
</span><span class="koboSpan" id="kobo.524.5">num1=10
num2=9
[[ $num1 -gt $num2 ]] &amp;&amp; echo "num1 is greater than num2." </span><span class="koboSpan" id="kobo.524.6">|| echo "num1 is less than num2."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.525.1">Make the script file executable and then run it to view the results. </span><span class="koboSpan" id="kobo.525.2">Change the values of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.526.1">string1</span></code><span class="koboSpan" id="kobo.527.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.528.1">string2</span></code><span class="koboSpan" id="kobo.529.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.530.1">num1</span></code><span class="koboSpan" id="kobo.531.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.532.1">num2</span></code><span class="koboSpan" id="kobo.533.1"> variables and then run the script again and view the results.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.534.1">End of lab.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.535.1">Next, let’s take a closer look at variables.</span></p>
    <h1 id="_idParaDest-144" class="heading 1"><span class="koboSpan" id="kobo.536.1">Understanding Scripting Variables</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.537.1">I’ve already told you a bit</span><a id="_idIndexMarker430"/><span class="koboSpan" id="kobo.538.1"> about scripting variables, and you’ve already seen them in use. </span><span class="koboSpan" id="kobo.538.2">But, there’s a bit more to the story.</span></p>
    <h2 id="_idParaDest-145" class="heading 2"><span class="koboSpan" id="kobo.539.1">Creating and Deleting Variables</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.540.1">As you’ve already seen, it’s </span><a id="_idIndexMarker431"/><span class="koboSpan" id="kobo.541.1">sometimes either necessary or more </span><a id="_idIndexMarker432"/><span class="koboSpan" id="kobo.542.1">convenient to define variables in your scripts. </span><span class="koboSpan" id="kobo.542.2">You can also define, view, and unset variables from the command-line. </span><span class="koboSpan" id="kobo.542.3">Here’s an example:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.543.1">[donnie@fedora ~]$ car=Ford
[donnie@fedora ~]$ echo $car
Ford
[donnie@fedora ~]$ unset car
[donnie@fedora ~]$ echo $car
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.544.1">Here, I’ve defined the variable </span><code class="inlineCode"><span class="koboSpan" id="kobo.545.1">car</span></code><span class="koboSpan" id="kobo.546.1">, and set its value to </span><code class="inlineCode"><span class="koboSpan" id="kobo.547.1">Ford</span></code><span class="koboSpan" id="kobo.548.1">. </span><span class="koboSpan" id="kobo.548.2">The first </span><code class="inlineCode"><span class="koboSpan" id="kobo.549.1">echo</span></code><span class="koboSpan" id="kobo.550.1"> command shows the assigned value. </span><span class="koboSpan" id="kobo.550.2">The second </span><code class="inlineCode"><span class="koboSpan" id="kobo.551.1">echo</span></code><span class="koboSpan" id="kobo.552.1"> command verifies that I’ve successfully cleared the variable with </span><code class="inlineCode"><span class="koboSpan" id="kobo.553.1">unset</span></code><span class="koboSpan" id="kobo.554.1">.</span></p>
    <h2 id="_idParaDest-146" class="heading 2"><span class="koboSpan" id="kobo.555.1">Understanding Variables and Shell Levels</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.556.1">When you place a shebang line, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.557.1">#!/bin/bash</span></code><span class="koboSpan" id="kobo.558.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.559.1">#!/bin/sh</span></code><span class="koboSpan" id="kobo.560.1">, at the start of your script, a new non-interactive child shell will be invoked every time you run the script. </span><span class="koboSpan" id="kobo.560.2">When the script </span><a id="_idIndexMarker433"/><span class="koboSpan" id="kobo.561.1">finishes, the child shell terminates. </span><span class="koboSpan" id="kobo.561.2">The child shell inherits any variables that are exported from the parent shell. </span><span class="koboSpan" id="kobo.561.3">But, the parent shell won’t inherit any variables from the child shell. </span><span class="koboSpan" id="kobo.561.4">To demonstrate, let’s set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.562.1">car</span></code><span class="koboSpan" id="kobo.563.1"> variable to </span><code class="inlineCode"><span class="koboSpan" id="kobo.564.1">Volkswagen</span></code><span class="koboSpan" id="kobo.565.1"> in the parent shell, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.566.1">[donnie@fedora ~]$ export car="Volkswagen"
[donnie@fedora ~]$ echo $car
Volkswagen
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.567.1">Next, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.568.1">car_demo.sh</span></code><span class="koboSpan" id="kobo.569.1"> script, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.570.1">#!/bin/bash
echo \$car is set to $car
export car=Toyota
echo "The $car is very fast."
</span><span class="koboSpan" id="kobo.570.2">echo \$car is set to $car
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.571.1">Make the file executable and then run the script. </span><span class="koboSpan" id="kobo.571.2">The output should look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.572.1">[donnie@fedora ~]$ ./car_demo.sh
$car is set to Volkswagen
The Toyota is very fast.
</span><span class="koboSpan" id="kobo.572.2">$car is set to Toyota
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.573.1">Note how the </span><code class="inlineCode"><span class="koboSpan" id="kobo.574.1">Volkswagen</span></code><span class="koboSpan" id="kobo.575.1"> value of car was inherited from the parent shell. </span><span class="koboSpan" id="kobo.575.2">That’s because I used the </span><code class="inlineCode"><span class="koboSpan" id="kobo.576.1">export</span></code><span class="koboSpan" id="kobo.577.1"> command to make sure that this value would be available to the child shell that the </span><a id="_idIndexMarker434"/><span class="koboSpan" id="kobo.578.1">script invokes. </span><span class="koboSpan" id="kobo.578.2">Let’s try this again, except this time, I won’t export the variable:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.579.1">[donnie@fedora ~]$ unset car
[donnie@fedora ~]$ car=Studebaker
[donnie@fedora ~]$ ./car_demo.sh
$car is set to
The Toyota is very fast.
</span><span class="koboSpan" id="kobo.579.2">$car is set to Toyota
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.580.1">To make this work, I first had to unset the </span><code class="inlineCode"><span class="koboSpan" id="kobo.581.1">car</span></code><span class="koboSpan" id="kobo.582.1"> variable. </span><span class="koboSpan" id="kobo.582.2">In addition to clearing out the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.583.1">car</span></code><span class="koboSpan" id="kobo.584.1">, it also cleared out the export. </span><span class="koboSpan" id="kobo.584.2">When I ran the script this time, it couldn’t find the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.585.1">car</span></code><span class="koboSpan" id="kobo.586.1"> that I set in the parent shell.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.587.1">So, why is this important? </span><span class="koboSpan" id="kobo.587.2">It’s just that you may, at times, find yourself writing scripts that will call another script, which will effectively open another child shell. </span><span class="koboSpan" id="kobo.587.3">If you want variables to be available to a child shell, you have to export them.</span></p>
    <h2 id="_idParaDest-147" class="heading 2"><span class="koboSpan" id="kobo.588.1">Understanding Case Sensitivity</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.589.1">Variable names are case sensitive. </span><span class="koboSpan" id="kobo.589.2">So, a </span><a id="_idIndexMarker435"/><span class="koboSpan" id="kobo.590.1">variable named </span><code class="inlineCode"><span class="koboSpan" id="kobo.591.1">car</span></code><span class="koboSpan" id="kobo.592.1"> is completely different from variables named </span><code class="inlineCode"><span class="koboSpan" id="kobo.593.1">Car</span></code><span class="koboSpan" id="kobo.594.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.595.1">CAR</span></code><span class="koboSpan" id="kobo.596.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.597.1">Environmental variables have names with all upper-case letters, and it’s best practice for programming variable names to be in either all lower-case letters or mixed-case letters. </span><span class="koboSpan" id="kobo.597.2">Amazingly, Linux and Unix shells don’t enforce that rule for programming variables. </span><span class="koboSpan" id="kobo.597.3">But, it is best practice, because it helps prevent you from accidentally overwriting the value</span><a id="_idIndexMarker436"/><span class="koboSpan" id="kobo.598.1"> of an important environmental variable.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.599.1">Sad to say, there are shell scripting tutorials on the web in which the authors have you create programming variable names with all upper-case letters. </span><span class="koboSpan" id="kobo.599.2">In fact, I just came across one such tutorial. </span><span class="koboSpan" id="kobo.599.3">For the most part, the author has you create variables with names that don’t conflict with any environmental variables. </span><span class="koboSpan" id="kobo.599.4">In one spot though, the author has you create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.600.1">USER</span></code><span class="koboSpan" id="kobo.601.1"> variable and assign a value to it. </span><span class="koboSpan" id="kobo.601.2">Of course, </span><code class="inlineCode"><span class="koboSpan" id="kobo.602.1">USER</span></code><span class="koboSpan" id="kobo.603.1"> is already the name of an environmental variable, so assigning a new value to it will overwrite what its value should be. </span><span class="koboSpan" id="kobo.603.2">The lesson here is that there are a lot of good tutorials on the web, but there are also a lot that give out wrong information.</span></p>
    </div>
    <h2 id="_idParaDest-148" class="heading 2"><span class="koboSpan" id="kobo.604.1">Understanding Read-Only Variables</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.605.1">You’ve just seen that when </span><a id="_idIndexMarker437"/><span class="koboSpan" id="kobo.606.1">you declare a variable in the normal way, you can either unset it or give it a new value. </span><span class="koboSpan" id="kobo.606.2">You can also make a variable read-only, which prevents the variable from being either redefined or unset. </span><span class="koboSpan" id="kobo.606.3">Here’s how that works:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.607.1">[donnie@fedora ~]$ car=Nash
[donnie@fedora ~]$ echo $car
Nash
[donnie@fedora ~]$ readonly car
[donnie@fedora ~]$ unset car
bash: unset: car: cannot unset: readonly variable
[donnie@fedora ~]$ car=Hudson
bash: car: readonly variable
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.608.1">With the read-only property set, the only way that I can either change or get rid of </span><code class="inlineCode"><span class="koboSpan" id="kobo.609.1">car</span></code><span class="koboSpan" id="kobo.610.1"> is to close the terminal window.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.611.1">Well, this is the only way that you can get rid of a read-only variable if you don’t have root user privileges. </span><span class="koboSpan" id="kobo.611.2">If you do have root user privileges, you can use the </span><strong class="keyWord"><span class="koboSpan" id="kobo.612.1">GNU bash Debugger</span></strong><span class="koboSpan" id="kobo.613.1"> (</span><code class="inlineCode"><span class="koboSpan" id="kobo.614.1">gbd</span></code><span class="koboSpan" id="kobo.615.1">) to get rid </span><a id="_idIndexMarker438"/><span class="koboSpan" id="kobo.616.1">of it. </span><span class="koboSpan" id="kobo.616.2">But, that’s beyond the scope of this chapter. </span><span class="koboSpan" id="kobo.616.3">(We’ll look at </span><code class="inlineCode"><span class="koboSpan" id="kobo.617.1">gbd</span></code><span class="koboSpan" id="kobo.618.1"> in </span><em class="chapterRef"><span class="koboSpan" id="kobo.619.1">Chapter 21, Debugging Shell Scripts</span></em><span class="koboSpan" id="kobo.620.1">.)</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.621.1">Okay, this is all great if all you need is to define some individual variables. </span><span class="koboSpan" id="kobo.621.2">But, what if you need a</span><a id="_idIndexMarker439"/><span class="koboSpan" id="kobo.622.1"> whole list of variables? </span><span class="koboSpan" id="kobo.622.2">Well, this is where arrays come in handy. </span><span class="koboSpan" id="kobo.622.3">Let’s look at that next.</span></p>
    <h1 id="_idParaDest-149" class="heading 1"><span class="koboSpan" id="kobo.623.1">Understanding Array Variables</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.624.1">An array allows you to collect a</span><a id="_idIndexMarker440"/><span class="koboSpan" id="kobo.625.1"> list into one variable. </span><span class="koboSpan" id="kobo.625.2">The easy way to create an array variable is to assign a value to one of its indices, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.626.1">name[index]=value
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.627.1">Here, </span><code class="inlineCode"><span class="koboSpan" id="kobo.628.1">name</span></code><span class="koboSpan" id="kobo.629.1"> is the name of the array, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.630.1">index</span></code><span class="koboSpan" id="kobo.631.1"> is the position of the item in the array. </span><span class="koboSpan" id="kobo.631.2">(Note that index must be a number.) </span><code class="inlineCode"><span class="koboSpan" id="kobo.632.1">value</span></code><span class="koboSpan" id="kobo.633.1"> is the value that’s set for that individual item in the array.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.634.1">The numbering system for arrays begins with 0. </span><span class="koboSpan" id="kobo.634.2">So, </span><code class="inlineCode"><span class="koboSpan" id="kobo.635.1">name[0] </span></code><span class="koboSpan" id="kobo.636.1">would be the first item in the array. </span><span class="koboSpan" id="kobo.636.2">To create an indexed array, use </span><code class="inlineCode"><span class="koboSpan" id="kobo.637.1">declare</span></code><span class="koboSpan" id="kobo.638.1"> with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.639.1">-a </span></code><span class="koboSpan" id="kobo.640.1">option, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.641.1">[donnie@fedora ~]$ declare -a myarray
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.642.1">Next, let’s create the list that will be inserted into the array, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.643.1">[donnie@fedora ~]$ myarray=(item1 item2 item3 )
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.644.1">You can view the value of any individual item in the array, but there’s a special way to do it. </span><span class="koboSpan" id="kobo.644.2">Here’s what it looks like:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.645.1">[donnie@fedora ~]$ echo ${myarray[0]}
item1
[donnie@fedora ~]$ echo ${myarray[1]}
item2
[donnie@fedora ~]$ echo ${myarray[2]}
item3
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.646.1">Note how I had to surround the </span><code class="inlineCode"><span class="koboSpan" id="kobo.647.1">myarray[x] </span></code><span class="koboSpan" id="kobo.648.1">construct with a pair of curly braces.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.649.1">To view the whole list of array items, use either a </span><code class="inlineCode"><span class="koboSpan" id="kobo.650.1">*</span></code><span class="koboSpan" id="kobo.651.1"> or an </span><code class="inlineCode"><span class="koboSpan" id="kobo.652.1">@</span></code><span class="koboSpan" id="kobo.653.1"> in place of the index number, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.654.1">[donnie@fedora ~]$ echo ${myarray[*]}
item1 item2 item3
[donnie@fedora ~]$ echo ${myarray[@]}
item1 item2 item3
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.655.1">To just count the number of </span><a id="_idIndexMarker441"/><span class="koboSpan" id="kobo.656.1">array items, insert a </span><code class="inlineCode"><span class="koboSpan" id="kobo.657.1">#</span></code><span class="koboSpan" id="kobo.658.1"> in front of the array name, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.659.1">[donnie@fedora ~]$ echo ${#myarray[@]}
3
[donnie@fedora ~]$ echo ${#myarray[*]}
3
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.660.1">Okay, that covers the basics of arrays. </span><span class="koboSpan" id="kobo.660.2">Let’s do something a bit more practical with a hands-on lab.</span></p>
    <h2 id="_idParaDest-150" class="heading 2"><span class="koboSpan" id="kobo.661.1">Hands-on Lab – Using Arrays</span></h2>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.662.1">To see how</span><a id="_idIndexMarker442"/><span class="koboSpan" id="kobo.663.1"> arrays are built, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.664.1">ip.sh</span></code><span class="koboSpan" id="kobo.665.1"> script with the following contents:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.666.1">#!/bin/bash
echo "IP Addresses of intruder attempts"
declare -a ip
ip=( 192.168.3.78 192.168.3.4 192.168.3.9 )
echo "ip[0] is ${ip[0]}, the first item in the list."
</span><span class="koboSpan" id="kobo.666.2">echo "ip[2] is ${ip[2]}, the third item in the list."
</span><span class="koboSpan" id="kobo.666.3">echo "*****************************"
echo "The most dangerous intruder is ${ip[1]}, which is in ip[1]."
</span><span class="koboSpan" id="kobo.666.4">echo "*****************************"
echo "Here is the entire list of IP addresses in the array."
</span><span class="koboSpan" id="kobo.666.5">echo ${ip[*]}
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.667.1">Make the file executable and run it.
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.668.1">chmod u+x ip.sh
./ip.sh
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.669.1">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.670.1">/opt/scripts/</span></code><span class="koboSpan" id="kobo.671.1"> directory to store data files that your scripts will need to access, like</span><a id="_idIndexMarker443"/><span class="koboSpan" id="kobo.672.1"> this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.673.1">sudo mkdir /opt/scripts
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.674.1">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.675.1">/opt/scripts/</span></code><span class="koboSpan" id="kobo.676.1"> directory, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.677.1">banned.txt</span></code><span class="koboSpan" id="kobo.678.1"> file. </span><span class="koboSpan" id="kobo.678.2">(Note that in this directory, you’ll need to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.679.1">sudo</span></code><span class="koboSpan" id="kobo.680.1"> when opening your text editor.) Add to it the following contents:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.681.1">192.168.0.48
24.190.78.101
38.101.148.126
41.206.45.202
58.0.0.0/8
59.107.0.0/17
59.108.0.0/15
59.110.0.0/15
59.151.0.0/17
59.155.0.0/16
59.172.0.0/15
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.682.1">In your own home directory, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.683.1">attackers.sh</span></code><span class="koboSpan" id="kobo.684.1"> script, which will build an array of banned IP addresses from a list in a text file. </span><span class="koboSpan" id="kobo.684.2">Add the following contents:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.685.1">#!/bin/bash
badips=$(cat /opt/scripts/banned.txt)
declare -a attackers
attackers=( $badips )
echo "Here is the complete list: "
echo ${attackers[@]}
echo
echo "Let us now count the items in the list."
</span><span class="koboSpan" id="kobo.685.2">num_attackers=${#attackers[*]}
echo "There are $elements IP addresses in the list."
</span><span class="koboSpan" id="kobo.685.3">echo
echo "attackers[2] is ${attackers[2]}, which is the third address in the list."
</span><span class="koboSpan" id="kobo.685.4">exit
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.686.1">Set the executable permission and run the script, like so:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.687.1">chmod u+x attackers.sh
./attackers.sh
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.688.1">Modify the script so that the elements 0, 5, and 8 are printed to screen, and</span><a id="_idIndexMarker444"/><span class="koboSpan" id="kobo.689.1"> rerun the script. </span><span class="koboSpan" id="kobo.689.2">(You’ve already seen how to do it.)</span></li>
    </ol>
    <p class="normal"><span class="koboSpan" id="kobo.690.1">End of Lab</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.691.1">A few words of explanation about this </span><code class="inlineCode"><span class="koboSpan" id="kobo.692.1">attackers.sh</span></code><span class="koboSpan" id="kobo.693.1"> script are in order. </span><span class="koboSpan" id="kobo.693.2">First, in the second line, I’m using command substitution with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.694.1">cat</span></code><span class="koboSpan" id="kobo.695.1"> command to assign the contents of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.696.1">banned.txt</span></code><span class="koboSpan" id="kobo.697.1"> script to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.698.1">badips</span></code><span class="koboSpan" id="kobo.699.1"> variable. </span><span class="koboSpan" id="kobo.699.2">(I know, I keep showing you examples of command substitution, but I haven’t fully explained it yet. </span><span class="koboSpan" id="kobo.699.3">Don’t worry though, I’ll do that in a bit.) However, this still isn’t an array. </span><span class="koboSpan" id="kobo.699.4">I’ve created that separately in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.700.1">declare -a</span></code><span class="koboSpan" id="kobo.701.1"> line. </span><span class="koboSpan" id="kobo.701.2">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.702.1">attackers=</span></code><span class="koboSpan" id="kobo.703.1"> line, I called back the value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.704.1">badips</span></code><span class="koboSpan" id="kobo.705.1"> variable, which I then used to build the </span><code class="inlineCode"><span class="koboSpan" id="kobo.706.1">attackers</span></code><span class="koboSpan" id="kobo.707.1"> array. </span><span class="koboSpan" id="kobo.707.2">Alternatively, I could have skipped using the intermediate variable and built the array directly from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.708.1">cat</span></code><span class="koboSpan" id="kobo.709.1"> command substitution, as I did in this </span><code class="inlineCode"><span class="koboSpan" id="kobo.710.1">attackers_2.sh</span></code><span class="koboSpan" id="kobo.711.1"> script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.712.1">#!/bin/bash
declare -a badips
badips=( $(cat /opt/scripts/banned.txt) )
echo "Here is the complete list: "
echo ${badips[@]}
echo
echo "Let us now count the items in the list."
</span><span class="koboSpan" id="kobo.712.2">elements=${#badips[*]}
echo "There are $elements IP addresses in the list."
</span><span class="koboSpan" id="kobo.712.3">echo
echo "badips[2] is ${badips[2]}, which is the third address in the list."
</span><span class="koboSpan" id="kobo.712.4">exit
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.713.1">Either way works, but this way is a bit more streamlined.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.714.1">In a real-life scenario, you could add code that will automatically invoke a firewall rule that will block all of the addresses in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.715.1">banned.txt</span></code><span class="koboSpan" id="kobo.716.1"> file. </span><span class="koboSpan" id="kobo.716.2">But, that requires using techniques that I haven’t yet shown you. </span><span class="koboSpan" id="kobo.716.3">So, we’ll just have to get that later.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.717.1">Next, let’s expand </span><a id="_idIndexMarker445"/><span class="koboSpan" id="kobo.718.1">some variables.</span></p>
    <h1 id="_idParaDest-151" class="heading 1"><span class="koboSpan" id="kobo.719.1">Understanding Variable Expansion</span></h1>
    <p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.720.1">Variable expansion</span></strong><span class="koboSpan" id="kobo.721.1">, which is also called </span><strong class="keyWord"><span class="koboSpan" id="kobo.722.1">parameter expansion</span></strong><span class="koboSpan" id="kobo.723.1">, allows the shell to test or modify values</span><a id="_idIndexMarker446"/><span class="koboSpan" id="kobo.724.1"> of a variable to be used in a script, using special modifiers </span><a id="_idIndexMarker447"/><span class="koboSpan" id="kobo.725.1">enclosed in curly braces and preceded by a </span><code class="inlineCode"><span class="koboSpan" id="kobo.726.1">$</span></code><span class="koboSpan" id="kobo.727.1"> (</span><code class="inlineCode"><span class="koboSpan" id="kobo.728.1">${variable}</span></code><span class="koboSpan" id="kobo.729.1">). </span><span class="koboSpan" id="kobo.729.2">If this variable is not set in </span><code class="inlineCode"><span class="koboSpan" id="kobo.730.1">bash</span></code><span class="koboSpan" id="kobo.731.1"> it will be expanded to a null string. </span><span class="koboSpan" id="kobo.731.2">The best way to begin is to show you a few simple examples.</span></p>
    <h2 id="_idParaDest-152" class="heading 2"><span class="koboSpan" id="kobo.732.1">Substituting a Value for an Unset Variable</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.733.1">First, I’ll define</span><a id="_idIndexMarker448"/><span class="koboSpan" id="kobo.734.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.735.1">cat</span></code><span class="koboSpan" id="kobo.736.1"> variable with the name of my 16-year old gray kitty. </span><span class="koboSpan" id="kobo.736.2">Then, I’ll perform a test to see if </span><code class="inlineCode"><span class="koboSpan" id="kobo.737.1">cat</span></code><span class="koboSpan" id="kobo.738.1"> really has a set value, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.739.1">[donnie@fedora ~]$ cat=Vicky
[donnie@fedora ~]$ echo ${cat-"This cat variable is not set."}
Vicky
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.740.1">Next, I’ll unset the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.741.1">cat</span></code><span class="koboSpan" id="kobo.742.1">, and perform the test again. </span><span class="koboSpan" id="kobo.742.2">Watch what happens:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.743.1">[donnie@fedora ~]$ unset cat
[donnie@fedora ~]$ echo ${cat-"This cat variable is not set."}
This cat variable is not set.
</span><span class="koboSpan" id="kobo.743.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.744.1">So, what happened? </span><span class="koboSpan" id="kobo.744.2">Well, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.745.1">-</span></code><span class="koboSpan" id="kobo.746.1"> between </span><code class="inlineCode"><span class="koboSpan" id="kobo.747.1">cat</span></code><span class="koboSpan" id="kobo.748.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.749.1">"This cat variable is not set."</span></code><span class="koboSpan" id="kobo.750.1"> tests to see whether or not the </span><code class="inlineCode"><span class="koboSpan" id="kobo.751.1">cat</span></code><span class="koboSpan" id="kobo.752.1"> variable has an assigned value. </span><span class="koboSpan" id="kobo.752.2">If the variable has no assigned value, then the text string that comes after the </span><code class="inlineCode"><span class="koboSpan" id="kobo.753.1">-</span></code><span class="koboSpan" id="kobo.754.1"> is substituted for the </span><a id="_idIndexMarker449"/><span class="koboSpan" id="kobo.755.1">variable’s value. </span><span class="koboSpan" id="kobo.755.2">However, the substituted value is not actually </span><em class="italic"><span class="koboSpan" id="kobo.756.1">assigned</span></em><span class="koboSpan" id="kobo.757.1"> to the variable, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.758.1">[donnie@fedora ~]$ echo $cat
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.759.1">Now, assign a null value to </span><code class="inlineCode"><span class="koboSpan" id="kobo.760.1">cat</span></code><span class="koboSpan" id="kobo.761.1">, and try this again:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.762.1">donnie@fedora:~$ cat=
donnie@fedora:~$ echo ${cat-"This cat variable is not set."}
donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.763.1">This time, we just get a blank line as output, because the </span><code class="inlineCode"><span class="koboSpan" id="kobo.764.1">cat</span></code><span class="koboSpan" id="kobo.765.1"> variable is set. </span><span class="koboSpan" id="kobo.765.2">It’s just that it’s set to a null value. </span><span class="koboSpan" id="kobo.765.3">Let’s try this again, using </span><code class="inlineCode"><span class="koboSpan" id="kobo.766.1">:-</span></code><span class="koboSpan" id="kobo.767.1"> instead of </span><code class="inlineCode"><span class="koboSpan" id="kobo.768.1">-</span></code><span class="koboSpan" id="kobo.769.1"> , like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.770.1">donnie@fedora:~$ echo ${cat:-"This cat variable is not set."}
This cat variable is not set.
</span><span class="koboSpan" id="kobo.770.2">donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.771.1">This works because placing a </span><code class="inlineCode"><span class="koboSpan" id="kobo.772.1">:</span></code><span class="koboSpan" id="kobo.773.1"> in front of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.774.1">-</span></code><span class="koboSpan" id="kobo.775.1"> causes variables that have been set with a null value to be treated as unset variables.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.776.1">Okay, that does it for unset variables. </span><span class="koboSpan" id="kobo.776.2">Sometimes though, we might need to work with variables that do have set values, as you’ll see next.</span></p>
    <h2 id="_idParaDest-153" class="heading 2"><span class="koboSpan" id="kobo.777.1">Substituting a Value for a Set Variable</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.778.1">You can go the opposite way </span><a id="_idIndexMarker450"/><span class="koboSpan" id="kobo.779.1">by substituting a value for a variable that </span><em class="italic"><span class="koboSpan" id="kobo.780.1">does</span></em><span class="koboSpan" id="kobo.781.1"> have an assigned value, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.782.1">[donnie@fedora ~]$ car="1958 Edsel Corsair"
[donnie@fedora ~]$ echo ${car+"car is set and might or might not be null"}
car is set and might or might not be null
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.783.1">In this case, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.784.1">+</span></code><span class="koboSpan" id="kobo.785.1"> construct causes the following text string to be substituted for the variable’s assigned value. </span><span class="koboSpan" id="kobo.785.2">Note that since there are no special characters in this text string that need to be escaped, the quotes are optional. </span><span class="koboSpan" id="kobo.785.3">However, best practice dictates using quotes anyway, just to be safe. </span><span class="koboSpan" id="kobo.785.4">Also note that this substitution did not change the actual assigned value of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.786.1">car</span></code><span class="koboSpan" id="kobo.787.1"> variable, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.788.1">[donnie@fedora ~]$ echo $car
1958 Edsel Corsair
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.789.1">As you just saw with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.790.1">–</span></code><span class="koboSpan" id="kobo.791.1"> operator, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.792.1">+</span></code><span class="koboSpan" id="kobo.793.1"> operator treats variables with a null value as being set. </span><span class="koboSpan" id="kobo.793.2">If you want to treat variables with null values as unset, then use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.794.1">:+</span></code><span class="koboSpan" id="kobo.795.1"> operator. </span><span class="koboSpan" id="kobo.795.2">If you create a variable and leave it with a null value, it will look something like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.796.1">[donnie@fedora ~]$ computer=
[donnie@fedora ~]$ echo ${computer:+"computer is set and is not null"}
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.797.1">You see that with a null value, there’s no output from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.798.1">echo</span></code><span class="koboSpan" id="kobo.799.1"> command. </span><span class="koboSpan" id="kobo.799.2">Now, since I just happen to be using a Dell computer, let’s set the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.800.1">computer</span></code><span class="koboSpan" id="kobo.801.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.802.1">Dell</span></code><span class="koboSpan" id="kobo.803.1">, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.804.1">[donnie@fedora ~]$ computer=Dell
[donnie@fedora ~]$ echo ${computer:+"computer is set and might or might not be null"}
computer is set and might or might not be null
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.805.1">As I’ve already indicated, the operators that we’ve just looked at will substitute a value for a variable, depending upon whether the value has an assigned value. </span><span class="koboSpan" id="kobo.805.2">But, they won’t </span><a id="_idIndexMarker451"/><span class="koboSpan" id="kobo.806.1">actually change the value of the variable. </span><span class="koboSpan" id="kobo.806.2">But, we might at times need to change a variable’s value, as we’ll see next.</span></p>
    <h2 id="_idParaDest-154" class="heading 2"><span class="koboSpan" id="kobo.807.1">Assigning a Value to a Variable</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.808.1">This next trick </span><a id="_idIndexMarker452"/><span class="koboSpan" id="kobo.809.1">actually will assign a value to an unset variable, using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.810.1">=</span></code><span class="koboSpan" id="kobo.811.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.812.1">:=</span></code><span class="koboSpan" id="kobo.813.1"> operators. </span><span class="koboSpan" id="kobo.813.2">Let’s begin by assigning a value to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.814.1">town</span></code><span class="koboSpan" id="kobo.815.1"> variable:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.816.1">donnie@fedora:~$ unset town
donnie@fedora:~$ echo $town
donnie@fedora:~$ echo ${town="Saint Marys"}
Saint Marys
donnie@fedora:~$ echo $town
Saint Marys
donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.817.1">Now, let’s see if we can assign a different value to town:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.818.1">donnie@fedora:~$ echo ${town="Kingsland"}
Saint Marys
donnie@fedora:~$ echo $town
Saint Marys
donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.819.1">As you’ve seen before, using this operator without a preceding </span><code class="inlineCode"><span class="koboSpan" id="kobo.820.1">:</span></code><span class="koboSpan" id="kobo.821.1"> causes a variable with a null value to be treated as a set variable. </span><span class="koboSpan" id="kobo.821.2">Here’s how that looks:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.822.1">donnie@fedora:~$ unset town
donnie@fedora:~$ town=
donnie@fedora:~$ echo ${town="Saint Marys"}
donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.823.1">To show how using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.824.1">:=</span></code><span class="koboSpan" id="kobo.825.1"> operator works, let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.826.1">armadillo</span></code><span class="koboSpan" id="kobo.827.1"> variable with a null value, and then assign to it a default value, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.828.1">[donnie@fedora ~]$ armadillo=
[donnie@fedora ~]$ echo ${armadillo:=Artie}
Artie
[donnie@fedora ~]$ echo $armadillo
Artie
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.829.1">Artie is the tentative name that I’ve given to the armadillo who’s recently begun visiting my back yard at night. </span><span class="koboSpan" id="kobo.829.2">But, I don’t yet know if the armadillo is a boy or a girl, so I don’t yet know if Artie is an appropriate name. </span><span class="koboSpan" id="kobo.829.3">If I find out that it’s a girl, I might want to change</span><a id="_idIndexMarker453"/><span class="koboSpan" id="kobo.830.1"> the name to Annie. </span><span class="koboSpan" id="kobo.830.2">So, let’s try the preceding exercise again, but with </span><code class="inlineCode"><span class="koboSpan" id="kobo.831.1">armadillo</span></code><span class="koboSpan" id="kobo.832.1"> set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.833.1">Annie</span></code><span class="koboSpan" id="kobo.834.1">. </span><span class="koboSpan" id="kobo.834.2">Then, we’ll see if we can use our variable expansion to change it to </span><code class="inlineCode"><span class="koboSpan" id="kobo.835.1">Artie</span></code><span class="koboSpan" id="kobo.836.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.837.1">[donnie@fedora ~]$ armadillo=Annie
[donnie@fedora ~]$ echo ${armadillo:=Artie}
Annie
[donnie@fedora ~]$ echo $armadillo
Annie
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.838.1">You see that since the </span><code class="inlineCode"><span class="koboSpan" id="kobo.839.1">armadillo</span></code><span class="koboSpan" id="kobo.840.1"> variable already had the </span><code class="inlineCode"><span class="koboSpan" id="kobo.841.1">Annie</span></code><span class="koboSpan" id="kobo.842.1"> assigned as its value, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.843.1">echo ${armadillo:=Artie}</span></code><span class="koboSpan" id="kobo.844.1"> command had no effect, other than to show the value that I had already assigned.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.845.1">Now, what if you don’t want to substitute a variable’s value, but just want to see an error message? </span><span class="koboSpan" id="kobo.845.2">Let’s look at that.</span></p>
    <h2 id="_idParaDest-155" class="heading 2"><span class="koboSpan" id="kobo.846.1">Displaying an Error Message</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.847.1">You won’t always</span><a id="_idIndexMarker454"/><span class="koboSpan" id="kobo.848.1"> want to perform either a value substitution or a value assignment for an unset variable. </span><span class="koboSpan" id="kobo.848.2">Sometimes, you might just want to see an error (</span><code class="inlineCode"><span class="koboSpan" id="kobo.849.1">stderror</span></code><span class="koboSpan" id="kobo.850.1">) message if the variable is unset. </span><span class="koboSpan" id="kobo.850.2">Do that with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.851.1">:?</span></code><span class="koboSpan" id="kobo.852.1"> construct, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.853.1">[donnie@fedora ~]$ dog=
[donnie@fedora ~]$ echo ${dog:?The dog variable is unset or null.}
bash: dog: The dog variable is unset or null.
</span><span class="koboSpan" id="kobo.853.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.854.1">Let’s try that again with a dog named Rastus, which was the name of an English Shepard that my Grandma had when I was a kid. </span><span class="koboSpan" id="kobo.854.2">It will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.855.1">[donnie@fedora ~]$ dog=Rastus
[donnie@fedora ~]$ echo ${dog:?The dog variable is unset or null.}
Rastus
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.856.1">I know, you’re thinking that this looks just like the first example, where I substituted a message for the</span><a id="_idIndexMarker455"/><span class="koboSpan" id="kobo.857.1"> value of the unset </span><code class="inlineCode"><span class="koboSpan" id="kobo.858.1">cat</span></code><span class="koboSpan" id="kobo.859.1"> variable with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.860.1">-</span></code><span class="koboSpan" id="kobo.861.1">. </span><span class="koboSpan" id="kobo.861.2">Well, you’re kind of right. </span><span class="koboSpan" id="kobo.861.3">It’s just that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.862.1">-</span></code><span class="koboSpan" id="kobo.863.1"> substitutes a value that shows up as </span><code class="inlineCode"><span class="koboSpan" id="kobo.864.1">stdout</span></code><span class="koboSpan" id="kobo.865.1">, while the </span><code class="inlineCode"><span class="koboSpan" id="kobo.866.1">:?</span></code><span class="koboSpan" id="kobo.867.1"> substitutes a message that shows up as </span><code class="inlineCode"><span class="koboSpan" id="kobo.868.1">stderr</span></code><span class="koboSpan" id="kobo.869.1">. </span><span class="koboSpan" id="kobo.869.2">Another difference is that if you use </span><code class="inlineCode"><span class="koboSpan" id="kobo.870.1">:?</span></code><span class="koboSpan" id="kobo.871.1"> in a shell script with an unset variable, it will cause the script to exit.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.872.1">Try that by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.873.1">ex.sh</span></code><span class="koboSpan" id="kobo.874.1"> script with the following contents:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.875.1">#!/bin/bash
var=
: ${var:?var is unset, you big dummy}
echo "I wonder if this will work."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.876.1">So far, I’ve been showing you how to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.877.1">echo</span></code><span class="koboSpan" id="kobo.878.1"> to both perform the variable expansion and show the results. </span><span class="koboSpan" id="kobo.878.2">This particular construct allows you to just test the variable without echoing the results, by using a </span><code class="inlineCode"><span class="koboSpan" id="kobo.879.1">:</span></code><span class="koboSpan" id="kobo.880.1"> instead of </span><code class="inlineCode"><span class="koboSpan" id="kobo.881.1">echo</span></code><span class="koboSpan" id="kobo.882.1">. </span><span class="koboSpan" id="kobo.882.2">Now when I run this script, you’ll see that it exits before the final </span><code class="inlineCode"><span class="koboSpan" id="kobo.883.1">echo</span></code><span class="koboSpan" id="kobo.884.1"> command can execute, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.885.1">[donnie@fedora ~]$ ./ex.sh
./ex.sh: line 3: var: var is unset, you big dummy
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.886.1">Wait a minute! </span><span class="koboSpan" id="kobo.886.2">Did I just call myself a big dummy? </span><span class="koboSpan" id="kobo.886.3">Oh, well. </span><span class="koboSpan" id="kobo.886.4">Anyway, let’s change the script so that </span><code class="inlineCode"><span class="koboSpan" id="kobo.887.1">var</span></code><span class="koboSpan" id="kobo.888.1"> has an assigned value, as you see in this </span><code class="inlineCode"><span class="koboSpan" id="kobo.889.1">ex_2.sh</span></code><span class="koboSpan" id="kobo.890.1"> script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.891.1">#!/bin/bash
var=somevalue
: ${var:?"var is unset, you big dummy"}
echo "I wonder if this will work with a value of "$var"."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.892.1">The script now runs to completion, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.893.1">donnie@fedora:~$ ./ex_2.sh
I wonder if this will work with a value of somevalue.
</span><span class="koboSpan" id="kobo.893.2">donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.894.1">So to reiterate, using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.895.1">:</span></code><span class="koboSpan" id="kobo.896.1"> in place of</span><a id="_idIndexMarker456"/><span class="koboSpan" id="kobo.897.1"> the </span><code class="inlineCode"><span class="koboSpan" id="kobo.898.1">echo</span></code><span class="koboSpan" id="kobo.899.1"> prevents the </span><code class="inlineCode"><span class="koboSpan" id="kobo.900.1">${var:?"var is unset, you big dummy"}</span></code><span class="koboSpan" id="kobo.901.1"> construct from printing out the value of the variable. </span><span class="koboSpan" id="kobo.901.2">We can change that behavior by changing the </span><code class="inlineCode"><span class="koboSpan" id="kobo.902.1">:</span></code><span class="koboSpan" id="kobo.903.1"> back to an </span><code class="inlineCode"><span class="koboSpan" id="kobo.904.1">echo</span></code><span class="koboSpan" id="kobo.905.1">, as you see here in </span><code class="inlineCode"><span class="koboSpan" id="kobo.906.1">ex_3.sh</span></code><span class="koboSpan" id="kobo.907.1">:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.908.1">#!/bin/bash
var=somevalue
echo ${var:?"var is unset, you big dummy"}
echo "I wonder if this will work with a value of "$var"."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.909.1">Now, let’s see the results of that change:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.910.1">donnie@fedora:~$ ./ex_3.sh
somevalue
I wonder if this will work with a value of somevalue.
</span><span class="koboSpan" id="kobo.910.2">donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.911.1">This time, the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.912.1">var</span></code><span class="koboSpan" id="kobo.913.1"> does print out.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.914.1">As you’ve just seen with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.915.1">-</span></code><span class="koboSpan" id="kobo.916.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.917.1">+</span></code><span class="koboSpan" id="kobo.918.1"> operators, preceding the </span><code class="inlineCode"><span class="koboSpan" id="kobo.919.1">?</span></code><span class="koboSpan" id="kobo.920.1"> with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.921.1">:</span></code><span class="koboSpan" id="kobo.922.1"> causes the operator to treat a variable that was created with a null value as unset. </span><span class="koboSpan" id="kobo.922.2">Leaving out the </span><code class="inlineCode"><span class="koboSpan" id="kobo.923.1">:</span></code><span class="koboSpan" id="kobo.924.1"> causes the operator to treat variables that were created with a null value as set.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.925.1">Now, let’s change </span><a id="_idIndexMarker457"/><span class="koboSpan" id="kobo.926.1">gears by looking at variable offsets.</span></p>
    <h2 id="_idParaDest-156" class="heading 2"><span class="koboSpan" id="kobo.927.1">Using Variable Offsets</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.928.1">The last type of</span><a id="_idIndexMarker458"/><span class="koboSpan" id="kobo.929.1"> variable expansion that I’ll show you involves the substitution of just a subset of a text string. </span><span class="koboSpan" id="kobo.929.2">This involves using a </span><strong class="keyWord"><span class="koboSpan" id="kobo.930.1">variable offset</span></strong><span class="koboSpan" id="kobo.931.1">, and is a </span><a id="_idIndexMarker459"/><span class="koboSpan" id="kobo.932.1">bit more difficult to understand unless you can see an example.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.933.1">When you set a variable it will have a set size, or number of characters. </span><span class="koboSpan" id="kobo.933.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.934.1">${variable:offset}</span></code><span class="koboSpan" id="kobo.935.1"> construct uses the offset, or number of characters from the specified location. </span><span class="koboSpan" id="kobo.935.2">So, if the offset is </span><code class="inlineCode"><span class="koboSpan" id="kobo.936.1">4</span></code><span class="koboSpan" id="kobo.937.1"> it will omit the first four characters, and will only echo all of the characters after the fourth character. </span><span class="koboSpan" id="kobo.937.2">The addition of a length parameter with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.938.1">${variable:offset:length}</span></code><span class="koboSpan" id="kobo.939.1"> construct allows you to also determine how many characters that you want to use. </span><span class="koboSpan" id="kobo.939.2">To begin, let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.940.1">text </span></code><span class="koboSpan" id="kobo.941.1">variable with a value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.942.1">MailServer</span></code><span class="koboSpan" id="kobo.943.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.944.1">[donnie@fedora ~]$ text=MailServer
[donnie@fedora ~]$ echo $text
MailServer
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.945.1">Now, let’s say that we only want to see the text that comes after the fourth letter. </span><span class="koboSpan" id="kobo.945.2">Use an offset, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.946.1">[donnie@fedora ~]$ echo ${text:4}
Server
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.947.1">Cool, it works. </span><span class="koboSpan" id="kobo.947.2">Now, let’s say that we want to see just the first four letters. </span><span class="koboSpan" id="kobo.947.3">Use an offset and length, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.948.1">[donnie@fedora ~]$ echo ${text:0:4}
Mail
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.949.1">This means that we’re starting after position </span><code class="inlineCode"><span class="koboSpan" id="kobo.950.1">0</span></code><span class="koboSpan" id="kobo.951.1">, and are viewing only the first four letters.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.952.1">You can also extract text from somewhere in the middle of the text string, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.953.1">[donnie@fedora ~]$ echo ${text:4:5}
Serve
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.954.1">Here, I’m starting after the fourth character, and am extracting the next five characters.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.955.1">For something a bit</span><a id="_idIndexMarker460"/><span class="koboSpan" id="kobo.956.1"> more practical, let’s set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.957.1">location</span></code><span class="koboSpan" id="kobo.958.1"> variable with the name of a US city and state, along with its associated zip code. </span><span class="koboSpan" id="kobo.958.2">(That’s </span><em class="italic"><span class="koboSpan" id="kobo.959.1">postal code</span></em><span class="koboSpan" id="kobo.960.1"> for anyone who isn’t here in the US.) Then, let’s say that we want to extract the zip code portion of the text string, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.961.1">[donnie@fedora ~]$ location="Saint Marys GA 31558"
[donnie@fedora ~]$ echo "Zip Code: ${location:14}"
Zip Code:  31558
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.962.1">Instead of setting the offset by counting from the beginning of the text string, I could also have used a negative number to just extract the last part of the text string. </span><span class="koboSpan" id="kobo.962.2">Since the zip code is five digits long, I could use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.963.1">-5</span></code><span class="koboSpan" id="kobo.964.1">, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.965.1">[donnie@fedora ~]$ echo "Zip Code: ${location: -5}"
Zip Code: 31558
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.966.1">To ensure that this always works properly, be sure to always leave a blank space between the </span><code class="inlineCode"><span class="koboSpan" id="kobo.967.1">:</span></code><span class="koboSpan" id="kobo.968.1"> and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.969.1">-</span></code><span class="koboSpan" id="kobo.970.1">. </span><span class="koboSpan" id="kobo.970.2">Also, since city names will always vary in length, this would be a better option if you need to extract zip codes from a whole list of locations.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.971.1">That’s it for offsets. </span><span class="koboSpan" id="kobo.971.2">So</span><a id="_idIndexMarker461"/><span class="koboSpan" id="kobo.972.1"> now, let’s match some patterns.</span></p>
    <h2 id="_idParaDest-157" class="heading 2"><span class="koboSpan" id="kobo.973.1">Matching Patterns</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.974.1">The next variable </span><a id="_idIndexMarker462"/><span class="koboSpan" id="kobo.975.1">expansion trick involves matching patterns. </span><span class="koboSpan" id="kobo.975.2">Let’s start by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.976.1">pathname</span></code><span class="koboSpan" id="kobo.977.1"> variable, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.978.1">[donnie@fedora ~]$ pathname="/var/lib/yum"
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.979.1">Now, let’s say that I want to strip the lowest level directory from this path. </span><span class="koboSpan" id="kobo.979.2">I’ll do that with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.980.1">%</span></code><span class="koboSpan" id="kobo.981.1"> and an </span><code class="inlineCode"><span class="koboSpan" id="kobo.982.1">*</span></code><span class="koboSpan" id="kobo.983.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.984.1">[donnie@fedora ~]$ echo ${pathname%/yum*}
/var/lib
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.985.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.986.1">%</span></code><span class="koboSpan" id="kobo.987.1"> tells the shell to omit the final part of the string that matches the pattern. </span><span class="koboSpan" id="kobo.987.2">In this case, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.988.1">*</span></code><span class="koboSpan" id="kobo.989.1"> at the end isn’t necessary, because </span><code class="inlineCode"><span class="koboSpan" id="kobo.990.1">yum</span></code><span class="koboSpan" id="kobo.991.1"> just happens to be at the end of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.992.1">pathname</span></code><span class="koboSpan" id="kobo.993.1">. </span><span class="koboSpan" id="kobo.993.2">So, you’ll get the same result without it. </span><span class="koboSpan" id="kobo.993.3">But, if you want to omit the lowest two levels of </span><code class="inlineCode"><span class="koboSpan" id="kobo.994.1">pathname</span></code><span class="koboSpan" id="kobo.995.1">, you will need to use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.996.1">*</span></code><span class="koboSpan" id="kobo.997.1"> so that the pattern will match properly. </span><span class="koboSpan" id="kobo.997.2">Here’s what I’m talking about:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.998.1">[donnie@fedora ~]$ echo ${pathname%/lib}
/var/lib/yum
[donnie@fedora ~]$ echo ${pathname%/lib*}
/var
[donnie@fedora ~]$
</span></code></pre>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.999.1">You see that without the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1000.1">*</span></code><span class="koboSpan" id="kobo.1001.1">, the pattern matching didn’t work. </span><span class="koboSpan" id="kobo.1001.2">With the </span><em class="italic"><span class="koboSpan" id="kobo.1002.1">*</span></em><span class="koboSpan" id="kobo.1003.1">, the matching worked just fine. </span><span class="koboSpan" id="kobo.1003.2">So, even when the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1004.1">*</span></code><span class="koboSpan" id="kobo.1005.1"> isn’t absolutely necessary, it’s best to include it, just to be sure.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1006.1">On the other hand, you might at times just want to extract the names of the lower level directories. </span><span class="koboSpan" id="kobo.1006.2">To do that, just replace the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1007.1">%</span></code><span class="koboSpan" id="kobo.1008.1"> with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1009.1">#</span></code><span class="koboSpan" id="kobo.1010.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1011.1">[donnie@fedora ~]$ echo ${pathname#/var}
/lib/yum
[donnie@fedora ~]$ echo ${pathname#/var/lib}
/yum
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1012.1">Let’s wrap this </span><a id="_idIndexMarker463"/><span class="koboSpan" id="kobo.1013.1">section up with one final trick. </span><span class="koboSpan" id="kobo.1013.2">This time, I’ll match a pattern and then substitute something else. </span><span class="koboSpan" id="kobo.1013.3">First, I’ll create the string variable, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1014.1">[donnie@fedora ~]$ string="Hot and Spicy Food"
[donnie@fedora ~]$ echo $string
Hot and Spicy Food
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1015.1">That’s good, except that I’ve decided that I don’t want blank spaces between the words. </span><span class="koboSpan" id="kobo.1015.2">So, I’ll substitute an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1016.1">_</span></code><span class="koboSpan" id="kobo.1017.1"> character, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1018.1">[donnie@fedora ~]$ echo ${string/[[:space:]]/_}
Hot_and Spicy Food
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1019.1">That didn’t work out so well, because it only replaced the first blank space. </span><span class="koboSpan" id="kobo.1019.2">To perform a global replacement, I’ll need to add an extra forward slash after </span><code class="inlineCode"><span class="koboSpan" id="kobo.1020.1">string</span></code><span class="koboSpan" id="kobo.1021.1">, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1022.1">[donnie@fedora ~]$ echo ${string//[[:space:]]/_}
Hot_and_Spicy_Food
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1023.1">This looks much better. </span><span class="koboSpan" id="kobo.1023.2">But, what’s really going on here? </span><span class="koboSpan" id="kobo.1023.3">Well, we’re using a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1024.1">/pattern_to_be_replaced/</span></code><span class="koboSpan" id="kobo.1025.1"> construct to perform the substitution. </span><span class="koboSpan" id="kobo.1025.2">Whatever you place between the two forward slashes is what you want to replace. </span><span class="koboSpan" id="kobo.1025.3">You can specify an individual character, a character class, or some other pattern that you want to replace. </span><span class="koboSpan" id="kobo.1025.4">At the end, between the last forward slash and the closing curly brace, place the character that you want to substitute.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1026.1">There’s still a bit more to the variable expansion business, but I’ve shown you the most practical</span><a id="_idIndexMarker464"/><span class="koboSpan" id="kobo.1027.1"> examples. </span><span class="koboSpan" id="kobo.1027.2">If you want to see more, you’ll find a reference in the </span><em class="chapterRef"><span class="koboSpan" id="kobo.1028.1">Further Reading</span></em><span class="koboSpan" id="kobo.1029.1"> section.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1030.1">Okay, now that we’ve substituted some patterns, let’s move on to substituting commands.</span></p>
    <h1 id="_idParaDest-158" class="heading 1"><span class="koboSpan" id="kobo.1031.1">Understanding Command Substitution</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.1032.1">In the </span><em class="chapterRef"><span class="koboSpan" id="kobo.1033.1">Counting Logged-in Users</span></em><span class="koboSpan" id="kobo.1034.1"> and </span><em class="chapterRef"><span class="koboSpan" id="kobo.1035.1">Using Arrays</span></em><span class="koboSpan" id="kobo.1036.1"> Hands-on Labs, I’ve shown you some examples of </span><strong class="keyWord"><span class="koboSpan" id="kobo.1037.1">command substitution</span></strong><span class="koboSpan" id="kobo.1038.1"> in action, but I haven’t yet fully explained it. </span><span class="koboSpan" id="kobo.1038.2">It’s about time that I do.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1039.1">Command substitution is an extremely handy tool that you will use extensively. </span><span class="koboSpan" id="kobo.1039.2">I mean, really. </span><span class="koboSpan" id="kobo.1039.3">You</span><a id="_idIndexMarker465"/><span class="koboSpan" id="kobo.1040.1"> can do some very cool stuff with it. </span><span class="koboSpan" id="kobo.1040.2">It involves taking the output from a shell command and either using it in another command, or assigning it as the value of some variable. </span><span class="koboSpan" id="kobo.1040.3">You’ll place the command from which you’ll be taking output within a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1041.1">$( )</span></code><span class="koboSpan" id="kobo.1042.1"> construct. </span><span class="koboSpan" id="kobo.1042.2">Here’s a very simple example:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1043.1">[donnie@fedora ~]$ echo "This machine is running kernel version $(uname -r)."
</span><span class="koboSpan" id="kobo.1043.2">This machine is running kernel version 6.5.5-200.fc38.x86_64.
</span><span class="koboSpan" id="kobo.1043.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1044.1">You see how the output of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1045.1">uname -r</span></code><span class="koboSpan" id="kobo.1046.1"> command, which shows the version of the current running Linux kernel, is substituted for the command substitution construct.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1047.1">Now, let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1048.1">command_subsitution_1.sh</span></code><span class="koboSpan" id="kobo.1049.1"> script, and make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1050.1">#!/bin/bash
[[ ! </span><span class="koboSpan" id="kobo.1050.2">-d Daily_Reports ]] &amp;&amp; mkdir Daily_Reports
cd Daily_Reports
datestamp=$(date +%F)
echo "This is the report for $datestamp" &gt; daily_report_$datestamp.txt
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1051.1">Here’s the breakdown. </span><span class="koboSpan" id="kobo.1051.2">In the second line, I’m testing for the absence of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1052.1">Daily_Reports directory</span></code><span class="koboSpan" id="kobo.1053.1">. </span><span class="koboSpan" id="kobo.1053.2">If it’s not there, then I’ll create it. </span><span class="koboSpan" id="kobo.1053.3">In the fourth line, I’m using command substitution to create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1054.1">datestamp</span></code><span class="koboSpan" id="kobo.1055.1"> variable with the current date as its assigned value. </span><span class="koboSpan" id="kobo.1055.2">The current date is returned by the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1056.1">date +%F</span></code><span class="koboSpan" id="kobo.1057.1"> command, and will be in the year-month-day format (2023-10-03). </span><span class="koboSpan" id="kobo.1057.2">In the final line, I’m echoing a message</span><a id="_idIndexMarker466"/><span class="koboSpan" id="kobo.1058.1"> that contains today’s date into a file that contains today’s date in its filename. </span><span class="koboSpan" id="kobo.1058.2">Here’s what that looks like:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1059.1">[donnie@fedora ~]$ ls -l Daily_Reports/
total 4
-rw-r--r--. </span><span class="koboSpan" id="kobo.1059.2">1 donnie donnie 34 Oct  3 15:30 daily_report_2023-10-03.txt
[donnie@fedora ~]$ cat Daily_Reports/daily_report_2023-10-03.txt
This is the report for 2023-10-03
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1060.1">Is that slick, or is that slick? </span><span class="koboSpan" id="kobo.1060.2">Trust me, you’ll be doing this sort of thing a lot if you need to create scripts that will automatically generate reports.</span></p>
    <div class="packt_tip">
      <p class="normal"><span class="koboSpan" id="kobo.1061.1">Tip</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.1062.1">There are many different formatting options that you can use with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1063.1">date</span></code><span class="koboSpan" id="kobo.1064.1"> command. </span><span class="koboSpan" id="kobo.1064.2">To see them all, just view the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1065.1">date</span></code><span class="koboSpan" id="kobo.1066.1"> man page.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1067.1">But, we’re missing an important element here. </span><span class="koboSpan" id="kobo.1067.2">What if today’s report has already been created? </span><span class="koboSpan" id="kobo.1067.3">Do you want to overwrite it?</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1068.1">No, in this case, I don’t. </span><span class="koboSpan" id="kobo.1068.2">So, let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1069.1">command_substitution_2.sh</span></code><span class="koboSpan" id="kobo.1070.1"> script to test for the absence of today’s report before creating another one. </span><span class="koboSpan" id="kobo.1070.2">It involves adding just a teeny bit of extra code, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1071.1">#!/bin/bash
[[ ! </span><span class="koboSpan" id="kobo.1071.2">-d Daily_Reports ]] &amp;&amp; mkdir Daily_Reports
cd Daily_Reports
datestamp=$(date +%F)
[[ ! </span><span class="koboSpan" id="kobo.1071.3">-f daily_report_$datestamp.txt ]] &amp;&amp; echo "This is the report for $datestamp" &gt; daily_report_$datestamp.txt || echo "This report has already been done today."
</span></code></pre>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1072.1">That last command that looks like three lines is really just one line that wraps around on the printed page.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1073.1">Now, prepare to be </span><a id="_idIndexMarker467"/><span class="koboSpan" id="kobo.1074.1">amazed at what happens when I run this new, modified script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1075.1">[donnie@fedora ~]$ ./command_substitution_2.sh
This report has already been done today.
</span><span class="koboSpan" id="kobo.1075.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1076.1">Just for fun, let’s look at some other cool examples.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1077.1">Let’s create a script, which we’ll call </span><code class="inlineCode"><span class="koboSpan" id="kobo.1078.1">am_i_root_1.sh</span></code><span class="koboSpan" id="kobo.1079.1">, which will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1080.1">#!/bin/bash
test $(whoami) != root &amp;&amp; echo "You are not the root user."
</span><span class="koboSpan" id="kobo.1080.2">test $(whoami) == root &amp;&amp; echo "You are the root user."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1081.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1082.1">whoami</span></code><span class="koboSpan" id="kobo.1083.1"> command returns the name of the user who’s running the command. </span><span class="koboSpan" id="kobo.1083.2">Here’s what that looks like when I run it first without </span><code class="inlineCode"><span class="koboSpan" id="kobo.1084.1">sudo</span></code><span class="koboSpan" id="kobo.1085.1">, and then with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1086.1">sudo</span></code><span class="koboSpan" id="kobo.1087.1">:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1088.1">[donnie@fedora ~]$ whoami
donnie
[donnie@fedora ~]$ sudo whoami
root
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1089.1">As you see, running </span><code class="inlineCode"><span class="koboSpan" id="kobo.1090.1">whoami</span></code><span class="koboSpan" id="kobo.1091.1"> with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1092.1">sudo</span></code><span class="koboSpan" id="kobo.1093.1"> shows that I’m the root user. </span><span class="koboSpan" id="kobo.1093.2">The first command uses the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1094.1">!=</span></code><span class="koboSpan" id="kobo.1095.1"> operator to test if the user is </span><em class="italic"><span class="koboSpan" id="kobo.1096.1">not</span></em><span class="koboSpan" id="kobo.1097.1"> the root user. </span><span class="koboSpan" id="kobo.1097.2">The second command uses the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1098.1">==</span></code><span class="koboSpan" id="kobo.1099.1"> operator to test if the user </span><em class="italic"><span class="koboSpan" id="kobo.1100.1">is</span></em><span class="koboSpan" id="kobo.1101.1"> the root user. </span><span class="koboSpan" id="kobo.1101.2">Now, let’s run the script to see what happens:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1102.1">[donnie@fedora ~]$ ./am_i_root_1.sh
You are not the root user.
</span><span class="koboSpan" id="kobo.1102.2">[donnie@fedora ~]$ sudo ./am_i_root_1.sh
[sudo] password for donnie:
You are the root user.
</span><span class="koboSpan" id="kobo.1102.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1103.1">It works, which means that we have achieved coolness. </span><span class="koboSpan" id="kobo.1103.2">But, we can be even more cool by streamlining things a bit. </span><span class="koboSpan" id="kobo.1103.3">Modify the script so that it looks like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1104.1">#!/bin/bash
test $(whoami) != root &amp;&amp; echo "You are not the root user." </span><span class="koboSpan" id="kobo.1104.2">|| echo "You are the root user."
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1105.1">Instead of two commands in this script, I now have only one. </span><span class="koboSpan" id="kobo.1105.2">But either way, the output is identical.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1106.1">Instead of placing your </span><a id="_idIndexMarker468"/><span class="koboSpan" id="kobo.1107.1">command within a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1108.1">$( )</span></code><span class="koboSpan" id="kobo.1109.1"> construct, you can also surround it with a pair of backticks, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1110.1">[donnie@fedora ~]$ datestamp=`date +%F`
[donnie@fedora ~]$ echo $datestamp
2023-10-03
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1111.1">That works, but it’s a deprecated method that I don’t recommend. </span><span class="koboSpan" id="kobo.1111.2">The biggest problem with it is that if your command contains any special characters that the shell might interpret incorrectly, you’ll have to be sure to escape them with a backslash. </span><span class="koboSpan" id="kobo.1111.3">With the newer </span><code class="inlineCode"><span class="koboSpan" id="kobo.1112.1">$( )</span></code><span class="koboSpan" id="kobo.1113.1"> construct, you don’t have to worry so much about that. </span><span class="koboSpan" id="kobo.1113.2">I’m only mentioning this method because you might still see other people’s scripts that use it.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1114.1">That does it for the command substitution business. </span><span class="koboSpan" id="kobo.1114.2">Now, we need to make some decisions.</span></p>
    <h1 id="_idParaDest-159" class="heading 1"><span class="koboSpan" id="kobo.1115.1">Understanding Decisions and Loops</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.1116.1">So far, I’ve been showing you a lot of programming techniques and constructs that are specific to shell scripting. </span><span class="koboSpan" id="kobo.1116.2">In this section, I’ll show you some constructs that are common</span><a id="_idIndexMarker469"/><span class="koboSpan" id="kobo.1117.1"> to most all programming languages. </span><span class="koboSpan" id="kobo.1117.2">I’ll begin by showing you another way to make decisions.</span></p>
    <h2 id="_idParaDest-160" class="heading 2"><span class="koboSpan" id="kobo.1118.1">The if. </span><span class="koboSpan" id="kobo.1118.2">.then Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1119.1">Although the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1120.1">&amp;&amp;</span></code><span class="koboSpan" id="kobo.1121.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1122.1">||</span></code><span class="koboSpan" id="kobo.1123.1"> decision constructs work for simple scripts, you might want to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1124.1">if . </span><span class="koboSpan" id="kobo.1124.2">. </span><span class="koboSpan" id="kobo.1124.3">then</span></code><span class="koboSpan" id="kobo.1125.1"> constructs</span><a id="_idIndexMarker470"/><span class="koboSpan" id="kobo.1126.1"> for anything more complex, such as when you would need to test for</span><a id="_idIndexMarker471"/><span class="koboSpan" id="kobo.1127.1"> multiple conditions at once. </span><span class="koboSpan" id="kobo.1127.2">For the first example, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1128.1">am_i_root_2.sh</span></code><span class="koboSpan" id="kobo.1129.1"> script, which will look </span><a id="_idIndexMarker472"/><span class="koboSpan" id="kobo.1130.1">like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1131.1">#!/bin/bash
if [ $(id -u) == 0 ]; then
        echo "This user is root."
</span><span class="koboSpan" id="kobo.1131.2">fi
if [ $(id -u) != 0 ]; then
        echo "This user is not root."
        </span><span class="koboSpan" id="kobo.1131.3">echo "This user's name is $(id -un)."
</span><span class="koboSpan" id="kobo.1131.4">fi
</span></code></pre>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1132.1">Note that each decision stanza begins with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1133.1">if</span></code><span class="koboSpan" id="kobo.1134.1"> and ends with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1135.1">fi</span></code><span class="koboSpan" id="kobo.1136.1">. </span><span class="koboSpan" id="kobo.1136.2">(Yes, that’s </span><code class="inlineCode"><span class="koboSpan" id="kobo.1137.1">if</span></code><span class="koboSpan" id="kobo.1138.1"> spelled backwards.) Also note that with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1139.1">bash</span></code><span class="koboSpan" id="kobo.1140.1"> shell scripting, indentation isn’t required, as it is in certain other programming languages. </span><span class="koboSpan" id="kobo.1140.2">But, it does make the code much more readable.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1141.1">Instead of using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1142.1">whoami</span></code><span class="koboSpan" id="kobo.1143.1"> command this time, I’m using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1144.1">id</span></code><span class="koboSpan" id="kobo.1145.1"> command, which offers more options than </span><code class="inlineCode"><span class="koboSpan" id="kobo.1146.1">whoami</span></code><span class="koboSpan" id="kobo.1147.1">. </span><span class="koboSpan" id="kobo.1147.2">(See the man pages for both commands for details.) As far as the rest of it goes, rather than trying to explain it all in detail, I’ll just let you study this script to see how everything works. </span><span class="koboSpan" id="kobo.1147.3">That will be easier for me, and less boring for you. </span><span class="koboSpan" id="kobo.1147.4">And besides, I have faith in you.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1148.1">Now, let’s see what happens when I run this script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1149.1">[donnie@fedora ~]$ ./am_i_root_2.sh
This user is not root.
</span><span class="koboSpan" id="kobo.1149.2">This user's name is donnie.
</span><span class="koboSpan" id="kobo.1149.3">[donnie@fedora ~]$
[donnie@fedora ~]$ sudo ./am_i_root_2.sh
This user is root.
</span><span class="koboSpan" id="kobo.1149.4">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1150.1">When you’re testing for more than one condition for the same decision, it would be more proper to use one </span><code class="inlineCode"><span class="koboSpan" id="kobo.1151.1">if .. </span><span class="koboSpan" id="kobo.1151.2">then .. </span><span class="koboSpan" id="kobo.1151.3">elif</span></code><span class="koboSpan" id="kobo.1152.1"> construct, rather than two </span><code class="inlineCode"><span class="koboSpan" id="kobo.1153.1">if .. </span><span class="koboSpan" id="kobo.1153.2">then</span></code><span class="koboSpan" id="kobo.1154.1"> constructs. </span><span class="koboSpan" id="kobo.1154.2">This can</span><a id="_idIndexMarker473"/><span class="koboSpan" id="kobo.1155.1"> add a bit more clarity to your code, so that anyone who reads it can make a bit more sense of it. </span><span class="koboSpan" id="kobo.1155.2">Let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1156.1">am_i_root_3.sh</span></code><span class="koboSpan" id="kobo.1157.1"> script to showcase this technique. </span><span class="koboSpan" id="kobo.1157.2">Make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1158.1">#!/bin/bash
if [ $(id -u) == 0 ]; then
        echo "This user is root."
</span><span class="koboSpan" id="kobo.1158.2">elif [ $(id -u) != 0 ]; then
        echo "This user is not root."
        </span><span class="koboSpan" id="kobo.1158.3">echo "This user's name is $(id -un)."
</span><span class="koboSpan" id="kobo.1158.4">fi
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1159.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1160.1">elif</span></code><span class="koboSpan" id="kobo.1161.1"> keyword in this script is short for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1162.1">else if</span></code><span class="koboSpan" id="kobo.1163.1">. </span><span class="koboSpan" id="kobo.1163.2">Other than that, everything is pretty much the same as it was before in the previous script. </span><span class="koboSpan" id="kobo.1163.3">When you run it, you’ll get the same output as you got for the previous script. </span><span class="koboSpan" id="kobo.1163.4">Also, note that you can test for multiple conditions with more than one </span><code class="inlineCode"><span class="koboSpan" id="kobo.1164.1">elif</span></code><span class="koboSpan" id="kobo.1165.1"> stanza.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1166.1">Alternatively, you could also use an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1167.1">if .. </span><span class="koboSpan" id="kobo.1167.2">then .. </span><span class="koboSpan" id="kobo.1167.3">else</span></code><span class="koboSpan" id="kobo.1168.1"> construct. </span><span class="koboSpan" id="kobo.1168.2">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1169.1">am_i_root_4.sh </span></code><span class="koboSpan" id="kobo.1170.1">script, which will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1171.1">#!/bin/bash
if [ $(id -u) == 0 ]; then
        echo "This user is root."
</span><span class="koboSpan" id="kobo.1171.2">else
        echo "This user is not root."
        </span><span class="koboSpan" id="kobo.1171.3">echo "This user's name is $(id -un)."
</span><span class="koboSpan" id="kobo.1171.4">fi
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1172.1">Using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1173.1">else</span></code><span class="koboSpan" id="kobo.1174.1"> can be handy, because it defines a default action to take if the conditions in any of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1175.1">if</span></code><span class="koboSpan" id="kobo.1176.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1177.1">elif</span></code><span class="koboSpan" id="kobo.1178.1"> stanzas aren’t fulfilled. </span><span class="koboSpan" id="kobo.1178.2">For example, take a look at this script that detects which operating system your machine is running:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1179.1">#!/bin/bash
os=$(uname)
if [[ $os == Linux ]]; then
        echo "This machine is running Linux."
</span><span class="koboSpan" id="kobo.1179.2">elif [[ $os == Darwin ]]; then
        echo "This machine is running macOS."
</span><span class="koboSpan" id="kobo.1179.3">elif [[ $os == FreeBSD ]]; then
        echo "This machine is running FreeBSD."
</span><span class="koboSpan" id="kobo.1179.4">else
        echo "I don't know this $os operating system."
</span><span class="koboSpan" id="kobo.1179.5">fi
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1180.1">You see that this script can detect Linux, macOS, or FreeBSD. </span><span class="koboSpan" id="kobo.1180.2">If the machine isn’t running any of those</span><a id="_idIndexMarker474"/><span class="koboSpan" id="kobo.1181.1"> three operating systems, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1182.1">else</span></code><span class="koboSpan" id="kobo.1183.1"> statement at the end displays the default </span><a id="_idIndexMarker475"/><span class="koboSpan" id="kobo.1184.1">message. </span><span class="koboSpan" id="kobo.1184.2">Another thing to note is that you’ll need to place a semi-colon and a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1185.1">then</span></code><span class="koboSpan" id="kobo.1186.1"> keyword at the end of each </span><code class="inlineCode"><span class="koboSpan" id="kobo.1187.1">if</span></code><span class="koboSpan" id="kobo.1188.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1189.1">elif</span></code><span class="koboSpan" id="kobo.1190.1"> statement, but you don’t need to place them after an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1191.1">else</span></code><span class="koboSpan" id="kobo.1192.1"> statement.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1193.1">Here’s how that looks when I run the script on an OpenIndiana machine:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1194.1">donnie@openindiana:~$ ./os-test.sh
I don't know this SunOS operating system.
</span><span class="koboSpan" id="kobo.1194.2">donnie@openindiana:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1195.1">Of course, if I wanted to, I could insert another </span><code class="inlineCode"><span class="koboSpan" id="kobo.1196.1">elif</span></code><span class="koboSpan" id="kobo.1197.1"> stanza to test for SunOS.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1198.1">That about covers it for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1199.1">if. </span><span class="koboSpan" id="kobo.1199.2">.then</span></code><span class="koboSpan" id="kobo.1200.1">. </span><span class="koboSpan" id="kobo.1200.2">Let’s now do something while waiting for something else.</span></p>
    <h2 id="_idParaDest-161" class="heading 2"><span class="koboSpan" id="kobo.1201.1">The do. </span><span class="koboSpan" id="kobo.1201.2">. </span><span class="koboSpan" id="kobo.1201.3">while construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1202.1">This construct will </span><a id="_idIndexMarker476"/><span class="koboSpan" id="kobo.1203.1">continuously execute a set of commands while a </span><a id="_idIndexMarker477"/><span class="koboSpan" id="kobo.1204.1">certain condition is true. </span><span class="koboSpan" id="kobo.1204.2">Here’s an example:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1205.1">#!/bin/bash
x=10
while [[ $x -gt 0 ]]; do
        x=$(expr $x - 1)
        echo $x
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1206.1">This </span><code class="inlineCode"><span class="koboSpan" id="kobo.1207.1">while_demo.sh</span></code><span class="koboSpan" id="kobo.1208.1"> script starts by assigning a value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1209.1">10</span></code><span class="koboSpan" id="kobo.1210.1"> to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1211.1">x</span></code><span class="koboSpan" id="kobo.1212.1"> variable. </span><span class="koboSpan" id="kobo.1212.2">As long as the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1213.1">x</span></code><span class="koboSpan" id="kobo.1214.1"> remains </span><a id="_idIndexMarker478"/><span class="koboSpan" id="kobo.1215.1">greater than </span><code class="inlineCode"><span class="koboSpan" id="kobo.1216.1">0</span></code><span class="koboSpan" id="kobo.1217.1">, it will subtract </span><code class="inlineCode"><span class="koboSpan" id="kobo.1218.1">1</span></code><span class="koboSpan" id="kobo.1219.1"> from this value and assign the new </span><a id="_idIndexMarker479"/><span class="koboSpan" id="kobo.1220.1">value to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1221.1">x</span></code><span class="koboSpan" id="kobo.1222.1">, using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1223.1">expr $x-1</span></code><span class="koboSpan" id="kobo.1224.1"> command. </span><span class="koboSpan" id="kobo.1224.2">It then echos the new value. </span><span class="koboSpan" id="kobo.1224.3">The output looks like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1225.1">[donnie@fedora ~]$ ./while_demo.sh
9
8
7
6
5
4
3
2
1
0
[donnie@fedora ~]$
</span></code></pre>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1226.1">Note that in this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1227.1">while_demo.sh</span></code><span class="koboSpan" id="kobo.1228.1"> script, you can use a bit of shorthand for decrementing the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1229.1">x</span></code><span class="koboSpan" id="kobo.1230.1"> by 1 for each loop. </span><span class="koboSpan" id="kobo.1230.2">Just replace the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1231.1">x=$(expr $x - 1)</span></code><span class="koboSpan" id="kobo.1232.1"> line with:</span></p>
      <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1233.1">((x--))
</span></code></pre>
      <p class="normal"><span class="koboSpan" id="kobo.1234.1">This is the same type of construct that you might be used to seeing in C or C++ language programs. </span><span class="koboSpan" id="kobo.1234.2">However, this construct is not portable, which means that it works fine on </span><code class="inlineCode"><span class="koboSpan" id="kobo.1235.1">bash</span></code><span class="koboSpan" id="kobo.1236.1">, but not on other shells. </span><span class="koboSpan" id="kobo.1236.2">So, if you need to make your script so that it will run on Bourne shell, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1237.1">dash</span></code><span class="koboSpan" id="kobo.1238.1">, or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1239.1">ash</span></code><span class="koboSpan" id="kobo.1240.1">, you’ll need to avoid this construct and instead stick with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1241.1">x=$(expr $x - 1)</span></code><span class="koboSpan" id="kobo.1242.1"> construct.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1243.1">You could also use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1244.1">while</span></code><span class="koboSpan" id="kobo.1245.1"> loop to read a text file, line-by-line. </span><span class="koboSpan" id="kobo.1245.2">Here’s the very simple </span><code class="inlineCode"><span class="koboSpan" id="kobo.1246.1">read_file.sh</span></code><span class="koboSpan" id="kobo.1247.1"> script that reads the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1248.1">/etc/passwd</span></code><span class="koboSpan" id="kobo.1249.1"> file:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1250.1">#!/bin/bash
file=/etc/passwd
while read -r line; do
        echo $line
done &lt; "$file"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1251.1">As you see, I start by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1252.1">file</span></code><span class="koboSpan" id="kobo.1253.1"> variable with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1254.1">/etc/passwd</span></code><span class="koboSpan" id="kobo.1255.1"> as its assigned value. </span><span class="koboSpan" id="kobo.1255.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1256.1">while</span></code><span class="koboSpan" id="kobo.1257.1"> line defines the variable line, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1258.1">read -r</span></code><span class="koboSpan" id="kobo.1259.1"> command assigns values to the line variable. </span><span class="koboSpan" id="kobo.1259.2">On each pass of the while loop, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1260.1">read -r</span></code><span class="koboSpan" id="kobo.1261.1"> command reads one line of the file, assigns the contents of the line to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1262.1">line</span></code><span class="koboSpan" id="kobo.1263.1"> variable, and then echos the contents </span><a id="_idIndexMarker480"/><span class="koboSpan" id="kobo.1264.1">of the line to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1265.1">stdout</span></code><span class="koboSpan" id="kobo.1266.1">. </span><span class="koboSpan" id="kobo.1266.2">When all lines of the file have been read, the loop </span><a id="_idIndexMarker481"/><span class="koboSpan" id="kobo.1267.1">terminates. </span><span class="koboSpan" id="kobo.1267.2">At the end, you see that I’m using a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1268.1">stdin</span></code><span class="koboSpan" id="kobo.1269.1"> redirector to make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1270.1">while</span></code><span class="koboSpan" id="kobo.1271.1"> loop read the file. </span><span class="koboSpan" id="kobo.1271.2">Normally, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1272.1">read </span></code><span class="koboSpan" id="kobo.1273.1">breaks long lines into shorter lines and terminates each part of the long line with a backslash. </span><span class="koboSpan" id="kobo.1273.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1274.1">-r</span></code><span class="koboSpan" id="kobo.1275.1"> option disables that behavior.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1276.1">There may be times when you’ll want to create an infinite loop that never stops until you tell it to. </span><span class="koboSpan" id="kobo.1276.2">(There might also be times when you’ll create an infinite loop by accident, but that’s a whole different story. </span><span class="koboSpan" id="kobo.1276.3">For now, let’s assume that you want to do it on purpose.) To demonstrate, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1277.1">infinite_loop.sh</span></code><span class="koboSpan" id="kobo.1278.1"> script, and make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1279.1">#!/bin/bash
while :
do
        echo "This loop is infinite."
        </span><span class="koboSpan" id="kobo.1279.2">echo "It will keep going until you stop it."
        </span><span class="koboSpan" id="kobo.1279.3">echo "To stop it, hit Ctrl-c."
        </span><span class="koboSpan" id="kobo.1279.4">sleep 1
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1280.1">It’s a rather useless script, which does nothing but echo some messages. </span><span class="koboSpan" id="kobo.1280.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1281.1">sleep 1</span></code><span class="koboSpan" id="kobo.1282.1"> command causes a one-second delay between each iteration of the loop. </span><span class="koboSpan" id="kobo.1282.2">Here’s what happens when I run this script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1283.1">[donnie@fedora ~]$ ./infinite_loop.sh
This loop is infinite.
</span><span class="koboSpan" id="kobo.1283.2">It will keep going until you stop it.
</span><span class="koboSpan" id="kobo.1283.3">To stop it, hit Ctrl-c.
</span><span class="koboSpan" id="kobo.1283.4">This loop is infinite.
</span><span class="koboSpan" id="kobo.1283.5">It will keep going until you stop it.
</span><span class="koboSpan" id="kobo.1283.6">To stop it, hit Ctrl-c.
</span><span class="koboSpan" id="kobo.1283.7">^C
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1284.1">There are still a few </span><a id="_idIndexMarker482"/><span class="koboSpan" id="kobo.1285.1">other tricks that we can do with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1286.1">while..do</span></code><span class="koboSpan" id="kobo.1287.1">, but this will do it for now. </span><span class="koboSpan" id="kobo.1287.2">Let’s now look at </span><code class="inlineCode"><span class="koboSpan" id="kobo.1288.1">for..in</span></code><span class="koboSpan" id="kobo.1289.1">.</span></p>
    <h2 id="_idParaDest-162" class="heading 2"><span class="koboSpan" id="kobo.1290.1">The for..in Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1291.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1292.1">for . </span><span class="koboSpan" id="kobo.1292.2">. </span><span class="koboSpan" id="kobo.1292.3">in</span></code><span class="koboSpan" id="kobo.1293.1"> construct</span><a id="_idIndexMarker483"/><span class="koboSpan" id="kobo.1294.1"> will process a list, and perform a command for each</span><a id="_idIndexMarker484"/><span class="koboSpan" id="kobo.1295.1"> item in the list. </span><span class="koboSpan" id="kobo.1295.2">In this </span><code class="inlineCode"><span class="koboSpan" id="kobo.1296.1">car_demo_2.sh</span></code><span class="koboSpan" id="kobo.1297.1"> script, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1298.1">for</span></code><span class="koboSpan" id="kobo.1299.1"> line creates the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1300.1">cars</span></code><span class="koboSpan" id="kobo.1301.1"> variable. </span><span class="koboSpan" id="kobo.1301.2">Here’s what it looks like:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1302.1">#!/bin/bash
for cars in Edsel Ford Nash Studebaker Packard Hudson
do
        echo "$cars"
done
echo "That's all, folks!"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1303.1">Each time that the loop iterates, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1304.1">in</span></code><span class="koboSpan" id="kobo.1305.1"> keyword takes a name of a classic car from the list, and assigns it to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1306.1">cars</span></code><span class="koboSpan" id="kobo.1307.1"> as its value. </span><span class="koboSpan" id="kobo.1307.2">The loop ends when it reaches the end of the list. </span><span class="koboSpan" id="kobo.1307.3">Here’s what happens when I run the script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1308.1">[donnie@fedora ~]$ ./car_demo_2.sh
Edsel
Ford
Nash
Studebaker
Packard
Hudson
That's all, folks!
</span><span class="koboSpan" id="kobo.1308.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1309.1">That’s easy enough, so let’s try another one. </span><span class="koboSpan" id="kobo.1309.2">This time, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1310.1">list_demo.sh</span></code><span class="koboSpan" id="kobo.1311.1"> script, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1312.1">#!/bin/bash
for filename in *
do
        echo "$filename"
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1313.1">This loop just does an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1314.1">ls</span></code><span class="koboSpan" id="kobo.1315.1">-style listing of the files in your current directory. </span><span class="koboSpan" id="kobo.1315.2">I’m using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1316.1">*</span></code><span class="koboSpan" id="kobo.1317.1"> wildcard to tell </span><code class="inlineCode"><span class="koboSpan" id="kobo.1318.1">for</span></code><span class="koboSpan" id="kobo.1319.1"> to read in all of the</span><a id="_idIndexMarker485"/><span class="koboSpan" id="kobo.1320.1"> filenames, regardless of how many files there are. </span><span class="koboSpan" id="kobo.1320.2">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1321.1">echo</span></code><span class="koboSpan" id="kobo.1322.1"> line, I have to surround </span><code class="inlineCode"><span class="koboSpan" id="kobo.1323.1">$filename</span></code><span class="koboSpan" id="kobo.1324.1"> with a pair </span><a id="_idIndexMarker486"/><span class="koboSpan" id="kobo.1325.1">of double quotes in case any filenames contain blank spaces. </span><span class="koboSpan" id="kobo.1325.2">Here’s what happens when I run it:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1326.1">[donnie@fedora ~]$ ./list_demo.sh
15827_zip.zip
2023-08-01_15-23-31.mp4
2023-08-01_16-26-12.mp4
2023-08-02_13-57-37.mp4
. </span><span class="koboSpan" id="kobo.1326.2">. </span><span class="koboSpan" id="kobo.1326.3">.
</span><span class="koboSpan" id="kobo.1326.4">. </span><span class="koboSpan" id="kobo.1326.5">. </span><span class="koboSpan" id="kobo.1326.6">.
</span><span class="koboSpan" id="kobo.1326.7">xargs_test.txt
yad-form.sh
zoneinfo.zip
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1327.1">The reason this works is that if you do </span><code class="inlineCode"><span class="koboSpan" id="kobo.1328.1">echo *</span></code><span class="koboSpan" id="kobo.1329.1"> from the command-line, you’ll see a jumbled-up listing of files in the directory. </span><span class="koboSpan" id="kobo.1329.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1330.1">for..in</span></code><span class="koboSpan" id="kobo.1331.1"> loop causes </span><code class="inlineCode"><span class="koboSpan" id="kobo.1332.1">echo</span></code><span class="koboSpan" id="kobo.1333.1"> to list each filename on its own line.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1334.1">Okay, we’ve just looked at </span><code class="inlineCode"><span class="koboSpan" id="kobo.1335.1">for..in</span></code><span class="koboSpan" id="kobo.1336.1">. </span><span class="koboSpan" id="kobo.1336.2">Let’s now look at </span><code class="inlineCode"><span class="koboSpan" id="kobo.1337.1">for</span></code><span class="koboSpan" id="kobo.1338.1">.</span></p>
    <h2 id="_idParaDest-163" class="heading 2"><span class="koboSpan" id="kobo.1339.1">The for Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1340.1">This is similar to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1341.1">for . </span><span class="koboSpan" id="kobo.1341.2">. </span><span class="koboSpan" id="kobo.1341.3">in</span></code><span class="koboSpan" id="kobo.1342.1"> construct, except for</span><a id="_idIndexMarker487"/><span class="koboSpan" id="kobo.1343.1"> where it gets its list. </span><span class="koboSpan" id="kobo.1343.2">With </span><code class="inlineCode"><span class="koboSpan" id="kobo.1344.1">for</span></code><span class="koboSpan" id="kobo.1345.1">, the user </span><a id="_idIndexMarker488"/><span class="koboSpan" id="kobo.1346.1">will enter the list as arguments when calling the script. </span><span class="koboSpan" id="kobo.1346.2">Let’s create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1347.1">car_demo_3.sh</span></code><span class="koboSpan" id="kobo.1348.1"> script to demonstrate this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1349.1">#!/bin/bash
for cars
do
        echo "$cars"
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1350.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1351.1">cars</span></code><span class="koboSpan" id="kobo.1352.1"> variable gets created in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1353.1">for</span></code><span class="koboSpan" id="kobo.1354.1"> line, but there’s no list of cars. </span><span class="koboSpan" id="kobo.1354.2">So, where does the list come from? </span><span class="koboSpan" id="kobo.1354.3">It comes from arguments that the user enters on the command-line when he </span><a id="_idIndexMarker489"/><span class="koboSpan" id="kobo.1355.1">or she invokes the script. </span><span class="koboSpan" id="kobo.1355.2">Instead of using </span><a id="_idIndexMarker490"/><span class="koboSpan" id="kobo.1356.1">classic car names this time, let’s use a list of modern car names, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1357.1">[donnie@fedora ~]$ ./car_demo_3.sh Toyota Volkswagen Subaru Honda
Toyota
Volkswagen
Subaru
Honda
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1358.1">Next, let’s look at the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1359.1">break</span></code><span class="koboSpan" id="kobo.1360.1"> command.</span></p>
    <h2 id="_idParaDest-164" class="heading 2"><span class="koboSpan" id="kobo.1361.1">Using break</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1362.1">Use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1363.1">break</span></code><span class="koboSpan" id="kobo.1364.1"> command to</span><a id="_idIndexMarker491"/><span class="koboSpan" id="kobo.1365.1"> further control how you want </span><code class="inlineCode"><span class="koboSpan" id="kobo.1366.1">for..in</span></code><span class="koboSpan" id="kobo.1367.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1368.1">while..do</span></code><span class="koboSpan" id="kobo.1369.1"> loops to operate. </span><span class="koboSpan" id="kobo.1369.2">To see how this works, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1370.1">break_demo.sh</span></code><span class="koboSpan" id="kobo.1371.1"> script and make</span><a id="_idIndexMarker492"/><span class="koboSpan" id="kobo.1372.1"> it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1373.1">#!/bin/bash
j=0
while [[ $j -lt 5 ]]
do
        echo "This is number: $j"
        j=$((j + 1))
        if [[ "$j" == '2' ]]; then
                echo "We have reached our goal: $j"
                break
        fi
done
echo "That's all, folks!"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1374.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1375.1">while</span></code><span class="koboSpan" id="kobo.1376.1"> line tells the script to run as long as the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1377.1">j</span></code><span class="koboSpan" id="kobo.1378.1"> is less than </span><code class="inlineCode"><span class="koboSpan" id="kobo.1379.1">5</span></code><span class="koboSpan" id="kobo.1380.1">. </span><span class="koboSpan" id="kobo.1380.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1381.1">j=$((j + 1))</span></code><span class="koboSpan" id="kobo.1382.1"> construct on the sixth line is a mathematical operator, with increments the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1383.1">j</span></code><span class="koboSpan" id="kobo.1384.1"> by </span><code class="inlineCode"><span class="koboSpan" id="kobo.1385.1">1 </span></code><span class="koboSpan" id="kobo.1386.1">on each iteration of the loop. </span><span class="koboSpan" id="kobo.1386.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1387.1">if..then</span></code><span class="koboSpan" id="kobo.1388.1"> construct that starts on the seventh </span><a id="_idIndexMarker493"/><span class="koboSpan" id="kobo.1389.1">line defines what should happen when the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1390.1">j</span></code><span class="koboSpan" id="kobo.1391.1"> is equal to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1392.1">2</span></code><span class="koboSpan" id="kobo.1393.1">. </span><span class="koboSpan" id="kobo.1393.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1394.1">break</span></code><span class="koboSpan" id="kobo.1395.1"> command then terminates the loop. </span><span class="koboSpan" id="kobo.1395.2">Here’s how</span><a id="_idIndexMarker494"/><span class="koboSpan" id="kobo.1396.1"> it looks:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1397.1">[donnie@fedora ~]$ ./break_demo.sh
This is number: 0
This is number: 1
We have reached our goal: 2
That's all, folks!
</span><span class="koboSpan" id="kobo.1397.2">[donnie@fedora ~]$
</span></code></pre>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1398.1">As I’ve indicated for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1399.1">while_demo.sh</span></code><span class="koboSpan" id="kobo.1400.1"> script, you can replace the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1401.1">j=$((j + 1))</span></code><span class="koboSpan" id="kobo.1402.1"> construct with:</span></p>
      <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1403.1">((j++))
</span></code></pre>
      <p class="normal"><span class="koboSpan" id="kobo.1404.1">However, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1405.1">((j++))</span></code><span class="koboSpan" id="kobo.1406.1"> is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1407.1">bash</span></code><span class="koboSpan" id="kobo.1408.1">-specific, and might not work on other non-</span><code class="inlineCode"><span class="koboSpan" id="kobo.1409.1">bash</span></code><span class="koboSpan" id="kobo.1410.1"> shells.</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.1411.1">You can also express this as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1412.1">j=$(expr j + 1)</span></code><span class="koboSpan" id="kobo.1413.1">, which is also portable, and is the form that I showed you in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1414.1">while_demo.sh</span></code><span class="koboSpan" id="kobo.1415.1"> script.</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.1416.1">(I’ll show you more about performing math in shell scripts in </span><em class="chapterRef"><span class="koboSpan" id="kobo.1417.1">Chapter 11, Performing Mathematical Operations</span></em><span class="koboSpan" id="kobo.1418.1">.)</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1419.1">Just for fun, delete the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1420.1">break</span></code><span class="koboSpan" id="kobo.1421.1"> command from the script and run it again. </span><span class="koboSpan" id="kobo.1421.2">You should now see this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1422.1">[donnie@fedora ~]$ ./break_demo.sh
This is number: 0
This is number: 1
We have reached our goal: 2
This is number: 2
This is number: 3
This is number: 4
That's all, folks!
</span><span class="koboSpan" id="kobo.1422.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1423.1">This time, the loop </span><a id="_idIndexMarker495"/><span class="koboSpan" id="kobo.1424.1">keeps running past the number </span><code class="inlineCode"><span class="koboSpan" id="kobo.1425.1">2</span></code><span class="koboSpan" id="kobo.1426.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1427.1">Now that we’ve </span><a id="_idIndexMarker496"/><span class="koboSpan" id="kobo.1428.1">taken a break, let’s continue.</span></p>
    <h2 id="_idParaDest-165" class="heading 2"><span class="koboSpan" id="kobo.1429.1">Using continue</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1430.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1431.1">continue</span></code><span class="koboSpan" id="kobo.1432.1"> command also</span><a id="_idIndexMarker497"/><span class="koboSpan" id="kobo.1433.1"> modifies how </span><code class="inlineCode"><span class="koboSpan" id="kobo.1434.1">for..in</span></code><span class="koboSpan" id="kobo.1435.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1436.1">while..do</span></code><span class="koboSpan" id="kobo.1437.1"> loops </span><a id="_idIndexMarker498"/><span class="koboSpan" id="kobo.1438.1">operate. </span><span class="koboSpan" id="kobo.1438.2">This time, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1439.1">for_continue.sh</span></code><span class="koboSpan" id="kobo.1440.1"> script, and make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1441.1">#!/bin/bash
for cars in Pontiac Oldsmobile Buick Chevrolet Ford Mercury
do
        if [[ $cars == Buick || $cars == Mercury ]]; then
                continue
        fi
        echo $cars
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1442.1">On each iteration of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1443.1">for</span></code><span class="koboSpan" id="kobo.1444.1"> loop, a different classic car name gets assigned as the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1445.1">cars</span></code><span class="koboSpan" id="kobo.1446.1">. </span><span class="koboSpan" id="kobo.1446.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1447.1">if..then</span></code><span class="koboSpan" id="kobo.1448.1"> stanza determines if the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1449.1">cars</span></code><span class="koboSpan" id="kobo.1450.1"> is either </span><code class="inlineCode"><span class="koboSpan" id="kobo.1451.1">Buick</span></code><span class="koboSpan" id="kobo.1452.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1453.1">Mercury</span></code><span class="koboSpan" id="kobo.1454.1">. </span><span class="koboSpan" id="kobo.1454.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1455.1">continue</span></code><span class="koboSpan" id="kobo.1456.1"> command within the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1457.1">if..then</span></code><span class="koboSpan" id="kobo.1458.1"> stanza causes the loop to skip over those two car names, so that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1459.1">echo</span></code><span class="koboSpan" id="kobo.1460.1"> command won’t list them. </span><span class="koboSpan" id="kobo.1460.2">You also see another use for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1461.1">||</span></code><span class="koboSpan" id="kobo.1462.1"> construct here. </span><span class="koboSpan" id="kobo.1462.2">When used within a test operation, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1463.1">||</span></code><span class="koboSpan" id="kobo.1464.1"> acts as an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1465.1">or</span></code><span class="koboSpan" id="kobo.1466.1"> operator. </span><span class="koboSpan" id="kobo.1466.2">Here’s what the output looks like:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1467.1">[donnie@fedora ~]$ ./for_continue.sh
Pontiac
Oldsmobile
Chevrolet
Ford
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1468.1">Next, let’s try this with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1469.1">while..do</span></code><span class="koboSpan" id="kobo.1470.1"> loop. </span><span class="koboSpan" id="kobo.1470.2">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1471.1">while_continue.sh</span></code><span class="koboSpan" id="kobo.1472.1"> script, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1473.1">#!/bin/bash
j=0
while [[ $j -lt 6 ]]
do
        j=$((j + 1))
        [[ $j -eq 3 || $j -eq 6 ]] &amp;&amp; continue
        echo "$j"
done
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1474.1">This time, we just want to skip </span><a id="_idIndexMarker499"/><span class="koboSpan" id="kobo.1475.1">over numbers 3 and 6. </span><span class="koboSpan" id="kobo.1475.2">Here’s the </span><a id="_idIndexMarker500"/><span class="koboSpan" id="kobo.1476.1">output:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1477.1">[donnie@fedora ~]$ ./while_continue.sh
1
2
4
5
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1478.1">Okay, enough of that. </span><span class="koboSpan" id="kobo.1478.2">Let’s look at the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1479.1">until</span></code><span class="koboSpan" id="kobo.1480.1"> construct.</span></p>
    <h2 id="_idParaDest-166" class="heading 2"><span class="koboSpan" id="kobo.1481.1">The until Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1482.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1483.1">until</span></code><span class="koboSpan" id="kobo.1484.1"> loop will continue </span><a id="_idIndexMarker501"/><span class="koboSpan" id="kobo.1485.1">until a certain condition is met. </span><span class="koboSpan" id="kobo.1485.2">You can use it for a</span><a id="_idIndexMarker502"/><span class="koboSpan" id="kobo.1486.1"> variety of things, such as playing a guessing game. </span><span class="koboSpan" id="kobo.1486.2">See how it works by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1487.1">secret_word.sh</span></code><span class="koboSpan" id="kobo.1488.1"> script, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1489.1">#!/bin/bash
secretword=Donnie
word=
echo "Hi there, $USER!"
</span><span class="koboSpan" id="kobo.1489.2">echo "Would you like to play a guessing game?"
</span><span class="koboSpan" id="kobo.1489.3">echo "If so, then enter the correct secret word"
echo "to win a special prize."
</span><span class="koboSpan" id="kobo.1489.4">echo
echo
until [[ "$word" = "$secretword" ]]
do
        echo -n "Enter your guess.  </span><span class="koboSpan" id="kobo.1489.5">"
        read word
done
echo "Yay!  </span><span class="koboSpan" id="kobo.1489.6">You win a pat on the back!"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1490.1">So, I’ve set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1491.1">secretword</span></code><span class="koboSpan" id="kobo.1492.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1493.1">Donnie</span></code><span class="koboSpan" id="kobo.1494.1">. </span><span class="koboSpan" id="kobo.1494.2">(Hey, that’s me!) I then set </span><code class="inlineCode"><span class="koboSpan" id="kobo.1495.1">word</span></code><span class="koboSpan" id="kobo.1496.1"> to a null value. </span><span class="koboSpan" id="kobo.1496.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1497.1">until</span></code><span class="koboSpan" id="kobo.1498.1"> loop will run </span><a id="_idIndexMarker503"/><span class="koboSpan" id="kobo.1499.1">until I enter the correct value for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1500.1">secretword</span></code><span class="koboSpan" id="kobo.1501.1">. </span><span class="koboSpan" id="kobo.1501.2">(In this case, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1502.1">read</span></code><span class="koboSpan" id="kobo.1503.1"> pauses the </span><a id="_idIndexMarker504"/><span class="koboSpan" id="kobo.1504.1">script until you enter your guess.) It works like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1505.1">[donnie@fedora ~]$ ./secret_word.sh
Hi there, donnie!
</span><span class="koboSpan" id="kobo.1505.2">Would you like to play a guessing game?
</span><span class="koboSpan" id="kobo.1505.3">If so, then enter the correct secret word
to win a special prize.
</span><span class="koboSpan" id="kobo.1505.4">Enter your guess.  </span><span class="koboSpan" id="kobo.1505.5">Vicky
Enter your guess.  </span><span class="koboSpan" id="kobo.1505.6">Cleopatra
Enter your guess.  </span><span class="koboSpan" id="kobo.1505.7">Donnie
Yay!  </span><span class="koboSpan" id="kobo.1505.8">You win a pat on the back!
</span><span class="koboSpan" id="kobo.1505.9">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1506.1">Cool, right? </span><span class="koboSpan" id="kobo.1506.2">I mean, this is yet another trick that you can perform at your next party.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1507.1">All right, let’s move on to the next one.</span></p>
    <h2 id="_idParaDest-167" class="heading 2"><span class="koboSpan" id="kobo.1508.1">The case Construct</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1509.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1510.1">case</span></code><span class="koboSpan" id="kobo.1511.1"> construct</span><a id="_idIndexMarker505"/><span class="koboSpan" id="kobo.1512.1"> provides a way to avoid using an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1513.1">if..then..else</span></code><span class="koboSpan" id="kobo.1514.1"> construct. </span><span class="koboSpan" id="kobo.1514.2">It</span><a id="_idIndexMarker506"/><span class="koboSpan" id="kobo.1515.1"> allows users to enter a text string, then evaluate that string and provide the option that the string indicates. </span><span class="koboSpan" id="kobo.1515.2">Here’s the basic structure of case:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1516.1">case $variable in
  match_1)
     commands_to_execute
     ;;
  match_2)
   commands_to_execute
     ;;
  match_3)
   commands_to_execute
     ;;
*)  Optional Information
    commands_to_execute_for_no_match
     ;;
esac
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1517.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1518.1">case</span></code><span class="koboSpan" id="kobo.1519.1"> statement is matched against a number of values until a match is found. </span><span class="koboSpan" id="kobo.1519.2">When a match is found, the commands are executed until the double semicolons (</span><code class="inlineCode"><span class="koboSpan" id="kobo.1520.1">;;</span></code><span class="koboSpan" id="kobo.1521.1">) are reached. </span><span class="koboSpan" id="kobo.1521.2">Then, the commands after the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1522.1">esac</span></code><span class="koboSpan" id="kobo.1523.1"> line are executed.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1524.1">If there is no match, then</span><a id="_idIndexMarker507"/><span class="koboSpan" id="kobo.1525.1"> the commands between the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1526.1">*)</span></code><span class="koboSpan" id="kobo.1527.1"> and the double semicolons are executed. </span><span class="koboSpan" id="kobo.1527.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1528.1">*)</span></code><span class="koboSpan" id="kobo.1529.1"> acts the same way as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1530.1">else</span></code><span class="koboSpan" id="kobo.1531.1"> in an </span><code class="inlineCode"><span class="koboSpan" id="kobo.1532.1">if ...then</span></code><span class="koboSpan" id="kobo.1533.1"> construct, in that they both provide a default action in case none of the tested conditions are met.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1534.1">Just for fun, try</span><a id="_idIndexMarker508"/><span class="koboSpan" id="kobo.1535.1"> this out by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1536.1">term_color.sh</span></code><span class="koboSpan" id="kobo.1537.1"> script, which will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1538.1">#!/bin/bash
echo -n "Choose Background Color for Terminal(b-black,g-grey): "
read color
case "$color" in
b)
  setterm -background black -foreground white
  ;;
g)
  setterm -background white -foreground black
  ;;
*)
  echo "I do not understand"
  ;;
esac
exit
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1539.1">This script allows you to change the background color of your terminal. </span><span class="koboSpan" id="kobo.1539.2">(And yes, I know that I’ve set the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1540.1">g</span></code><span class="koboSpan" id="kobo.1541.1"> option to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1542.1">white</span></code><span class="koboSpan" id="kobo.1543.1">. </span><span class="koboSpan" id="kobo.1543.2">That’s because when you run this script and choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1544.1">g</span></code><span class="koboSpan" id="kobo.1545.1"> option, the background will look more gray than white.) Running the script looks like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1546.1">[donnie@fedora ~]$ ./term_color.sh
Choose Background Color for Terminal(b-black,g-grey): g
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1547.1">Run the script in your own</span><a id="_idIndexMarker509"/><span class="koboSpan" id="kobo.1548.1"> terminal, choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1549.1">g</span></code><span class="koboSpan" id="kobo.1550.1"> option, and you should see the background of the </span><a id="_idIndexMarker510"/><span class="koboSpan" id="kobo.1551.1">command prompt turn gray. </span><span class="koboSpan" id="kobo.1551.2">(Or, if your terminal is already set up with a white background, choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1552.1">b</span></code><span class="koboSpan" id="kobo.1553.1"> option, instead.) To see the background for the whole terminal turn gray, just type </span><code class="inlineCode"><span class="koboSpan" id="kobo.1554.1">clear</span></code><span class="koboSpan" id="kobo.1555.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1556.1">For even more fun, edit the script to add another option. </span><span class="koboSpan" id="kobo.1556.2">First, make the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1557.1">echo</span></code><span class="koboSpan" id="kobo.1558.1"> line at the top look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1559.1">echo -n "Choose Background Color for Terminal(b-black,g-grey,y-yellow): "
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1560.1">Then, add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1561.1">y</span></code><span class="koboSpan" id="kobo.1562.1"> option after the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1563.1">g</span></code><span class="koboSpan" id="kobo.1564.1"> option. </span><span class="koboSpan" id="kobo.1564.2">This new option will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1565.1">y)
  setterm -background yellow -foreground red
  ;;
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1566.1">To see something that’s hideously ugly, run the script again and choose the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1567.1">y</span></code><span class="koboSpan" id="kobo.1568.1"> option. </span><span class="koboSpan" id="kobo.1568.2">(Don’t worry though, because the setting isn’t permanent.) Here’s how using the various options will look:</span></p>
    <figure class="mediaobject"><span class="koboSpan" id="kobo.1569.1"><img src="../Images/B21693_08_01.png" alt=""/></span></figure>
    <p class="packt_figref"><span class="koboSpan" id="kobo.1570.1">Figure 8.1: Running the term_color.sh script</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1571.1">Okay, you’ve already</span><a id="_idIndexMarker511"/><span class="koboSpan" id="kobo.1572.1"> seen how to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1573.1">for</span></code><span class="koboSpan" id="kobo.1574.1"> to enter arguments when you</span><a id="_idIndexMarker512"/><span class="koboSpan" id="kobo.1575.1"> invoke your scripts. </span><span class="koboSpan" id="kobo.1575.2">Now, let’s look at another way.</span></p>
    <h2 id="_idParaDest-168" class="heading 2"><span class="koboSpan" id="kobo.1576.1">Using Positional Parameters</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1577.1">When you run a</span><a id="_idIndexMarker513"/><span class="koboSpan" id="kobo.1578.1"> shell script, you can also enter command-line</span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.1579.1"> parameters that will be used within the script. </span><span class="koboSpan" id="kobo.1579.2">The first parameter that you enter will be designated as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1580.1">$1</span></code><span class="koboSpan" id="kobo.1581.1">, the second will be designated as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1582.1">$2</span></code><span class="koboSpan" id="kobo.1583.1">, and so on. </span><span class="koboSpan" id="kobo.1583.2">(</span><code class="inlineCode"><span class="koboSpan" id="kobo.1584.1">$9</span></code><span class="koboSpan" id="kobo.1585.1"> is as high as you can go.) The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1586.1">$0</span></code><span class="koboSpan" id="kobo.1587.1"> parameter is reserved for the name of the script. </span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1588.1">To see how this </span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.1589.1">works, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1590.1">position_demo.sh</span></code><span class="koboSpan" id="kobo.1591.1"> script, which will look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1592.1">#!/bin/bash
# position_demo
echo "I have a cat, whose name is $1."
</span><span class="koboSpan" id="kobo.1592.2">echo "I have another cat, whose name is $2."
</span><span class="koboSpan" id="kobo.1592.3">echo "I have yet another cat, whose name is $3."
</span><span class="koboSpan" id="kobo.1592.4">echo
echo
echo "The script that I just ran is $0"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1593.1">To invoke the script, enter three names after the name of the script, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1594.1">[donnie@fedora ~]$ ./position_demo.sh Vicky Cleopatra Lionel
I have a cat, whose name is Vicky.
</span><span class="koboSpan" id="kobo.1594.2">I have another cat, whose name is Cleopatra.
</span><span class="koboSpan" id="kobo.1594.3">I have yet another cat, whose name is Lionel.
</span><span class="koboSpan" id="kobo.1594.4">The script that I just ran is ./position_demo.sh
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1595.1">In the output, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1596.1">$1</span></code><span class="koboSpan" id="kobo.1597.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1598.1">$2</span></code><span class="koboSpan" id="kobo.1599.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1600.1">$3</span></code><span class="koboSpan" id="kobo.1601.1"> variables will be expanded to the names that I entered on the </span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.1602.1">command-line. </span><span class="koboSpan" id="kobo.1602.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1603.1">$0</span></code><span class="koboSpan" id="kobo.1604.1"> variable will be expanded to the full path and name of the script.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1605.1">There are three special positional parameters that you can use to enhance your scripts. </span><span class="koboSpan" id="kobo.1605.2">Here’s the list:</span></p>
    <ul>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1606.1">$#</span></code><span class="koboSpan" id="kobo.1607.1">: This shows the number of parameters that you’ve entered.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1608.1">$@</span></code><span class="koboSpan" id="kobo.1609.1">: This lists all of the parameters that you’ve entered, with each one on a separate line.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1610.1">$*</span></code><span class="koboSpan" id="kobo.1611.1">: This lists all of the parameters that you’ve entered on a single line, with a blank space between each one.</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.1612.1">One cool thing that you can do with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1613.1">$# </span></code><span class="koboSpan" id="kobo.1614.1">parameter is error-checking. </span><span class="koboSpan" id="kobo.1614.2">To see what I mean, run the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1615.1">position_demo.sh</span></code><span class="koboSpan" id="kobo.1616.1"> script again, but only enter one name as an argument. </span><span class="koboSpan" id="kobo.1616.2">You should see something like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1617.1">[donnie@fedora ~]$ ./position_demo.sh Vicky
I have a cat, whose name is Vicky.
</span><span class="koboSpan" id="kobo.1617.2">I have another cat, whose name is .
</span><span class="koboSpan" id="kobo.1617.3">I have yet another cat, whose name is .
</span><span class="koboSpan" id="kobo.1617.4">The script that I just ran is ./position_demo.sh
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1618.1">As you see, it gave</span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.1619.1"> me no warning about the fact that I didn’t list the correct number of names. </span><span class="koboSpan" id="kobo.1619.2">Let’s modify things a bit to take</span><a id="_idIndexMarker518"/><span class="koboSpan" id="kobo.1620.1"> care of that. </span><span class="koboSpan" id="kobo.1620.2">Create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1621.1">position_demo_2.sh</span></code><span class="koboSpan" id="kobo.1622.1"> script, and make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1623.1">#!/bin/bash
# position_demo
if [[ $# -ne 3 ]]; then
        echo "This script requires three arguments."
        </span><span class="koboSpan" id="kobo.1623.2">exit 1
fi
echo "I have a cat, whose name is $1."
</span><span class="koboSpan" id="kobo.1623.3">echo "I have another cat, whose name is $2."
</span><span class="koboSpan" id="kobo.1623.4">echo "I have yet another cat, whose name is $3."
</span><span class="koboSpan" id="kobo.1623.5">echo
echo
echo "The script that I just ran is $0"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1624.1">Run this script with all three names, and you’ll get the same output that you got with the first script. </span><span class="koboSpan" id="kobo.1624.2">Then, run it again with only one name, and you should see this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1625.1">[donnie@fedora ~]$ vim position_demo_2.sh
[donnie@fedora ~]$ ./position_demo_2.sh Vicky
You entered 1 argument(s).
</span><span class="koboSpan" id="kobo.1625.2">This script requires two arguments.
</span><span class="koboSpan" id="kobo.1625.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1626.1">That looks much better.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1627.1">To introduce our next trick, take a look at the output of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1628.1">date</span></code><span class="koboSpan" id="kobo.1629.1"> command, without specifying</span><a id="_idIndexMarker519"/><span class="koboSpan" id="kobo.1630.1"> any formatting options, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1631.1">[donnie@fedora ~]$ date
Fri Oct  6 03:24:39 PM EDT 2023
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1632.1">You see seven</span><a id="_idIndexMarker520"/><span class="koboSpan" id="kobo.1633.1"> fields in the output, which are:</span></p>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.1634.1">Day of week</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1635.1">Month</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1636.1">Date</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1637.1">Time</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1638.1">AM or PM</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1639.1">Timezone</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.1640.1">Year</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.1641.1">Now, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1642.1">position_demo_3.sh</span></code><span class="koboSpan" id="kobo.1643.1"> script, which will treat each field of the date output as a positional parameter. </span><span class="koboSpan" id="kobo.1643.2">Make it look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1644.1">#!/bin/bash
set $(date)
echo $*
echo "Day, First Argument: $1"
echo "Month, Second Argument: $2"
echo "Date, Third Argument: $3"
echo "Time, Fourth and Fifth Arguments: $4, $5"
echo "Time Zone, Sixth Argument: $6"
echo "Year, Seventh Argument: $7"
echo "$2 $3, $7"
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1645.1">On the second line, you see another use for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1646.1">set </span></code><span class="koboSpan" id="kobo.1647.1">command that you haven’t yet seen. </span><span class="koboSpan" id="kobo.1647.2">The first time you saw </span><code class="inlineCode"><span class="koboSpan" id="kobo.1648.1">set</span></code><span class="koboSpan" id="kobo.1649.1">, it was with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1650.1">-o</span></code><span class="koboSpan" id="kobo.1651.1"> option to set shell options. </span><span class="koboSpan" id="kobo.1651.2">This time, I’m using it without any options and with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1652.1">$(date)</span></code><span class="koboSpan" id="kobo.1653.1"> as an argument. </span><span class="koboSpan" id="kobo.1653.2">Here’s what the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1654.1">bash</span></code><span class="koboSpan" id="kobo.1655.1"> man page says about using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1656.1">set</span></code><span class="koboSpan" id="kobo.1657.1"> in this manner:</span></p>
    <blockquote class="packt_quote">
      <p class="quote"><span class="koboSpan" id="kobo.1658.1">Without options, display the name and value of each shell variable in a format that can be reused as input for setting or resetting the currently-set variables.</span></p>
    </blockquote>
    <p class="normal"><span class="koboSpan" id="kobo.1659.1">In this case, </span><code class="inlineCode"><span class="koboSpan" id="kobo.1660.1">set</span></code><span class="koboSpan" id="kobo.1661.1"> is taking the output of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1662.1">$(date)</span></code><span class="koboSpan" id="kobo.1663.1"> and formatting it in a way that allows the individual fields to be used as positional parameters.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1664.1">On the third line, you </span><a id="_idIndexMarker521"/><span class="koboSpan" id="kobo.1665.1">see where the real magic happens. </span><span class="koboSpan" id="kobo.1665.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1666.1">$*</span></code><span class="koboSpan" id="kobo.1667.1"> positional parameter lists all fields of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1668.1">$(date)</span></code><span class="koboSpan" id="kobo.1669.1"> on a single line. </span><span class="koboSpan" id="kobo.1669.2">The rest of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1670.1">echo</span></code><span class="koboSpan" id="kobo.1671.1"> commands just output a text</span><a id="_idIndexMarker522"/><span class="koboSpan" id="kobo.1672.1"> string, followed by the value of the specified field or fields. </span><span class="koboSpan" id="kobo.1672.2">Here’s what it looks like:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1673.1">[donnie@fedora ~]$ ./position_demo_3.sh
Fri Oct 6 03:46:28 PM EDT 2023
Day, First Argument: Fri
Month, Second Argument: Oct
Date, Third Argument: 6
Time, Fourth and Fifth Arguments: 03:46:28, PM
Time Zone, Sixth Argument: EDT
Year, Seventh Argument: 2023
Oct 6, 2023
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1674.1">It works as it should, and looks pretty cool. </span><span class="koboSpan" id="kobo.1674.2">Add this to the list of tricks to try at your next party.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1675.1">I think that that about covers it for positional parameters. </span><span class="koboSpan" id="kobo.1675.2">Let’s now look at exit codes.</span></p>
    <h1 id="_idParaDest-169" class="heading 1"><span class="koboSpan" id="kobo.1676.1">Understanding Exit Codes</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.1677.1">You’ve already seen</span><a id="_idIndexMarker523"/><span class="koboSpan" id="kobo.1678.1"> some examples of using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1679.1">exit </span></code><span class="koboSpan" id="kobo.1680.1">command, which can either terminate a script normally or cause it to terminate early upon an error condition. </span><span class="koboSpan" id="kobo.1680.2">What I haven’t explained yet, is about </span><strong class="keyWord"><span class="koboSpan" id="kobo.1681.1">exit codes</span></strong><span class="koboSpan" id="kobo.1682.1">. </span><span class="koboSpan" id="kobo.1682.2">There are two general classes </span><a id="_idIndexMarker524"/><span class="koboSpan" id="kobo.1683.1">of exit codes, which are:</span></p>
    <ul>
      <li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.1684.1">Standard shell exit codes</span></strong><span class="koboSpan" id="kobo.1685.1">: Each shell has its own defined set of exit codes. </span><span class="koboSpan" id="kobo.1685.2">(To keep things</span><a id="_idIndexMarker525"/><span class="koboSpan" id="kobo.1686.1"> simple, I’ll just talk</span><a id="_idIndexMarker526"/><span class="koboSpan" id="kobo.1687.1"> about </span><code class="inlineCode"><span class="koboSpan" id="kobo.1688.1">bash</span></code><span class="koboSpan" id="kobo.1689.1"> exit codes in this chapter.)</span></li>
      <li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.1690.1">User-defined exit codes</span></strong><span class="koboSpan" id="kobo.1691.1">: You</span><a id="_idIndexMarker527"/><span class="koboSpan" id="kobo.1692.1"> can also define your </span><a id="_idIndexMarker528"/><span class="koboSpan" id="kobo.1693.1">own exit codes for different purposes.</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.1694.1">Let’s talk about standard exit codes first.</span></p>
    <h2 id="_idParaDest-170" class="heading 2"><span class="koboSpan" id="kobo.1695.1">Standard Shell Exit Codes</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1696.1">When a program or </span><a id="_idIndexMarker529"/><span class="koboSpan" id="kobo.1697.1">script runs successfully, it returns an exit code of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1698.1">0</span></code><span class="koboSpan" id="kobo.1699.1">. </span><span class="koboSpan" id="kobo.1699.2">Otherwise, the exit code will be a non-</span><code class="inlineCode"><span class="koboSpan" id="kobo.1700.1">0</span></code><span class="koboSpan" id="kobo.1701.1"> number from </span><code class="inlineCode"><span class="koboSpan" id="kobo.1702.1">1</span></code><span class="koboSpan" id="kobo.1703.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1704.1">255</span></code><span class="koboSpan" id="kobo.1705.1">. </span><span class="koboSpan" id="kobo.1705.2">To demonstrate, use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1706.1">find</span></code><span class="koboSpan" id="kobo.1707.1"> to search through the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1708.1">/etc/</span></code><span class="koboSpan" id="kobo.1709.1"> directory for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1710.1">passwd</span></code><span class="koboSpan" id="kobo.1711.1"> file, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1712.1">[donnie@fedora ~]$ find /etc -name passwd
find: '/etc/audit': Permission denied
find: '/etc/cups/ssl': Permission denied
. </span><span class="koboSpan" id="kobo.1712.2">. </span><span class="koboSpan" id="kobo.1712.3">.
</span><span class="koboSpan" id="kobo.1712.4">. </span><span class="koboSpan" id="kobo.1712.5">. </span><span class="koboSpan" id="kobo.1712.6">.
</span><span class="koboSpan" id="kobo.1712.7">/etc/pam.d/passwd
find: '/etc/pki/rsyslog': Permission denied
find: '/etc/polkit-1/localauthority': Permission denied
find: '/etc/polkit-1/rules.d': Permission denied
. </span><span class="koboSpan" id="kobo.1712.8">. </span><span class="koboSpan" id="kobo.1712.9">.
</span><span class="koboSpan" id="kobo.1712.10">. </span><span class="koboSpan" id="kobo.1712.11">. </span><span class="koboSpan" id="kobo.1712.12">.
</span><span class="koboSpan" id="kobo.1712.13">find: '/etc/credstore.encrypted': Permission denied
/etc/passwd
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1713.1">You see that </span><code class="inlineCode"><span class="koboSpan" id="kobo.1714.1">find</span></code><span class="koboSpan" id="kobo.1715.1"> found the file, but we also have a lot of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1716.1">Permission denied</span></code><span class="koboSpan" id="kobo.1717.1"> errors due to the fact that there are directories that I can’t enter with my normal user privileges. </span><span class="koboSpan" id="kobo.1717.2">Now, verify the exit code, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1718.1">[donnie@fedora ~]$ echo $?
</span><span class="koboSpan" id="kobo.1718.2">1
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1719.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1720.1">?</span></code><span class="koboSpan" id="kobo.1721.1"> is a special variable that returns the exit code for the previous command that was just run. </span><span class="koboSpan" id="kobo.1721.2">In this case, the exit code is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1722.1">1</span></code><span class="koboSpan" id="kobo.1723.1">, which tells me that there was some kind of error </span><a id="_idIndexMarker530"/><span class="koboSpan" id="kobo.1724.1">condition. </span><span class="koboSpan" id="kobo.1724.2">The specific error was that </span><code class="inlineCode"><span class="koboSpan" id="kobo.1725.1">find</span></code><span class="koboSpan" id="kobo.1726.1"> couldn’t enter certain directories to perform its search. </span><span class="koboSpan" id="kobo.1726.2">So, let’s try this again with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1727.1">sudo</span></code><span class="koboSpan" id="kobo.1728.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1729.1">[donnie@fedora ~]$ sudo find /etc -name passwd
[sudo] password for donnie:
/etc/pam.d/passwd
/etc/passwd
[donnie@fedora ~]$ echo $?
</span><span class="koboSpan" id="kobo.1729.2">0
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1730.1">This time I get exit code </span><code class="inlineCode"><span class="koboSpan" id="kobo.1731.1">0</span></code><span class="koboSpan" id="kobo.1732.1">, which means that there were no error conditions.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1733.1">Most of the time, you’ll see either </span><code class="inlineCode"><span class="koboSpan" id="kobo.1734.1">0</span></code><span class="koboSpan" id="kobo.1735.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1736.1">1</span></code><span class="koboSpan" id="kobo.1737.1"> as the exit code. </span><span class="koboSpan" id="kobo.1737.2">The complete list of codes that you might see include the following:</span></p>
    <ul>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1738.1">1</span></code><span class="koboSpan" id="kobo.1739.1"> General errors</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1740.1">2</span></code><span class="koboSpan" id="kobo.1741.1"> Misuse of shell builtins</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1742.1">126</span></code><span class="koboSpan" id="kobo.1743.1"> Cannot invoke requested command</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1744.1">127</span></code><span class="koboSpan" id="kobo.1745.1"> Command not found</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1746.1">128</span></code><span class="koboSpan" id="kobo.1747.1"> Invalid argument to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1748.1">exit</span></code></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1749.1">128+n</span></code><span class="koboSpan" id="kobo.1750.1"> Fatal error signal </span><code class="inlineCode"><span class="koboSpan" id="kobo.1751.1">n</span></code></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.1752.1">130</span></code><span class="koboSpan" id="kobo.1753.1"> Script terminated by </span><em class="keystroke"><span class="koboSpan" id="kobo.1754.1">Ctrl-c</span></em></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.1755.1">It’s possible to demonstrate some of the other codes. </span><span class="koboSpan" id="kobo.1755.2">Start by creating the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1756.1">exit.sh</span></code><span class="koboSpan" id="kobo.1757.1"> script, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1758.1">#!/bin/bash
exit n
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1759.1">Right away, you can see the error. </span><span class="koboSpan" id="kobo.1759.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1760.1">exit</span></code><span class="koboSpan" id="kobo.1761.1"> command requires a numerical argument, and won’t work with an alphabetical argument. </span><span class="koboSpan" id="kobo.1761.2">But, we’re going to pretend that we don’t see the error, and try to run it anyway. </span><span class="koboSpan" id="kobo.1761.3">Here’s what you’ll get:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1762.1">[donnie@fedora ~]$ ./exit.sh
./exit.sh: line 2: exit: n: numeric argument required
[donnie@fedora ~]$ echo $?
</span><span class="koboSpan" id="kobo.1762.2">2
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1763.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1764.1">2</span></code><span class="koboSpan" id="kobo.1765.1"> exit code indicates that I misused a </span><strong class="keyWord"><span class="koboSpan" id="kobo.1766.1">shell builtin</span></strong><span class="koboSpan" id="kobo.1767.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1768.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.1769.1">shell builtin</span></strong><span class="koboSpan" id="kobo.1770.1"> is just a</span><a id="_idIndexMarker531"/><span class="koboSpan" id="kobo.1771.1"> command that doesn’t have its own executable</span><a id="_idIndexMarker532"/><span class="koboSpan" id="kobo.1772.1"> program file, because it’s built into the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1773.1">bash</span></code><span class="koboSpan" id="kobo.1774.1"> executable program file. </span><span class="koboSpan" id="kobo.1774.2">One would think that I would get a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1775.1">128</span></code><span class="koboSpan" id="kobo.1776.1"> code, since I provided an invalid argument to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1777.1">exit</span></code><span class="koboSpan" id="kobo.1778.1">, but that’s not how it works. </span><span class="koboSpan" id="kobo.1778.2">(In fact, I’m really not sure what I would have to do to get a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1779.1">128</span></code><span class="koboSpan" id="kobo.1780.1"> code. </span><span class="koboSpan" id="kobo.1780.2">But, that’s okay.) To see the complete list of shell builtins, just view the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1781.1">builtins</span></code><span class="koboSpan" id="kobo.1782.1"> man page.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1783.1">A </span><code class="inlineCode"><span class="koboSpan" id="kobo.1784.1">126</span></code><span class="koboSpan" id="kobo.1785.1"> code normally means that you don’t have permission to run a command. </span><span class="koboSpan" id="kobo.1785.2">For example, let’s say that I forgot to set the executable permission on a script, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1786.1">[donnie@fedora ~]$ ls -l somescript.sh
-rw-r--r--. </span><span class="koboSpan" id="kobo.1786.2">1 donnie donnie 0 Oct  7 16:26 somescript.sh
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1787.1">Watch what happens when I try to run this script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1788.1">[donnie@fedora ~]$ ./somescript.sh
bash: ./somescript.sh: Permission denied
[donnie@fedora ~]$ echo $?
</span><span class="koboSpan" id="kobo.1788.2">126
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1789.1">You can generate a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1790.1">127</span></code><span class="koboSpan" id="kobo.1791.1"> code by trying to execute a command that doesn’t exist, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1792.1">[donnie@fedora ~]$ donnie
bash: donnie: command not found
[donnie@fedora ~]$ echo $?
</span><span class="koboSpan" id="kobo.1792.2">127
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1793.1">Obviously, my name is not a command.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1794.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1795.1">128+n</span></code><span class="koboSpan" id="kobo.1796.1"> code means that some sort of fatal error condition occurred. </span><span class="koboSpan" id="kobo.1796.2">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1797.1">n</span></code><span class="koboSpan" id="kobo.1798.1"> signifies another digit that’s added to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1799.1">128</span></code><span class="koboSpan" id="kobo.1800.1">. </span><span class="koboSpan" id="kobo.1800.2">For example, if you start a command and </span><em class="keystroke"><span class="koboSpan" id="kobo.1801.1">Ctrl-c</span></em><span class="koboSpan" id="kobo.1802.1"> out of it before it completes, you’ll get a code of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1803.1">128+2</span></code><span class="koboSpan" id="kobo.1804.1">, which equals </span><code class="inlineCode"><span class="koboSpan" id="kobo.1805.1">130</span></code><span class="koboSpan" id="kobo.1806.1">. </span><span class="koboSpan" id="kobo.1806.2">(The </span><code class="inlineCode"><span class="koboSpan" id="kobo.1807.1">2</span></code><span class="koboSpan" id="kobo.1808.1"> in this case indicates the specific fatal condition.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1809.1">You can use </span><a id="_idIndexMarker533"/><span class="koboSpan" id="kobo.1810.1">standard exit codes within a shell script to make it handle different conditions. </span><span class="koboSpan" id="kobo.1810.2">To see that, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1811.1">netchk.sh</span></code><span class="koboSpan" id="kobo.1812.1"> script, as follows:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1813.1">#!/bin/bash
if [[ $# -eq 0 ]]; then
        site="google.com"
else
        site="$1"
fi
ping -c 2 $site &gt; /dev/null
if [[ $? </span><span class="koboSpan" id="kobo.1813.2">!= 0 ]]; then
        echo $(date +%F) . </span><span class="koboSpan" id="kobo.1813.3">. </span><span class="koboSpan" id="kobo.1813.4">. </span><span class="koboSpan" id="kobo.1813.5">Network Failure!
        </span><span class="koboSpan" id="kobo.1813.6">logger "Could not reach $site."
</span><span class="koboSpan" id="kobo.1813.7">else
        echo $(date +%F) . </span><span class="koboSpan" id="kobo.1813.8">. </span><span class="koboSpan" id="kobo.1813.9">. </span><span class="koboSpan" id="kobo.1813.10">Success!
        </span><span class="koboSpan" id="kobo.1813.11">logger "$site is reachable."
</span><span class="koboSpan" id="kobo.1813.12">fi
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1814.1">This script expects you to invoke it with a hostname, domain name, or an IP address as an argument. </span><span class="koboSpan" id="kobo.1814.2">In the first </span><code class="inlineCode"><span class="koboSpan" id="kobo.1815.1">if..then</span></code><span class="koboSpan" id="kobo.1816.1"> construct at the top, you see that if you don’t enter an argument, the script will default to using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1817.1">google.com</span></code><span class="koboSpan" id="kobo.1818.1"> as the argument. </span><span class="koboSpan" id="kobo.1818.2">\</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1819.1">Otherwise, it will use the argument that you specified. </span><span class="koboSpan" id="kobo.1819.2">It will then try to ping the specified site. </span><span class="koboSpan" id="kobo.1819.3">If the ping is successful, the exit code will be </span><code class="inlineCode"><span class="koboSpan" id="kobo.1820.1">0</span></code><span class="koboSpan" id="kobo.1821.1">. </span><span class="koboSpan" id="kobo.1821.2">Otherwise, it will be something other than </span><code class="inlineCode"><span class="koboSpan" id="kobo.1822.1">0</span></code><span class="koboSpan" id="kobo.1823.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1824.1">In the second </span><code class="inlineCode"><span class="koboSpan" id="kobo.1825.1">if..then</span></code><span class="koboSpan" id="kobo.1826.1"> construct, you see that if the exit code is not </span><code class="inlineCode"><span class="koboSpan" id="kobo.1827.1">0</span></code><span class="koboSpan" id="kobo.1828.1">, it will echo a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1829.1">Network Failure</span></code><span class="koboSpan" id="kobo.1830.1"> message and send an entry to the system log file, which on the Fedora machine is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1831.1">/var/log/messages</span></code><span class="koboSpan" id="kobo.1832.1">. </span><span class="koboSpan" id="kobo.1832.2">Otherwise, it will echo a </span><code class="inlineCode"><span class="koboSpan" id="kobo.1833.1">Success</span></code><span class="koboSpan" id="kobo.1834.1"> message. </span><span class="koboSpan" id="kobo.1834.2">Here’s how that looks:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1835.1">[donnie@fedora ~]$ ./netchk.sh
2023-10-07 . </span><span class="koboSpan" id="kobo.1835.2">. </span><span class="koboSpan" id="kobo.1835.3">. </span><span class="koboSpan" id="kobo.1835.4">Success!
</span><span class="koboSpan" id="kobo.1835.5">[donnie@fedora ~]$ ./netchk.sh www.donnie.com
ping: www.donnie.com: Name or service not known
2023-10-07 . </span><span class="koboSpan" id="kobo.1835.6">. </span><span class="koboSpan" id="kobo.1835.7">. </span><span class="koboSpan" id="kobo.1835.8">Network Failure!
</span><span class="koboSpan" id="kobo.1835.9">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1836.1">There’s not much else to say about the standard exit codes. </span><span class="koboSpan" id="kobo.1836.2">So, let’s say a few words about </span><a id="_idIndexMarker534"/><span class="koboSpan" id="kobo.1837.1">user-defined exit codes.</span></p>
    <h2 id="_idParaDest-171" class="heading 2"><span class="koboSpan" id="kobo.1838.1">User-defined Exit Codes</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.1839.1">You can specify your </span><a id="_idIndexMarker535"/><span class="koboSpan" id="kobo.1840.1">own exit codes simply by specifying a numerical argument for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1841.1">exit</span></code><span class="koboSpan" id="kobo.1842.1">. </span><span class="koboSpan" id="kobo.1842.2">This is handy for whenever you might need to pass some specific exit code to an external program. </span><span class="koboSpan" id="kobo.1842.3">The Nagios network monitoring tool is a </span><a id="_idIndexMarker536"/><span class="koboSpan" id="kobo.1843.1">great example.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1844.1">Nagios is a tool that </span><a id="_idIndexMarker537"/><span class="koboSpan" id="kobo.1845.1">can monitor pretty much every type of device on your network. </span><span class="koboSpan" id="kobo.1845.2">It can monitor various types of servers, workstations, routers, switches, and even printers. </span><span class="koboSpan" id="kobo.1845.3">What makes it so cool is that it’s modular, which means that it works with plug-ins. </span><span class="koboSpan" id="kobo.1845.4">If you need to monitor a particular device and find that there’s no plug-in that will do the job, you can just write your own. </span><span class="koboSpan" id="kobo.1845.5">You can write plug-ins in a variety of programming languages, which includes shell scripting.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1846.1">You can install a Nagios monitoring agent on a server or workstation that you want to monitor, and create a shell script that generates exit codes that Nagios expects to see. </span><span class="koboSpan" id="kobo.1846.2">To understand how it works, check out this code snippet from a larger script:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1847.1">#!/bin/bash
os=$(uname)
quantity=$(cut -f3 -d: /etc/passwd | grep -w 0 | wc -l)
if [ $os == Linux ]; then
        if [ $quantity -gt 1 ]; then
                echo "CRITICAL.  </span><span class="koboSpan" id="kobo.1847.2">There are $quantity accounts with UID 0."
                </span><span class="koboSpan" id="kobo.1847.3">exit 2
        else
                echo "OKAY.  </span><span class="koboSpan" id="kobo.1847.4">There is only one account with UID 0."
                </span><span class="koboSpan" id="kobo.1847.5">exit 1
        fi
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1848.1">This script is looking at the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1849.1">/etc/passwd</span></code><span class="koboSpan" id="kobo.1850.1"> file to see if there is more than one user with a UID of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1851.1">0</span></code><span class="koboSpan" id="kobo.1852.1">. </span><span class="koboSpan" id="kobo.1852.2">That’s important, because UID 0 is what gives a user account root user powers. </span><span class="koboSpan" id="kobo.1852.3">So, on any Linux system, you never want to see more than one user account with UID 0. </span><span class="koboSpan" id="kobo.1852.4">In the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1853.1">if..then</span></code><span class="koboSpan" id="kobo.1854.1"> construct, you see that if the script finds more than one UID 0 </span><a id="_idIndexMarker538"/><span class="koboSpan" id="kobo.1855.1">account, it will generate an exit code of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1856.1">2</span></code><span class="koboSpan" id="kobo.1857.1">. </span><span class="koboSpan" id="kobo.1857.2">Otherwise, it will generate an exit code of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1858.1">1</span></code><span class="koboSpan" id="kobo.1859.1">.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1860.1">This exit code and its </span><a id="_idIndexMarker539"/><span class="koboSpan" id="kobo.1861.1">corresponding </span><code class="inlineCode"><span class="koboSpan" id="kobo.1862.1">echo</span></code><span class="koboSpan" id="kobo.1863.1"> command get passed to the Nagios monitoring agent. </span><span class="koboSpan" id="kobo.1863.2">The monitoring agent will then pass the output from the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1864.1">echo</span></code><span class="koboSpan" id="kobo.1865.1"> command to the Nagios server, which will display the message on the Nagios dashboard. </span><span class="koboSpan" id="kobo.1865.2">(You’ll see the entire script in just a few moments, when you get to the </span><em class="chapterRef"><span class="koboSpan" id="kobo.1866.1">Looking at Some Real-World Examples</span></em><span class="koboSpan" id="kobo.1867.1"> section.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1868.1">That’s about it for exit codes. </span><span class="koboSpan" id="kobo.1868.2">Let’s now take a closer look at </span><code class="inlineCode"><span class="koboSpan" id="kobo.1869.1">echo</span></code><span class="koboSpan" id="kobo.1870.1">.</span></p>
    <h1 id="_idParaDest-172" class="heading 1"><span class="koboSpan" id="kobo.1871.1">More Information About echo</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.1872.1">You’ve already seen the most simple way to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.1873.1">echo</span></code><span class="koboSpan" id="kobo.1874.1">, which is to either display a message on the screen or </span><a id="_idIndexMarker540"/><span class="koboSpan" id="kobo.1875.1">send text into a text file. </span><span class="koboSpan" id="kobo.1875.2">What you haven’t seen yet is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1876.1">echo</span></code><span class="koboSpan" id="kobo.1877.1">'s various formatting options.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1878.1">If you use it with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1879.1">-n</span></code><span class="koboSpan" id="kobo.1880.1"> switch, you’ll prevent it from creating a new line at the end of the text output, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1881.1">[donnie@fedora ~]$ echo -n "The fat cat jumped over the skinny dog."
</span><span class="koboSpan" id="kobo.1881.2">The fat cat jumped over the skinny dog.[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1882.1">Use it with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1883.1">-e</span></code><span class="koboSpan" id="kobo.1884.1"> switch, and you’ll be able to use some backslash options. </span><span class="koboSpan" id="kobo.1884.2">For example, to insert a vertical tab into a line of text, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1885.1">-e</span></code><span class="koboSpan" id="kobo.1886.1"> switch with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1887.1">\v</span></code><span class="koboSpan" id="kobo.1888.1"> option, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1889.1">[donnie@fedora ~]$ echo -e "The fat cat jumped\v over the skinny dog."
</span><span class="koboSpan" id="kobo.1889.2">The fat cat jumped
                   	over the skinny dog.
</span><span class="koboSpan" id="kobo.1889.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1890.1">To insert a horizontal tab, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1891.1">\t</span></code><span class="koboSpan" id="kobo.1892.1"> option, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1893.1">[donnie@fedora ~]$ echo -e "The fat cat jumped\t over the skinny dog."
</span><span class="koboSpan" id="kobo.1893.2">The fat cat jumped	 	over the skinny dog.
</span><span class="koboSpan" id="kobo.1893.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1894.1">If you want to insert a </span><a id="_idIndexMarker541"/><span class="koboSpan" id="kobo.1895.1">backslash into the text, just use two consecutive backslashes, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1896.1">[donnie@fedora ~]$ echo -e "The fat cat jumped over the thin\\skinny dog."
</span><span class="koboSpan" id="kobo.1896.2">The fat cat jumped over the thin\skinny dog.
</span><span class="koboSpan" id="kobo.1896.3">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1897.1">You’re not limited to just echoing text messages. </span><span class="koboSpan" id="kobo.1897.2">You can also use a wildcard character to show a list of files that you have in the current directory, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1898.1">[donnie@fedora ~]$ echo *
1 15827_zip.zip 18.csv 2023-08-01_15-23-31.mp4 2023-08-01_16-26-12.mp4 2023-08-02_13-57-37.mp4 2023-10-25_price.txt 21261.zip 4-2_Building_an_Alpine_Container.bak 4-2_Building_an_Alpine_Container.pptx 46523.zip 48986.zip 50645.zip 54586.zip 70604.zip access_log_parse.sh access_log_parse.txt actorfile_10.txt actorfile_11.txt actorfile_1.txt actorfile_2.txt actorfile_4.txt actorfile_5.txt actorfile_6.txt actorfile_7.txt actorfile_8.txt actorfile_9.txt add_fields.awk add-repos.sh addresses.txt alignment_1.txt alignment_2.txt alma9_default.txt alma9_future.txt alma_link.t
. </span><span class="koboSpan" id="kobo.1898.2">. </span><span class="koboSpan" id="kobo.1898.3">.
</span><span class="koboSpan" id="kobo.1898.4">. </span><span class="koboSpan" id="kobo.1898.5">. </span><span class="koboSpan" id="kobo.1898.6">.
</span><span class="koboSpan" id="kobo.1898.7">donnie@fedora:~$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1899.1">You can also echo a message along with the file list, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1900.1">[donnie@fedora ~]$ echo -e "These are my files:\n" *
These are my files:
 15827_zip.zip 2023-08-01_15-23-31.mp4 2023-08-01_16-26-12.mp4
. </span><span class="koboSpan" id="kobo.1900.2">. </span><span class="koboSpan" id="kobo.1900.3">.
</span><span class="koboSpan" id="kobo.1900.4">. </span><span class="koboSpan" id="kobo.1900.5">. </span><span class="koboSpan" id="kobo.1900.6">.
</span><span class="koboSpan" id="kobo.1900.7">test.txt yad-form.sh zoneinfo.zip
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.1901.1">With a bit </span><a id="_idIndexMarker542"/><span class="koboSpan" id="kobo.1902.1">of imagination, you’ll be able to use these </span><code class="inlineCode"><span class="koboSpan" id="kobo.1903.1">echo</span></code><span class="koboSpan" id="kobo.1904.1"> formatting options to enhance the appearance of your screen output and text documents.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.1905.1">Sadly, as cool as these formatting options for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1906.1">echo</span></code><span class="koboSpan" id="kobo.1907.1"> are, they don’t work well on certain non-</span><code class="inlineCode"><span class="koboSpan" id="kobo.1908.1">bash</span></code><span class="koboSpan" id="kobo.1909.1"> shells, such as </span><code class="inlineCode"><span class="koboSpan" id="kobo.1910.1">dash</span></code><span class="koboSpan" id="kobo.1911.1">. </span><span class="koboSpan" id="kobo.1911.2">In </span><em class="chapterRef"><span class="koboSpan" id="kobo.1912.1">Chapter 19—Shell Script Portability</span></em><span class="koboSpan" id="kobo.1913.1">, I’ll show you how to fix that by using </span><code class="inlineCode"><span class="koboSpan" id="kobo.1914.1">printf</span></code><span class="koboSpan" id="kobo.1915.1"> instead of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1916.1">echo</span></code><span class="koboSpan" id="kobo.1917.1">.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.1918.1">That’s about it for </span><code class="inlineCode"><span class="koboSpan" id="kobo.1919.1">echo</span></code><span class="koboSpan" id="kobo.1920.1">. </span><span class="koboSpan" id="kobo.1920.2">Let’s move on to the real world.</span></p>
    <h1 id="_idParaDest-173" class="heading 1"><span class="koboSpan" id="kobo.1921.1">Looking at Some Real-World Examples</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.1922.1">In this section, I’ll show you some practical, real-life things that you can do with some of the techniques that we’ve covered so far. </span><span class="koboSpan" id="kobo.1922.2">Actually, rather than just showing you, I’ll let you get your hands dirty with some cool hands-on labs.</span></p>
    <h3 id="_idParaDest-174" class="heading 3"><span class="koboSpan" id="kobo.1923.1">Hands-on Lab: Using if..then</span></h3>
    <p class="normal"><span class="koboSpan" id="kobo.1924.1">This is absolutely a</span><a id="_idIndexMarker543"/><span class="koboSpan" id="kobo.1925.1"> real-life example. </span><span class="koboSpan" id="kobo.1925.2">Several years ago, I created this script as a plug-in for the Nagios network monitoring system. </span><span class="koboSpan" id="kobo.1925.3">The scenario was that we wanted to make sure that malicious hackers haven’t added a rogue </span><code class="inlineCode"><span class="koboSpan" id="kobo.1926.1">UID 0</span></code><span class="koboSpan" id="kobo.1927.1"> account to the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1928.1">/etc/passwd</span></code><span class="koboSpan" id="kobo.1929.1"> file on Linux and FreeBSD machines. </span><span class="koboSpan" id="kobo.1929.2">That’s because any account with a UID setting of </span><code class="inlineCode"><span class="koboSpan" id="kobo.1930.1">0</span></code><span class="koboSpan" id="kobo.1931.1"> in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1932.1">passwd</span></code><span class="koboSpan" id="kobo.1933.1"> file has full root privileges, and we don’t want any unauthorized accounts to have root privileges.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1934.1">The problem is that on Linux machines there’s only supposed to be one user account with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1935.1">UID 0</span></code><span class="koboSpan" id="kobo.1936.1">, and on FreeBSD there are two accounts with </span><code class="inlineCode"><span class="koboSpan" id="kobo.1937.1">UID 0</span></code><span class="koboSpan" id="kobo.1938.1">. </span><span class="koboSpan" id="kobo.1938.2">(One </span><code class="inlineCode"><span class="koboSpan" id="kobo.1939.1">UID 0</span></code><span class="koboSpan" id="kobo.1940.1"> account is named </span><code class="inlineCode"><span class="koboSpan" id="kobo.1941.1">toor</span></code><span class="koboSpan" id="kobo.1942.1">, which has </span><code class="inlineCode"><span class="koboSpan" id="kobo.1943.1">bash</span></code><span class="koboSpan" id="kobo.1944.1"> set as the default shell. </span><span class="koboSpan" id="kobo.1944.2">The other </span><code class="inlineCode"><span class="koboSpan" id="kobo.1945.1">UID 0</span></code><span class="koboSpan" id="kobo.1946.1"> account is </span><code class="inlineCode"><span class="koboSpan" id="kobo.1947.1">root</span></code><span class="koboSpan" id="kobo.1948.1">, which has </span><code class="inlineCode"><span class="koboSpan" id="kobo.1949.1">csh</span></code><span class="koboSpan" id="kobo.1950.1"> set as the default shell.) So, we needed a script that will work on both operating systems. </span><span class="koboSpan" id="kobo.1950.2">(Note that you’ll be altering the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1951.1">passwd</span></code><span class="koboSpan" id="kobo.1952.1"> file for this lab, so you’ll want to do this on a virtual machine, and not on a real production machine.) </span></p>
    <p class="normal"><span class="koboSpan" id="kobo.1953.1">Note that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1954.1">exit 1</span></code><span class="koboSpan" id="kobo.1955.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1956.1">exit 2</span></code><span class="koboSpan" id="kobo.1957.1"> status codes that you’ll see are what Nagios expects to see to indicate either </span><code class="inlineCode"><span class="koboSpan" id="kobo.1958.1">OKAY</span></code><span class="koboSpan" id="kobo.1959.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.1960.1">CRITICAL</span></code><span class="koboSpan" id="kobo.1961.1">. </span><span class="koboSpan" id="kobo.1961.2">Also note that you can add more </span><code class="inlineCode"><span class="koboSpan" id="kobo.1962.1">elif</span></code><span class="koboSpan" id="kobo.1963.1"> stanzas if you </span><a id="_idIndexMarker544"/><span class="koboSpan" id="kobo.1964.1">want to check other UNIX or UNIX-like operating systems. </span><span class="koboSpan" id="kobo.1964.2">(In fact, you’ll see that I’ve just now added code to check macOS and OpenIndiana.) With the introduction out of the way, let’s get to the procedure.</span></p>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.1965.1">Unfortunately, the script is too long to reproduce in the book. </span><span class="koboSpan" id="kobo.1965.2">So, go to the Github repository and download the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1966.1">UID-0_check.sh</span></code><span class="koboSpan" id="kobo.1967.1"> script. </span><span class="koboSpan" id="kobo.1967.2">Transfer it to a Linux virtual machine. </span><span class="koboSpan" id="kobo.1967.3">Open the script in your text editor, and examine the code.</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.1968.1">Run the script to see the results. </span><span class="koboSpan" id="kobo.1968.2">You should see this message:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1969.1">[donnie@fedora ~]$ ./UID-0_check.sh
OKAY.  </span><span class="koboSpan" id="kobo.1969.2">There is only one account with UID 0.
</span><span class="koboSpan" id="kobo.1969.3">[donnie@fedora ~]$
</span></code></pre>
      </li>
      <li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.1970.1">WARNING: Again I say, do this on a virtual machine, not on your production workstation.</span></strong></li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.1971.1">On a Linux virtual machine, create another user account, using the appropriate user-creation command for your Linux distro. </span><span class="koboSpan" id="kobo.1971.2">Open the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1972.1">/etc/passwd</span></code><span class="koboSpan" id="kobo.1973.1"> file in your text editor, and change the UID number for the new user to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1974.1">0</span></code><span class="koboSpan" id="kobo.1975.1">.</span></p>
    <p class="normal one"><span class="koboSpan" id="kobo.1976.1">This UID field is the third field in each line of the passwd file. </span><span class="koboSpan" id="kobo.1976.2">For example, you see here that Vicky’s UID is 1001:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1977.1">vicky:x:1001:1001::/home/vicky:/bin/bash
</span></code></pre>
    <p class="normal one"><span class="koboSpan" id="kobo.1978.1">Changing her UID to </span><code class="inlineCode"><span class="koboSpan" id="kobo.1979.1">0</span></code><span class="koboSpan" id="kobo.1980.1"> will make the line look like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1981.1">vicky:x:0:1001::/home/vicky:/bin/bash
</span></code></pre>
    <ol>
      <li class="numberedList" value="4"><span class="koboSpan" id="kobo.1982.1">Save the file and run the script again. </span><span class="koboSpan" id="kobo.1982.2">You should now see a message that looks like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.1983.1">[donnie@fedora ~]$ ./UID-0_check.sh
CRITICAL.  </span><span class="koboSpan" id="kobo.1983.2">There are 2 accounts with UID 0.
</span><span class="koboSpan" id="kobo.1983.3">[donnie@fedora ~]$
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.1984.1">Delete the new user account.</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.1985.1">Create a FreeBSD virtual </span><a id="_idIndexMarker545"/><span class="koboSpan" id="kobo.1986.1">machine and install </span><code class="inlineCode"><span class="koboSpan" id="kobo.1987.1">sudo</span></code><span class="koboSpan" id="kobo.1988.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.1989.1">bash</span></code><span class="koboSpan" id="kobo.1990.1"> as I showed you in the </span><em class="chapterRef"><span class="koboSpan" id="kobo.1991.1">Preface</span></em><span class="koboSpan" id="kobo.1992.1"> chapter. </span><span class="koboSpan" id="kobo.1992.2">Transfer the </span><code class="inlineCode"><span class="koboSpan" id="kobo.1993.1">UID-0_check.sh</span></code><span class="koboSpan" id="kobo.1994.1"> script to it, and repeat Steps 3 through 5. </span><span class="koboSpan" id="kobo.1994.2">This time, you should see that </span><code class="inlineCode"><span class="koboSpan" id="kobo.1995.1">2 accounts</span></code><span class="koboSpan" id="kobo.1996.1"> are </span><code class="inlineCode"><span class="koboSpan" id="kobo.1997.1">OKAY</span></code><span class="koboSpan" id="kobo.1998.1">, and that </span><code class="inlineCode"><span class="koboSpan" id="kobo.1999.1">3 accounts</span></code><span class="koboSpan" id="kobo.2000.1"> are </span><code class="inlineCode"><span class="koboSpan" id="kobo.2001.1">CRITICAL</span></code><span class="koboSpan" id="kobo.2002.1">. </span><span class="koboSpan" id="kobo.2002.2">This will give you a chance to see how the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2003.1">elif [ $os == FreeBSD ]; then</span></code><span class="koboSpan" id="kobo.2004.1"> stanza at the bottom of the script can correctly detect which operating system you’re running, so that it can run the correct code.</span></li>
    </ol>
    <p class="normal"><span class="koboSpan" id="kobo.2005.1">End of lab</span></p>
    <h2 id="_idParaDest-175" class="heading 2"><span class="koboSpan" id="kobo.2006.1">Hands-on Lab – Parsing an Apache Access Log</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.2007.1">In this lab, I’ll show you how much power a one-command shell script can have. </span><span class="koboSpan" id="kobo.2007.2">Building up that one </span><a id="_idIndexMarker546"/><span class="koboSpan" id="kobo.2008.1">command can be a bit tricky though, so I’ll show you how to build it one step at a time, ensuring that each step works properly before continuing to the next step. </span><span class="koboSpan" id="kobo.2008.2">If you’re ready, let’s dig in.</span></p>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.2009.1">Set up a Fedora Server virtual machine with Bridged networking. </span><span class="koboSpan" id="kobo.2009.2">(You’ll need Bridged networking so that you can access the machine from other machines on your network.)</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2010.1">Install and activate the Apache webserver, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2011.1">sudo dnf install httpd
sudo systemctl enable --now httpd
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2012.1">Open Port 80 on the virtual machine’s firewall, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2013.1">sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --reload
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2014.1">From as many other machines on your network as possible, open a web browser and navigate to the virtual machine’s IP address. </span><span class="koboSpan" id="kobo.2014.2">The URL that you enter should look something like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2015.1">http://192.168.0.10
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2016.1">Note that you can access this from either physical machines or other virtual machines that are on the same network. </span><span class="koboSpan" id="kobo.2016.2">Also, note that there’s no need </span><a id="_idIndexMarker547"/><span class="koboSpan" id="kobo.2017.1">to set up your own web page, because the default </span><em class="italic"><span class="koboSpan" id="kobo.2018.1">Fedora Webserver Test Page</span></em><span class="koboSpan" id="kobo.2019.1"> will work fine for your needs.</span></p>
    <ol>
      <li class="numberedList" value="5"><span class="koboSpan" id="kobo.2020.1">View the Apache access log, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2021.1">sudo less /var/log/httpd/access_log
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2022.1">Note how each line begins with the IP address of each machine that accessed this website. </span><span class="koboSpan" id="kobo.2022.2">Here’s an example:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2023.1">192.168.0.25 - - [06/Oct/2023:16:44:15 -0400] "GET /poweredby.png HTTP/1.1" 200 5714 "http://192.168.0.10/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/118.0"
</span></code></pre>
    <ol>
      <li class="numberedList" value="6"><span class="koboSpan" id="kobo.2024.1">You see that the source IP address is in the first field, and that the fields are separated by blank spaces. </span><span class="koboSpan" id="kobo.2024.2">So, one way that we can see just the list of source IP addresses is to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2025.1">cut</span></code><span class="koboSpan" id="kobo.2026.1">, and to specify a blank space as the delimiter to view just the first field. </span><span class="koboSpan" id="kobo.2026.2">The command and its output would look something like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2027.1">[donnie@fedora-server ~]$ sudo cut -d" " -f1 /var/log/httpd/access_log
::1
192.168.0.16
192.168.0.16
192.168.0.27
. </span><span class="koboSpan" id="kobo.2027.2">. </span><span class="koboSpan" id="kobo.2027.3">.
</span><span class="koboSpan" id="kobo.2027.4">. </span><span class="koboSpan" id="kobo.2027.5">. </span><span class="koboSpan" id="kobo.2027.6">.
</span><span class="koboSpan" id="kobo.2027.7">192.168.0.25
192.168.0.25
192.168.0.9
192.168.0.8
192.168.0.8
192.168.0.8
192.168.0.8
[donnie@fedora-server ~]$
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2028.1">With only one exception, you see the list of IPv4 addresses of the machines that accessed this server. </span><span class="koboSpan" id="kobo.2028.2">The one exception is the IPv6 address at the top of the list, which is the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2029.1">localhost</span></code><span class="koboSpan" id="kobo.2030.1"> address of the Fedora Server machine. </span><span class="koboSpan" id="kobo.2030.2">(You likely won’t see this IPv6 address, unless you access the </span><a id="_idIndexMarker548"/><span class="koboSpan" id="kobo.2031.1">page from within the virtual machine itself.)</span></p>
    <ol>
      <li class="numberedList" value="7"><span class="koboSpan" id="kobo.2032.1">So far, so good. </span><span class="koboSpan" id="kobo.2032.2">You’ve successfully isolated the first field. </span><span class="koboSpan" id="kobo.2032.3">Let’s now add the second part, which will sort the output so that the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2033.1">uniq</span></code><span class="koboSpan" id="kobo.2034.1"> filter will work properly in the next step. </span><span class="koboSpan" id="kobo.2034.2">Here’s what that looks like:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2035.1">sudo cut -d" " -f1 /var/log/httpd/access_log | sort
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2036.1">By using </span><code class="inlineCode"><span class="koboSpan" id="kobo.2037.1">sort</span></code><span class="koboSpan" id="kobo.2038.1"> without the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2039.1">-n</span></code><span class="koboSpan" id="kobo.2040.1"> option, the list doesn’t get sorted in proper numerical order. </span><span class="koboSpan" id="kobo.2040.2">But for this step, that doesn’t matter.</span></p>
    <ol>
      <li class="numberedList" value="8"><span class="koboSpan" id="kobo.2041.1">The next step is to eliminate duplicate IP addresses from the output, and to also count how many there are of each in the source file. </span><span class="koboSpan" id="kobo.2041.2">Here’s how that looks:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2042.1">[donnie@fedora-server ~]$ sudo cut -d" " -f1 /var/log/httpd/access_log | sort | uniq -c
      1 ::1
     11 192.168.0.16
      4 192.168.0.25
      4 192.168.0.27
      4 192.168.0.8
      1 192.168.0.9
[donnie@fedora-server ~]$
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2043.1">We’ll now do a reverse numerical sort on the number of times that each IP address</span><a id="_idIndexMarker549"/><span class="koboSpan" id="kobo.2044.1"> occurs, like so:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2045.1">[donnie@fedora-server ~]$ sudo cut -d" " -f1 /var/log/httpd/access_log | sort | uniq -c | sort -nr
     11 192.168.0.16
      4 192.168.0.8
      4 192.168.0.27
      4 192.168.0.25
      1 192.168.0.9
      1 ::1
[donnie@fedora-server ~]$
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2046.1">Now that you know that the command works properly, create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2047.1">ipaddress_count.sh</span></code><span class="koboSpan" id="kobo.2048.1"> script, and make it look like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2049.1">#!/bin/bash
cut -d" " -f1 /var/log/httpd/access_log | sort | uniq -c | sort -nr
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2050.1">Be aware that you’ll need to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2051.1">sudo</span></code><span class="koboSpan" id="kobo.2052.1"> to run this script.</span></p>
    <ol>
      <li class="numberedList" value="11"><span class="koboSpan" id="kobo.2053.1">Finally, let’s fancy things up a bit. </span><span class="koboSpan" id="kobo.2053.2">Add some code to save the results to a text file with a timestamp in its filename. </span><span class="koboSpan" id="kobo.2053.3">It should look like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2054.1">#!/bin/bash
timestamp=$(date +%F)
echo "These addresses have accessed this webserver as of $timestamp." </span><span class="koboSpan" id="kobo.2054.2">&gt; ipaddress_list_$timestamp.txt
cut -d" " -f1 /var/log/httpd/access_log | sort | uniq -c | sort -nr &gt;&gt; ipaddress_list_$timestamp.txt
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2055.1">Of course, there are other available programs that do a more comprehensive job of parsing your webserver log files. </span><span class="koboSpan" id="kobo.2055.2">But, this script is handy for a</span><a id="_idIndexMarker550"/><span class="koboSpan" id="kobo.2056.1"> quick analysis of who is accessing your server.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2057.1">End of lab</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2058.1">Let’s move on to the final lab.</span></p>
    <h2 id="_idParaDest-176" class="heading 2"><span class="koboSpan" id="kobo.2059.1">Hands-on Lab – Beta Testing a Hard Drive</span></h2>
    <p class="normal"><span class="koboSpan" id="kobo.2060.1">The final example involves an experience that I had quite a few years ago. </span><span class="koboSpan" id="kobo.2060.2">That’s when the good folk at Western</span><a id="_idIndexMarker551"/><span class="koboSpan" id="kobo.2061.1"> Digital invited me to participate in a beta test of a new model hard drive. </span><span class="koboSpan" id="kobo.2061.2">All I really had to do was to keep the drive running for the whole four-month test period, and then collect log data from the drive’s BIOS at the end of the test period. </span><span class="koboSpan" id="kobo.2061.3">But, I went a bit beyond that by writing a shell script that automatically collected drive performance data on a daily basis. </span><span class="koboSpan" id="kobo.2061.4">As before, do this on your Fedora Server virtual machine.</span></p>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.2062.1">To collect drive performance data, you’ll need to install a couple of packages, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2063.1">sudo dnf install sysstat smartmontools
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2064.1">Start the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2065.1">sysstat</span></code><span class="koboSpan" id="kobo.2066.1"> service and ensure that it’s active, like this:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2067.1">sudo systemctl start sysstat
systemctl status sysstat
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2068.1">You’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2069.1">sar</span></code><span class="koboSpan" id="kobo.2070.1"> component of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2071.1">sysstat</span></code><span class="koboSpan" id="kobo.2072.1"> package to collect your data. </span><span class="koboSpan" id="kobo.2072.2">But, it will be a few minutes before any </span><code class="inlineCode"><span class="koboSpan" id="kobo.2073.1">sar</span></code><span class="koboSpan" id="kobo.2074.1"> data become available. </span><span class="koboSpan" id="kobo.2074.2">While you’re waiting, generate some hard drive activity by doing a system update, like so:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2075.1">sudo dnf -y upgrade
</span></code></pre>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2076.1">View the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2077.1">sar</span></code><span class="koboSpan" id="kobo.2078.1"> man page and take note of the different types of data that can be collected with the various </span><code class="inlineCode"><span class="koboSpan" id="kobo.2079.1">sar</span></code><span class="koboSpan" id="kobo.2080.1"> option switches. </span><span class="koboSpan" id="kobo.2080.2">You’ll be seeing several of those options in the shell script.</span></li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2081.1">This is another one of those scripts that’s too large to reproduce in the book. </span><span class="koboSpan" id="kobo.2081.2">So, download the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2082.1">hard_drive.sh</span></code><span class="koboSpan" id="kobo.2083.1"> script from the Github repository. </span><span class="koboSpan" id="kobo.2083.2">Open it in your text editor and study it. </span><span class="koboSpan" id="kobo.2083.3">I’ve covered all of the concepts that I’ve used in this script, so you should be able to figure out what it’s doing.</span></p>
    <ol>
      <li class="numberedList" value="5"><span class="koboSpan" id="kobo.2084.1">The last command</span><a id="_idIndexMarker552"/><span class="koboSpan" id="kobo.2085.1"> in the script is a </span><code class="inlineCode"><span class="koboSpan" id="kobo.2086.1">smartctl</span></code><span class="koboSpan" id="kobo.2087.1"> command, which requires </span><code class="inlineCode"><span class="koboSpan" id="kobo.2088.1">sudo</span></code><span class="koboSpan" id="kobo.2089.1"> privileges. </span><span class="koboSpan" id="kobo.2089.2">So, you’ll need to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.2090.1">sudo</span></code><span class="koboSpan" id="kobo.2091.1"> to run the script, like so:
        </span><pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.2092.1">sudo ./hard_drive.sh
</span></code></pre>
      </li>
    </ol>
    <p class="normal one"><span class="koboSpan" id="kobo.2093.1">Be patient, because this takes a few minutes to run. </span><span class="koboSpan" id="kobo.2093.2">Also, be aware that the virtual drive of your virtual machine isn’t </span><code class="inlineCode"><span class="koboSpan" id="kobo.2094.1">smartmontools</span></code><span class="koboSpan" id="kobo.2095.1">-aware, which means that you’ll see some warning messages in your report.</span></p>
    <ol>
      <li class="numberedList" value="6"><span class="koboSpan" id="kobo.2096.1">When the script has finished running, look at the generated report in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2097.1">Drive_Reports</span></code><span class="koboSpan" id="kobo.2098.1"> directory.</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2099.1">Feel free to run this script on your Linux host machine. </span><span class="koboSpan" id="kobo.2099.2">It should run on most any Linux distro, as long as you have the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2100.1">sysstat</span></code><span class="koboSpan" id="kobo.2101.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.2102.1">smartmontools</span></code><span class="koboSpan" id="kobo.2103.1"> packages installed, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.2104.1">sysstat</span></code><span class="koboSpan" id="kobo.2105.1"> service is running.</span></li>
    </ol>
    <p class="normal"><span class="koboSpan" id="kobo.2106.1">End of Lab</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2107.1">All right, that wraps it up for this chapter. </span><span class="koboSpan" id="kobo.2107.2">Let’s summarize and move on.</span></p>
    <h1 id="_idParaDest-177" class="heading 1"><span class="koboSpan" id="kobo.2108.1">Summary</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.2109.1">We covered an incredible amount of ground in this chapter, and I hope that I haven’t overwhelmed you. </span><span class="koboSpan" id="kobo.2109.2">What I wanted to do was to provide you with a comprehensive overview of the concepts and techniques that you would use to build a usable shell script. </span><span class="koboSpan" id="kobo.2109.3">We started with some techniques that are unique to shell scripting, and followed up with techniques that are common to most all programming languages.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2110.1">And really, that’s one of the coolest things about learning shell scripting. </span><span class="koboSpan" id="kobo.2110.2">It’s much easier to learn than higher-level languages such as C, Java, or Rust, but it’s still extremely useful. </span><span class="koboSpan" id="kobo.2110.3">And, as you learn shell scripting, you also learn about the constructs and concepts that also apply to the higher-level languages. </span><span class="koboSpan" id="kobo.2110.4">So, if you ever plan to learn another programming language, learning shell scripting first can help you prepare for it.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2111.1">But, even with all that we’ve covered, we’re not done yet. </span><span class="koboSpan" id="kobo.2111.2">In the next chapter, I’ll present a few more ways to filter and manipulate text. </span><span class="koboSpan" id="kobo.2111.3">I’ll see you there.</span></p>
    <h1 id="_idParaDest-178" class="heading 1"><span class="koboSpan" id="kobo.2112.1">Questions</span></h1>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.2113.1">Which of the following snippets represents the </span><em class="italic"><span class="koboSpan" id="kobo.2114.1">most preferred</span></em><span class="koboSpan" id="kobo.2115.1"> way to perform command substitution?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.2116.1">`command`</span></code></li>
          <li class="alphabeticList level 2"> <code class="inlineCode"><span class="koboSpan" id="kobo.2117.1">%(command)</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2118.1">"command"</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2119.1">$(command)</span></code></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2120.1">You need to create an array of names. </span><span class="koboSpan" id="kobo.2120.2">How would you do that?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.2121.1">set array=names</span></code>
            <pre class="programlisting gen"><code class="hljs-con"><code class="inlineCode"><span class="koboSpan" id="kobo.2122.1">names=( Vicky Frank Cleopatra Katelyn )</span></code>
</code></pre>
          </li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2123.1">array=names</span></code>
            <pre class="programlisting gen"><code class="hljs-con"><code class="inlineCode"><span class="koboSpan" id="kobo.2124.1">names=( Vicky Frank Cleopatra Katelyn )</span></code>
</code></pre>
          </li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2125.1">array names</span></code>
            <pre class="programlisting gen"><code class="hljs-con"><code class="inlineCode"><span class="koboSpan" id="kobo.2126.1">names=( Vicky Frank Cleopatra Katelyn )</span></code>
</code></pre>
          </li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2127.1">declare names</span></code>
            <pre class="programlisting gen"><code class="hljs-con"><code class="inlineCode"><span class="koboSpan" id="kobo.2128.1">names=( Vicky Frank Cleopatra Katelyn )</span></code>
</code></pre>
          </li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2129.1">declare -a names</span></code>
            <pre class="programlisting gen"><code class="hljs-con"><code class="inlineCode"><span class="koboSpan" id="kobo.2130.1">names=( Vicky Frank Cleopatra Katelyn )</span></code>
</code></pre>
          </li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2131.1">How would you view the exit code of a command that you just ran?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.2132.1">echo $#</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2133.1">echo $?</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2134.1">echo $$</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2135.1">echo $!</span></code></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2136.1">You want to create a loop that will read a list of names, and then echo the names into another text file. </span><span class="koboSpan" id="kobo.2136.2">But, you want to skip two of the names. </span><span class="koboSpan" id="kobo.2136.3">Which of the following commands would make your script do that?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.2137.1">break</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2138.1">skip</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2139.1">continue</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2140.1">stop</span></code></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2141.1">You want to compare two numerical values to see if they’re equal. </span><span class="koboSpan" id="kobo.2141.2">which of the following operators would you use?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.2142.1">=</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2143.1">-eq</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2144.1">==</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.2145.1">-ne</span></code></li>
        </ol>
      </li>
    </ol>
    <h1 id="_idParaDest-179" class="heading 1"><span class="koboSpan" id="kobo.2146.1">Further Reading</span></h1>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.2147.1">What is the Bash Shebang and How to Use It: </span><a href="https://www.rosehosting.com/blog/what-is-the-bash-shebang/"><span class="url"><span class="koboSpan" id="kobo.2148.1">https://www.rosehosting.com/blog/what-is-the-bash-shebang/</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2149.1">An Introduction to Parameter Expansion in bash: </span><a href="https://opensource.com/article/17/6/bash-parameter-expansion"><span class="url"><span class="koboSpan" id="kobo.2150.1">https://opensource.com/article/17/6/bash-parameter-expansion</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2151.1">Shell Parameter Expansion (Bash Reference Manual): </span><a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html"><span class="url"><span class="koboSpan" id="kobo.2152.1">https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2153.1">Introduction to if: </span><a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html"><span class="url"><span class="koboSpan" id="kobo.2154.1">https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2155.1">Bash while Loop: </span><a href="https://linuxize.com/post/bash-while-loop/"><span class="url"><span class="koboSpan" id="kobo.2156.1">https://linuxize.com/post/bash-while-loop/</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2157.1">How to Find Most Used Disk Space Directories and Files in Linux: </span><a href="https://www.tecmint.com/find-top-large-directories-and-files-sizes-in-linux/"><span class="url"><span class="koboSpan" id="kobo.2158.1">https://www.tecmint.com/find-top-large-directories-and-files-sizes-in-linux/</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2159.1">Standard Exit Status Codes in Linux: </span><a href="https://www.baeldung.com/linux/status-codes"><span class="url"><span class="koboSpan" id="kobo.2160.1">https://www.baeldung.com/linux/status-codes</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.2161.1">How to Use the sar Command on Linux: </span><a href="https://www.howtogeek.com/793513/how-to-use-the-sar-command-on-linux/"><span class="url"><span class="koboSpan" id="kobo.2162.1">https://www.howtogeek.com/793513/how-to-use-the-sar-command-on-linux/</span></span></a></li>
    </ul>
    <h1 id="_idParaDest-180" class="heading 1"><span class="koboSpan" id="kobo.2163.1">Answers</span></h1>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.2164.1">d</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2165.1">e</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2166.1">b</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2167.1">c</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.2168.1">b</span></li>
    </ol>
    <h1 id="_idParaDest-181" class="heading 1"><span class="koboSpan" id="kobo.2169.1">Join our community on Discord!</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.2170.1">Read this book alongside other users, Linux experts, and the author himself. </span></p>
    <p class="normal"><span class="koboSpan" id="kobo.2171.1">Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. </span><span class="koboSpan" id="kobo.2171.2">Scan the QR code or visit the link to join the community.</span></p>
    <p class="normal"><a href="https://packt.link/SecNet"><span class="url"><span class="koboSpan" id="kobo.2172.1">https://packt.link/SecNet</span></span></a></p>
    <p class="normal"><span class="koboSpan" id="kobo.2173.1"><img src="../Images/QR_Code10596186092701843.png" alt=""/></span></p>
  </div>
</body></html>