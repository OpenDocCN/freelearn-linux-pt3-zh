<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer406">
<p class="Chapter-Title" id="_idParaDest-332" lang="en-US" xml:lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">36. </span></span><a id="_idTextAnchor525"/><span class="koboSpan" id="kobo.2.1">Ubuntu 23.04 System and Process Monitoring</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.3.1">An essential part of running and administering an Ubuntu system involves monitoring the overall system health regarding memory, swap, storage, and processor usage. </span><span class="koboSpan" id="kobo.3.2">This includes knowing how to inspect and manage the system and user processes running in the background. </span><span class="koboSpan" id="kobo.3.3">This chapter will outline some tools and utilities that can be used to monitor system resources and processes on an Ubuntu system.</span></p>
<p class="Heading-1-1" id="_idParaDest-333" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.4.1">36.1 </span></span><a id="_idTextAnchor526"/><span class="koboSpan" id="kobo.5.1">Managing Processes</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.6.1">Even when an Ubuntu system appears idle, many </span><a id="_idIndexMarker824"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.7.1">system processes</span></span><span class="koboSpan" id="kobo.8.1"> will run silently in the background to keep the operating system functioning. </span><span class="koboSpan" id="kobo.8.2">For example, when you execute a command or launch an app, </span><a id="_idIndexMarker825"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.9.1">user processes</span></span><span class="koboSpan" id="kobo.10.1"> are started, running until the associated task is completed.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.11.1">To obtain a list of active user processes you are currently running within the context of a single terminal or command-prompt session, use the </span><a id="_idIndexMarker826"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.12.1">ps</span></span><span class="koboSpan" id="kobo.13.1"> command as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.14.1">$ ps</span></p>
<p class="Code"><span class="koboSpan" id="kobo.15.1">  PID TTY          TIME CMD</span></p>
<p class="Code"><span class="koboSpan" id="kobo.16.1">10395 pts/1    00:00:00 bash</span></p>
<p class="Code"><span class="koboSpan" id="kobo.17.1">13218 pts/1    00:00:00 ps</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.18.1">The output from the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.19.1">ps</span></span><span class="koboSpan" id="kobo.20.1"> command shows that two user processes are running within the context of the current terminal window or command prompt session, the bash shell into which the command was entered and the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.21.1">ps</span></span><span class="koboSpan" id="kobo.22.1"> command itself. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.23.1">To list all active processes running for the current user, use the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.24.1">ps</span></span><span class="koboSpan" id="kobo.25.1"> command with the </span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.26.1">-a flag. </span><span class="koboSpan" id="kobo.26.2">This command will list all running processes that are associated with the user regardless of where they are running (for example, processes running in other terminal windows):</span></p>
<p class="Code"><span class="koboSpan" id="kobo.27.1">$ ps -a</span></p>
<p class="Code"><span class="koboSpan" id="kobo.28.1">    PID TTY          TIME CMD</span></p>
<p class="Code"><span class="koboSpan" id="kobo.29.1">   5442 tty2     00:00:00 gnome-session-b</span></p>
<p class="Code"><span class="koboSpan" id="kobo.30.1">   6350 pts/0    00:00:00 sudo</span></p>
<p class="Code"><span class="koboSpan" id="kobo.31.1">   6354 pts/0    00:00:00 su</span></p>
<p class="Code"><span class="koboSpan" id="kobo.32.1">   6355 pts/0    00:00:00 bash</span></p>
<p class="Code"><span class="koboSpan" id="kobo.33.1">   9849 pts/2    00:00:00 nano</span></p>
<p class="Code"><span class="koboSpan" id="kobo.34.1">   9850 pts/1    00:00:00 ps</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.35.1">As shown in the above output, the user is running processes related to the GNOME desktop, the shell session, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.36.1">nano</span></span><span class="koboSpan" id="kobo.37.1"> text editor, and the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.38.1">ps</span></span><span class="koboSpan" id="kobo.39.1"> command. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.40.1">To list the processes for a specific user, run </span><a id="_idIndexMarker828"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.41.1">ps</span></span><span class="koboSpan" id="kobo.42.1"> with the -u flag followed by the user name:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.43.1"># ps -u john</span></p>
<p class="Code"><span class="koboSpan" id="kobo.44.1">  PID TTY          TIME CMD</span></p>
<p class="Code"><span class="koboSpan" id="kobo.45.1">  914 ?        </span><span class="koboSpan" id="kobo.45.2">00:00:00 systemd</span></p>
<p class="Code"><span class="koboSpan" id="kobo.46.1">  915 ?        </span><span class="koboSpan" id="kobo.46.2">00:00:00 (sd-pam)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.47.1">  970 ?        </span><span class="koboSpan" id="kobo.47.2">00:00:00 gnome-keyring-d</span></p>
<p class="Code"><span class="koboSpan" id="kobo.48.1">  974 tty1     00:00:00 gdm-x-session</span></p>
<p class="Code"><span class="koboSpan" id="kobo.49.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.50.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.51.1">Note that each process is assigned a unique process ID which can be used to stop the process by sending it a termination (TERM) signal via the </span><a id="_idIndexMarker829"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.52.1">kill</span></span><span class="koboSpan" id="kobo.53.1"> command. </span><span class="koboSpan" id="kobo.53.2">For example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.54.1">$ kill 13217</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.55.1">The advantage of ending a process with the </span><a id="_idIndexMarker830"/><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.56.1">TERM signal is that it allows the process to exit gracefully, potentially saving any data that might otherwise be lost. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.57.1">If the standard termination signal does not terminate the process, repeat the </span><a id="_idIndexMarker832"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.58.1">kill</span></span><span class="koboSpan" id="kobo.59.1"> command with the -9 option. </span><span class="koboSpan" id="kobo.59.2">This command sends a KILL signal which should cause even frozen processes to exit but does not give the process a chance to exit gracefully, possibly resulting in data loss:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.60.1">$ kill -9 13217</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.61.1">To list all of the processes running on a system (including all user and system processes), execute the following command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.62.1">$ ps -ax</span></p>
<p class="Code"><span class="koboSpan" id="kobo.63.1">    PID TTY      STAT   TIME COMMAND</span></p>
<p class="Code"><span class="koboSpan" id="kobo.64.1">      1 ?        </span><span class="koboSpan" id="kobo.64.2">Ss     0:22 /usr/lib/systemd/systemd rhgb --switched-root </span></p>
<p class="Code"><span class="koboSpan" id="kobo.65.1">      2 ?        </span><span class="koboSpan" id="kobo.65.2">S      0:00 [kthreadd]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.66.1">      3 ?        </span><span class="koboSpan" id="kobo.66.2">I&lt;     0:00 [rcu_gp]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.67.1">      4 ?        </span><span class="koboSpan" id="kobo.67.2">I&lt;     0:00 [rcu_par_gp]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.68.1">      5 ?        </span><span class="koboSpan" id="kobo.68.2">I&lt;     0:00 [netns]</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.69.1">To list all processes and include information about process ownership, CPU, and memory use, execute the </span><a id="_idIndexMarker833"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.70.1">ps</span></span><span class="koboSpan" id="kobo.71.1"> command with the -aux option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.72.1">$ ps -aux</span></p>
<p class="Code"><span class="koboSpan" id="kobo.73.1">USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span></p>
<p class="Code"><span class="koboSpan" id="kobo.74.1">root           2  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.74.2">S    09:59   0:00 [kthreadd]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.75.1">root           3  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.75.2">I&lt;   09:59   0:00 [rcu_gp]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.76.1">root           4  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.76.2">I&lt;   09:59   0:00 [rcu_par_gp]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.77.1">root           5  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.77.2">I&lt;   09:59   0:00 [netns]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.78.1">root           7  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.78.2">I&lt;   09:59   0:00 [kworker/0:0H-events_highpri]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.79.1">root           9  0.0  0.0      0     0 ?        </span><span class="koboSpan" id="kobo.79.2">I&lt;   09:59   0:00 [kworker/0:1H-events_highpri]</span></p>
<p class="Code"><span class="koboSpan" id="kobo.80.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.81.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.82.1">demo        9788  0.1  1.4 763248 50480 ?        </span><span class="koboSpan" id="kobo.82.2">Ssl  15:05   0:00 /usr/libexec/gnome-terminal-serv</span></p>
<p class="Code"><span class="koboSpan" id="kobo.83.1">demo        9814  0.0  0.1 224108  5664 pts/2    Ss   15:05   0:00 bash</span></p>
<p class="Code"><span class="koboSpan" id="kobo.84.1">demo        9849  0.0  0.0 222412  3588 pts/2    S+   15:06   0:00 nano</span></p>
<p class="Code"><span class="koboSpan" id="kobo.85.1">demo        9873  0.0  0.1 233416  6280 pts/1    R+   15:08   0:00 ps -aux</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.86.1">A Linux process can start its own sub-processes (referred to as </span><a id="_idIndexMarker834"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.87.1">spawning</span></span><span class="koboSpan" id="kobo.88.1">), resulting in a hierarchical parent-child relationship between processes. </span><span class="koboSpan" id="kobo.88.2">To view the process tree, use the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.89.1">ps</span></span><span class="koboSpan" id="kobo.90.1"> command and include the -H option. </span><span class="koboSpan" id="kobo.90.2">Below is part of the tree output for a </span><a id="_idIndexMarker835"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.91.1">ps -aH</span></span><span class="koboSpan" id="kobo.92.1"> command execution:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.93.1">$ ps -aH</span></p>
<p class="Code"><span class="koboSpan" id="kobo.94.1">    PID TTY          TIME CMD</span></p>
<p class="Code"><span class="koboSpan" id="kobo.95.1">  10036 pts/3    00:00:00 ps</span></p>
<p class="Code"><span class="koboSpan" id="kobo.96.1">   6350 pts/0    00:00:00 sudo</span></p>
<p class="Code"><span class="koboSpan" id="kobo.97.1">   6354 pts/0    00:00:00	  su</span></p>
<p class="Code"><span class="koboSpan" id="kobo.98.1">   6355 pts/0    00:00:00	    bash</span></p>
<p class="Code"><span class="koboSpan" id="kobo.99.1">   5442 tty2     00:00:00 gnome-session-b</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.100.1">Process information may also be viewed via the </span><a id="_idIndexMarker836"/><span class="koboSpan" id="kobo.101.1">System Monitor tool from the GNOME desktop. </span><span class="koboSpan" id="kobo.101.2">This tool can either be launched by searching for “System Monitor” within the desktop environment or from the command line as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.102.1">$ </span><a id="_idIndexMarker837"/><span class="koboSpan" id="kobo.103.1">gnome-system-monitor</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.104.1">Once the System Monitor has launched, select the Processes button located in the toolbar to list the processes running on the system, as shown in </span><a href="System_and_Process_Monitoring.xhtml#_idTextAnchor527"><span class="koboSpan" id="kobo.105.1">Figure 36-1</span></a><span class="koboSpan" id="kobo.106.1"> below:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.107.1"><img alt="" class="_idGenObjectAttribute-1" src="image/ubuntu_system_monitor.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.108.1">Figure 36-1</span></span><a id="_idTextAnchor527"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">To change the processes listed (for example, to list all processes or just your own processes), use the menu as illustrated in </span><a href="System_and_Process_Monitoring.xhtml#_idTextAnchor528"><span class="koboSpan" id="kobo.110.1">Figure 36-2</span></a><span class="koboSpan" id="kobo.111.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.112.1"><img alt="" class="_idGenObjectAttribute-2" src="image/ubuntu_system_monitor_menu.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.113.1">Figure 36-2</span></span><a id="_idTextAnchor528"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.114.1">To filter the list of processes, click on the search button in the title bar and enter the process name into the search field:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.115.1"><img alt="" class="_idGenObjectAttribute-3" src="image/ubuntu_system-monitor_search.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.116.1">Figure 36-3</span></span><a id="_idTextAnchor529"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.117.1">To display additional information about a specific process, select it from the list and click on the button located in the bottom right-hand corner (marked A in </span><a href="System_and_Process_Monitoring.xhtml#_idTextAnchor530"><span class="koboSpan" id="kobo.118.1">Figure 36-4</span></a><span class="koboSpan" id="kobo.119.1">) of the dialog:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.120.1"><img alt="" class="_idGenObjectAttribute-4" src="image/ubuntu_system_monitor_details.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.121.1">Figure 36-4</span></span><a id="_idTextAnchor530"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.122.1">A dialog similar to that marked B in the above figure will appear when the button is clicked. </span><span class="koboSpan" id="kobo.122.2">Select a process from the list and click the End Process button (C) to terminate it.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.123.1">To monitor CPU, memory, swap, and network usage, click on the Resources button in the title bar to display the screen shown in </span><a href="System_and_Process_Monitoring.xhtml#_idTextAnchor531"><span class="koboSpan" id="kobo.124.1">Figure 36-5</span></a><span class="koboSpan" id="kobo.125.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.126.1"><img alt="" class="_idGenObjectAttribute-5" src="image/ubuntu_system_monitor_resources.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.127.1">Figure 36-5</span></span><a id="_idTextAnchor531"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.128.1">Similarly, a summary of storage space used on the system can be viewed by selecting the File Systems toolbar button:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.129.1"><img alt="" class="_idGenObjectAttribute-6" src="image/ubuntu_system_monitor_filesystems.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.130.1">Figure 36-6</span></span><a id="_idTextAnchor532"/></p>
<p class="Heading-1-1" id="_idParaDest-334" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.131.1">36.2 </span></span><a id="_idTextAnchor533"/><span class="koboSpan" id="kobo.132.1">Real-time System Monitoring with </span><a id="_idIndexMarker838"/><span class="koboSpan" id="kobo.133.1">top</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.134.1">As the chapter </span><a href=""><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.135.1">“An Overview of the  Cockpit Web Interface”</span></span></a><span class="koboSpan" id="kobo.136.1"> outlined, the Cockpit web interface can perform basic system monitoring. </span><span class="koboSpan" id="kobo.136.2">The previous section also explained how the GNOME System Monitor tool could be used to monitor processes and system resources. </span><span class="koboSpan" id="kobo.136.3">This chapter also explored how the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.137.1">ps</span></span><span class="koboSpan" id="kobo.138.1"> command can provide a snapshot of the processes running on an Ubuntu system. </span><span class="koboSpan" id="kobo.138.2">However, the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.139.1">ps</span></span><span class="koboSpan" id="kobo.140.1"> command does not provide a real-time view of the processes and resource usage on the system. </span><span class="koboSpan" id="kobo.140.2">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.141.1">top</span></span><span class="koboSpan" id="kobo.142.1"> command is an ideal tool for real-time monitoring of system resources and processes from the command prompt. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.143.1">When running, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.144.1">top</span></span><span class="koboSpan" id="kobo.145.1"> will list the processes running on the system ranked by system resource usage (with the most demanding process in the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.146.1">top</span></span><span class="koboSpan" id="kobo.147.1"> position). </span><span class="koboSpan" id="kobo.147.2">The upper section of the screen displays memory and swap usage information together with CPU data for all CPU cores. </span><span class="koboSpan" id="kobo.147.3">All of this output is constantly updated, allowing the system to be monitored in real-time:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.148.1"><img alt="" class="_idGenObjectAttribute-7" src="image/top_running.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.149.1">Figure 36-7</span></span><a id="_idTextAnchor534"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.150.1">To limit the information displayed to the processes belonging to a specific user, start</span><a id="_idIndexMarker839"/> <span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.151.1">top</span></span><span class="koboSpan" id="kobo.152.1"> with the -u option followed by the user name:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.153.1">$ top -u john</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.154.1">For a complete listing of the features available in </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.155.1">top</span></span><span class="koboSpan" id="kobo.156.1">, press the keyboard ‘h’ key or refer to the man page:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.157.1">$ man top</span></p>
<p class="Heading-1-1" id="_idParaDest-335" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.158.1">36.3 </span></span><a id="_idTextAnchor535"/><span class="koboSpan" id="kobo.159.1">Command-Line Disk and Swap Space Monitoring</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.160.1">Disk space can be monitored from within Cockpit and using the GNOME System Monitor. </span><span class="koboSpan" id="kobo.160.2">To identify </span><a id="_idIndexMarker840"/><span class="koboSpan" id="kobo.161.1">disk usage from the command line, however, the </span><a id="_idIndexMarker841"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.162.1">df</span></span><span class="koboSpan" id="kobo.163.1"> command provides a helpful and quick overview:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.164.1">To review current swap space and memory usage, run the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.165.1">free</span></span><span class="koboSpan" id="kobo.166.1"> command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.167.1"># free</span></p>
<p class="Code"><span class="koboSpan" id="kobo.168.1">              total        used        free      shared  buff/cache   available</span></p>
<p class="Code"><span class="koboSpan" id="kobo.169.1">Mem:        3823720      879916     1561108      226220     1382696     2476300</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.170.1">To continuously monitor memory and swap levels, use the </span><a id="_idIndexMarker842"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.171.1">free</span></span><span class="koboSpan" id="kobo.172.1"> command with the -s option, specifying the delay in seconds between each update (keeping in mind that the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.173.1">top</span></span><span class="koboSpan" id="kobo.174.1"> tool may provide a better way to view this data in real-time):</span></p>
<p class="Code"><span class="koboSpan" id="kobo.175.1">$ free -s 1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.176.1">Mem:        3823720      879472     1561532      226220     1382716     2476744</span></p>
<p class="Code"><span class="koboSpan" id="kobo.177.1">Swap:       2097148           0     2097148</span></p>
<p class="Code"><span class="koboSpan" id="kobo.178.1">              total        used        free      shared  buff/cache   available</span></p>
<p class="Code"><span class="koboSpan" id="kobo.179.1">Mem:        3823720      879140     1559940      228144     1384640     2475152</span></p>
<p class="Code"><span class="koboSpan" id="kobo.180.1">Swap:       2097148           0     2097148</span></p>
<p class="Code"><span class="koboSpan" id="kobo.181.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.182.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.183.1">To monitor disk I/O from the command line, consider using the </span><a id="_idIndexMarker843"/><a id="_idIndexMarker844"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.184.1">iotop</span></span><span class="koboSpan" id="kobo.185.1"> command, which can be installed as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.186.1"># apt install iotop</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.187.1">Once installed and executed (</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.188.1">iotop</span></span><span class="koboSpan" id="kobo.189.1"> must be run with system administrator privileges), the tool will display a real-time list of </span><a id="_idIndexMarker845"/><span class="koboSpan" id="kobo.190.1">disk I/O on a per-process basis:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.191.1"><img alt="" class="_idGenObjectAttribute-8" src="image/iotop_running.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.192.1">Figure 36-8</span></span><a id="_idTextAnchor536"/></p>
<p class="Heading-1-1" id="_idParaDest-336" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.193.1">36.4 </span></span><a id="_idTextAnchor537"/><span class="koboSpan" id="kobo.194.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.195.1">Even a system that appears to be doing nothing will have many system processes running in the background. </span><span class="koboSpan" id="kobo.195.2">Activities performed by users on the system will result in additional processes being started. </span><span class="koboSpan" id="kobo.195.3">Processes can also spawn their own child processes. </span><span class="koboSpan" id="kobo.195.4">Each process will use some system resources, including memory, swap space, processor cycles, disk storage, and network bandwidth. </span><span class="koboSpan" id="kobo.195.5">This chapter has explored a set of tools that can be used to monitor both process and system resources on a running system and, when necessary, kill errant processes that may be impacting the performance of a system.</span></p>
</div>
</body></html>