<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer206">
<p class="Chapter-Title" id="_idParaDest-103" lang="en-US" xml:lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">11. </span></span><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.2.1">Ubuntu Software Package Management and Updates</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.3.1">It is highly unlikely that a newly installed Ubuntu system will contain all of the software packages necessary to perform the tasks for which it is intended. </span><span class="koboSpan" id="kobo.3.2">Even once all the required software has been installed, it is almost certain that newer versions of many of those packages will be released during the lifespan of the system. </span><span class="koboSpan" id="kobo.3.3">In some cases, you will need to ensure that these latest package releases are installed on the system so that bugs and security vulnerabilities are fixed.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.4.1">This chapter introduces the basic concepts of software management on Ubuntu, explains how these issues are addressed, and explores the concepts of repositories and software packages while exploring how to list, install and remove the software packages that make up a functioning Ubuntu system.</span></p>
<p class="Heading-1-1" id="_idParaDest-104" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.5.1">11.1 </span></span><a id="_idTextAnchor202"/><a id="_idIndexMarker205"/><span class="koboSpan" id="kobo.6.1">Repositories</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.7.1">Linux is essentially comprised of a set of base packages that provide the core functionality of the operating system together with a range of other packages and modules that add functionality and features on top of the base operating system.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.8.1">When Ubuntu is first installed, a number of different packages will be installed depending on the software options selected during the installation phase. </span><span class="koboSpan" id="kobo.8.2">Once the system is up and running, however, additional software can be installed as needed. </span><span class="koboSpan" id="kobo.8.3">Typically, all software that is part of Ubuntu (in other words, software that is not provided by a third-party vendor) is downloaded and installed on the system using the </span><a id="_idIndexMarker206"/><span class="koboSpan" id="kobo.9.1">Advanced Package Tool (</span><a id="_idIndexMarker207"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.10.1">apt</span></span><span class="koboSpan" id="kobo.11.1">) command. </span><span class="koboSpan" id="kobo.11.2">As we have seen in earlier chapters, this typically consists of a command similar to the following being issued at the command prompt:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.12.1"># apt install apache2</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.13.1">When such a command is issued, the requested software is downloaded from a remote </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.14.1">repository</span></span><span class="koboSpan" id="kobo.15.1"> and installed on the local system. </span><span class="koboSpan" id="kobo.15.2">By default, Ubuntu is configured to download software from a number of different repositories: </span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.16.1">•</span></span><a id="_idIndexMarker208"/><a id="_idIndexMarker209"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.17.1">main</span></span><span class="koboSpan" id="kobo.18.1"> - Contains the core set of packages that are officially supported, tested and updated by Ubuntu.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.19.1">•</span></span><a id="_idIndexMarker210"/><a id="_idIndexMarker211"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.20.1">restricted</span></span><span class="koboSpan" id="kobo.21.1"> - Proprietary drivers for hardware devices for which no open source equivalent exists.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.22.1">•</span></span><a id="_idIndexMarker212"/><a id="_idIndexMarker213"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.23.1">universe</span></span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.24.1"> - </span></span><span class="koboSpan" id="kobo.25.1">Contains packages that are not officially supported by the Ubuntu team at Canonical. </span><span class="koboSpan" id="kobo.25.2">These packages are, however, maintained by the Ubuntu community and include packages not available within the main repository. </span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.26.1">•</span></span><a id="_idIndexMarker214"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.27.1">multiverse</span></span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.28.1"> - </span></span><span class="koboSpan" id="kobo.29.1">Packages that may not conform to the open-source licensing terms under which Ubuntu is released due to copyright or other legal issues.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="My-Italic CharOverride-1"><a id="_idIndexMarker215"/><a id="_idIndexMarker216"/></span><span class="koboSpan" id="kobo.30.1">The list of currently enabled repositories on an Ubuntu system is contained within the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.31.1">/etc/apt/</span></span><span class="My-Italic CharOverride-1"><a id="_idIndexMarker217"/></span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.32.1">sources.list</span></span><span class="koboSpan" id="kobo.33.1"> file which can be loaded into an editor to be viewed and modified. </span><span class="koboSpan" id="kobo.33.2">The file may be manually loaded into an editor, or edited using a choice of available editors using the following command</span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.34.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.35.1"># apt edit-sources</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.36.1">The first few lines of this file usually reference the main and restricted repositories, for example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.37.1">deb http://ports.ubuntu.com/ubuntu-ports/ jammy main restricted</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.38.1">In the above example the list is configured to allow packages to be downloaded from the main and restricted repositories. </span><span class="koboSpan" id="kobo.38.2">Entries for the universe and multiverse repositories will also be included in the file:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.39.1">## N.B. </span><span class="koboSpan" id="kobo.39.2">software from this repository may not have been tested as</span></p>
<p class="Code"><span class="koboSpan" id="kobo.40.1">## extensively as that contained in the main release, although it includes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.41.1">## newer versions of some applications which may provide useful features.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.42.1">## Also, please note that software in backports WILL NOT receive any review</span></p>
<p class="Code"><span class="koboSpan" id="kobo.43.1">## or updates from the Ubuntu security team.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.44.1">deb http://us.archive.ubuntu.com/ubuntu/ lunar-backports main restricted universe multiverse</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.45.1">To disable a </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.46.1">repository so that it will no longer be used to download packages, simply comment out the line by prefixing it with a ‘#’ character:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.47.1">#deb http://ports.ubuntu.com/ubuntu-ports/ lunar-backports main restricted universe multiverse</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.48.1">In addition to the standard repositories there are also many third-party repositories. </span><span class="koboSpan" id="kobo.48.2">In the event that you need to use one of these, simply add an entry for it to the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.49.1">sources.list </span></span><span class="koboSpan" id="kobo.50.1">file. </span><span class="koboSpan" id="kobo.50.2">One such example is the partners repository, which can be added to the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.51.1">sources.list</span></span><span class="koboSpan" id="kobo.52.1"> file as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.53.1">deb http://archive.canonical.com/ubuntu lunar partner</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.54.1">After making the change, run the following command to commit the changes:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.55.1"># apt update</span></p>
<p class="Heading-1-1" id="_idParaDest-105" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.56.1">11.2 </span></span><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.57.1">Managing </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.58.1">Repositories with Software &amp; Updates</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.59.1">As an alternative to using the command-line, repositories may be configured from within the GNOME desktop environment using the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.60.1">Software &amp; Updates</span></span><span class="koboSpan" id="kobo.61.1"> app. </span><span class="koboSpan" id="kobo.61.2">To launch this app, press the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.62.1">special key</span></span><span class="koboSpan" id="kobo.63.1"> on the keyboard (on Windows keyboards this is the Windows key, on macOS the Command key and on Chromebooks the key displaying a magnifying glass) and enter Software &amp; Updates into the search bar. </span><span class="koboSpan" id="kobo.63.2">In the results panel click on the corresponding icon to launch the app. </span><span class="koboSpan" id="kobo.63.3">Alternatively, open a terminal window and run the following command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.64.1">$ </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.65.1">update-manager</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.66.1">When the app loads, click on the Settings button as shown in </span><a href="Ubuntu_Package_Management.xhtml#_idTextAnchor204"><span class="koboSpan" id="kobo.67.1">Figure 11-1</span></a><span class="koboSpan" id="kobo.68.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.69.1"><img alt="" class="_idGenObjectAttribute-1" src="image/ubuntu_software_updates.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.70.1">Figure 11-1</span></span><a id="_idTextAnchor204"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.71.1">From the settings screen, enable or disable the required repositories listed under the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.72.1">Downloadable from the Internet </span></span><span class="koboSpan" id="kobo.73.1">heading:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.74.1"><img alt="" class="_idGenObjectAttribute-2" src="image/ubuntu_downloadable_updates.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.75.1">Figure 11-2</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.76.1">To enable partner repositories, select the Other Software tab as shown in </span><a href="Ubuntu_Package_Management.xhtml#_idTextAnchor205"><span class="koboSpan" id="kobo.77.1">Figure 11-3</span></a><span class="koboSpan" id="kobo.78.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.79.1"><img alt="" class="_idGenObjectAttribute-3" src="image/ubuntu_other_software.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.80.1">Figure 11-3</span></span><a id="_idTextAnchor205"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.81.1">To add other third-party repositories, click on the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.82.1">Add...</span></span><span class="koboSpan" id="kobo.83.1"> button and enter the repository information in the resulting dialog:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.84.1"><img alt="" class="_idGenObjectAttribute-4" src="image/ubuntu_add_repo.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.85.1">Figure 11-4</span></span></p>
<p class="Heading-1-1" id="_idParaDest-106" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.86.1">11.3 </span></span><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.87.1">Managing Packages with APT</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.88.1">The apt tool provides a way to perform most package management tasks directly from the command line. </span><span class="koboSpan" id="kobo.88.2">In this section we will explore some of the more frequently used </span><a id="_idIndexMarker222"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.89.1">apt </span></span><span class="koboSpan" id="kobo.90.1">command-line options.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.91.1">An Ubuntu system keeps a local copy of the latest package information and, as such, it is recommended that this list be updated before performing any other apt operations as follows</span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.92.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.93.1"># apt update</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.94.1">One of the most common apt activities is to perform a package installation</span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.95.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.96.1"># apt install package_name</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.97.1">Similarly, an installed package may be removed from the system using the remove option</span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.98.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.99.1"># apt remove package_name</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.100.1">When a package is removed this way, configuration files associated with the package will remain on the system. </span><span class="koboSpan" id="kobo.100.2">This allows the package to be reinstalled later without losing any custom configuration settings. </span><span class="koboSpan" id="kobo.100.3">To remove these files either during the deletion, or even after the deletion as been performed, use the purge option</span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.101.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.102.1"># apt purge package_name</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.103.1">To obtain a list of packages available for installation, use apt as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.104.1"># apt list</span><a id="_idIndexMarker227"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.105.1">Alternatively, to list only those packages which are already installed, use the list option with the --installed flag:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.106.1"># apt list --installed</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.107.1">To check whether a specific package is already installed on the system, combine the list option with the package name:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.108.1"># apt list package_name</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">Use the search option to list all packages that match certain criteria. </span><span class="koboSpan" id="kobo.109.2">For example to list all packages that relate to the Apache web server:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.110.1"># apt search apache</span><a id="_idIndexMarker228"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1">To find which package contains a specific file, use the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.112.1">apt-file</span></span><span class="koboSpan" id="kobo.113.1"> command. </span><span class="koboSpan" id="kobo.113.2">For example, to list the name of the packages which contain a file named gimp:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.114.1"># </span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.115.1">apt-file --package-only list  gimp</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.116.1">To view details about a package, run </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.117.1">apt with the show option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.118.1"># apt show apache2</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.119.1">Typical output from running the above command might read as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.120.1">Package: apache2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.121.1">Version: 2.4.52-1ubuntu4.5</span></p>
<p class="Code"><span class="koboSpan" id="kobo.122.1">Priority: optional</span></p>
<p class="Code"><span class="koboSpan" id="kobo.123.1">Section: web</span></p>
<p class="Code"><span class="koboSpan" id="kobo.124.1">Origin: Ubuntu</span></p>
<p class="Code"><span class="koboSpan" id="kobo.125.1">Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;</span></p>
<p class="Code"><span class="koboSpan" id="kobo.126.1">Original-Maintainer: Debian Apache Maintainers &lt;debian-apache@lists.debian.org&gt;</span></p>
<p class="Code"><span class="koboSpan" id="kobo.127.1">Bugs: https://bugs.launchpad.net/ubuntu/+filebug</span></p>
<p class="Code"><span class="koboSpan" id="kobo.128.1">Installed-Size: 546 kB</span></p>
<p class="Code"><span class="koboSpan" id="kobo.129.1">Provides: httpd, httpd-cgi</span></p>
<p class="Code"><span class="koboSpan" id="kobo.130.1">Pre-Depends: init-system-helpers (&gt;= 1.54~)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.131.1">Depends: apache2-bin (= 2.4.52-1ubuntu4.5), apache2-data (= 2.4.52-1ubuntu4.5), apache2-utils (= 2.4.52-1ubuntu4.5), lsb-base, mime-support, perl:any, procps</span></p>
<p class="Code"><span class="koboSpan" id="kobo.132.1">Recommends: ssl-cert</span></p>
<p class="Code"><span class="koboSpan" id="kobo.133.1">Suggests: apache2-doc, apache2-suexec-pristine | apache2-suexec-custom, www-browser, ufw</span></p>
<p class="Code"><span class="koboSpan" id="kobo.134.1">Conflicts: apache2.2-bin, apache2.2-common</span></p>
<p class="Code"><span class="koboSpan" id="kobo.135.1">Replaces: apache2.2-bin, apache2.2-common</span></p>
<p class="Code"><span class="koboSpan" id="kobo.136.1">Homepage: https://httpd.apache.org/</span></p>
<p class="Code"><span class="koboSpan" id="kobo.137.1">Task: lamp-server</span></p>
<p class="Code"><span class="koboSpan" id="kobo.138.1">Download-Size: 97.8 kB</span></p>
<p class="Code"><span class="koboSpan" id="kobo.139.1">APT-Manual-Installed: yes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.140.1">APT-Sources: http://us.archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages</span></p>
<p class="Code"><span class="koboSpan" id="kobo.141.1">Description: Apache HTTP Server</span></p>
<p class="Code"><span class="koboSpan" id="kobo.142.1"> The Apache HTTP Server Project's goal is to build a secure, efficient and</span></p>
<p class="Code"><span class="koboSpan" id="kobo.143.1"> extensible HTTP server as standards-compliant open source software. </span><span class="koboSpan" id="kobo.143.2">The</span></p>
<p class="Code"><span class="koboSpan" id="kobo.144.1"> result has long been the number one web server on the Internet.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.145.1"> .</span></p>
<p class="Code"><span class="koboSpan" id="kobo.146.1"> Installing this package results in a full installation, including the</span></p>
<p class="Code"><span class="koboSpan" id="kobo.147.1"> configuration files, init scripts and support scripts.</span></p>
<p class="Heading-1-1" id="_idParaDest-107" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.148.1">11.4 </span></span><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.149.1">Performing </span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.150.1">Updates</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.151.1">Over the lifetime of both the base operating system and the installed software packages, multiple updates will be issued to resolve problems and add functionality. </span><span class="koboSpan" id="kobo.151.2">To manually download and install any pending updates from the command-line, the first step is to update the package information stored on the local system using apt with the update option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.152.1"># apt update</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.153.1">Once the package information has been updated, the upgrade can be performed. </span><span class="koboSpan" id="kobo.153.2">This will download any updates for currently installed packages from the repositories configured in the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.154.1">sources.list</span></span><span class="koboSpan" id="kobo.155.1"> file and install them on the system</span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.156.1">:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.157.1"># apt upgrade</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.158.1">As an alternative to the command-line, the system may be updated using the Software &amp; Updates GNOME desktop app. </span><span class="koboSpan" id="kobo.158.2">If updates are available the dialog shown in </span><a href="Ubuntu_Package_Management.xhtml#_idTextAnchor208"><span class="koboSpan" id="kobo.159.1">Figure 11-5</span></a><span class="koboSpan" id="kobo.160.1"> will appear providing the option to view information about the available updates and to perform the upgrade:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.161.1"><img alt="" class="_idGenObjectAttribute-5" src="image/ubuntu_software_updater1.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.162.1">Figure 11-5</span></span><a id="_idTextAnchor208"/></p>
<p class="Heading-1-1" id="_idParaDest-108" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.163.1">11.5 </span></span><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.164.1">Enabling Automatic </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.165.1">Updates</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.166.1">The previous section looked at how to manually install package upgrades. </span><span class="koboSpan" id="kobo.166.2">Ubuntu systems may also be configured to install upgrades automatically. </span><span class="koboSpan" id="kobo.166.3">This can be configured either from the command-line or from within the Software &amp; Updates tool.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.167.1">From within the Software &amp; Updates tool, open the Settings screen as outlined previously and click on the Updates tab to display the screen shown in </span><a href="Ubuntu_Package_Management.xhtml#_idTextAnchor210"><span class="koboSpan" id="kobo.168.1">Figure 11-6</span></a><span class="koboSpan" id="kobo.169.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.170.1"><img alt="" class="_idGenObjectAttribute-6" src="image/ubuntu_update_schedule.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.171.1">Figure 11-6</span></span><a id="_idTextAnchor210"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.172.1">Select how often the system should check for updates (daily, every other day, weekly, etc.). </span><span class="koboSpan" id="kobo.172.2">Next choose what is to be done when updates are available (download only, download and install, or display a notification on the desktop). </span><span class="koboSpan" id="kobo.172.3">You can also configure the updater to let you know when new versions of Ubuntu are available.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.173.1">To configure automatic updates from the command-line, follow these steps:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.174.1">1. </span><span class="koboSpan" id="kobo.174.2">Install the unattended-upgrades package:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.175.1"># apt install unattended-upgrades</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.176.1">2. </span><span class="koboSpan" id="kobo.176.2">Edit the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.177.1">/etc/apt/apt.conf.d/50unattended-upgrades</span></span><span class="koboSpan" id="kobo.178.1"> file and locate the following lines:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.179.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.180.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.181.1">        "${distro_id}ESMApps:${distro_codename}-apps-security";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.182.1">        "${distro_id}ESM:${distro_codename}-infra-security";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.183.1">//      "${distro_id}:${distro_codename}-updates";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.184.1">//      "${distro_id}:${distro_codename}-proposed";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.185.1">//      "${distro_id}:${distro_codename}-backports";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.186.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.187.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.188.1">3. </span><span class="koboSpan" id="kobo.188.2">Remove the // comment markers from the repository types for which updates are to be automatically installed.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.189.1">4. </span><span class="koboSpan" id="kobo.189.2">Edit the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.190.1">/etc/apt/apt.conf.d/20auto-upgrades</span></span><span class="koboSpan" id="kobo.191.1"> file and declare the frequency (in days) with which the system is to check for updates:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.192.1">APT::Periodic::Update-Package-Lists "1";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.193.1">APT::Periodic::Download-Upgradeable-Packages "1";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.194.1">APT::Periodic::AutocleanInterval "0";</span></p>
<p class="Code"><span class="koboSpan" id="kobo.195.1">APT::Periodic::Unattended-Upgrade "1";</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.196.1">4. </span><span class="koboSpan" id="kobo.196.2">Perform a dry run update to make sure the settings are valid:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.197.1"># unattended-upgrades --dry-run --debug</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.198.1">A few days after configuring automatic updates, check the log files to confirm that the updates are occurring as planned:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.199.1"># cat /var/log/unattended-upgrades/unattended-upgrades.log</span></p>
<p class="Heading-1-1" id="_idParaDest-109" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.200.1">11.6 </span></span><a id="_idTextAnchor211"/><a id="_idTextAnchor212"/><a id="_idTextAnchor214"/><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.201.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.202.1">The Ubuntu operating system comprises thousands of software packages downloaded and installed from the main, restricted, universe, multiverse, partner, and third-party repositories. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.203.1">Software packages are installed using the Advanced Package Tool (apt) or one of several graphical desktop tools and downloaded from the repositories defined within the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.204.1">sources.list</span></span><span class="koboSpan" id="kobo.205.1"> file. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.206.1">In addition to installing and removing software packages, apt may also be used to upgrade those packages with the latest updates. </span><span class="koboSpan" id="kobo.206.2">These software upgrades can be performed manually or configured to update automatically.</span></p>
</div>
</body></html>