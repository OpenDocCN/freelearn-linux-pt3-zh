<html><head></head><body>
<div id="_idContainer478">
<h1 class="chapter-number" id="_idParaDest-277"><a id="_idTextAnchor368"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-278"><a id="_idTextAnchor369"/><span class="koboSpan" id="kobo.2.1">Let’s All Go to the Cloud</span></h1>
<p><span class="koboSpan" id="kobo.3.1">We’ve come a long way when it comes to virtualization. </span><span class="koboSpan" id="kobo.3.2">From segmenting virtual slices and striping (precursor to virtualization) DNA sequencers across hundreds of university campuses to the most sophisticated virtual farms capable of hosting thousands of </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">virtual machines</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">VMs</span></strong><span class="koboSpan" id="kobo.7.1">) and</span><a id="_idIndexMarker1208"/><span class="koboSpan" id="kobo.8.1"> petabytes of storage, they all have one thing in common: complexity. </span><span class="koboSpan" id="kobo.8.2">But does it really have to be complex? </span><span class="koboSpan" id="kobo.8.3">When I think about virtualization, I think of four resources: compute, memory, storage, and network. </span><span class="koboSpan" id="kobo.8.4">They all intertwine with one another to create that fabric. </span><span class="koboSpan" id="kobo.8.5">Without compute or memory, you can’t host a workload. </span><span class="koboSpan" id="kobo.8.6">Without storage, you can’t host or store application or workload components, and without a network, your workload can’t go anywhere. </span><span class="koboSpan" id="kobo.8.7">Imagine your car is your workload, the highway is your network, the passengers are your compute and memory, and the trunk </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">is storage.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">In this chapter, we will run through how to find, maximize, and use Oracle Linux to its full potential in a local</span><a id="_idIndexMarker1209"/><span class="koboSpan" id="kobo.11.1"> environment as well as a public cloud, such as </span><strong class="bold"><span class="koboSpan" id="kobo.12.1">Oracle Cloud Infrastructure</span></strong><span class="koboSpan" id="kobo.13.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.14.1">OCI</span></strong><span class="koboSpan" id="kobo.15.1">) or </span><strong class="bold"><span class="koboSpan" id="kobo.16.1">Amazon Web Services</span></strong><span class="koboSpan" id="kobo.17.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.18.1">AWS</span></strong><span class="koboSpan" id="kobo.19.1">). </span><span class="koboSpan" id="kobo.19.2">We’ll run through exercises in building out a custom local Oracle Linux 8.x environment and walk through the process of moving that VM to OCI as an image, as well as to other </span><strong class="bold"><span class="koboSpan" id="kobo.20.1">cloud service providers</span></strong><span class="koboSpan" id="kobo.21.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.22.1">CSPs</span></strong><span class="koboSpan" id="kobo.23.1">) including AWS as an AMI. </span><em class="italic"><span class="koboSpan" id="kobo.24.1">Cloud native</span></em><span class="koboSpan" id="kobo.25.1"> is a huge buzzword and a </span><a id="_idIndexMarker1210"/><span class="koboSpan" id="kobo.26.1">disruptive technology. </span><span class="koboSpan" id="kobo.26.2">The </span><em class="italic"><span class="koboSpan" id="kobo.27.1">Making Docker Desktop more manageable with Portainer</span></em><span class="koboSpan" id="kobo.28.1"> recipe will walk through creating a Portainer environment that can manage your container ecosystem around </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">one application.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">We will cover the following recipes in </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.32.1">Oracle Linux in </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">the cloud</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">Making Docker Desktop more manageable </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">with Portainer</span></span></li>
<li><span class="koboSpan" id="kobo.36.1">Using VirtualBox to springboard VMs </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">to OCI</span></span></li>
<li><span class="koboSpan" id="kobo.38.1">For everyone else, let’s make custom images </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">for AWS</span></span></li>
</ul>
<h1 id="_idParaDest-279"><a id="_idTextAnchor370"/><span class="koboSpan" id="kobo.40.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.41.1">Generally, and in this case, it’s easier to build the OS being used with a </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">graphical user interface</span></strong><span class="koboSpan" id="kobo.43.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.44.1">GUI</span></strong><span class="koboSpan" id="kobo.45.1">). </span><span class="koboSpan" id="kobo.45.2">With this being said, you can still install a GUI if you didn’t build the server with a GUI originally. </span><span class="koboSpan" id="kobo.45.3">The following is a list of steps detailing how to add and configure </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">a GUI:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.47.1">Install the </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">GUI packages:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.49.1">$ (sudo if not root) dnf groupinstall "Server with GUI"</span></strong></pre></li> <li><span class="koboSpan" id="kobo.50.1">Set the GUI as the </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">default target:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.52.1">$ (sudo if not root) systemctl set-default graphical.target</span></strong></pre></li> <li><span class="koboSpan" id="kobo.53.1">Set the GUI as the default </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">startup source:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.55.1">$ (sudo if not root) ln -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target</span></strong></pre></li> <li><span class="koboSpan" id="kobo.56.1">Restart </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">the server:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.58.1">$ (sudo if not root) reboot (or shutdown –r now)</span></strong></pre></li> </ol>
<h1 id="_idParaDest-280"><a id="_idTextAnchor371"/><span class="koboSpan" id="kobo.59.1">Oracle Linux in the cloud</span></h1>
<p><span class="koboSpan" id="kobo.60.1">We could list all the CSPs here and break apart their pros and cons, but ultimately, every CSP has a main competency. </span><span class="koboSpan" id="kobo.60.2">What Oracle Linux does is add to that competency, making the product stronger and more versatile. </span><span class="koboSpan" id="kobo.60.3">Much like any other (open source) Linux distribution, Oracle </span><a id="_idIndexMarker1211"/><span class="koboSpan" id="kobo.61.1">Linux is a versatile and powerful OS. </span><span class="koboSpan" id="kobo.61.2">In the case of Oracle Linux, the OS was designed with elements that are compatible with RHEL, not to compete, but to add functionality as well as a portal into Oracle functionality </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">beyond RHEL.</span></span></p>
<p><span class="koboSpan" id="kobo.63.1">The fluidity of Oracle Linux, much like RHEL, allows it to go beyond just being an OS. </span><span class="koboSpan" id="kobo.63.2">Oracle Linux extends the playing field, maximizing the Linux toolsets surrounding virtualization into VM management through </span><strong class="bold"><span class="koboSpan" id="kobo.64.1">Oracle Linux Virtualization Manager</span></strong><span class="koboSpan" id="kobo.65.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.66.1">OLVM</span></strong><span class="koboSpan" id="kobo.67.1">), cross-functionality </span><a id="_idIndexMarker1212"/><span class="koboSpan" id="kobo.68.1">into cloud platforms, and automation, just to name a few. </span><span class="koboSpan" id="kobo.68.2">What Oracle aims to do is to offer the functionality of an RHEL OS but go beyond that and tie that OS into a global business network of toolsets to drive business success. </span><span class="koboSpan" id="kobo.68.3">Now, after all the fluff comes the real power and versatility of Oracle Linux, some of which was mentioned at the beginning of this chapter. </span><span class="koboSpan" id="kobo.68.4">This recipe is about which CSPs are most compatible with Oracle Linux; however, understanding what and how the OS operates is integral to understanding which CSPs are more compatible with Oracle Linux and thus maximizing </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">its capability.</span></span></p>
<p><span class="koboSpan" id="kobo.70.1">Oracle supports</span><a id="_idIndexMarker1213"/><span class="koboSpan" id="kobo.71.1"> and promotes open source technologies for business-critical environments. </span><span class="koboSpan" id="kobo.71.2">Oracle is a founding member of the Linux Foundation, Eclipse Foundation, and Java Community Process, and contributes significantly to open source projects. </span><span class="koboSpan" id="kobo.71.3">Oracle software combined with open source technologies offers high performance, reliability, and data security while reducing </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">computing costs.</span></span></p>
<p><span class="koboSpan" id="kobo.73.1">The following diagram provides a cost-benefit analysis of Oracle Linux “Free” (the only paid component is support) versus RHEL with the extended features added on, as </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">mentioned previously.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer368">
<span class="koboSpan" id="kobo.75.1"><img alt="Figure 13.1 – RHEL versus Oracle Linux" src="image/B18349_13_001.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.76.1">Figure 13.1 – RHEL versus Oracle Linux</span></p>
<p><span class="koboSpan" id="kobo.77.1">As with any Linux distribution, each CSP has its own flavor or choice of Linux platform. </span><span class="koboSpan" id="kobo.77.2">For instance, AWS has </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">Amazon Linux 2</span></strong><span class="koboSpan" id="kobo.79.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.80.1">AL2</span></strong><span class="koboSpan" id="kobo.81.1">), Azure</span><a id="_idIndexMarker1214"/><span class="koboSpan" id="kobo.82.1"> offers compatibility with anything RHEL or Ubuntu based, and Oracle has Oracle Linux, of course. </span><span class="koboSpan" id="kobo.82.2">There are so many differences between Ubuntu and Oracle Linux, AL2, and so on, but we’re not here to discuss the differences. </span><span class="koboSpan" id="kobo.82.3">Ultimately, all CSPs can run Linux distributions, but not all are optimized for Oracle Linux. </span><span class="koboSpan" id="kobo.82.4">With AWS and Azure, you have the option of </span><strong class="bold"><span class="koboSpan" id="kobo.83.1">Buying Your Own Support</span></strong><span class="koboSpan" id="kobo.84.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.85.1">BYOS</span></strong><span class="koboSpan" id="kobo.86.1">) from Oracle (support includes access to patching, upgrades, and</span><a id="_idIndexMarker1215"/><span class="koboSpan" id="kobo.87.1"> OS support) or using these services for free without tech support. </span><span class="koboSpan" id="kobo.87.2">With OCI Premier, support is included for free. </span><span class="koboSpan" id="kobo.87.3">The following diagram shows the main CSPs and their differing adoptions of </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">Oracle Linux.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer369">
<span class="koboSpan" id="kobo.89.1"><img alt="Figure 13.2 – Cloud options" src="image/B18349_13_002.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.90.1">Figure 13.2 – Cloud options</span></p>
<p><span class="koboSpan" id="kobo.91.1">Who’s the fairest of them all? </span><span class="koboSpan" id="kobo.91.2">Let’s </span><a id="_idIndexMarker1216"/><span class="koboSpan" id="kobo.92.1">walk through what Linux distributions are offered within AWS. </span><span class="koboSpan" id="kobo.92.2">We’ll briefly touch on AWS EC2 Image Builder to visualize the versatility of Linux within any environment on AWS and beyond. </span><span class="koboSpan" id="kobo.92.3">This will come into use later in this chapter, in the </span><em class="italic"><span class="koboSpan" id="kobo.93.1">Using VirtualBox to springboard VMs to </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.94.1">OCI</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.95.1"> recipe.</span></span></p>
<h2 id="_idParaDest-281"><a id="_idTextAnchor372"/><span class="koboSpan" id="kobo.96.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.97.1">You’ll first have to have an AWS account, be it personal or through your organization; it doesn’t really matter so long as you have the correct authorization to access the account and build out the infrastructure. </span><span class="koboSpan" id="kobo.97.2">In this case, I selected </span><strong class="bold"><span class="koboSpan" id="kobo.98.1">Root user</span></strong><span class="koboSpan" id="kobo.99.1">, as this is my personal account, and I have </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">those rights.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer370">
<span class="koboSpan" id="kobo.101.1"><img alt="Figure 13.3 – Root sign-in" src="image/B18349_13_003.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.102.1">Figure 13.3 – Root sign-in</span></p>
<p><span class="koboSpan" id="kobo.103.1">After entering your user type, you’ll want to provide your password and continue through the authentication</span><a id="_idIndexMarker1217"/><span class="koboSpan" id="kobo.104.1"> options. </span><span class="koboSpan" id="kobo.104.2">I’ve enabled </span><strong class="bold"><span class="koboSpan" id="kobo.105.1">Multi-Factor Authentication</span></strong><span class="koboSpan" id="kobo.106.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.107.1">MFA</span></strong><span class="koboSpan" id="kobo.108.1">) and would strongly </span><a id="_idIndexMarker1218"/><span class="koboSpan" id="kobo.109.1">suggest using this method to protect your account. </span><span class="koboSpan" id="kobo.109.2">If MFA is enabled, you next walk through capturing that code, as shown in the following figure. </span><span class="koboSpan" id="kobo.109.3">Note that there are other two-factor authentication options, but using Google Authenticator is best practice. </span><span class="koboSpan" id="kobo.109.4">However, one could use any app, such as Microsoft, RSA, and </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">so on.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer371">
<span class="koboSpan" id="kobo.111.1"><img alt="Figure 13.4 – MFA" src="image/B18349_13_004.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.112.1">Figure 13.4 – MFA</span></p>
<p><span class="koboSpan" id="kobo.113.1">Once you’re past the login and MFA sections, you’ll find yourself on the AWS landing page. </span><span class="koboSpan" id="kobo.113.2">You’ll want to navigate to EC2, AWS Compute Resources in AWS speech (CPU, RAM), to understand</span><a id="_idIndexMarker1219"/><span class="koboSpan" id="kobo.114.1"> the flavors of Linux available and what your options are beyond the default choices that come as standard Linux images (AMIs). </span><span class="koboSpan" id="kobo.114.2">Note that just because a flavor isn’t listed doesn’t mean it isn’t available: there are other options through the Marketplace or via </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">custom images.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer372">
<span class="koboSpan" id="kobo.116.1"><img alt="Figure 13.5 – Compute" src="image/B18349_13_005.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.117.1">Figure 13.5 – Compute</span></p>
<p><span class="koboSpan" id="kobo.118.1">Once you’ve entered the world of AWS EC2, the easiest way to see what’s on offer is </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">EC2 Image Builder</span></strong><span class="koboSpan" id="kobo.120.1">. </span><span class="koboSpan" id="kobo.120.2">Image Builder </span><a id="_idIndexMarker1220"/><span class="koboSpan" id="kobo.121.1">translates the complex image world into easier-to-understand concepts that help transcribe your technical requirements </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">into executions:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer373">
<span class="koboSpan" id="kobo.123.1"><img alt="Figure 13.6 – Image Builder" src="image/B18349_13_006.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.124.1">Figure 13.6 – Image Builder</span></p>
<p><span class="koboSpan" id="kobo.125.1">After entering </span><strong class="bold"><span class="koboSpan" id="kobo.126.1">Image Builder</span></strong><span class="koboSpan" id="kobo.127.1">, you’ll want to navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.128.1">Image products</span></strong><span class="koboSpan" id="kobo.129.1">, under </span><strong class="bold"><span class="koboSpan" id="kobo.130.1">Amazon Marketplace</span></strong><span class="koboSpan" id="kobo.131.1">. </span><span class="koboSpan" id="kobo.131.2">This is the portal to everything else offered under the AWS umbrella and will take you directly to the </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">image products.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer374">
<span class="koboSpan" id="kobo.133.1"><img alt="Figure 13.7 – Image products" src="image/B18349_13_007.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.134.1">Figure 13.7 – Image products</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.135.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.136.1">Be careful when selecting Oracle AMIs. </span><span class="koboSpan" id="kobo.136.2">There are third parties that will charge you to use AMIs but will not provide Oracle tech support. </span><span class="koboSpan" id="kobo.136.3">Some of them can get very expensive, costing you hundreds of dollars </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">per year.</span></span></p>
<p><span class="koboSpan" id="kobo.138.1">As mentioned in the</span><a id="_idIndexMarker1221"/><span class="koboSpan" id="kobo.139.1"> preceding note, you will not find official Oracle Linux images on the </span><strong class="bold"><span class="koboSpan" id="kobo.140.1">AWS Marketplace</span></strong><span class="koboSpan" id="kobo.141.1"> tab. </span><span class="koboSpan" id="kobo.141.2">Follow the instructions in this recipe in the </span><em class="italic"><span class="koboSpan" id="kobo.142.1">How to do it…</span></em><span class="koboSpan" id="kobo.143.1"> section to access the official Oracle </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">Linux images.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer375">
<span class="koboSpan" id="kobo.145.1"><img alt="Figure 13.8 – Search in Marketplace for Oracle Linux" src="image/B18349_13_008.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.146.1">Figure 13.8 – Search in Marketplace for Oracle Linux</span></p>
<p><span class="koboSpan" id="kobo.147.1">If you search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">oracle linux</span></strong><span class="koboSpan" id="kobo.149.1"> on AWS Marketplace as in the preceding screenshot, you will only see offerings of Oracle Linux distributions built by other organizations and offered to the public through AWS Marketplace. </span><em class="italic"><span class="koboSpan" id="kobo.150.1">These are not official Oracle Linux images.</span></em><span class="koboSpan" id="kobo.151.1"> Later in this </span><a id="_idIndexMarker1222"/><span class="koboSpan" id="kobo.152.1">chapter, we’ll walk through building a VM in Oracle VirtualBox and converting that image, through AWS, into </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">an AMI.</span></span></p>
<h2 id="_idParaDest-282"><a id="_idTextAnchor373"/><span class="koboSpan" id="kobo.154.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.155.1">Here are the steps</span><a id="_idIndexMarker1223"/><span class="koboSpan" id="kobo.156.1"> you need to follow to find </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">Oracle AMIs:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.158.1">Point your browser </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">to </span></span><a href="https://console.aws.amazon.com/ec2/"><span class="No-Break"><span class="koboSpan" id="kobo.160.1">https://console.aws.amazon.com/ec2/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.161.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer376">
<span class="koboSpan" id="kobo.162.1"><img alt="Figure 13.9 – Find AMIs under the Images dropdown" src="image/B18349_13_009.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.163.1">Figure 13.9 – Find AMIs under the Images dropdown</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.164.1">In the left navigation panel, select </span><strong class="bold"><span class="koboSpan" id="kobo.165.1">AMIs</span></strong><span class="koboSpan" id="kobo.166.1">, then </span><strong class="bold"><span class="koboSpan" id="kobo.167.1">Public images </span></strong><span class="koboSpan" id="kobo.168.1">from the window </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">that appears:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer377">
<span class="koboSpan" id="kobo.170.1"><img alt="Figure 13.10 – Public images" src="image/B18349_13_010.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.171.1">Figure 13.10 – Public images</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.172.1">Filter by owner</span><a id="_idIndexMarker1224"/><span class="koboSpan" id="kobo.173.1"> using the ID </span><strong class="source-inline"><span class="koboSpan" id="kobo.174.1">131827586825</span></strong><span class="koboSpan" id="kobo.175.1">. </span><span class="koboSpan" id="kobo.175.2">The ID is related to official Oracle images, and will only show official Oracle Linux AMIs created </span><span class="No-Break"><span class="koboSpan" id="kobo.176.1">by Oracle:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer378">
<span class="koboSpan" id="kobo.177.1"><img alt="Figure 13.11 – Oracle AMIs" src="image/B18349_13_011.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.178.1">Figure 13.11 – Oracle AMIs</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.179.1">Select the official Oracle AMI you wish to use. </span><span class="koboSpan" id="kobo.179.2">After choosing the AMI, simply launch the AMI to continue the configuration of resources and </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">the OS:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer379">
<span class="koboSpan" id="kobo.181.1"><img alt="Figure 13.12 – Instance launch" src="image/B18349_13_012.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.182.1">Figure 13.12 – Instance launch</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.183.1">After launching, this will bring you to the OS image and VM buildout page (see the following figure). </span><span class="koboSpan" id="kobo.183.2">Here, you add a suitable name for your VM and choose the OS and network</span><a id="_idIndexMarker1225"/><span class="koboSpan" id="kobo.184.1"> keypair for your VM, as shown in the following instance </span><span class="No-Break"><span class="koboSpan" id="kobo.185.1">launch window.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer380">
<span class="koboSpan" id="kobo.186.1"><img alt="Figure 13.13 – Instance configuration" src="image/B18349_13_013.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.187.1">Figure 13.13 – Instance configuration</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.188.1">Once you’ve launched your new VM from the chosen AMI, you’ll see the </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">launch status:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer381">
<span class="koboSpan" id="kobo.190.1"><img alt="Figure 13.14 – Launch status" src="image/B18349_13_014.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.191.1">Figure 13.14 – Launch status</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.192.1">Once your new Oracle Linux </span><a id="_idIndexMarker1226"/><span class="koboSpan" id="kobo.193.1">VM is created, you can visualize that VM on the </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">Compute</span></strong><span class="koboSpan" id="kobo.195.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.196.1">EC2</span></strong><span class="koboSpan" id="kobo.197.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">Images</span></strong><span class="koboSpan" id="kobo.199.1"> tab in OCI. </span><span class="koboSpan" id="kobo.199.2">Then, click on the instance ID and copy the public </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">IP address.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer382">
<span class="koboSpan" id="kobo.201.1"><img alt="Figure 13.15 – Public IP" src="image/B18349_13_015.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.202.1">Figure 13.15 – Public IP</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.203.1">Open either PuTTY or a terminal, depending on whether you’re on a Windows machine or a Mac, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">ssh</span></strong><span class="koboSpan" id="kobo.205.1"> to your machine using OPC as the user (this is the default Oracle user; these terms are changeable, but we won’t go into this here). </span><span class="koboSpan" id="kobo.205.2">The first time, running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">ssh</span></strong><span class="koboSpan" id="kobo.207.1"> command will add the key pair permanently for authentication to the list of </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">known hosts:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.209.1">% ssh opc@18.116.203.168</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.210.1">The authenticity of host '18.116.203.168 (18.116.203.168)' can't be established.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.211.1">ED25519 key fingerprint is SHA256:HS1eSJOOs3slMxDU41nYfDkxMQ7uocISC21lxLnQJTk.</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.212.1">This key is not known by any other names</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.213.1">Are you sure you want to continue connecting (yes/no/[fingerprint])? </span><span class="koboSpan" id="kobo.213.2">yes</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.214.1">Warning: Permanently added '18.116.203.168' (ED25519) to the list of known hosts.</span></strong></pre></li> </ol>
<h1 id="_idParaDest-283"><a id="_idTextAnchor374"/><span class="koboSpan" id="kobo.215.1">Making Docker Desktop more manageable with Portainer</span></h1>
<p><span class="koboSpan" id="kobo.216.1">Portainer is a container </span><a id="_idIndexMarker1227"/><span class="koboSpan" id="kobo.217.1">management platform, as mentioned in the introduction to this chapter. </span><span class="koboSpan" id="kobo.217.2">Portainer was originally designed as a UI for Docker, but now it supports several other container environments as well. </span><span class="koboSpan" id="kobo.217.3">With </span><a id="_idIndexMarker1228"/><span class="koboSpan" id="kobo.218.1">over 1 million users and a significant presence on GitHub, Portainer offers two versions: the free and</span><a id="_idIndexMarker1229"/><span class="koboSpan" id="kobo.219.1"> open source </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">Community Edition</span></strong><span class="koboSpan" id="kobo.221.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.222.1">CE</span></strong><span class="koboSpan" id="kobo.223.1">) and a paid </span><strong class="bold"><span class="koboSpan" id="kobo.224.1">Enterprise Edition</span></strong><span class="koboSpan" id="kobo.225.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.226.1">EE</span></strong><span class="koboSpan" id="kobo.227.1">). </span><span class="koboSpan" id="kobo.227.2">In this </span><a id="_idIndexMarker1230"/><span class="koboSpan" id="kobo.228.1">recipe, we will be working with the free and open </span><span class="No-Break"><span class="koboSpan" id="kobo.229.1">source version.</span></span></p>
<p><span class="koboSpan" id="kobo.230.1">If you prefer managing your containers through a GUI, Portainer is an excellent option. </span><span class="koboSpan" id="kobo.230.2">While CLI commands and API endpoints are great for development, a GUI is often more user-friendly for managing production applications. </span><span class="koboSpan" id="kobo.230.3">With Portainer, you can easily monitor multiple endpoints and grant team members access to a shared deployment environment. </span><span class="koboSpan" id="kobo.230.4">The following figure shows how Portainer and the container images align with Docker, and how Portainer makes managing images simpler. </span><span class="koboSpan" id="kobo.230.5">Portainer offers a UI over the Docker CLI, making it easier for the layman and seasoned engineer alike to navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">container management.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer383">
<span class="koboSpan" id="kobo.232.1"><img alt="Figure 13.16 – Portainer container mana﻿﻿gement" src="image/B18349_13_016.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.233.1">Figure 13.16 – Portainer container mana</span><a id="_idTextAnchor375"/><a id="_idTextAnchor376"/><span class="koboSpan" id="kobo.234.1">gement</span></p>
<p><span class="koboSpan" id="kobo.235.1">Portainer is usually deployed within its own container. </span><span class="koboSpan" id="kobo.235.2">If you are using Docker, this guide will help you get Portainer </span><a id="_idIndexMarker1231"/><span class="koboSpan" id="kobo.236.1">up and running. </span><span class="koboSpan" id="kobo.236.2">However, if you prefer to use Kubernetes, you can also</span><a id="_idIndexMarker1232"/><span class="koboSpan" id="kobo.237.1"> run Portainer directly using the official Helm chart. </span><span class="koboSpan" id="kobo.237.2">Here’s a brief overview of the steps you need to take to set </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">up Portainer:</span></span></p>
<ol>
<li><span class="No-Break"><span class="koboSpan" id="kobo.239.1">Install Docker.</span></span></li>
<li><span class="koboSpan" id="kobo.240.1">Create and configure a container </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">for Portainer.</span></span></li>
<li><span class="koboSpan" id="kobo.242.1">Open the necessary ports and configure </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">OCI accordingly.</span></span></li>
<li><span class="koboSpan" id="kobo.244.1">Log in to the Portainer interface and set up </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">the UI.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.246.1">The following sections will provide a detailed explanation of each step. </span><span class="koboSpan" id="kobo.246.2">Before proceeding, make sure you have installed Docker. </span><span class="koboSpan" id="kobo.246.3">If you’re using a Windows or Mac computer, you can download and install the latest version of the Docker Desktop installer. </span><span class="koboSpan" id="kobo.246.4">Linux users can experiment with the beta version of Docker Desktop for Linux or use the following instructions to install Docker Engine. </span><span class="koboSpan" id="kobo.246.5">For this guide, we’ll be creating an Oracle Linux VM in the OCI cloud and installing Portainer on that VM, rather than in a </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">local environment.</span></span></p>
<h2 id="_idParaDest-284"><a id="_idTextAnchor377"/><span class="koboSpan" id="kobo.248.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.249.1">There’s some initial work to carry out. </span><span class="koboSpan" id="kobo.249.2">As mentioned previously, Docker is a container management environment. </span><span class="koboSpan" id="kobo.249.3">Portainer, in this recipe, will reside in a Docker container, so we will need to install and configure</span><a id="_idIndexMarker1233"/><span class="koboSpan" id="kobo.250.1"> Docker. </span><span class="koboSpan" id="kobo.250.2">You’ll reuse some of these skills again later on in this chapter when it comes to creating images. </span><span class="koboSpan" id="kobo.250.3">Indeed, this foundational work we’re doing here will </span><a id="_idIndexMarker1234"/><span class="koboSpan" id="kobo.251.1">help you throughout this chapter, as these skills lay the groundwork for managing Oracle Linux environments, whether they’re in the cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">or on-premises.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer384">
<span class="koboSpan" id="kobo.253.1"><img alt="Figure 13.17 – Portainer VM creation" src="image/B18349_13_017.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.254.1">Figure 13.17 – Portainer VM creation</span></p>
<p><span class="koboSpan" id="kobo.255.1">The information required to log in to the Portainer VM is located in the image data, as shown previously. </span><span class="koboSpan" id="kobo.255.2">Remember, just like in the previous chapters related to creating VMs in OCI, to create and add the public key. </span><span class="koboSpan" id="kobo.255.3">As we saw previously, this is the only way you’ll be able to log in to </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">this environment.</span></span></p>
<p><span class="koboSpan" id="kobo.257.1">Log in to the VM as shown, using the default </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">OPC user:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.259.1">
% ssh opc@132.226.58.24
Activate the web console with: systemctl enable --now cockpit.socket
Last login: Mon Aug 21 14:15:13 2023 from 107.200.172.229
[opc@portainer2 ~]$</span></pre> <p><span class="koboSpan" id="kobo.260.1">After logging in, you’ll want to </span><a id="_idIndexMarker1235"/><span class="koboSpan" id="kobo.261.1">update the repositories. </span><span class="koboSpan" id="kobo.261.2">To do this, as in the other recipes in this </span><a id="_idIndexMarker1236"/><span class="koboSpan" id="kobo.262.1">cookbook, you’ll need superuser privileges. </span><span class="koboSpan" id="kobo.262.2">The following output from the update was truncated </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">for length:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.264.1">
[opc@portainer2 ~]$ sudo su -
Last login: Mon Aug 21 15:28:41 GMT 2023 on pts/0
[root@portainer2 ~]# yum upgrade -y &amp;&amp; yum update -y
=======================================================================================================
Package                           Arch      Version                             Repository            Size
=======================================================================================================
Upgrading:
 cloud-init                        noarch    22.1-8.0.4.el8_8.1                ol8_appstream      1.1 M
 iscsi-initiator-utils             x86_64    6.2.1.4-8.git095f59c.0.1.el8_8    ol8_baseos_latest  382 k
 iscsi-initiator-utils-iscsiuio    x86_64    6.2.1.4-8.git095f59c.0.1.el8_8    ol8_baseos_latest  102 k
 microcode_ctl                     x86_64    4:20230214-2.0.3.el8              ol8_baseos_latest  7.7 M
 systemd                           x86_64    239-74.0.4.el8_8.3                ol8_baseos_latest  3.6 M
 systemd-libs                      x86_64    239-74.0.4.el8_8.3                ol8_baseos_latest  1.1 M
 systemd-pam                       x86_64    239-74.0.4.el8_8.3                ol8_baseos_latest  506 k
 systemd-udev                      x86_64    239-74.0.4.el8_8.3                ol8_baseos_latest  1.6 M</span></pre> <p><span class="koboSpan" id="kobo.265.1">After updating the repositories, we’re ready to start installing Docker and begin our container journey. </span><span class="koboSpan" id="kobo.265.2">In order to install Docker, we’ll need to install the ZIP utilities to unzip the required files that we have</span><a id="_idIndexMarker1237"/><span class="koboSpan" id="kobo.266.1"> downloaded. </span><span class="koboSpan" id="kobo.266.2">To do this, we’ll use the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">dnf</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.268.1"> command:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.269.1">
[root@portainer2 ~]# dnf install -y dnf-utils zip unzip</span></pre> <p><span class="koboSpan" id="kobo.270.1">After installing the ZIP utilities, we’ll have to enable the Docker repository in order to download Docker. </span><span class="koboSpan" id="kobo.270.2">The following</span><a id="_idIndexMarker1238"/><span class="koboSpan" id="kobo.271.1"> is the command to enable the repo and add it to the </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">repo list:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.273.1">
[root@portainer2 ~]# dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
Adding repo from: https://download.docker.com/linux/centos/docker-ce.repo</span></pre> <p class="callout-heading"><span class="koboSpan" id="kobo.274.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.275.1">We need to eliminate a vulnerability that allows attackers to overwrite the host </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">runc</span></strong><span class="koboSpan" id="kobo.277.1"> binary by executing a root command with any type of container. </span><span class="koboSpan" id="kobo.277.2">Attackers can exploit this vulnerability to use a new container with an attacker-controlled image or infiltrate an existing container if they have previous </span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">write access:</span></span></p>
<p class="callout"><strong class="bold"><span class="koboSpan" id="kobo.279.1">[root@portainer2 ~]# dnf remove -</span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.280.1">y runc</span></strong></span></p>
<p><span class="koboSpan" id="kobo.281.1">Install Docker using the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">dnf</span></strong><span class="koboSpan" id="kobo.283.1"> command. </span><span class="koboSpan" id="kobo.283.2">The following output has been truncated </span><span class="No-Break"><span class="koboSpan" id="kobo.284.1">for length:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.285.1">
[root@portainer2 ~]# dnf install -y docker-ce --nobest
Docker CE Stable – x86_64                                                   1.3 MB/s |  49 kB     00:00
Dependencies resolved.
 </span><span class="koboSpan" id="kobo.285.2">Package                     Arch     Version                                     Repository           Size
Installing:
 docker-ce                   x86_64   3:24.0.5-1.el8                            docker-ce-stable   24 M
…
[Truncated due to length]
...
</span><span class="koboSpan" id="kobo.285.3">Complete!</span></pre> <p><span class="koboSpan" id="kobo.286.1">Once Docker is installed, we can move</span><a id="_idIndexMarker1239"/><span class="koboSpan" id="kobo.287.1"> on to enabling the Docker service and starting Docker Engine. </span><span class="koboSpan" id="kobo.287.2">In </span><a id="_idIndexMarker1240"/><span class="koboSpan" id="kobo.288.1">order to enable the Docker service, we need to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">systemctl</span></strong><span class="koboSpan" id="kobo.290.1">, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">following snippet:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.292.1">
[root@portainer2 ~]# systemctl enable docker.service
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /usr/lib/systemd/system/docker.service.</span></pre> <p><span class="koboSpan" id="kobo.293.1">Once the service is enabled, we can move to start the Docker service/Docker Engine. </span><span class="koboSpan" id="kobo.293.2">We’ll once again be using </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">systemctl</span></strong><span class="koboSpan" id="kobo.295.1"> to call Docker Engine </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">to start:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.297.1">
[root@portainer2 ~]# systemctl start docker.service</span></pre> <p><span class="koboSpan" id="kobo.298.1">After starting the service, we’ll want to ascertain the status of the service to be assured that Docker has started properly and the service is running </span><span class="No-Break"><span class="koboSpan" id="kobo.299.1">and healthy:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.300.1">
[root@portainer2 ~]# systemctl status docker.service
● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)
   Active: active (running) since Mon 2023-08-21 15:50:49 GMT; 1min 19s ago
     Docs: https://docs.docker.com
 Main PID: 76180 (dockerd)
    Tasks: 9
   Memory: 28.2M
   CGroup: /system.slice/docker.service
           └─76180 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock
Aug 21 15:50:48 portainer2 systemd[1]: Starting Docker Application Container Engine...
</span><span class="koboSpan" id="kobo.300.2">...
</span><span class="koboSpan" id="kobo.300.3">Truncated due to length lines 1-20/20 (END)
...</span></pre> <p><span class="koboSpan" id="kobo.301.1">Now that our Docker Engine is up </span><a id="_idIndexMarker1241"/><span class="koboSpan" id="kobo.302.1">and running, we want to see what Docker version is running, as well as its </span><a id="_idIndexMarker1242"/><span class="koboSpan" id="kobo.303.1">health and all other Docker </span><span class="No-Break"><span class="koboSpan" id="kobo.304.1">Engine-related data:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.305.1">
[root@portainer2 ~]# docker info
Client: Docker Engine - Community
 Version:    24.0.5
 Context:    default
 Debug Mode: false
 Plugins:
  buildx: Docker Buildx (Docker Inc.)
    Version:  v0.11.2
    Path:     /usr/libexec/docker/cli-plugins/docker-buildx
  compose: Docker Compose (Docker Inc.)
    Version:  v2.20.2
    Path:     /usr/libexec/docker/cli-plugins/docker-compose
Server:
 Containers: 0
  Running: 0
  Paused: 0
  Stopped: 0
 Images: 0
 Server Version: 24.0.5
 Storage Driver: overlay2
  Backing Filesystem: xfs
  Supports d_type: true
  Using metacopy: false
  Native Overlay Diff: false
  userxattr: false
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Cgroup Version: 1
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc io.containerd.runc.v2
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 8165feabfdfe38c65b599c4993d227328c231fca
 runc version: v1.1.8-0-g82f18fe
 init version: de40ad0
 Security Options:
  seccomp
   Profile: builtin
 Kernel Version: 5.15.0-103.114.4.el8uek.x86_64
 Operating System: Oracle Linux Server 8.8
 OSType: linux
 Architecture: x86_64
 CPUs: 2
 Total Memory: 15.32GiB
 Name: portainer2
 ID: 597d584f-bf1c-4cda-aa22-8ca2c28f33c0
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false</span></pre> <p><span class="koboSpan" id="kobo.306.1">Since Portainer requires a</span><a id="_idIndexMarker1243"/><span class="koboSpan" id="kobo.307.1"> later Python </span><a id="_idIndexMarker1244"/><span class="koboSpan" id="kobo.308.1">environment, we’ll want to be sure that the correct version is installed. </span><span class="koboSpan" id="kobo.308.2">Python is a prerequisite to the installation. </span><span class="koboSpan" id="kobo.308.3">The following command output has been truncated </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">for length:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.310.1">
yum install -y libffi libffi-devel openssl-devel python3 python3-pip python3-devel
Last metadata expiration check: 0:13:58 ago on Mon 21 Aug 2023 03:43:32 PM GMT.
</span><span class="koboSpan" id="kobo.310.2">Package libffi-3.1-24.el8.x86_64 is already installed.
</span><span class="koboSpan" id="kobo.310.3">Package openssl-devel-1:1.1.1k-9.el8_7.x86_64 is already installed.
</span><span class="koboSpan" id="kobo.310.4">Package python36-3.6.8-38.module+el8.5.0+20329+5c5719bc.x86_64 is already installed.
</span><span class="koboSpan" id="kobo.310.5">Package python3-pip-9.0.3-22.el8.noarch is already installed.
</span><span class="koboSpan" id="kobo.310.6">Dependencies resolved.
</span><span class="koboSpan" id="kobo.310.7">============================================================================================================
 Package                   Arch      Version                                      Repository            Size
============================================================================================================
Installing:
Complete!</span></pre> <p><span class="koboSpan" id="kobo.311.1">To install Python, we </span><a id="_idIndexMarker1245"/><span class="koboSpan" id="kobo.312.1">use PIP, which is the standard package manager for Python. </span><span class="koboSpan" id="kobo.312.2">PIP allows you to manage and install all packages that aren’t</span><a id="_idIndexMarker1246"/><span class="koboSpan" id="kobo.313.1"> typically part of the standard Python library. </span><span class="koboSpan" id="kobo.313.2">Installing Python is an underlying requirement for the </span><span class="No-Break"><span class="koboSpan" id="kobo.314.1">Portainer installation.</span></span></p>
<p><span class="koboSpan" id="kobo.315.1">You’ll want to exit out of root to install this version </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">of Python:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.317.1">
[opc@portainer2 ~]$ pip install --upgrade --ignore-installed pip setuptools
Defaulting to user installation because normal site-packages is not writeable
Collecting pip
  Downloading pip-21.3.1-py3-none-any.whl (1.7 MB)
     |████████████████████████████████| 1.7 MB 38.3 MB/s
Collecting setuptools
  Downloading setuptools-59.6.0-py3-none-any.whl (952 kB)
     |████████████████████████████████| 952 kB 78.6 MB/s
Installing collected packages: setuptools, pip
Successfully installed pip-21.3.1 setuptools-59.6.0</span></pre> <p><span class="koboSpan" id="kobo.318.1">You’ll want to be root again here to install and update yum packages. </span><span class="koboSpan" id="kobo.318.2">Yum requires root privileges to execute, so</span><a id="_idIndexMarker1247"/><span class="koboSpan" id="kobo.319.1"> you’ll want to </span><strong class="source-inline"><span class="koboSpan" id="kobo.320.1">sudo</span></strong><span class="koboSpan" id="kobo.321.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">su</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.323.1">to root.</span></span></p>
<p><span class="koboSpan" id="kobo.324.1">After we’ve updated </span><a id="_idIndexMarker1248"/><span class="koboSpan" id="kobo.325.1">the Python installation, we need to install and update the Python library requirements for Docker </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">and Portainer:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.327.1">
[opc@portainer2 ~]$ sudo su -
Last login: Mon Aug 21 15:33:33 GMT 2023 on pts/0
[root@portainer2 ~]# yum install -y libffi libffi-devel openssl-devel python3 python3-pip python3-devel</span></pre> <p><span class="koboSpan" id="kobo.328.1">You’ll want to exit out of root here to install </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">docker-compose</span></strong><span class="koboSpan" id="kobo.330.1">, using Python pip to execute. </span><span class="koboSpan" id="kobo.330.2">Python pip is the standard for installing any Python package and is the go-to method for installing those packages in a </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">secure manner:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.332.1">
[root@portainer2 ~]# exit
logout
[opc@portainer2 ~]$ pip3 install docker-compose</span></pre> <h2 id="_idParaDest-285"><a id="_idTextAnchor378"/><span class="koboSpan" id="kobo.333.1">How to do it…</span></h2>
<ol>
<li><span class="koboSpan" id="kobo.334.1">Now we’re ready to start installing and configuring our Portainer environment. </span><span class="koboSpan" id="kobo.334.2">We’ll have to </span><a id="_idIndexMarker1249"/><span class="koboSpan" id="kobo.335.1">first create a volume for Portainer. </span><span class="koboSpan" id="kobo.335.2">We do this by telling Docker to create </span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">that volume:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.337.1">[opc@portainer2 ~]$ sudo docker volume create portainer_data</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.338.1">portainer_data</span></strong></pre></li> <li><span class="koboSpan" id="kobo.339.1">After creating the volume, we </span><a id="_idIndexMarker1250"/><span class="koboSpan" id="kobo.340.1">install the Portainer container and expose the port that the Portainer UI will use, and through which we will access </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">that UI:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.342.1">[opc@portainer2 ~]$ sudo docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.343.1">Unable to find image 'portainer/portainer-ce:latest' locally</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.344.1">latest: Pulling from portainer/portainer-ce</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.345.1">772227786281: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.346.1">96fd13befc87: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.347.1">5171176db7f2: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.348.1">a143fdc4fa02: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.349.1">b622730c7bdc: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.350.1">c1cad9f5200f: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.351.1">d8a77b01f2cb: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.352.1">0d4d8543f764: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.353.1">c6fd0bcf10c9: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.354.1">889200668c1c: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.355.1">4f4fb700ef54: Pull complete</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.356.1">Digest: sha256:94c3056dbe879f3a3df06b427713392a0962924914f5c2fc 557de3797f59f926</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.357.1">Status: Downloaded newer image for portainer/portainer-ce:latest 8893b79c137ab4f63bf621180a39fbfed744731a5f9c038218a54a8b05422c2c</span></strong></pre></li> <li><span class="koboSpan" id="kobo.358.1">Once Portainer is installed, next run </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">docker ps</span></strong><span class="koboSpan" id="kobo.360.1"> to ascertain which containers are running and their health, within </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">Docker Engine.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer385">
<span class="koboSpan" id="kobo.362.1"><img alt="Figure 13.18 – Docker containers running" src="image/B18349_13_018.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.363.1">Figure 13.18 – Docker containers running</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.364.1">Once Portainer is</span><a id="_idIndexMarker1251"/><span class="koboSpan" id="kobo.365.1"> installed, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">docker ps</span></strong><span class="koboSpan" id="kobo.367.1"> shows Portainer is up and running, we’ll have to make </span><a id="_idIndexMarker1252"/><span class="koboSpan" id="kobo.368.1">sure OCI is configured to allow port </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">9000</span></strong><span class="koboSpan" id="kobo.370.1"> to be visible. </span><span class="koboSpan" id="kobo.370.2">In order to expose this port, we’ll have to inform </span><a id="_idIndexMarker1253"/><span class="koboSpan" id="kobo.371.1">OCI of the </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Virtual Cloud Network</span></strong><span class="koboSpan" id="kobo.373.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.374.1">VCN</span></strong><span class="koboSpan" id="kobo.375.1">) we’re working in to allow that port </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">to open.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer386">
<span class="koboSpan" id="kobo.377.1"><img alt="Figure 13.19 – Security list navigation" src="image/B18349_13_019.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.378.1">Figure 13.19 – Security list navigation</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.379.1">After we have navigated to the relevant security list, we’ll want to create a rule like that shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.380.1">following screenshot.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer387">
<span class="koboSpan" id="kobo.381.1"><img alt="Figure 13.20 – VCN security list rule creation" src="image/B18349_13_020.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.382.1">Figure 13.20 – VCN security list rule creation</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.383.1">Once the rule is created, we can see the port exposed outside </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">of OCI.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer388">
<span class="koboSpan" id="kobo.385.1"><img alt="Figure 13.21 – Security list rule" src="image/B18349_13_021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.386.1">Figure 13.21 – Security list rule</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.387.1">We’re able to open a browser and access the Portainer UI. </span><span class="koboSpan" id="kobo.387.2">In order to reach the UI, we need two</span><a id="_idIndexMarker1254"/><span class="koboSpan" id="kobo.388.1"> items, the VM’s public IP and the port. </span><span class="koboSpan" id="kobo.388.2">The following screenshot </span><a id="_idIndexMarker1255"/><span class="koboSpan" id="kobo.389.1">shows the port, </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">9000</span></strong><span class="koboSpan" id="kobo.391.1">, and the IP is the same IP we used to access the VM when we used </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">ssh</span></strong><span class="koboSpan" id="kobo.393.1"> to log in to </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">the VM.</span></span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.395.1">You can also find the IP on the OCI console. </span><span class="koboSpan" id="kobo.395.2">Navigate to your VM from the </span><strong class="bold"><span class="koboSpan" id="kobo.396.1">Compute</span></strong><span class="koboSpan" id="kobo.397.1"> menu, then go to </span><strong class="bold"><span class="koboSpan" id="kobo.398.1">Instance</span></strong><span class="koboSpan" id="kobo.399.1">, which will take you to all your created VMs in the OCI console menu. </span><span class="koboSpan" id="kobo.399.2">Then, copy the IP address of the VM, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.400.1">following screenshot.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer389">
<span class="koboSpan" id="kobo.401.1"><img alt="Figure 13.22 – IP of the VM" src="image/B18349_13_022.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.402.1">Figure 13.22 – IP of the VM</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.403.1">Once you have</span><a id="_idIndexMarker1256"/><span class="koboSpan" id="kobo.404.1"> the address, open your browser and </span><a id="_idIndexMarker1257"/><span class="koboSpan" id="kobo.405.1">enter that information in the form of </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">https://&lt;IP&gt;:9000</span></strong><span class="koboSpan" id="kobo.407.1">. </span><span class="koboSpan" id="kobo.407.2">In our case, this is  </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.408.1">https://132.226.58.24:9000</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.410.1">Note: You may have to refresh the Portainer environment if you get a stale page like </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">the following:</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer390">
<span class="koboSpan" id="kobo.412.1"><img alt="Figure 13.23 – Portainer landing page" src="image/B18349_13_023.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.413.1">Figure 13.23 – Portainer landing page</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.414.1">In order to refresh, you’ll need to restart the Portainer environment by running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">docker </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">restart</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.417.1"> command:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.418.1">[opc@portainer2 ~]$ sudo docker restart portainer</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.419.1">portainer</span></strong></pre></li> <li><span class="koboSpan" id="kobo.420.1">After you’ve restarted Portainer, you can go back to the browser and refresh the page. </span><span class="koboSpan" id="kobo.420.2">You</span><a id="_idIndexMarker1258"/><span class="koboSpan" id="kobo.421.1"> should be able to hit the Portainer welcome </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">page now.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer391">
<span class="koboSpan" id="kobo.423.1"><img alt="Figure 13.24 – Portainer initial configuration" src="image/B18349_13_024.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.424.1">Figure 13.24 – Portainer initial configuration</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.425.1">Portainer </span><a id="_idIndexMarker1259"/><span class="koboSpan" id="kobo.426.1">will make you set a 12-digit alphanumeric password for </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">the environment.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer392">
<span class="koboSpan" id="kobo.428.1"><img alt="Figure 13.25 – Portainer password creation" src="image/B18349_13_025.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.429.1">Figure 13.25 – Portainer password creation</span></p>
<p><span class="koboSpan" id="kobo.430.1">You now have a</span><a id="_idIndexMarker1260"/><span class="koboSpan" id="kobo.431.1"> working Portainer environment</span><a id="_idIndexMarker1261"/><span class="koboSpan" id="kobo.432.1"> running inside a container in Docker, hosted by a VM </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">in OCI.</span></span></p>
<h1 id="_idParaDest-286"><a id="_idTextAnchor379"/><span class="koboSpan" id="kobo.434.1">Using VirtualBox to springboard VMs to OCI</span></h1>
<p><span class="koboSpan" id="kobo.435.1">Working 9 to 5 </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">with workloads?</span></span></p>
<p><span class="koboSpan" id="kobo.437.1">One common factor in a number </span><a id="_idIndexMarker1262"/><span class="koboSpan" id="kobo.438.1">of these recipes is moving workloads from one environment to </span><a id="_idIndexMarker1263"/><span class="koboSpan" id="kobo.439.1">another. </span><span class="koboSpan" id="kobo.439.2">Working between different hypervisor types (e.g., VMware, KVM, and Xen) is done using common formats, such as the </span><strong class="bold"><span class="koboSpan" id="kobo.440.1">Open Virtualization Format</span></strong><span class="koboSpan" id="kobo.441.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.442.1">Open Virtualization Appliance</span></strong><span class="koboSpan" id="kobo.443.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.444.1">OVF</span></strong><span class="koboSpan" id="kobo.445.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.446.1">OVA</span></strong><span class="koboSpan" id="kobo.447.1">). </span><span class="koboSpan" id="kobo.447.2">Essentially, this puts components into a </span><a id="_idIndexMarker1264"/><span class="koboSpan" id="kobo.448.1">centrally understandable format that most virtualization host environments can understand. </span><span class="koboSpan" id="kobo.448.2">Images are transferable and interchangeable between virtualization formats. </span><span class="koboSpan" id="kobo.448.3">In this case, there are a few more puzzle pieces that need to be in place, such as network, storage, and a limitation on the number of </span><span class="No-Break"><span class="koboSpan" id="kobo.449.1">attached drives.</span></span></p>
<p><span class="koboSpan" id="kobo.450.1">Imagine a world where any workload (be it application- or database-based) can stay with you throughout the project life cycle, and be transferable between different virtualization farms, or CSPs. </span><span class="koboSpan" id="kobo.450.2">You can carry these created environments with you throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">your environments.</span></span></p>
<p><span class="koboSpan" id="kobo.452.1">VirtualBox resides on your system as a host and is classified as a “type 2” hypervisor, allowing you to host multiple guest machines on your host environment. </span><span class="koboSpan" id="kobo.452.2">Your host environment, VirtualBox, has every aspect of a virtual farm that one would expect from a larger enterprise product, just </span><a id="_idIndexMarker1265"/><span class="koboSpan" id="kobo.453.1">broken down into much smaller and simpler parts. </span><span class="koboSpan" id="kobo.453.2">The compute and memory</span><a id="_idIndexMarker1266"/><span class="koboSpan" id="kobo.454.1"> aspects are carved out from your host environment (your computer). </span><span class="koboSpan" id="kobo.454.2">The storage components are comprised of parts of your local hard drive, or external storage environments such as an externally attached NVMe drives. </span><span class="koboSpan" id="kobo.454.3">Lastly, the network is made up of bridge components, which are virtual networks that sit above your </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">physical interfaces.</span></span></p>
<p><span class="koboSpan" id="kobo.456.1">What comes first, the VM or </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">the OS?</span></span></p>
<p><span class="koboSpan" id="kobo.458.1">Every evolution begins with a foundation. </span><span class="koboSpan" id="kobo.458.2">Before we can even consider migrating a VM from VirtualBox to OCI, we must prepare that VM for migration. </span><span class="koboSpan" id="kobo.458.3">In the case of VirtualBox, there are just a couple of prework items to complete before you build a VM to migrate to a cloud environment, such as OCI. </span><span class="koboSpan" id="kobo.458.4">We’ll walk through these prerequisites throughout this recipe. </span><span class="koboSpan" id="kobo.458.5">The following diagram describes the stages of configuring, installing, and migrating a VM to </span><span class="No-Break"><span class="koboSpan" id="kobo.459.1">a CSP.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer393">
<span class="koboSpan" id="kobo.460.1"><img alt="Figure 13.26 – VM configuration stages" src="image/B18349_13_026.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.461.1">Figure 13.26 – VM configuration stages</span></p>
<h2 id="_idParaDest-287"><a id="_idTextAnchor380"/><span class="koboSpan" id="kobo.462.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.463.1">Preparing the OS isn’t any different from setting the foundation before building a house. </span><span class="koboSpan" id="kobo.463.2">I find it easier to initially configure the OS on the VirtualBox user interface configuration, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">ssh</span></strong><span class="koboSpan" id="kobo.465.1"> after you bring up networking and have established communication, meaning you have connectivity into the </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">virtual machine.</span></span></p>
<p><span class="koboSpan" id="kobo.467.1">There are five stages in preparing a VM image to be imported into OCI as an image. </span><span class="koboSpan" id="kobo.467.2">These are </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">as follows:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.469.1">Interface names</span></strong><span class="koboSpan" id="kobo.470.1">: This involves standardization to ensure interface names are recognized by the host environment. </span><span class="koboSpan" id="kobo.470.2">This is translatable to how the host system </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1">implements networking.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.472.1">Interface configuration</span></strong><span class="koboSpan" id="kobo.473.1">: Here, we confirm there are no MAC addresses shown, among other pre-configuration tasks. </span><span class="koboSpan" id="kobo.473.2">Duplicate MAC addresses lead to extra complexity, making this a key point </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">in configuration.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.475.1">GRUB(2) configuration</span></strong><span class="koboSpan" id="kobo.476.1">: This involves </span><a id="_idIndexMarker1267"/><span class="koboSpan" id="kobo.477.1">preparing </span><span class="No-Break"><span class="koboSpan" id="kobo.478.1">the kernel.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.479.1">Serial console configuration</span></strong><span class="koboSpan" id="kobo.480.1">: This </span><a id="_idIndexMarker1268"/><span class="koboSpan" id="kobo.481.1">step is pretty much the number-one error on import and use. </span><span class="koboSpan" id="kobo.481.2">Without it, your OCI environment will fail on import, or the VM will </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">not boot.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.483.1">Rebooting the OS</span></strong><span class="koboSpan" id="kobo.484.1">; that is, restarting </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">your machine.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.486.1">The following diagram walks through the configuration stages of the OS from boot </span><span class="No-Break"><span class="koboSpan" id="kobo.487.1">to reboot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer394">
<span class="koboSpan" id="kobo.488.1"><img alt="Figure 13.27 – OS configuration stages" src="image/B18349_13_027.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.489.1">Figure 13.27 – OS configuration stages</span></p>
<p><span class="koboSpan" id="kobo.490.1">Notice the interface names after </span><span class="No-Break"><span class="koboSpan" id="kobo.491.1">the change:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.492.1">
[root@small-ol8 ~]# dmesg | grep -i eth
[    4.702620] e1000 0000:00:03.0 eth0: (PCI:33MHz:32-bit) 08:00:27:8d:0f:64
[    4.702628] e1000 0000:00:03.0 eth0: Intel(R) PRO/1000 Network Connection
[    5.371103] e1000 0000:00:08.0 eth1: (PCI:33MHz:32-bit) 08:00:27:89:87:98
[    5.371132] e1000 0000:00:08.0 eth1: Intel(R) PRO/1000 Network Connection
[    5.373296] e1000 0000:00:08.0 enp0s8: renamed from eth1
[    5.374971] e1000 0000:00:03.0 enp0s3: renamed from eth0</span></pre> <p><span class="koboSpan" id="kobo.493.1">We’ll need to execute the change on the kernel with the changes shown in the following code block, renaming the interface to match. </span><span class="koboSpan" id="kobo.493.2">This will require GRUB(2), as GRUB is the middleman between the</span><a id="_idIndexMarker1269"/><span class="koboSpan" id="kobo.494.1"> kernel and the OS. </span><span class="koboSpan" id="kobo.494.2">We have the current interface names now, so where do we go </span><a id="_idIndexMarker1270"/><span class="koboSpan" id="kobo.495.1">from here? </span><span class="koboSpan" id="kobo.495.2">What we’re doing here is renaming the interfaces to reflect a more acceptable name, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">net0</span></strong><span class="koboSpan" id="kobo.497.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">Eth0</span></strong><span class="koboSpan" id="kobo.499.1">. </span><span class="koboSpan" id="kobo.499.2">So, we have to move (</span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">mv</span></strong><span class="koboSpan" id="kobo.501.1">) or rename the </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">interface filenames:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.503.1">
[root@small-ol8 network-scripts]# mv /etc/sysconfig/network-scripts/ifcfg-enp0s3 /etc/sysconfig/network-scripts/ifcfg-net0
[root@small-ol8 network-scripts]# mv /etc/sysconfig/network-scripts/ifcfg-enp0s8 /etc/sysconfig/network-scripts/ifcfg-net1</span></pre> <p><span class="koboSpan" id="kobo.504.1">After we rename the interfaces, we need to change the entries in the configuration files themselves to match the filename. </span><span class="koboSpan" id="kobo.504.2">In the following code, we’re renaming the configuration </span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">net0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.508.1">[root@small-ol8 network-scripts]# vi /etc/sysconfig/network-scripts/ifcfg-net0</span></strong><span class="koboSpan" id="kobo.509.1">
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=</span><strong class="bold"><span class="koboSpan" id="kobo.510.1">enp0s3</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.511.1">UUID=e9e58f08-3fcc-4a43-b605-797a6bc9998f</span></strong><span class="koboSpan" id="kobo.512.1">
DEVICE=</span><strong class="bold"><span class="koboSpan" id="kobo.513.1">enp0s3</span></strong><span class="koboSpan" id="kobo.514.1">
ONBOOT=yes
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=</span><strong class="bold"><span class="koboSpan" id="kobo.515.1">net0</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.516.1">#UUID=e9e58f08-3fcc-4a43-b605-797a6bc9998f</span></strong><span class="koboSpan" id="kobo.517.1">
DEVICE=</span><strong class="bold"><span class="koboSpan" id="kobo.518.1">net0</span></strong><span class="koboSpan" id="kobo.519.1">
ONBOOT=yes</span></pre> <p><span class="koboSpan" id="kobo.520.1">We’re doing the</span><a id="_idIndexMarker1271"/><span class="koboSpan" id="kobo.521.1"> same thing here as previously, but in this</span><a id="_idIndexMarker1272"/><span class="koboSpan" id="kobo.522.1"> case, we’re </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">changing </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">net1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.525.1">:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.526.1">[root@small-ol8 network-scripts]# vi /etc/sysconfig/network-scripts/ifcfg-net1</span></strong><span class="koboSpan" id="kobo.527.1">
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=</span><strong class="bold"><span class="koboSpan" id="kobo.528.1">enp0s8</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.529.1">UUID=eb2e5ed7-ec13-4f76-a0bf-48e7bcf45e84</span></strong><span class="koboSpan" id="kobo.530.1">
DEVICE=</span><strong class="bold"><span class="koboSpan" id="kobo.531.1">enp0s8</span></strong><span class="koboSpan" id="kobo.532.1">
ONBOOT=yes
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=</span><strong class="bold"><span class="koboSpan" id="kobo.533.1">net1</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.534.1">#UUID=eb2e5ed7-ec13-4f76-a0bf-48e7bcf45e84</span></strong><span class="koboSpan" id="kobo.535.1">
DEVICE=</span><strong class="bold"><span class="koboSpan" id="kobo.536.1">net1</span></strong><span class="koboSpan" id="kobo.537.1">
ONBOOT=yes</span></pre> <p><span class="koboSpan" id="kobo.538.1">In the following code</span><a id="_idIndexMarker1273"/><span class="koboSpan" id="kobo.539.1"> block, we’re using </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">ip a</span></strong><span class="koboSpan" id="kobo.541.1"> to identify </span><a id="_idIndexMarker1274"/><span class="koboSpan" id="kobo.542.1">the interfaces and make sure our changes have </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">taken effect:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.544.1">[root@small-ol8 ~]# ip a</span></strong><span class="koboSpan" id="kobo.545.1">
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: </span><strong class="bold"><span class="koboSpan" id="kobo.546.1">net0</span></strong><span class="koboSpan" id="kobo.547.1">: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:8d:0f:64 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.5/24 brd 10.0.2.255 scope global dynamic noprefixroute net0
       valid_lft 459sec preferred_lft 459sec
    inet6 fe80::a00:27ff:fe8d:f64/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
3: </span><strong class="bold"><span class="koboSpan" id="kobo.548.1">net1</span></strong><span class="koboSpan" id="kobo.549.1">: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:89:87:98 brd ff:ff:ff:ff:ff:ff
    inet 192.168.56.5/24 brd 192.168.56.255 scope global dynamic noprefixroute net0
       valid_lft 85059sec preferred_lft 85059sec
    inet6 fe80::a00:27ff:fe89:8798/64 scope link noprefixroute
       valid_lft forever preferred_lft forever
4: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000
    link/ether 52:54:00:9a:de:c3 brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
[root@small-ol8 ~]#</span></pre> <p><span class="koboSpan" id="kobo.550.1">What does GRUB configuration</span><a id="_idIndexMarker1275"/><span class="koboSpan" id="kobo.551.1"> do? </span><span class="koboSpan" id="kobo.551.2">It alters the way the OS boots and loads kernels. </span><span class="koboSpan" id="kobo.551.3">For example, let’s look at </span><a id="_idIndexMarker1276"/><span class="koboSpan" id="kobo.552.1">what changing the serial connection details accomplishes. </span><span class="koboSpan" id="kobo.552.2">(We’re getting a little off-subject here; however, it’s important to understand how OCI works in worse-case scenarios.) Imagine you can’t reach your server; the network is down, but the server is green and up. </span><span class="koboSpan" id="kobo.552.3">You can use a serial connection as a back door. </span><span class="koboSpan" id="kobo.552.4">The following </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">console</span></strong><span class="koboSpan" id="kobo.554.1"> edit instructs the OS to allow an out-of-band connection to </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">the VM:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.556.1">
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
</span><strong class="bold"><span class="koboSpan" id="kobo.557.1">GRUB_TERMINAL_OUTPUT="console"</span></strong><span class="koboSpan" id="kobo.558.1">
GRUB_DISABLE_RECOVERY="true"
GRUB_ENABLE_BLSCFG=true
~
~
~
GRUB_TIMEOUT=5
GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
</span><strong class="bold"><span class="koboSpan" id="kobo.559.1">GRUB_TERMINAL="serial console"</span></strong><span class="koboSpan" id="kobo.560.1">
GRUB_TERMINAL_OUTPUT="console"
</span><strong class="bold"><span class="koboSpan" id="kobo.561.1">GRUB_CMDLINE_LINUX="console=tty1 console=ttyS0,115200"</span></strong><span class="koboSpan" id="kobo.562.1">
GRUB_DISABLE_RECOVERY="true"
GRUB_ENABLE_BLSCFG=true
</span><strong class="bold"><span class="koboSpan" id="kobo.563.1">GRUB_SERIAL_COMMAND="serial --unit=0 –speed=115200"</span></strong><span class="koboSpan" id="kobo.564.1">
~
~
~</span></pre> <p><span class="koboSpan" id="kobo.565.1">The following command reloads GRUB. </span><span class="koboSpan" id="kobo.565.2">As we can’t edit GRUB directly, we edit it through a configuration file, and use this to execute edits on GRUB. </span><span class="koboSpan" id="kobo.565.3">This tells the OS that we’re ready to reload and have entered </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">new data:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.567.1">
[root@small-ol8 ~]# grub2-mkconfig -o /boot/grub2/grub.cfg</span></pre> <p><span class="koboSpan" id="kobo.568.1">Since we edited GRUB and made </span><a id="_idIndexMarker1277"/><span class="koboSpan" id="kobo.569.1">a couple of other OS changes, it’s good to get a fresh start </span><span class="No-Break"><span class="koboSpan" id="kobo.570.1">with things:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.571.1">
[root@small-ol8 network-scripts]# reboot</span></pre> <p><span class="koboSpan" id="kobo.572.1">Going through these</span><a id="_idIndexMarker1278"/><span class="koboSpan" id="kobo.573.1"> configuration changes can be confusing. </span><span class="koboSpan" id="kobo.573.2">When it comes down to it, we’re narrowing the differences between OCI-born instances and the instance we’re configuring in this recipe. </span><span class="koboSpan" id="kobo.573.3">The GRUB changes are getting the environment ready to operate within the </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">OCI tenancy.</span></span></p>
<p><span class="koboSpan" id="kobo.575.1">There are a few more steps you’ll have to configure on your host machine for connectivity between </span><a id="_idIndexMarker1279"/><span class="koboSpan" id="kobo.576.1">VirtualBox and OCI. </span><span class="koboSpan" id="kobo.576.2">The way VirtualBox communicates with OCI is through an </span><strong class="bold"><span class="koboSpan" id="kobo.577.1">Application Programming Interface</span></strong><span class="koboSpan" id="kobo.578.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.579.1">API</span></strong><span class="koboSpan" id="kobo.580.1">). </span><span class="koboSpan" id="kobo.580.2">This connectivity requires public and private API keys to be created, and that public key to be uploaded </span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">to OCI.</span></span></p>
<p><span class="koboSpan" id="kobo.582.1">There are several steps in the authentication between VirtualBox and OCI. </span><span class="koboSpan" id="kobo.582.2">The following are the components, and their OCID/outputs are what will be needed for connectivity </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">to OCI:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.584.1">OCI account:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.585.1">Tenancy</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.586.1">Compartment</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.587.1">VCN</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.588.1">Storage bucket</span></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.589.1">API keys</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.590.1">VirtualBox – make sure to create and capture the required keys, as shown after </span><span class="No-Break"><span class="koboSpan" id="kobo.591.1">this list:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.592.1">API keys</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.593.1">Host OS (your computer) – make sure to create and capture the required keys, as detailed after </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">this list:</span></span><ul><li><span class="No-Break"><span class="koboSpan" id="kobo.595.1">API keys</span></span></li></ul></li>
</ul>
<p><span class="koboSpan" id="kobo.596.1">Private and public keys are the gateway components to sharing information from one environment with another. </span><span class="koboSpan" id="kobo.596.2">A public key can be shared and is used as an encryption method to keep a packet. </span><span class="koboSpan" id="kobo.596.3">The private key is kept local, is not shared beyond that user, and is used to decrypt the packet. </span><span class="koboSpan" id="kobo.596.4">When</span><a id="_idIndexMarker1280"/><span class="koboSpan" id="kobo.597.1"> placed together, the private and public keys create a lockbox, keeping the </span><a id="_idIndexMarker1281"/><span class="koboSpan" id="kobo.598.1">packets flowing between two systems secret while in transit. </span><strong class="source-inline"><span class="koboSpan" id="kobo.599.1">openssl</span></strong><span class="koboSpan" id="kobo.600.1"> is used to generate the keys, both public </span><span class="No-Break"><span class="koboSpan" id="kobo.601.1">and private.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer395">
<span class="koboSpan" id="kobo.602.1"><img alt="Figure 13.28 – OpenSSL key creation" src="image/B18349_13_028.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.603.1">Figure 13.28 – OpenSSL key creation</span></p>
<p><span class="koboSpan" id="kobo.604.1">After creating the preceding key, you need to change the permissions so the key can be used only by you. </span><span class="koboSpan" id="kobo.604.2">We’ll use </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">chmod</span></strong><span class="koboSpan" id="kobo.606.1"> to configure those permissions and allow the key to be used by </span><span class="No-Break"><span class="koboSpan" id="kobo.607.1">the user.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer396">
<span class="koboSpan" id="kobo.608.1"><img alt="Figure 13.29 – OpenSSL key permissions" src="image/B18349_13_029.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.609.1">Figure 13.29 – OpenSSL key permissions</span></p>
<p><span class="koboSpan" id="kobo.610.1">After creating the private key, we need to create the public key. </span><span class="koboSpan" id="kobo.610.2">This is the key you’ll be uploading to OCI so VirtualBox and OCI can communicate with one another. </span><span class="koboSpan" id="kobo.610.3">We use the private key to create a public key so the two environments can communicate with </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">one another.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer397">
<span class="koboSpan" id="kobo.612.1"><img alt="Figure 13.30 – Public key creation" src="image/B18349_13_030.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.613.1">Figure 13.30 – Public key creation</span></p>
<p><span class="koboSpan" id="kobo.614.1">The next steps are to collect the required data from your OCI cloud account to enter the VirtualBox configuration. </span><span class="koboSpan" id="kobo.614.2">The information entered will help VirtualBox integrate, through the OCI API, your OCI </span><a id="_idIndexMarker1282"/><span class="koboSpan" id="kobo.615.1">tenancy and compartments through your VCN. </span><span class="koboSpan" id="kobo.615.2">Imagine this as building a</span><a id="_idIndexMarker1283"/><span class="koboSpan" id="kobo.616.1"> highway between VirtualBox and OCI. </span><span class="koboSpan" id="kobo.616.2">The keys, both public and private, are the keys to the kingdom, allowing packets to traverse </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">that highway.</span></span></p>
<h2 id="_idParaDest-288"><a id="_idTextAnchor381"/><span class="koboSpan" id="kobo.618.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.619.1">The following steps walk through uploading the key and configuring VirtualBox to communicate </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">with OCI:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.621.1">First, just as with any other CSP, we need to log in to </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">our account.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer398">
<span class="koboSpan" id="kobo.623.1"><img alt="Figure 13.31 – Log in to your account" src="image/B18349_13_031.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.624.1">Figure 13.31 – Log in to your account</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.625.1">And this is where we wait for OCI to log </span><span class="No-Break"><span class="koboSpan" id="kobo.626.1">us in…</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer399">
<span class="koboSpan" id="kobo.627.1"><img alt="Figure 13.32 – Logging in" src="image/B18349_13_032.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.628.1">Figure 13.32 – Logging in</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.629.1">Once you’ve logged in to</span><a id="_idIndexMarker1284"/><span class="koboSpan" id="kobo.630.1"> your account, you’re ready to log in to the tenancy itself. </span><span class="koboSpan" id="kobo.630.2">This is</span><a id="_idIndexMarker1285"/><span class="koboSpan" id="kobo.631.1"> where the action begins, and you’ll start to see your efforts pay off. </span><span class="koboSpan" id="kobo.631.2">We start by identifying our tenancy and continue </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">from there.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer400">
<span class="koboSpan" id="kobo.633.1"><img alt="Figure 13.33 – Choose and log in to verify your identity provider" src="image/B18349_13_033.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.634.1">Figure 13.33 – Choose and log in to verify your identity provider</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.635.1">Once you’re logged in and inside the tenancy, most of the data needed will be in the user settings and is linked to the public key upload. </span><span class="koboSpan" id="kobo.635.2">The keys themselves generate a fingerprint, which is the pathway between OCI </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">and VirtualBox.</span></span><p class="list-inset"><span class="koboSpan" id="kobo.637.1">You’ll see your user icon on the right-hand side of the OCI portal. </span><span class="koboSpan" id="kobo.637.2">This will take you into the area with all your account, tenancy, and personal data. </span><span class="koboSpan" id="kobo.637.3">This is also where you’ll configure</span><a id="_idIndexMarker1286"/><span class="koboSpan" id="kobo.638.1"> your </span><span class="No-Break"><span class="koboSpan" id="kobo.639.1">key access.</span></span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer401">
<span class="koboSpan" id="kobo.640.1"><img alt="Figure 13.34 – OCI profile" src="image/B18349_13_034.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.641.1">Figure 13.34 – OCI profile</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.642.1">Once you expand</span><a id="_idIndexMarker1287"/><span class="koboSpan" id="kobo.643.1"> that menu, you’ll see </span><strong class="bold"><span class="koboSpan" id="kobo.644.1">User settings</span></strong><span class="koboSpan" id="kobo.645.1">. </span><span class="koboSpan" id="kobo.645.2">This is the access point for all your user access </span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">to OCI.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer402">
<span class="koboSpan" id="kobo.647.1"><img alt="Figure 13.35 – User settings" src="image/B18349_13_035.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.648.1">Figure 13.35 – User settings</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.649.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.650.1">API Keys</span></strong><span class="koboSpan" id="kobo.651.1"> section will allow you to enter key values </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">for access.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer403">
<span class="koboSpan" id="kobo.653.1"><img alt="Figure 13.36 – Administrators’ privileges and API keys" src="image/B18349_13_036.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.654.1">Figure 13.36 – Administrators’ privileges and API keys</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.655.1">In the following</span><a id="_idIndexMarker1288"/><span class="koboSpan" id="kobo.656.1"> screenshot, you can see all the keys </span><a id="_idIndexMarker1289"/><span class="koboSpan" id="kobo.657.1">currently uploaded to OCI, reflecting your specific user. </span><span class="koboSpan" id="kobo.657.2">If you click </span><strong class="bold"><span class="koboSpan" id="kobo.658.1">Add API Key</span></strong><span class="koboSpan" id="kobo.659.1">, this will bring up the options for adding </span><span class="No-Break"><span class="koboSpan" id="kobo.660.1">a key.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer404">
<span class="koboSpan" id="kobo.661.1"><img alt="Figure 13.37 – API keys" src="image/B18349_13_037.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.662.1">Figure 13.37 – API keys</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.663.1">Select </span><strong class="bold"><span class="koboSpan" id="kobo.664.1">Choose Public Key File</span></strong><span class="koboSpan" id="kobo.665.1"> and then select the file from your local environment. </span><span class="koboSpan" id="kobo.665.2">Remember we created a public key in the last section. </span><span class="koboSpan" id="kobo.665.3">We’re going to select that public </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">key here.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer405">
<span class="koboSpan" id="kobo.667.1"><img alt="Figure 13.38 – Public key" src="image/B18349_13_038.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.668.1">Figure 13.38 – Public key</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.669.1">Once you’ve</span><a id="_idIndexMarker1290"/><span class="koboSpan" id="kobo.670.1"> chosen the key and it’s uploaded to OCI, you’ll</span><a id="_idIndexMarker1291"/><span class="koboSpan" id="kobo.671.1"> see that key on screen. </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">Click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.673.1">Add</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer406">
<span class="koboSpan" id="kobo.675.1"><img alt="Figure 13.39 – Added key committed" src="image/B18349_13_039.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.676.1">Figure 13.39 – Added key committed</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.677.1">Now that we’ve got past the key imports, we’ve arrived at a point where we can start to configure access. </span><span class="koboSpan" id="kobo.677.2">A configuration screen will appear after you’ve officially added the key. </span><span class="koboSpan" id="kobo.677.3">This configuration file is all that you need, aside from a compartment OCID, which we’ll talk about later, to configure the </span><span class="No-Break"><span class="koboSpan" id="kobo.678.1">VirtualBox/OCI interface.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer407">
<span class="koboSpan" id="kobo.679.1"><img alt="Figure 13.40 – Configuration displayed" src="image/B18349_13_040.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.680.1">Figure 13.40 – Configuration displayed</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.681.1">Copy the information under </span><strong class="bold"><span class="koboSpan" id="kobo.682.1">Configuration File Preview</span></strong><span class="koboSpan" id="kobo.683.1">. </span><span class="koboSpan" id="kobo.683.2">You’ll need it to configure VirtualBox to communicate </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">with OCI.</span></span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.685.1">We’re heading back to</span><a id="_idIndexMarker1292"/><span class="koboSpan" id="kobo.686.1"> VirtualBox now. </span><span class="koboSpan" id="kobo.686.2">Near the thumbtack icon will be a menu bar. </span><span class="koboSpan" id="kobo.686.3">This menu is</span><a id="_idIndexMarker1293"/><span class="koboSpan" id="kobo.687.1"> the heart of VirtualBox and allows you to alter everything from vdisks, as shown in the following screenshot, to network configurations and, of course, settings relating to the cloud. </span><span class="koboSpan" id="kobo.687.2">Expand the </span><strong class="bold"><span class="koboSpan" id="kobo.688.1">Cloud</span></strong><span class="koboSpan" id="kobo.689.1"> menu item to access the </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">OCI settings:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer408">
<span class="koboSpan" id="kobo.691.1"><img alt="Figure 13.41 – VirtualBox OCI cloud configuration settings" src="image/B18349_13_041.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.692.1">Figure 13.41 – VirtualBox OCI cloud configuration settings</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.693.1">Once you’ve </span><a id="_idIndexMarker1294"/><span class="koboSpan" id="kobo.694.1">selected this option, you’ll have to</span><a id="_idIndexMarker1295"/><span class="koboSpan" id="kobo.695.1"> enter a name. </span><span class="koboSpan" id="kobo.695.2">I will enter </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">OCI</span></strong><span class="koboSpan" id="kobo.697.1">, since we are </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">using OCI.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer409">
<span class="koboSpan" id="kobo.699.1"><img alt="Figure 13.42 – Configuration name" src="image/B18349_13_042.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.700.1">Figure 13.42 – Configuration name</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.701.1">Now, under </span><strong class="bold"><span class="koboSpan" id="kobo.702.1">Oracle Cloud Infrastructure</span></strong><span class="koboSpan" id="kobo.703.1">, you’ll see your new profile, </span><strong class="bold"><span class="koboSpan" id="kobo.704.1">OCI</span></strong><span class="koboSpan" id="kobo.705.1">. </span><span class="koboSpan" id="kobo.705.2">You can click on </span><strong class="bold"><span class="koboSpan" id="kobo.706.1">Properties</span></strong><span class="koboSpan" id="kobo.707.1">, which will allow you to configure that </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">OCI profile.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer410">
<span class="koboSpan" id="kobo.709.1"><img alt="Figure 13.43 – Name committed" src="image/B18349_13_043.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.710.1">Figure 13.43 – Name committed</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.711.1">This is where it’s handy to have the OCI portal open in another window, or cut and paste the variables in a notepad. </span><span class="koboSpan" id="kobo.711.2">You’ll need all the info we went over a couple of sections ago in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.712.1">Figure 13</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.713.1">.40</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.714.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.715.1">The first OCID you’ll want to copy is that </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">user</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.718.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer411">
<span class="koboSpan" id="kobo.719.1"><img alt="Figure 13.44 – User OCID" src="image/B18349_13_044.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.720.1">Figure 13.44 – User OCID</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.721.1">Paste that</span><a id="_idIndexMarker1296"/><span class="koboSpan" id="kobo.722.1"> OCID into the </span><strong class="bold"><span class="koboSpan" id="kobo.723.1">user</span></strong><span class="koboSpan" id="kobo.724.1"> property on the OCI profile, shown in the preceding</span><a id="_idIndexMarker1297"/><span class="koboSpan" id="kobo.725.1"> screenshot, into VirtualBox. </span><span class="koboSpan" id="kobo.725.2">Hopefully, you’ll now see where we’re going </span><span class="No-Break"><span class="koboSpan" id="kobo.726.1">with this.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer412">
<span class="koboSpan" id="kobo.727.1"><img alt="Figure 13.45 – Configuring the user OCID" src="image/B18349_13_045.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.728.1">Figure 13.45 – Configuring the user OCID</span></p>
<ol>
<li value="15"><span class="koboSpan" id="kobo.729.1">As previously, but</span><a id="_idIndexMarker1298"/><span class="koboSpan" id="kobo.730.1"> this time with </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1">tenancy</span></strong><span class="koboSpan" id="kobo.732.1">, copy the </span><a id="_idIndexMarker1299"/><span class="koboSpan" id="kobo.733.1">OCID and go back </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">to VirtualBox.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer413">
<span class="koboSpan" id="kobo.735.1"><img alt="Figure 13.46 – Tenancy OCID" src="image/B18349_13_046.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.736.1">Figure 13.46 – Tenancy OCID</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.737.1">Again, as </span><a id="_idIndexMarker1300"/><span class="koboSpan" id="kobo.738.1">previously, paste the tenancy OCID in the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.739.1">tenancy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.740.1"> field.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer414">
<span class="koboSpan" id="kobo.741.1"><img alt="Figure 13.47 – Configuring the tenancy OCID" src="image/B18349_13_047.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.742.1">Figure 13.47 – Configuring the tenancy OCID</span></p>
<ol>
<li value="17"><span class="koboSpan" id="kobo.743.1">Go back to your notepad or OCI portal and copy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.744.1">region</span></strong><span class="koboSpan" id="kobo.745.1"> value, in this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">us-asburn-1</span></strong><span class="koboSpan" id="kobo.747.1">, as the </span><a id="_idIndexMarker1301"/><span class="koboSpan" id="kobo.748.1">following screenshot will show. </span><span class="koboSpan" id="kobo.748.2">Remember, all this will make sense shortly. </span><span class="koboSpan" id="kobo.748.3">Essentially, what we’re doing is instructing VirtualBox where to go, how to get there, and what region, tenancy, user, and key to use </span><span class="No-Break"><span class="koboSpan" id="kobo.749.1">for access.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer415">
<span class="koboSpan" id="kobo.750.1"><img alt="Figure 13.48 – Region" src="image/B18349_13_048.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.751.1">Figure 13.48 – Region</span></p>
<ol>
<li value="18"><span class="koboSpan" id="kobo.752.1">As previously, paste</span><a id="_idIndexMarker1302"/><span class="koboSpan" id="kobo.753.1"> the region in</span><a id="_idIndexMarker1303"/><span class="koboSpan" id="kobo.754.1"> the </span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">correct field.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer416">
<span class="koboSpan" id="kobo.756.1"><img alt="Figure 13.49 – Configuring the region" src="image/B18349_13_049.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.757.1">Figure 13.49 – Configuring the region</span></p>
<ol>
<li value="19"><span class="koboSpan" id="kobo.758.1">Next, you’ll need to go to the OCI console or notepad and copy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.759.1">fingerprint</span></strong><span class="koboSpan" id="kobo.760.1"> value</span><a id="_idIndexMarker1304"/><span class="koboSpan" id="kobo.761.1"> to input </span><span class="No-Break"><span class="koboSpan" id="kobo.762.1">into VirtualBox.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer417">
<span class="koboSpan" id="kobo.763.1"><img alt="Figure 13.50 – Fingerprint" src="image/B18349_13_050.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.764.1">Figure 13.50 – Fingerprint</span></p>
<ol>
<li value="20"><span class="koboSpan" id="kobo.765.1">Again, paste that</span><a id="_idIndexMarker1305"/><span class="koboSpan" id="kobo.766.1"> fingerprint value into the </span><span class="No-Break"><span class="koboSpan" id="kobo.767.1">appropriate field.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer418">
<span class="koboSpan" id="kobo.768.1"><img alt="Figure 13.51 – Configuring the fingerprint" src="image/B18349_13_051.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.769.1">Figure 13.51 – Configuring the fingerprint</span></p>
<ol>
<li value="21"><span class="koboSpan" id="kobo.770.1">One of the last entries is the location of the private key you created. </span><span class="koboSpan" id="kobo.770.2">This is not in OCI, but rather in </span><a id="_idIndexMarker1306"/><span class="koboSpan" id="kobo.771.1">your local system, where you created it. </span><span class="koboSpan" id="kobo.771.2">Remember, the private key is </span><a id="_idIndexMarker1307"/><span class="koboSpan" id="kobo.772.1">the local key, which shouldn’t be shared. </span><span class="koboSpan" id="kobo.772.2">You’ll want to capture that path and go back </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">to VirtualBox.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer419">
<span class="koboSpan" id="kobo.774.1"><img alt="Figure 13.52 – API key location" src="image/B18349_13_052.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.775.1">Figure 13.52 – API key location</span></p>
<ol>
<li value="22"><span class="koboSpan" id="kobo.776.1">As shown previously, paste the path into the </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">appropriate field.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer420">
<span class="koboSpan" id="kobo.778.1"><img alt="Figure 13.53 – Configuration key location" src="image/B18349_13_053.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.779.1">Figure 13.53 – Configuration key location</span></p>
<ol>
<li value="23"><span class="koboSpan" id="kobo.780.1">Last but not least, you’ll want to </span><a id="_idIndexMarker1308"/><span class="koboSpan" id="kobo.781.1">go back to your OCI portal and find the </span><strong class="bold"><span class="koboSpan" id="kobo.782.1">Compartments</span></strong><span class="koboSpan" id="kobo.783.1"> menu. </span><span class="koboSpan" id="kobo.783.2">I find a </span><a id="_idIndexMarker1309"/><span class="koboSpan" id="kobo.784.1">simple search to be the easiest way of locating this option, but if you want to go directly to it, you’ll find it </span><span class="No-Break"><span class="koboSpan" id="kobo.785.1">under </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.786.1">Identity</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer421">
<span class="koboSpan" id="kobo.788.1"><img alt="Figure 13.54 – Compartments" src="image/B18349_13_054.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.789.1">Figure 13.54 – Compartments</span></p>
<ol>
<li value="24"><span class="koboSpan" id="kobo.790.1">Expand the compartment you want to use and copy the OCID to enter it into the VirtualBox </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">OCI </span></span><span class="No-Break"><a id="_idIndexMarker1310"/></span><span class="No-Break"><span class="koboSpan" id="kobo.792.1">configuration.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer422">
<span class="koboSpan" id="kobo.793.1"><img alt="Figure 13.55 – Compartment selection" src="image/B18349_13_055.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.794.1">Figure 13.55 – Compartment selection</span></p>
<ol>
<li value="25"><span class="koboSpan" id="kobo.795.1">As shown previously, paste </span><a id="_idIndexMarker1311"/><span class="koboSpan" id="kobo.796.1">that OCID into the </span><span class="No-Break"><span class="koboSpan" id="kobo.797.1">appropriate field.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer423">
<span class="koboSpan" id="kobo.798.1"><img alt="Figure 13.56 – Configuring the compartment" src="image/B18349_13_056.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.799.1">Figure 13.56 – Configuring the compartment</span></p>
<ol>
<li value="26"><span class="koboSpan" id="kobo.800.1">After all the data is entered, you should see that OCID’s region, user, tenancy, key file location, compartment, and </span><a id="_idIndexMarker1312"/><span class="koboSpan" id="kobo.801.1">fingerprint properties are </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1">all populated.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer424">
<span class="koboSpan" id="kobo.803.1"><img alt="Figure 13.57 – Completed configuration" src="image/B18349_13_057.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.804.1">Figure 13.57 – Completed configuration</span></p>
<ol>
<li value="27"><span class="koboSpan" id="kobo.805.1">Once you’ve </span><a id="_idIndexMarker1313"/><span class="koboSpan" id="kobo.806.1">confirmed that everything is complete, apply the settings. </span><span class="koboSpan" id="kobo.806.2">You’ll see the new profile show up; we named </span><span class="No-Break"><span class="koboSpan" id="kobo.807.1">it </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.808.1">OCI</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.809.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer425">
<span class="koboSpan" id="kobo.810.1"><img alt="Figure 13.58 – VirtualBox OCI" src="image/B18349_13_058.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.811.1">Figure 13.58 – VirtualBox OCI</span></p>
<ol>
<li value="28"><span class="koboSpan" id="kobo.812.1">If you expand that profile, you’ll see the tenancy is now empty. </span><span class="koboSpan" id="kobo.812.2">If you already had infrastructure deployed there, you would see those resources show up here, provided they are running in the same compartment as the OCID entered in </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">the profile.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer426">
<span class="koboSpan" id="kobo.814.1"><img alt="Figure 13.59 – Expanded OCI" src="image/B18349_13_059.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.815.1">Figure 13.59 – Expanded OCI</span></p>
<p><span class="koboSpan" id="kobo.816.1">You’re now ready to start </span><a id="_idIndexMarker1314"/><span class="koboSpan" id="kobo.817.1">moving over the VM we built earlier in </span><span class="No-Break"><span class="koboSpan" id="kobo.818.1">this section:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.819.1">The first step in </span><a id="_idIndexMarker1315"/><span class="koboSpan" id="kobo.820.1">exporting your VM to OCI, once the VirtualBox OCI profile is configured, is to click on </span><strong class="bold"><span class="koboSpan" id="kobo.821.1">Export</span></strong><span class="koboSpan" id="kobo.822.1"> in the VirtualBox main </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">welcome menu.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer427">
<span class="koboSpan" id="kobo.824.1"><img alt="Figure 13.60 – Export" src="image/B18349_13_060.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.825.1">Figure 13.60 – Export</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.826.1">You’ll next need to select the VM to be exported to OCI, as shown in the following screenshot – in this case, it’s called </span><strong class="bold"><span class="koboSpan" id="kobo.827.1">small-ol8.8</span></strong><span class="koboSpan" id="kobo.828.1">. </span><span class="koboSpan" id="kobo.828.2">This will vary depending on what you named </span><span class="No-Break"><span class="koboSpan" id="kobo.829.1">your VM.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer428">
<span class="koboSpan" id="kobo.830.1"><img alt="Figure 13.61 – Image selection" src="image/B18349_13_061.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.831.1">Figure 13.61 – Image selection</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.832.1">After you</span><a id="_idIndexMarker1316"/><span class="koboSpan" id="kobo.833.1"> choose your VM, you must configure the format in which to export the VM. </span><span class="koboSpan" id="kobo.833.2">We’re going to expand the </span><strong class="bold"><span class="koboSpan" id="kobo.834.1">Format</span></strong><span class="koboSpan" id="kobo.835.1"> dropdown, as shown in the following screenshot. </span><span class="koboSpan" id="kobo.835.2">The format being chosen is Oracle Cloud Infrastructure, as we’re migrating this VM to OCI. </span><span class="koboSpan" id="kobo.835.3">As a side note, exports</span><a id="_idIndexMarker1317"/><span class="koboSpan" id="kobo.836.1"> aren’t only for OCI. </span><span class="koboSpan" id="kobo.836.2">You can export a VM as an OVF to a myriad of platforms, for example, Vmware, OLVM, KVM, HyperV, or AWS. </span><span class="koboSpan" id="kobo.836.3">As mentioned at the beginning of this recipe, OVF and OVA both reflect somewhat the same concept: they say, “here’s an exported environment and here’s how to put it back together.” </span><span class="koboSpan" id="kobo.836.4">There are, however, some differences between OVF and OVA. </span><span class="koboSpan" id="kobo.836.5">OVF can be viewed as a group of files making up an environment, with an attached manifest identifying the files and how they are used. </span><span class="koboSpan" id="kobo.836.6">OVA is a single file; consider it a server in a box, an already-built environment ready to be imported. </span><span class="koboSpan" id="kobo.836.7">Both can be used outside of OCI, but in this case, we’re going to concentrate on an OCI export using </span><strong class="source-inline"><span class="koboSpan" id="kobo.837.1">.ova</span></strong><span class="koboSpan" id="kobo.838.1"> as the </span><span class="No-Break"><span class="koboSpan" id="kobo.839.1">file extension.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer429">
<span class="koboSpan" id="kobo.840.1"><img alt="Figure 13.62 – Image format configuration" src="image/B18349_13_062.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.841.1">Figure 13.62 – Image format configuration</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.842.1">As shown </span><a id="_idIndexMarker1318"/><span class="koboSpan" id="kobo.843.1">previously, choose </span><strong class="bold"><span class="koboSpan" id="kobo.844.1">Oracle Cloud Infrastructure</span></strong><span class="koboSpan" id="kobo.845.1"> for the format and </span><strong class="bold"><span class="koboSpan" id="kobo.846.1">OCI</span></strong><span class="koboSpan" id="kobo.847.1"> as the VirtualBox profile, as highlighted in red in the</span><a id="_idIndexMarker1319"/> <span class="No-Break"><span class="koboSpan" id="kobo.848.1">following screenshot.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer430">
<span class="koboSpan" id="kobo.849.1"><img alt="Figure 13.63 – Profile" src="image/B18349_13_063.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.850.1">Figure 13.63 – Profile</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.851.1">You’ll want to make sure all your variables are correct, as shown in the following screenshot, as well</span><a id="_idIndexMarker1320"/><span class="koboSpan" id="kobo.852.1"> as confirming you have an </span><a id="_idIndexMarker1321"/><span class="koboSpan" id="kobo.853.1">available </span><span class="No-Break"><span class="koboSpan" id="kobo.854.1">storage bucket:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer431">
<span class="koboSpan" id="kobo.855.1"><img alt="Figure 13.64 – Image output" src="image/B18349_13_064.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.856.1">Figure 13.64 – Image output</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.857.1">You’ll want to expand the </span><strong class="bold"><span class="koboSpan" id="kobo.858.1">Shape</span></strong><span class="koboSpan" id="kobo.859.1"> section and choose another shape, as </span><strong class="source-inline"><span class="koboSpan" id="kobo.860.1">VM.Optimized.Flex</span></strong><span class="koboSpan" id="kobo.861.1"> will not be recognized by OCI. </span><span class="koboSpan" id="kobo.861.2">I identified a usable shape, as shown in the following figure, that is available and lightweight. </span><span class="koboSpan" id="kobo.861.3">Follow the following image for </span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">shape selection:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer432">
<span class="koboSpan" id="kobo.863.1"><img alt="Figure 13.65 – Shape selection" src="image/B18349_13_065.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.864.1">Figure 13.65 – Shape selection</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.865.1">As shown previously, expanding</span><a id="_idIndexMarker1322"/><span class="koboSpan" id="kobo.866.1"> this section will give</span><a id="_idIndexMarker1323"/><span class="koboSpan" id="kobo.867.1"> you several shape choices. </span><span class="koboSpan" id="kobo.867.2">As a note, a shape is a predetermined size, reflecting a set number of resources. </span><span class="koboSpan" id="kobo.867.3">In this case, we’re </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">choosing </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.869.1">VM.Standard.E2.1</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.870.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer433">
<span class="koboSpan" id="kobo.871.1"><img alt="Figure 13.66 – Image shape" src="image/B18349_13_066.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.872.1">Figure 13.66 – Image shape</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.873.1">Note</span></p>
<p class="callout"><strong class="source-inline"><span class="koboSpan" id="kobo.874.1">VM.Optimized3.Flex</span></strong><span class="koboSpan" id="kobo.875.1"> is not a recognized shape and will not import. </span><span class="koboSpan" id="kobo.875.2">You can always change the shape after the VM </span><span class="No-Break"><span class="koboSpan" id="kobo.876.1">is deployed.</span></span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.877.1">Once you’ve chosen</span><a id="_idIndexMarker1324"/><span class="koboSpan" id="kobo.878.1"> the appropriate shape, finish configuring </span><a id="_idIndexMarker1325"/><span class="koboSpan" id="kobo.879.1">the export, then click </span><strong class="bold"><span class="koboSpan" id="kobo.880.1">Finish</span></strong><span class="koboSpan" id="kobo.881.1"> to execute the migration </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">to OCI.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer434">
<span class="koboSpan" id="kobo.883.1"><img alt="Figure 13.67 – Image shape committed" src="image/B18349_13_067.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.884.1">Figure 13.67 – Image shape committed</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.885.1">Make sure your</span><a id="_idIndexMarker1326"/><span class="koboSpan" id="kobo.886.1"> image shape is identified and the </span><a id="_idIndexMarker1327"/><span class="koboSpan" id="kobo.887.1">correct shape </span><span class="No-Break"><span class="koboSpan" id="kobo.888.1">was selected:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer435">
<span class="koboSpan" id="kobo.889.1"><img alt="Figure 13.68 – Image writing" src="image/B18349_13_068.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.890.1">Figure 13.68 – Image writing</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.891.1">Once the export is</span><a id="_idIndexMarker1328"/><span class="koboSpan" id="kobo.892.1"> completed, you’ll see your VM running in OCI, and you’ll be able to log in to </span><a id="_idIndexMarker1329"/><span class="koboSpan" id="kobo.893.1">your portal and see that same VM running within your OCI tenancy </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">as well.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer436">
<span class="koboSpan" id="kobo.895.1"><img alt="Figure 13.69 – Image running" src="image/B18349_13_069.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.896.1">Figure 13.69 – Image running</span></p>
<p><span class="koboSpan" id="kobo.897.1">As shown in the </span><a id="_idIndexMarker1330"/><span class="koboSpan" id="kobo.898.1">preceding screenshot, the image is </span><a id="_idIndexMarker1331"/><span class="koboSpan" id="kobo.899.1">now running as a VM </span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">in OCI.</span></span></p>
<h1 id="_idParaDest-289"><a id="_idTextAnchor382"/><span class="koboSpan" id="kobo.901.1">For everyone else, let’s make custom images for AWS</span></h1>
<p><span class="koboSpan" id="kobo.902.1">It seems very simple: build an image, export the image, and import the image (wash, rinse, and repeat). </span><span class="koboSpan" id="kobo.902.2">The concept isn’t much more complicated than that. </span><span class="koboSpan" id="kobo.902.3">However, there are steps to go through, and some of those steps </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">have catches.</span></span></p>
<p><span class="koboSpan" id="kobo.904.1">You’ll first have to walk</span><a id="_idIndexMarker1332"/><span class="koboSpan" id="kobo.905.1"> through the steps of setting </span><a id="_idIndexMarker1333"/><span class="koboSpan" id="kobo.906.1">up and configuring the AWS CLI. </span><span class="koboSpan" id="kobo.906.2">Much like the OCI CLI, AWS’s CLI is a direct command line executing against the AWS API. </span><span class="koboSpan" id="kobo.906.3">After the CLI is installed and configured, we’ll walk through setting up an S3 bucket, configuring that bucket, and changing access to allow upload. </span><span class="koboSpan" id="kobo.906.4">The following figure shows the stages and their touchpoints throughout this recipe. </span><span class="koboSpan" id="kobo.906.5">The AWS CLI is the common thread in staging and executing, along with the GUI. </span><span class="koboSpan" id="kobo.906.6">The storage factors in AWS are managed by access control and authentication, which allow us to create, store, and manipulate stored </span><a id="_idIndexMarker1334"/><span class="koboSpan" id="kobo.907.1">objects </span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">and buckets.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer437">
<span class="koboSpan" id="kobo.909.1"><img alt="Figure 13.70 – AWS CLI storage connections" src="image/B18349_13_070.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.910.1">Figure 13.70 – AWS CLI storage connections</span></p>
<h2 id="_idParaDest-290"><a id="_idTextAnchor383"/><span class="koboSpan" id="kobo.911.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.912.1">Before we can start using the CLI, we must download and install the requisite package. </span><span class="koboSpan" id="kobo.912.2">For this recipe, I am using a Mac. </span><span class="koboSpan" id="kobo.912.3">You can easily navigate to AWS and download the CLI for Windows or Linux. </span><span class="koboSpan" id="kobo.912.4">Regardless, once</span><a id="_idIndexMarker1335"/><span class="koboSpan" id="kobo.913.1"> the CLI is installed, the commands do not differ other than the locations and some other OS-specific changes, which really only apply </span><span class="No-Break"><span class="koboSpan" id="kobo.914.1">to Windows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.915.1">
root# curl "https://awscli.amazonaws.com/AWSCLIV2.pkg" -o "AWSCLIV2.pkg"</span></pre> <p><span class="koboSpan" id="kobo.916.1">After downloading the package, you’ll have to install the CLI. </span><span class="koboSpan" id="kobo.916.2">This is done by executing the install package, </span><span class="No-Break"><span class="koboSpan" id="kobo.917.1">as shown:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.918.1">
root# installer -pkg ./AWSCLIV2.pkg -target /</span></pre> <p><span class="koboSpan" id="kobo.919.1">In this case, we upgraded the Python version to match what the AWS CLI requires. </span><span class="koboSpan" id="kobo.919.2">You can check this by running a </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">which</span></strong><span class="koboSpan" id="kobo.921.1"> command at the end, which will show the location of the AWS CLI install, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.922.1">--version</span></strong><span class="koboSpan" id="kobo.923.1">, which will list the version of the AWS CLI, as well </span><span class="No-Break"><span class="koboSpan" id="kobo.924.1">as Python:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.925.1">
root# which aws
/usr/local/bin/aws
root# aws --version
aws-cli/2.7.28 Python/3.9.11 Darwin/21.6.0 exe/x86_64</span></pre> <p><span class="koboSpan" id="kobo.926.1">After you’ve installed the</span><a id="_idIndexMarker1336"/><span class="koboSpan" id="kobo.927.1"> AWS CLI, we’ll move on to configuring the Oracle Linux OS. </span><span class="koboSpan" id="kobo.927.2">We’ll later configure the </span><a id="_idIndexMarker1337"/><span class="koboSpan" id="kobo.928.1">AWS CLI with the details of our AWS account and data </span><span class="No-Break"><span class="koboSpan" id="kobo.929.1">center location:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer438">
<span class="koboSpan" id="kobo.930.1"><img alt="Figure 13.71 – Create a new VM" src="image/B18349_13_077.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.931.1">Figure 13.71 – Create a new VM</span></p>
<p><span class="koboSpan" id="kobo.932.1">You’ll want to fill in all the fields as we did in previous sections. </span><span class="koboSpan" id="kobo.932.2">Make sure to name your VM by referencing the disk you created (</span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">/Users/USER/Desktop/&lt;NAME&gt;</span></strong><span class="koboSpan" id="kobo.934.1">). </span><span class="koboSpan" id="kobo.934.2">This will help keep things in place later. </span><span class="koboSpan" id="kobo.934.3">You can always go back to the VM in VirtualBox and find the associated media, but it’s easier to name the disk now, while creating </span><span class="No-Break"><span class="koboSpan" id="kobo.935.1">the VM.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer439">
<span class="koboSpan" id="kobo.936.1"><img alt="Figure 13.72 – ISO selection" src="image/B18349_13_078.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.937.1">Figure 13.72 – ISO selection</span></p>
<p><span class="koboSpan" id="kobo.938.1">If you remember, in the previous section, we allocated CPU and memory. </span><span class="koboSpan" id="kobo.938.2">Just like in any other build environment, we need to specify, install, and configure resources. </span><span class="koboSpan" id="kobo.938.3">Whether they are virtual or</span><a id="_idIndexMarker1338"/><span class="koboSpan" id="kobo.939.1"> physical, we’re still installing resources. </span><span class="koboSpan" id="kobo.939.2">In this case, we’re configuring this VM with 4 GB </span><a id="_idIndexMarker1339"/><span class="koboSpan" id="kobo.940.1">of RAM and two vCPUs. </span><span class="koboSpan" id="kobo.940.2">Remember, a vCPU is the equivalent of a processor thread. </span><span class="koboSpan" id="kobo.940.3">So, here we’re installing two vCPUs, which is the equivalent of one physical core (two threads (vCPUs) = one </span><span class="No-Break"><span class="koboSpan" id="kobo.941.1">processor core).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer440">
<span class="koboSpan" id="kobo.942.1"><img alt="Figure 13.73 – Resources" src="image/B18349_13_079.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.943.1">Figure 13.73 – Resources</span></p>
<p><span class="koboSpan" id="kobo.944.1">After we’ve configured the CPU and memory resources, we’re ready to move on to choosing the media (disk) we’re attaching to our VM. </span><span class="koboSpan" id="kobo.944.2">In this case, we’re not going to choose the default of creating a disk, instead using an existing one. </span><span class="koboSpan" id="kobo.944.3">Remember, we created our own drive in </span><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">.vmdk</span></strong><span class="koboSpan" id="kobo.946.1"> format, so let’s select to use an existing virtual hard disk </span><span class="No-Break"><span class="koboSpan" id="kobo.947.1">file here.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer441">
<span class="koboSpan" id="kobo.948.1"><img alt="Figure 13.74 – Options to create or use an existing disk" src="image/B18349_13_080.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.949.1">Figure 13.74 – Options to create or use an existing disk</span></p>
<p><span class="koboSpan" id="kobo.950.1">Remember to select the drive (assuming you created one before) that matches the name of the VM, or create</span><a id="_idIndexMarker1340"/><span class="koboSpan" id="kobo.951.1"> a new one. </span><span class="koboSpan" id="kobo.951.2">Note that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.952.1">.vmdk</span></strong><span class="koboSpan" id="kobo.953.1"> extension should be used again in order for it to</span><a id="_idIndexMarker1341"/> <span class="No-Break"><span class="koboSpan" id="kobo.954.1">be recognized.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer442">
<span class="koboSpan" id="kobo.955.1"><img alt="Figure 13.75 – Disk selection" src="image/B18349_13_081.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.956.1">Figure 13.75 – Disk selection</span></p>
<p><span class="koboSpan" id="kobo.957.1">As in past recipes, we confirm our selections on the </span><strong class="bold"><span class="koboSpan" id="kobo.958.1">Summary</span></strong><span class="koboSpan" id="kobo.959.1"> screen and execute the configuration by selecting </span><strong class="bold"><span class="koboSpan" id="kobo.960.1">Finish</span></strong><span class="koboSpan" id="kobo.961.1">. </span><span class="koboSpan" id="kobo.961.2">We won’t be walking through the build, as we have other recipes that take you through </span><span class="No-Break"><span class="koboSpan" id="kobo.962.1">configuring OSs.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer443">
<span class="koboSpan" id="kobo.963.1"><img alt="Figure 13.76 – Configuration summary" src="image/B18349_13_082.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.964.1">Figure 13.76 – Configuration summary</span></p>
<p><span class="koboSpan" id="kobo.965.1">Once we have built the</span><a id="_idIndexMarker1342"/><span class="koboSpan" id="kobo.966.1"> Linux OS, we can walk through configuring our AWS environment, including</span><a id="_idIndexMarker1343"/><span class="koboSpan" id="kobo.967.1"> setting up the CLI to upload and execute our AMI upon its creation, from our OVA. </span><span class="koboSpan" id="kobo.967.2">Remember, in the previous recipe, we built out a VM and created an OCI from that OVA image in VirtualBox. </span><span class="koboSpan" id="kobo.967.3">We’ll be doing the same here, exporting from VirtualBox and importing into AWS. </span><span class="koboSpan" id="kobo.967.4">The difference here is that there isn’t a fancy VirtualBox environment to work from. </span><span class="koboSpan" id="kobo.967.5">We’ll be using the AWS CLI to import that OVA image into our S3 environment. </span><span class="koboSpan" id="kobo.967.6">However, as mentioned previously, in order to do that, we need to configure that connection and have it in place. </span><span class="koboSpan" id="kobo.967.7">We’ll walk through those settings on AWS to migrate from VirtualBox to AWS, and see what that </span><span class="No-Break"><span class="koboSpan" id="kobo.968.1">transformation entails.</span></span></p>
<p><span class="koboSpan" id="kobo.969.1">While the OVA is exporting, you’ll want to start preparing the AWS </span><span class="No-Break"><span class="koboSpan" id="kobo.970.1">CLI configuration.</span></span></p>
<h2 id="_idParaDest-291"><a id="_idTextAnchor384"/><span class="koboSpan" id="kobo.971.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.972.1">You can upload the exported OVA in one of two ways, either via the command line or through the S3 console. </span><span class="koboSpan" id="kobo.972.2">Either way, it’s simply an upload to AWS S3 and it doesn’t really matter how you </span><span class="No-Break"><span class="koboSpan" id="kobo.973.1">do it.</span></span></p>
<p><span class="koboSpan" id="kobo.974.1">Uploading</span><a id="_idIndexMarker1344"/><span class="koboSpan" id="kobo.975.1"> through the S3 console is a fairly </span><a id="_idIndexMarker1345"/><span class="No-Break"><span class="koboSpan" id="kobo.976.1">straightforward process:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.977.1">Log in to your AWS console, </span><span class="No-Break"><span class="koboSpan" id="kobo.978.1">as shown:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer444">
<span class="koboSpan" id="kobo.979.1"><img alt="Figure 13.77 – Sign in as root user" src="image/B18349_13_083.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.980.1">Figure 13.77 – Sign in as root user</span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.981.1">After signing in, navigate </span><span class="No-Break"><span class="koboSpan" id="kobo.982.1">to S3.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer445">
<span class="koboSpan" id="kobo.983.1"><img alt="Figure 13.78 – AWS menu" src="image/B18349_13_084.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.984.1">Figure 13.78 – AWS menu</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.985.1">If S3 isn’t on your</span><a id="_idIndexMarker1346"/><span class="koboSpan" id="kobo.986.1"> most recently visited</span><a id="_idIndexMarker1347"/><span class="koboSpan" id="kobo.987.1"> list, navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.988.1">Storage</span></strong><span class="koboSpan" id="kobo.989.1"> and select </span><strong class="bold"><span class="koboSpan" id="kobo.990.1">S3</span></strong><span class="koboSpan" id="kobo.991.1">, or just type </span><strong class="source-inline"><span class="koboSpan" id="kobo.992.1">S3</span></strong><span class="koboSpan" id="kobo.993.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.994.1">search bar.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer446">
<span class="koboSpan" id="kobo.995.1"><img alt="Figure 13.79 – S3 storage" src="image/B18349_13_085.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.996.1">Figure 13.79 – S3 storage</span></p>
<ol>
<li value="3"><span class="koboSpan" id="kobo.997.1">After navigating </span><a id="_idIndexMarker1348"/><span class="koboSpan" id="kobo.998.1">to S3, you’ll want to create a</span><a id="_idIndexMarker1349"/><span class="koboSpan" id="kobo.999.1"> bucket for your OVA to be uploaded to. </span><span class="koboSpan" id="kobo.999.2">A bucket is essentially object storage and a great place to store images and </span><span class="No-Break"><span class="koboSpan" id="kobo.1000.1">the like.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer447">
<span class="koboSpan" id="kobo.1001.1"><img alt="Figure 13.80 – S3 bucket" src="image/B18349_13_086.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1002.1">Figure 13.80 – S3 bucket</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.1003.1">After selecting </span><strong class="bold"><span class="koboSpan" id="kobo.1004.1">Create bucket</span></strong><span class="koboSpan" id="kobo.1005.1">, you’ll want to name that bucket and configure other aspects </span><span class="No-Break"><span class="koboSpan" id="kobo.1006.1">of it.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer448">
<span class="koboSpan" id="kobo.1007.1"><img alt="Figure 13.81 – Bucket name and region" src="image/B18349_13_087.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1008.1">Figure 13.81 – Bucket name and region</span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.1009.1">After naming, choose </span><a id="_idIndexMarker1350"/><span class="koboSpan" id="kobo.1010.1">which region, as </span><a id="_idIndexMarker1351"/><span class="koboSpan" id="kobo.1011.1">per the AWS docs, the bucket should be created under. </span><span class="koboSpan" id="kobo.1011.2">Remember to create the bucket in the same region you’re operating in and will be using for this exercise. </span><span class="koboSpan" id="kobo.1011.3">In this case, we’ll be deploying into US East 2 - </span><span class="No-Break"><span class="koboSpan" id="kobo.1012.1">Ohio.</span></span></li>
<li><span class="koboSpan" id="kobo.1013.1">We won’t be enabling any </span><span class="No-Break"><span class="koboSpan" id="kobo.1014.1">ACLs here:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer449">
<span class="koboSpan" id="kobo.1015.1"><img alt="Figure 13.82 – ACLs" src="image/B18349_13_088.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1016.1">Figure 13.82 – ACLs</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.1017.1">As mentioned previously concerning AWS access control, we’re going to uncheck </span><strong class="bold"><span class="koboSpan" id="kobo.1018.1">Block all public access</span></strong><span class="koboSpan" id="kobo.1019.1"> and open the S3 bucket up to direct public (i.e., </span><span class="No-Break"><span class="koboSpan" id="kobo.1020.1">external) access.</span></span></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.1021.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1022.1">This is not generally a best practice; we are just doing this for </span><span class="No-Break"><span class="koboSpan" id="kobo.1023.1">testing purposes.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer450">
<span class="koboSpan" id="kobo.1024.1"><img alt="Figure 13.83 – Public access" src="image/B18349_13_089.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1025.1">Figure 13.83 – Public access</span></p>
<ol>
<li value="8"><span class="koboSpan" id="kobo.1026.1">We’re going to keep </span><a id="_idIndexMarker1352"/><span class="koboSpan" id="kobo.1027.1">versioning disabled (the default), as shown in the following screenshot, as this is</span><a id="_idIndexMarker1353"/><span class="koboSpan" id="kobo.1028.1"> a one-time bucket and will not be kept perpetually. </span><span class="koboSpan" id="kobo.1028.2">You’ll want to enable versioning when you’re working through the life cycle of a project with multiple versions, for example, multiple iterations of </span><span class="No-Break"><span class="koboSpan" id="kobo.1029.1">an image.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer451">
<span class="koboSpan" id="kobo.1030.1"><img alt="Figure 13.84 – Versioning" src="image/B18349_13_090.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1031.1">Figure 13.84 – Versioning</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.1032.1">Again, since we’re</span><a id="_idIndexMarker1354"/><span class="koboSpan" id="kobo.1033.1"> keeping this basic, we will not be associating any </span><span class="No-Break"><span class="koboSpan" id="kobo.1034.1">tags either.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer452">
<span class="koboSpan" id="kobo.1035.1"><img alt="Figure 13.85 – Tags" src="image/B18349_13_091.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1036.1">Figure 13.85 – Tags</span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.1037.1">We’re going to </span><a id="_idIndexMarker1355"/><span class="koboSpan" id="kobo.1038.1">use standard server-side encryption with </span><span class="No-Break"><span class="koboSpan" id="kobo.1039.1">S3-managed keys.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer453">
<span class="koboSpan" id="kobo.1040.1"><img alt="Figure 13.86 – Encryption" src="image/B18349_13_092.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1041.1">Figure 13.86 – Encryption</span></p>
<ol>
<li value="11"><span class="koboSpan" id="kobo.1042.1">Ignore the advanced options as well and go ahead with creating </span><span class="No-Break"><span class="koboSpan" id="kobo.1043.1">the bucket.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer454">
<span class="koboSpan" id="kobo.1044.1"><img alt="Figure 13.87 – Bucket display" src="image/B18349_13_093.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1045.1">Figure 13.87 – Bucket display</span></p>
<ol>
<li value="12"><span class="koboSpan" id="kobo.1046.1">Navigate to the</span><a id="_idIndexMarker1356"/><span class="koboSpan" id="kobo.1047.1"> newly created </span><strong class="source-inline"><span class="koboSpan" id="kobo.1048.1">vb-aws-us-east-2</span></strong><span class="koboSpan" id="kobo.1049.1"> bucket and click </span><span class="No-Break"><span class="koboSpan" id="kobo.1050.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1051.1">Upload</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1052.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer455">
<span class="koboSpan" id="kobo.1053.1"><img alt="Figure 13.88 – Object upload" src="image/B18349_13_094.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1054.1">Figure 13.88 – Object upload</span></p>
<ol>
<li value="13"><span class="koboSpan" id="kobo.1055.1">Click </span><strong class="bold"><span class="koboSpan" id="kobo.1056.1">Add files</span></strong><span class="koboSpan" id="kobo.1057.1">. </span><span class="koboSpan" id="kobo.1057.2">This </span><a id="_idIndexMarker1357"/><span class="koboSpan" id="kobo.1058.1">will allow you to choose the correct OVA to upload to the bucket from your </span><span class="No-Break"><span class="koboSpan" id="kobo.1059.1">own filesystem.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer456">
<span class="koboSpan" id="kobo.1060.1"><img alt="Figure 13.89 – Add files" src="image/B18349_13_095.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1061.1">Figure 13.89 – Add files</span></p>
<ol>
<li value="14"><span class="koboSpan" id="kobo.1062.1">We’re going to </span><a id="_idIndexMarker1358"/><span class="koboSpan" id="kobo.1063.1">choose the OVA we</span><a id="_idIndexMarker1359"/><span class="koboSpan" id="kobo.1064.1"> created at the beginning of </span><span class="No-Break"><span class="koboSpan" id="kobo.1065.1">this recipe.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer457">
<span class="koboSpan" id="kobo.1066.1"><img alt="Figure 13.90 – File selection" src="image/B18349_13_096.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1067.1">Figure 13.90 – File selection</span></p>
<ol>
<li value="15"><span class="koboSpan" id="kobo.1068.1">Once you’ve added the file, carry out </span><span class="No-Break"><span class="koboSpan" id="kobo.1069.1">the upload.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer458">
<span class="koboSpan" id="kobo.1070.1"><img alt="Figure 13.91 – File destination" src="image/B18349_13_097.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1071.1">Figure 13.91 – File destination</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.1072.1">The status bar will </span><a id="_idIndexMarker1360"/><span class="koboSpan" id="kobo.1073.1">show the progress </span><a id="_idIndexMarker1361"/><span class="koboSpan" id="kobo.1074.1">and the </span><strong class="bold"><span class="koboSpan" id="kobo.1075.1">Summary</span></strong><span class="koboSpan" id="kobo.1076.1"> section will show the destination in S3, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1077.1">following screenshot.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer459">
<span class="koboSpan" id="kobo.1078.1"><img alt="Figure 13.92 – Uploading" src="image/B18349_13_098.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1079.1">Figure 13.92 – Uploading</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1080.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1081.1">If you navigate away from this status page, you will not be able to get back to it, so stay on the page until the upload </span><span class="No-Break"><span class="koboSpan" id="kobo.1082.1">is complete.</span></span></p>
<ol>
<li value="17"><span class="koboSpan" id="kobo.1083.1">After the upload is</span><a id="_idIndexMarker1362"/><span class="koboSpan" id="kobo.1084.1"> complete – or, if you’re up for multitasking, open another AWS console</span><a id="_idIndexMarker1363"/><span class="koboSpan" id="kobo.1085.1"> session in the meantime – you’ll have to set up roles and access for the bucket you just created. </span><span class="koboSpan" id="kobo.1085.2">Navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.1086.1">Identity and Access Management</span></strong><span class="koboSpan" id="kobo.1087.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.1088.1">IAM</span></strong><span class="koboSpan" id="kobo.1089.1">) to access the</span><a id="_idIndexMarker1364"/> <span class="No-Break"><span class="koboSpan" id="kobo.1090.1">role data.</span></span></li>
<li><span class="koboSpan" id="kobo.1091.1">Under </span><strong class="bold"><span class="koboSpan" id="kobo.1092.1">Roles</span></strong><span class="koboSpan" id="kobo.1093.1">, you can create customized roles for access, authentication, or any other </span><span class="No-Break"><span class="koboSpan" id="kobo.1094.1">IAM-related criteria.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer460">
<span class="koboSpan" id="kobo.1095.1"><img alt="Figure 13.93 – AWS Roles" src="image/B18349_13_0931.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1096.1">Figure 13.93 – AWS Roles</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1097.1">We’ll be configuring</span><a id="_idIndexMarker1365"/><span class="koboSpan" id="kobo.1098.1"> roles and permissions from the command line. </span><span class="koboSpan" id="kobo.1098.2">We must create an IAM user</span><a id="_idIndexMarker1366"/><span class="koboSpan" id="kobo.1099.1"> and secret as without access or authentication, the CLI won’t operate. </span><span class="koboSpan" id="kobo.1099.2">Then we can configure the CLI to be connected to </span><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">our account.</span></span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1101.1">To configure and associate the user with that access key, you have to navigate back to IAM, as the following steps will </span><span class="No-Break"><span class="koboSpan" id="kobo.1102.1">walk through.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer461">
<span class="koboSpan" id="kobo.1103.1"><img alt="Figure 13.94 – Security, Identity, &amp; Compliance menu" src="image/B18349_13_100.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1104.1">Figure 13.94 – Security, Identity, &amp; Compliance menu</span></p>
<ol>
<li value="19"><span class="koboSpan" id="kobo.1105.1">Once you’ve</span><a id="_idIndexMarker1367"/><span class="koboSpan" id="kobo.1106.1"> expanded </span><strong class="bold"><span class="koboSpan" id="kobo.1107.1">Security, Identity, &amp; Compliance</span></strong><span class="koboSpan" id="kobo.1108.1">, you will see the option to navigate to the</span><a id="_idIndexMarker1368"/><span class="koboSpan" id="kobo.1109.1"> IAM console. </span><span class="koboSpan" id="kobo.1109.2">Alternatively, you can type </span><strong class="source-inline"><span class="koboSpan" id="kobo.1110.1">IAM</span></strong><span class="koboSpan" id="kobo.1111.1"> in the search bar. </span><span class="koboSpan" id="kobo.1111.2">As we’re trying to help you become familiar </span><a id="_idIndexMarker1369"/><span class="koboSpan" id="kobo.1112.1">with the console, we will </span><a id="_idIndexMarker1370"/><span class="koboSpan" id="kobo.1113.1">detail the specific steps to get to </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">this option.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer462">
<span class="koboSpan" id="kobo.1115.1"><img alt="Figure 13.95 – IAM" src="image/B18349_13_101.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1116.1">Figure 13.95 – IAM</span></p>
<ol>
<li value="20"><span class="koboSpan" id="kobo.1117.1">In order to access and create keys, we must understand what a key is for, and how it related to a</span><a id="_idIndexMarker1371"/><span class="koboSpan" id="kobo.1118.1"> user. </span><span class="koboSpan" id="kobo.1118.2">So, let’s navigate to </span><strong class="bold"><span class="koboSpan" id="kobo.1119.1">Users</span></strong><span class="koboSpan" id="kobo.1120.1">. </span><span class="koboSpan" id="kobo.1120.2">We’ll walk through key creation </span><span class="No-Break"><span class="koboSpan" id="kobo.1121.1">as follows.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer463">
<span class="koboSpan" id="kobo.1122.1"><img alt="Figure 13.96 – Users" src="image/B18349_13_102.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1123.1">Figure 13.96 – Users</span></p>
<ol>
<li value="21"><span class="koboSpan" id="kobo.1124.1">You’ll want to create the user as shown in the following screenshot, which you can do by navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.1125.1">Add users</span></strong><span class="koboSpan" id="kobo.1126.1">. </span><span class="koboSpan" id="kobo.1126.2">We’ll name our </span><span class="No-Break"><span class="koboSpan" id="kobo.1127.1">user </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1128.1">user-admin</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1129.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer464">
<span class="koboSpan" id="kobo.1130.1"><img alt="Figure 13.97 – User name" src="image/B18349_13_103.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1131.1">Figure 13.97 – User name</span></p>
<ol>
<li value="22"><span class="koboSpan" id="kobo.1132.1">Now that we’ve </span><a id="_idIndexMarker1372"/><span class="koboSpan" id="kobo.1133.1">named our user, just like with any other system, we need to define the user, add them to a group, and </span><span class="No-Break"><span class="koboSpan" id="kobo.1134.1">assign privileges.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer465">
<span class="koboSpan" id="kobo.1135.1"><img alt="Figure 13.98 – User definition" src="image/B18349_13_104.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1136.1">Figure 13.98 – User definition</span></p>
<ol>
<li value="23"><span class="koboSpan" id="kobo.1137.1">We’ll assign this user to the admin group and click </span><strong class="bold"><span class="koboSpan" id="kobo.1138.1">Next</span></strong><span class="koboSpan" id="kobo.1139.1"> to continue. </span><span class="koboSpan" id="kobo.1139.2">You can define permissions by creating a group that more closely aligns with your, or your organization’s, policies. </span><span class="koboSpan" id="kobo.1139.3">After</span><a id="_idIndexMarker1373"/><span class="koboSpan" id="kobo.1140.1"> creating the user, this is where we can generate a key, as</span><a id="_idIndexMarker1374"/><span class="koboSpan" id="kobo.1141.1"> shown in the following screenshot, with the secret attached. </span><span class="koboSpan" id="kobo.1141.2">The following steps walk through how to </span><span class="No-Break"><span class="koboSpan" id="kobo.1142.1">do this.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer466">
<span class="koboSpan" id="kobo.1143.1"><img alt="Figure 13.99 – Credentials" src="image/B18349_13_105.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1144.1">Figure 13.99 – Credentials</span></p>
<ol>
<li value="24"><span class="koboSpan" id="kobo.1145.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.1146.1">Security credentials</span></strong><span class="koboSpan" id="kobo.1147.1"> tab is where you create the </span><span class="No-Break"><span class="koboSpan" id="kobo.1148.1">access key.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer467">
<span class="koboSpan" id="kobo.1149.1"><img alt="Figure 13.100 – CLI access control and credentials creation" src="image/B18349_13_106.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1150.1">Figure 13.100 – CLI access control and credentials creation</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1151.1">This access key is specifically</span><a id="_idIndexMarker1375"/><span class="koboSpan" id="kobo.1152.1"> for the CLI, so that’s the option we’ll want to select, as shown in the preceding screenshot, and</span><a id="_idIndexMarker1376"/><span class="koboSpan" id="kobo.1153.1"> then click </span><strong class="bold"><span class="koboSpan" id="kobo.1154.1">Next</span></strong><span class="koboSpan" id="kobo.1155.1">. </span><span class="koboSpan" id="kobo.1155.2">We’re not creating any tags in this recipe, so feel free to skip that step and create the </span><span class="No-Break"><span class="koboSpan" id="kobo.1156.1">access key.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1157.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1158.1">Download the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">.csv</span></strong><span class="koboSpan" id="kobo.1160.1"> file (the credential document), or show and copy the secret access key by clicking on the two squares next to the secret access key. </span><span class="koboSpan" id="kobo.1160.2">This is the only place where you can copy these keys, whether you write them down or paste them into a notepad. </span><strong class="bold"><span class="koboSpan" id="kobo.1161.1">Once you close this page, you won’t be able to recover this information.</span></strong><span class="koboSpan" id="kobo.1162.1"> You could create and reconfigure the CLI without losing the data, but that would be a lot of unnecessary work, so just make sure to write down </span><span class="No-Break"><span class="koboSpan" id="kobo.1163.1">the secret.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer468">
<span class="koboSpan" id="kobo.1164.1"><img alt="Figure 13.101 – Secret" src="image/B18349_13_107.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1165.1">Figure 13.101 – Secret</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1166.1">Make sure to copy the</span><a id="_idIndexMarker1377"/><span class="koboSpan" id="kobo.1167.1"> secret access key, which in our case is shown below – yours will differ from</span><a id="_idIndexMarker1378"/><span class="koboSpan" id="kobo.1168.1"> the one we have </span><span class="No-Break"><span class="koboSpan" id="kobo.1169.1">here: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1170.1">eZ5mZxzGhEYM0AfyBznLDqIT6TMsUz//AO2DMQst</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1171.1">.</span></span></p>
<ol>
<li value="25"><span class="koboSpan" id="kobo.1172.1">Once you’ve created the key and noted down the secret access key, the access key will </span><span class="No-Break"><span class="koboSpan" id="kobo.1173.1">be active.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer469">
<span class="koboSpan" id="kobo.1174.1"><img alt="Figure 13.102 – Access key" src="image/B18349_13_1021.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1175.1">Figure 13.102 – Access key</span></p>
<ol>
<li value="26"><span class="koboSpan" id="kobo.1176.1">After you’ve added the access key, you’ll be able to run </span><strong class="source-inline"><span class="koboSpan" id="kobo.1177.1">aws configure</span></strong><span class="koboSpan" id="kobo.1178.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.1179.1">the CLI:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1180.1">root# aws configure</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1181.1">AWS Access Key ID [****************AZHA]: AKIA3HX45UYOK7HIAZHA</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1182.1">AWS Secret Access Key [****************MQst]:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1183.1">Default region name [us-east-2]: us-east-2</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1184.1">Default output format [json]: json</span></strong></pre></li> </ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.1185.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1186.1">If you put </span><strong class="source-inline"><span class="koboSpan" id="kobo.1187.1">JSON</span></strong><span class="koboSpan" id="kobo.1188.1"> in all caps, this will fail. </span><span class="koboSpan" id="kobo.1188.2">It will not report a failure, but your command will fail when run against </span><span class="No-Break"><span class="koboSpan" id="kobo.1189.1">the API.</span></span></p>
<ol>
<li value="27"><span class="koboSpan" id="kobo.1190.1">After you’ve </span><a id="_idIndexMarker1379"/><span class="koboSpan" id="kobo.1191.1">configured the CLI, you</span><a id="_idIndexMarker1380"/><span class="koboSpan" id="kobo.1192.1"> can execute the following to convert your image from an OVA to </span><span class="No-Break"><span class="koboSpan" id="kobo.1193.1">an AMI:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1194.1">root# aws ec2 import-image --description "VM Image" --disk-containers Format=ova,UserBucket="{S3Bucket=vb-aws-us-east-2,S3Key=vb-aws.ova}"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1195.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1196.1">    "Description": "VM Image",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1197.1">    "ImportTaskId": "import-ami-0908bf8d72b678cdf",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1198.1">    "Progress": "1",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1199.1">    "SnapshotDetails": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1200.1">        {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1201.1">            "DiskImageSize": 0.0,</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1202.1">            "Format": "OVA",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1203.1">            "UserBucket": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1204.1">                "S3Bucket": "vb-aws-us-east-2",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1205.1">                "S3Key": "vb-aws.ova"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1206.1">            }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1207.1">        }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1208.1">    ],</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1209.1">    "Status": "active",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1210.1">    "StatusMessage": "pending"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1211.1">}</span></strong></pre></li> <li><span class="koboSpan" id="kobo.1212.1">The following</span><a id="_idIndexMarker1381"/><span class="koboSpan" id="kobo.1213.1"> command will ascertain the status of </span><span class="No-Break"><span class="koboSpan" id="kobo.1214.1">the conversion:</span></span></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.1215.1">Note</span></p>
<p class="callout"><strong class="source-inline"><span class="koboSpan" id="kobo.1216.1">import-ami-xxxxxxxx</span></strong><span class="koboSpan" id="kobo.1217.1"> will change every time you execute </span><span class="No-Break"><span class="koboSpan" id="kobo.1218.1">a conversion.</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1219.1">aws ec2 describe-import-image-tasks --import-task-ids import-ami-&lt;AMI-ID&gt;</span></strong></pre> <p class="list-inset"><span class="koboSpan" id="kobo.1220.1">I’ve executed the command </span><a id="_idIndexMarker1382"/><span class="koboSpan" id="kobo.1221.1">and run it several times to show each step of the process. </span><span class="koboSpan" id="kobo.1221.2">After the following steps, you’ll be able to use your newly created AMI in your AWS tenancy. </span><span class="koboSpan" id="kobo.1221.3">When walking through the import tasks, I refreshed here to show all the versions of </span><span class="No-Break"><span class="koboSpan" id="kobo.1222.1">the updates.</span></span></p>
<ol>
<li value="29"><span class="koboSpan" id="kobo.1223.1">Run the following command to show the status of </span><span class="No-Break"><span class="koboSpan" id="kobo.1224.1">the import:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1225.1">root# aws ec2 describe-import-image-tasks --import-task-ids import-ami-0908bf8d72b678cdf</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1226.1">{</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1227.1">    "ImportImageTasks": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1228.1">        {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1229.1">            "Description": "VM Image",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1230.1">            "ImportTaskId": "import-ami-0908bf8d72b678cdf",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1231.1">            "Progress": "19",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1232.1">            "SnapshotDetails": [</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1233.1">                {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1234.1">                    "DiskImageSize": 8211946496.0,</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1235.1">                    "Format": "VMDK",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1236.1">                    "Status": "active",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1237.1">                    "UserBucket": {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1238.1">                        "S3Bucket": "vb-aws-us-east-2",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1239.1">                        "S3Key": "vb-aws.ova"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1240.1">                    }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1241.1">                }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1242.1">            ],</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1243.1">            "Status": "active",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1244.1">            "StatusMessage": "converting",</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1245.1">            "Tags": []</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1246.1">        }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1247.1">    ]</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1248.1">}</span></strong></pre><p class="list-inset"><span class="koboSpan" id="kobo.1249.1">After a couple of </span><a id="_idIndexMarker1383"/><span class="koboSpan" id="kobo.1250.1">minutes, you can run this command throughout the import process to </span><a id="_idIndexMarker1384"/><span class="koboSpan" id="kobo.1251.1">show the status. </span><span class="koboSpan" id="kobo.1251.2">Keep on running this command every few minutes to check the current status. </span><span class="koboSpan" id="kobo.1251.3">The valid statuses are </span><span class="No-Break"><span class="koboSpan" id="kobo.1252.1">the following:</span></span></p><ul><li><strong class="source-inline"><span class="koboSpan" id="kobo.1253.1">active</span></strong><span class="koboSpan" id="kobo.1254.1">: The import task </span><span class="No-Break"><span class="koboSpan" id="kobo.1255.1">has started</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1256.1">converting</span></strong><span class="koboSpan" id="kobo.1257.1">: The image is being converted into </span><span class="No-Break"><span class="koboSpan" id="kobo.1258.1">an AMI</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1259.1">updating</span></strong><span class="koboSpan" id="kobo.1260.1">: The AMI import is </span><span class="No-Break"><span class="koboSpan" id="kobo.1261.1">being updated</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1262.1">validating</span></strong><span class="koboSpan" id="kobo.1263.1">: The import is </span><span class="No-Break"><span class="koboSpan" id="kobo.1264.1">being validated</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1265.1">validated</span></strong><span class="koboSpan" id="kobo.1266.1">: Validation </span><span class="No-Break"><span class="koboSpan" id="kobo.1267.1">is completed</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1268.1">completed</span></strong><span class="koboSpan" id="kobo.1269.1">: The AMI is ready </span><span class="No-Break"><span class="koboSpan" id="kobo.1270.1">to use</span></span></li><li><strong class="source-inline"><span class="koboSpan" id="kobo.1271.1">deleted</span></strong><span class="koboSpan" id="kobo.1272.1">: The import task has </span><span class="No-Break"><span class="koboSpan" id="kobo.1273.1">been canceled</span></span></li></ul><p class="list-inset"><span class="koboSpan" id="kobo.1274.1">When the </span><a id="_idIndexMarker1385"/><span class="koboSpan" id="kobo.1275.1">AMI is complete, the</span><a id="_idIndexMarker1386"/><span class="koboSpan" id="kobo.1276.1"> following will be the </span><span class="No-Break"><span class="koboSpan" id="kobo.1277.1">end status:</span></span></p><pre class="source-code"><span class="koboSpan" id="kobo.1278.1">{
    "ImportImageTasks": [
        {
            "Architecture": "x86_64",
            "Description": "VM Image",
            "ImageId": "ami-055ce6a1f65862de6",
            "ImportTaskId": "import-ami-0908bf8d72b678cdf",
            "LicenseType": "BYOL",
            "Platform": "Linux",
            "SnapshotDetails": [
                {
                    "DeviceName": "/dev/sda1",
                    "DiskImageSize": 8211946496.0,
                    "Format": "VMDK",
                    "SnapshotId": "snap-08a2c2a985caf8a6c",
                    "Status": "completed",
                    "UserBucket": {
                        "S3Bucket": "vb-aws-us-east-2",
                        "S3Key": "vb-aws.ova"
                    }
                }
            ],
            "Status": "completed",
            "Tags": [],
            "BootMode": "legacy_bios"
        }
    ]
}</span></pre></li> <li><span class="koboSpan" id="kobo.1279.1">After the process has</span><a id="_idIndexMarker1387"/><span class="koboSpan" id="kobo.1280.1"> completed, you will be able to log back in to the AWS console and </span><a id="_idIndexMarker1388"/><span class="koboSpan" id="kobo.1281.1">navigate to your EC2 environment. </span><span class="koboSpan" id="kobo.1281.2">In order to launch a new VM with the ability to select your AMI as the template, click </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1282.1">Launch instance</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1283.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer470">
<span class="koboSpan" id="kobo.1284.1"><img alt="Figure 13.103 – Launching an instance" src="image/B18349_13_109.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1285.1">Figure 13.103 – Launching an instance</span></p>
<ol>
<li value="31"><span class="koboSpan" id="kobo.1286.1">Once</span><a id="_idIndexMarker1389"/><span class="koboSpan" id="kobo.1287.1"> you’re in the launch menu, you</span><a id="_idIndexMarker1390"/><span class="koboSpan" id="kobo.1288.1"> can drill down into other </span><span class="No-Break"><span class="koboSpan" id="kobo.1289.1">AMIs available.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer471">
<span class="koboSpan" id="kobo.1290.1"><img alt="Figure 13.104 – Browse AMIs" src="image/B18349_13_110.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1291.1">Figure 13.104 – Browse AMIs</span></p>
<ol>
<li value="32"><span class="koboSpan" id="kobo.1292.1">This will take you to </span><a id="_idIndexMarker1391"/><span class="koboSpan" id="kobo.1293.1">your customized</span><a id="_idIndexMarker1392"/><span class="koboSpan" id="kobo.1294.1"> AMIs and (as shown earlier in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1295.1">Figure 13</span></em></span><em class="italic"><span class="koboSpan" id="kobo.1296.1">.7, Image products</span></em><span class="koboSpan" id="kobo.1297.1">), the Marketplace. </span><span class="koboSpan" id="kobo.1297.2">The Marketplace is where you can share your own AMIs with the community or use ones that others </span><span class="No-Break"><span class="koboSpan" id="kobo.1298.1">have uploaded.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer472">
<span class="koboSpan" id="kobo.1299.1"><img alt="Figure 13.105 – Created AMI" src="image/B18349_13_111.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1300.1">Figure 13.105 – Created AMI</span></p>
<ol>
<li value="33"><span class="koboSpan" id="kobo.1301.1">As shown previously, you’ll see the available AMI, created in this recipe, reflected. </span><span class="koboSpan" id="kobo.1301.2">Also as an </span><a id="_idIndexMarker1393"/><span class="koboSpan" id="kobo.1302.1">aside, besides the AMIs on offer in the Marketplace, you can also find a </span><a id="_idIndexMarker1394"/><span class="koboSpan" id="kobo.1303.1">number of OSs, including </span><span class="No-Break"><span class="koboSpan" id="kobo.1304.1">Oracle Linux.</span></span></li>
<li><span class="koboSpan" id="kobo.1305.1">If you navigate to the newly created AMI, you’ll see that you can select that image as your AMI to execute and create </span><span class="No-Break"><span class="koboSpan" id="kobo.1306.1">a VM.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer473">
<span class="koboSpan" id="kobo.1307.1"><img alt="Figure 13.106 – AMI selection" src="image/B18349_13_1061.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1308.1">Figure 13.106 – AMI selection</span></p>
<p class="list-inset"><span class="koboSpan" id="kobo.1309.1">By selecting the AMI, you’re attaching that AMI as your image and executing the creation of a VM from the selected image (</span><span class="No-Break"><span class="koboSpan" id="kobo.1310.1">the AMI).</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer474">
<span class="koboSpan" id="kobo.1311.1"><img alt="Figure 13.107 – Instance launch configuration" src="image/B18349_13_113.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1312.1">Figure 13.107 – Instance launch configuration</span></p>
<ol>
<li value="35"><span class="koboSpan" id="kobo.1313.1">After </span><a id="_idIndexMarker1395"/><span class="koboSpan" id="kobo.1314.1">selecting the AMI and executing the</span><a id="_idIndexMarker1396"/><span class="koboSpan" id="kobo.1315.1"> launch, you’ll enter into the standard launch protocols for creating an AWS VM, including creating a key pair, naming the pair, and downloading the key. </span><span class="koboSpan" id="kobo.1315.2">You can pre-create these keys </span><span class="No-Break"><span class="koboSpan" id="kobo.1316.1">as well.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer475">
<span class="koboSpan" id="kobo.1317.1"><img alt="Figure 13.108 – Key pair" src="image/B18349_13_108.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1318.1">Figure 13.108 – Key pair</span></p>
<ol>
<li value="36"><span class="koboSpan" id="kobo.1319.1">Once you </span><a id="_idIndexMarker1397"/><span class="koboSpan" id="kobo.1320.1">create the key pair, the </span><a id="_idIndexMarker1398"/><span class="koboSpan" id="kobo.1321.1">private key will download to your local machine and you can go ahead and launch </span><span class="No-Break"><span class="koboSpan" id="kobo.1322.1">your VM.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer476">
<span class="koboSpan" id="kobo.1323.1"><img alt="Figure 13.109 – Success status" src="image/B18349_13_115.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1324.1">Figure 13.109 – Success status</span></p>
<ol>
<li value="37"><span class="koboSpan" id="kobo.1325.1">You can navigate</span><a id="_idIndexMarker1399"/><span class="koboSpan" id="kobo.1326.1"> to your VM by clicking </span><a id="_idIndexMarker1400"/><span class="koboSpan" id="kobo.1327.1">on the instance ID. </span><span class="koboSpan" id="kobo.1327.2">Once you’re in the instance, you’ll be able to capture the IP and log in to your </span><span class="No-Break"><span class="koboSpan" id="kobo.1328.1">new VM.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer477">
<span class="koboSpan" id="kobo.1329.1"><img alt="Figure 13.110 – Public IP" src="image/B18349_13_116.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1330.1">Figure 13.110 – Public IP</span></p>
<ol>
<li value="38"><span class="koboSpan" id="kobo.1331.1">To log in to the machine, you can use the key pair or the passwords created when you built the machine; either </span><span class="No-Break"><span class="koboSpan" id="kobo.1332.1">will work:</span></span><pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1333.1">root# ssh oracle@3.135.211.36</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1334.1">oracle@3.135.211.36's password:</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1335.1">Activate the web console with: systemctl enable --now cockpit.socket</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1336.1">Last login: Sat Aug 12 01:45:46 2023 from 107.200.172.229</span></strong></pre></li> </ol>
</div>
</body></html>