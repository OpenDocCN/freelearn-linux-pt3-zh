- en: '2'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '2'
- en: Installing with and without Automation Magic
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用与不使用自动化魔法进行安装
- en: While you can manually install Oracle Linux from a USB or an ISO image, at an
    enterprise level, it is more common to automate the installation. The *Appendix
    – kickstart options* at the end of this chapter covers the manual installation,
    which is easier to do when you have occasional installs.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以从USB或ISO镜像手动安装Oracle Linux，但在企业级别上，更常见的是自动化安装。本章最后的*附录 – kickstart选项*涵盖了手动安装，适合偶尔需要安装的情况。
- en: Most data center installs use an automated method, as this allows you to scale
    quickly.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数数据中心安装使用自动化方法，因为这样可以快速扩展。
- en: This chapter provides different recipes to help build an operational **Preboot
    Execution** (**PXE**; pronounced *pixie*) system.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提供了不同的方案，帮助构建一个可操作的**预启动执行**（**PXE**；发音为*pixie*）系统。
- en: 'PXE booting is a technology developed by Intel. It allows systems with the
    appropriate ISO (or OS RPMs) to boot from the network, downloading all the required
    files from a server. While there are older methods, such as the **bootstrap protocol**
    (**BOOTP**), the industry has rapidly adopted **PXE boot** as the most common
    standard. While PXE booting started with Intel systems, ARM systems can also boot
    using TFTP. For the PXE boot process to work, you would normally have a DHCP server
    and a PXE server on the network. A high-level summary of the process can be seen
    in the following diagram:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: PXE启动是由英特尔开发的一项技术。它允许具有适当ISO（或操作系统RPM包）的系统从网络启动，下载服务器上的所有必需文件。虽然存在更旧的方法，如**引导协议**（**BOOTP**），但行业已经迅速采用**PXE启动**作为最常见的标准。虽然PXE启动最初是为英特尔系统设计的，但ARM系统也可以使用TFTP进行启动。为了使PXE启动过程正常工作，通常需要在网络上配置DHCP服务器和PXE服务器。该过程的高级概述可以通过以下图表看到：
- en: '![Figure 2.1 – PXE boot process](img/B18349_02_01.jpg)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.1 – PXE启动过程](img/B18349_02_01.jpg)'
- en: Figure 2.1 – PXE boot process
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.1 – PXE启动过程
- en: 'The following are each of the steps described at a high level:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是每个步骤的高级描述：
- en: The **PXE client** will request an IP address from an available **DHCP server**.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**PXE客户端**将从可用的**DHCP服务器**请求IP地址。'
- en: The first DHCP server on the network to respond to the client will provide it
    with an IP address, network mask, DNS information, default route, and other required
    network parameters.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 网络上第一个响应客户端的DHCP服务器将为其提供IP地址、网络掩码、DNS信息、默认路由和其他所需的网络参数。
- en: The **PXE client** will do a boot service discovery, looking for a **PXE server**.
    Optionally, the DHCP server can be configured to point to the PXE server to boot
    from.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**PXE客户端**将进行启动服务发现，查找**PXE服务器**。可选地，DHCP服务器可以配置为指向PXE服务器以进行启动。'
- en: The PXE server sends the client the network bootstrap program and IP information
    on where to download the files. This enables the client to boot from the network
    to install an OS.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: PXE服务器将网络引导程序和文件下载位置的IP信息发送给客户端。这使得客户端可以从网络启动，安装操作系统。
- en: The PXE client requests media (RPMs and control files) as needed from an **HTTPS
    server**. HTTPS is not the only protocol required; NFS and FTP servers can also
    be used, although HTTPS is the most common method. The PXE system also sends the
    *kickstart* parameters to the client via the kickstart file. These parameters
    contain the specifics to configure the system’s storage, network, and packages
    to be installed.
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: PXE客户端根据需要从**HTTPS服务器**请求媒体（RPM包和控制文件）。HTTPS并不是唯一需要的协议；NFS和FTP服务器也可以使用，尽管HTTPS是最常见的方法。PXE系统还通过kickstart文件将*kickstart*参数发送给客户端。这些参数包含配置系统存储、网络和要安装的软件包的具体信息。
- en: The media server sends the files requested to the PXE client, allowing an OS
    to be installed.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 媒体服务器将请求的文件发送到PXE客户端，从而允许操作系统安装。
- en: 'When configuring the PXE server in this example, there are three components
    required:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中配置PXE服务器时，需要三个组件：
- en: '**DHCP server**: This assigns not only IP addresses to servers as they boot
    but also important parameters that enable PXE boot.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DHCP服务器**：它不仅为服务器分配IP地址，还分配启动时所需的重要参数，支持PXE启动。'
- en: '**Trivial File Transfer Protocol Daemon** (**TFTPD**): This service works as
    a TFTP server, allowing the bootloader to run on the client, starting the OS installation.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**简易文件传输协议守护进程**（**TFTPD**）：该服务作为TFTP服务器工作，允许客户端运行启动加载程序，从而启动操作系统安装。'
- en: '**HyperText Transfer Protocol Daemon** (**HTTPD**): This is a web server and
    is used to host config files and RPMs used for the installation.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**超文本传输协议守护进程**（**HTTPD**）：这是一个Web服务器，用于托管安装所需的配置文件和RPM包。'
- en: Note
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: There are some other options, such as using `dnsmasq` as a combined server that
    works as a DHCP server, a TFTP server (most commonly TFTPD), and a DNS forwarder.
    However, in many enterprise environments, separate systems are needed. As an example,
    a Microsoft DHCP server may already be used on the network.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些其他选项，例如使用 `dnsmasq` 作为一个结合的服务器，它同时充当 DHCP 服务器、TFTP 服务器（最常见的是 TFTPD）和 DNS
    转发器。然而，在许多企业环境中，往往需要单独的系统。例如，网络中可能已经使用了 Microsoft DHCP 服务器。
- en: In this example, there are two logical servers running three different services,
    a DHCP server, a TFTP server on the first system. The second system is the PXE
    server and will also be the HTTP server used to serve up the **Red Hat Package
    Manager** (**RPM**) files and control files required for the installation. Both
    systems are multihomed and will be running DHCP and PXE on their secondary interface.
    The systems also have static IP addresses on the secondary interfaces.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，有两台逻辑服务器运行着三个不同的服务，第一台系统上运行 DHCP 服务器和 TFTP 服务器。第二台系统是 PXE 服务器，也将作为 HTTP
    服务器，负责提供 **Red Hat 包管理器**（**RPM**）文件和安装所需的控制文件。两台系统都是多网卡的，并将在它们的辅助接口上运行 DHCP 和
    PXE。系统还在辅助接口上设置了静态 IP 地址。
- en: 'We will cover the following main recipes, which make up the PXE feast, in this
    chapter:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主要食谱，这些组成了 PXE 的盛宴：
- en: Automating the OS install options with kickstart
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 kickstart 自动化操作系统安装选项
- en: DHCP server – more than just IPs
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DHCP 服务器 – 不仅仅是 IP
- en: Setting up a web server – HTTPD
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Web 服务器 – HTTPD
- en: Serving up the boot – TFTPD
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动服务 – TFTPD
- en: Back in the day – a manual installation
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回顾过去 – 手动安装
- en: Note
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: A multihomed server is a system that is connected to multiple networks at the
    same time. This is often done in enterprise data centers to isolate systems, while
    at the same time allowing a controlled system that allows some data to pass. It
    is possible to set up a PXE server on a single network.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 多网卡服务器是指同时连接多个网络的系统。这通常在企业数据中心中进行，用以隔离系统，同时允许一些受控系统传递数据。也可以在单一网络上设置 PXE 服务器。
- en: Technical requirements
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: The easy way to create a new kickstart file requires building a new OS, as this
    process will automatically create the file, which can later be modified as needed.
    A PXE environment also requires additional systems or VMs for a DHCP server and
    HTTPS server. Before you start, you will first need to download an ISO image.
    Using a desktop virtualization product such as Oracle VM VirtualBox is recommended.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的 kickstart 文件的简单方法是通过构建一个新的操作系统，因为此过程会自动创建文件，之后可以根据需要进行修改。PXE 环境还需要额外的系统或虚拟机来充当
    DHCP 服务器和 HTTPS 服务器。开始之前，首先需要下载 ISO 镜像。推荐使用如 Oracle VM VirtualBox 之类的桌面虚拟化产品。
- en: The related configuration files for many of the recipes in this book are available
    on GitHub, at [https://github.com/PacktPublishing/Oracle-Linux-Cookbook](https://github.com/PacktPublishing/Oracle-Linux-Cookbook).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中许多食谱的相关配置文件可以在 GitHub 上找到，网址为 [https://github.com/PacktPublishing/Oracle-Linux-Cookbook](https://github.com/PacktPublishing/Oracle-Linux-Cookbook)。
- en: Automating the OS install options with kickstart
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 kickstart 自动化操作系统安装选项
- en: The **kickstart** file is one of the most important parts of the automated install
    process. This file contains all the information required to automatically install
    and configure the OS. The kickstart file is a simple text file that contains the
    directions to allow an unattended installation.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**Kickstart** 文件是自动化安装过程中的重要组成部分。该文件包含自动安装和配置操作系统所需的所有信息。Kickstart 文件是一个简单的文本文件，包含了实现无人值守安装的指令。'
- en: Getting ready
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to work with kickstart files, you will need somewhere to build the
    system, such as Oracle VM VirtualBox. This system can be used to create your first
    kickstart file, as well as testing new kickstart files before moving them into
    the PXE environment.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 kickstart 文件，您需要一个地方来构建系统，例如 Oracle VM VirtualBox。该系统可用于创建您的第一个 kickstart
    文件，也可以在将其移入 PXE 环境之前测试新创建的 kickstart 文件。
- en: Note
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Anaconda is the Oracle Linux installer. It can operate via an automated install
    using a kickstart file, or interactively via a graphic or text install interface.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Anaconda 是 Oracle Linux 安装程序。它可以通过使用 kickstart 文件进行自动化安装，或者通过图形界面或文本安装界面进行交互式操作。
- en: How to do it…
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'While you can manually create a file from scratch, it is much easier to start
    with the file that Anaconda creates on installation. This kickstart file is created
    automatically when a manual is installed and saved on the new system in `/root/anaconda-ks.cfg`.
    This file can be easily edited and reused for future builds. Let’s look at the
    file by breaking it down into smaller sections. This system is a graphical installation.
    Other options are text or cmdline:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以手动创建一个文件，但从 Anaconda 在安装过程中创建的文件开始会更加容易。这个 kickstart 文件在手动安装时自动创建，并保存在新系统的
    `/root/anaconda-ks.cfg` 中。这个文件可以很容易地编辑并用于未来的构建。我们通过将文件分解为更小的部分来查看它。这个系统是图形安装。其他选项包括文本或命令行：
- en: Note
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 注
- en: There are many options for kickstart, and they are listed in *Appendix –* *kickstart
    options*.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: kickstart 有许多选项，详见*附录 –* *kickstart 选项*。
- en: '[PRE0]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The repo used to install Oracle Linux was a directory that was loopback mounted
    from an ISO file. `baseurl` can also be an HTTPS server, an NFS location, or an
    FTP server. For example, `--baseurl=https://pxe.m57.local/ol8` will tell kickstart
    to pull the RPMs from a web server:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 用于安装 Oracle Linux 的仓库是从 ISO 文件以环回挂载的目录。`baseurl` 也可以是 HTTPS 服务器、NFS 位置或 FTP
    服务器。例如，`--baseurl=https://pxe.m57.local/ol8` 将告诉 kickstart 从 Web 服务器中提取 RPM 包：
- en: '[PRE1]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The packages are the software packages selected. Names starting with an `@`
    sign are package groups, and lines without `@` are individual packages. Also,
    the `^` symbol is used to enable the installation of only the required packages
    in a group. If `^` is not set, all packages in the group are installed. In this
    example, the `graphical-server-environment` package group RPMs are installed as
    well as the `kexec-tools` package:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 软件包是所选的软件包。以 `@` 符号开头的名称是包组，没有 `@` 的行是单独的软件包。此外，`^` 符号用于仅启用安装包组中所需的包。如果没有设置
    `^`，则包组中的所有包都会被安装。在此示例中，安装了 `graphical-server-environment` 包组 RPM 和 `kexec-tools`
    包：
- en: '[PRE2]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This is where the default keyboard and language are selected:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 这是选择默认键盘和语言的地方：
- en: '[PRE3]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'This is the hostname for the new server. Ideally, it should be the **Fully
    Qualified Domain Name** (**FQDN**) for the system:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这是新服务器的主机名。理想情况下，它应该是系统的**完全限定域名**（**FQDN**）：
- en: '[PRE4]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This is used to select a CD-ROM or a CD-ROM mounted on a filesystem as the
    installation media:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 用于选择一个 CD-ROM 或挂载在文件系统上的 CD-ROM 作为安装介质：
- en: '[PRE5]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This is used to run the setup agent on the first boot:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 用于在第一次启动时运行设置代理：
- en: '[PRE6]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Here, the install disk is selected, as well as the configuration of the logical
    volume manager and filesystems:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，选择了安装磁盘，以及逻辑卷管理器和文件系统的配置：
- en: '[PRE7]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'This is the time zone for the server:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这是服务器的时区：
- en: '[PRE8]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'An encrypted root password can be set on the new system. Normally, the password
    is encrypted, but optionally, you can use the `–-plaintext` option with a plaintext
    password. You can also generate an encrypted password using the `python3 -c ''import
    crypt,getpass;pw=getpass.getpass();print(crypt.crypt(pw) if (pw==getpass.getpass("Confirm:
    ")) else exit())''` Python command:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '可以为新系统设置加密的 root 密码。通常，密码是加密的，但你也可以选择使用 `--plaintext` 选项设置明文密码。你也可以通过运行 `python3
    -c ''import crypt,getpass;pw=getpass.getpass();print(crypt.crypt(pw) if (pw==getpass.getpass("Confirm:
    ")) else exit())''` Python 命令生成加密密码：'
- en: '[PRE9]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This enables kdump, allowing the kernel to save a crash dump to a device for
    troubleshooting:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 启用 kdump，允许内核将崩溃转储保存到设备中以供故障排除：
- en: '[PRE10]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This is the password policy for root, users, and **Linux Unified Key Setup**
    (**LUKS**) passphrases:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 root、用户和 **Linux统一密钥设置**（**LUKS**）密码策略：
- en: '[PRE11]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You can edit the file as needed. Before using a new file, it can be tested with
    the `ksvalidator` command. This command is part of the `pykickstart` package,
    installed via `dnf install -``y pykickstart`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以根据需要编辑文件。在使用新文件之前，可以通过 `ksvalidator` 命令进行测试。该命令是 `pykickstart` 包的一部分，可通过
    `dnf install -y pykickstart` 安装。
- en: 'Once the package is installed, test a new kickstart file by running `ksvalidator
    $FILE`. A sample with an error will look like the following, where line 3 defines
    the install as `xgraphical`, which is an unknown option:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 软件包安装完成后，运行 `ksvalidator $FILE` 测试新的 kickstart 文件。带有错误的示例将如下所示，其中第 3 行将安装定义为
    `xgraphical`，这是一个未知选项：
- en: '[PRE12]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Resolve the error and rerun the validation. In this example, `graphical` is
    the correct parameter to use. A clean validation returns nothing and will look
    as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 解决错误并重新运行验证。在此示例中，`graphical` 是正确的参数。清理后的验证返回空值，结果如下：
- en: '![Figure 2.2 – Clean ksvalidator](img/B18349_02_02.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.2 – 清理 ksvalidator](img/B18349_02_02.jpg)'
- en: Figure 2.2 – Clean ksvalidator
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2 – 清理 ksvalidator
- en: Kickstart options!
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Kickstart选项！
- en: Now that you have a basic understanding of the kickstart file, you can start
    adding new options. These options allow you to automate the installation and also
    grant you more control. The options are covered in *Appendix –* *kickstart options*.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你对Kickstart文件有了基本的了解，可以开始添加新选项。这些选项可以帮助你自动化安装过程，并且让你拥有更多控制权。选项详细介绍请参见*附录 –*
    *kickstart选项*。
- en: How it works…
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: You can boot any system with kickstart manually by adding the `ks` parameter
    to the `ks=PATH_TO_FILE`, where `PATH_TO_FILE` is a URL where the kickstart file
    can be read from. This is usually placed on an HTTP server that is accessible
    to clients.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过手动添加`ks`参数到`ks=PATH_TO_FILE`，启动任何系统，其中`PATH_TO_FILE`是Kickstart文件的URL路径。通常，这个文件放在HTTP服务器上，客户端可以访问。
- en: DHCP server – more than just IPs
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DHCP服务器 – 不仅仅是分配IP
- en: The DHCP server will be running a standard DHCP server that is available with
    Oracle Linux 8\. Installation of DHCP is straightforward.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: DHCP服务器将运行一个标准的DHCP服务器，该服务器可以在Oracle Linux 8中使用。DHCP的安装非常简单。
- en: Getting ready
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To set up a DHCP server, you will need an Oracle Linux 8 VM running on the same
    subnet that VMs that will be installed are using.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置DHCP服务器，你需要一台运行Oracle Linux 8的虚拟机，并且它需要与将要安装的虚拟机处于同一子网。
- en: How to do it…
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Install the DHCP server with the `dnf install -y dhcp-sever` command. The following
    screenshot shows the full process:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`dnf install -y dhcp-sever`命令安装DHCP服务器。以下截图展示了完整的过程：
- en: '![Figure 2.3 – DHCP server installation](img/B18349_02_03.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.3 – DHCP服务器安装](img/B18349_02_03.jpg)'
- en: Figure 2.3 – DHCP server installation
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3 – DHCP服务器安装
- en: 'Once installed, enable DHCP traffic through the firewall (as seen in the following
    screenshot) with the `firewall-cmd --add-service=dhcp --permanent` and `firewall-cmd
    --``reload` commands:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，通过防火墙启用DHCP流量（如下面截图所示），使用`firewall-cmd --add-service=dhcp --permanent`和`firewall-cmd
    --reload`命令：
- en: '![Figure 2.4 – DHCP firewall commands](img/B18349_02_04.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.4 – DHCP防火墙命令](img/B18349_02_04.jpg)'
- en: Figure 2.4 – DHCP firewall commands
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.4 – DHCP防火墙命令
- en: 'The DHCP server has a sample DHCP config file installed in `/usr/share/doc/dhcp-server`.
    This has sample config files for both IPv4 in `/usr/share/doc/dhcp-server/dhcpd.conf.example`
    and IPv6 in `/usr/share/doc/dhcp-server/dhcpd6.conf.example`. For this DHCP server,
    we will use IPv4 and copy the sample config file to `/etc/dhcp/dhcpd.conf`. There
    is an existing config file, but by default, it is mostly empty with no configuration
    and can be replaced as in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: DHCP服务器在`/usr/share/doc/dhcp-server`目录下有一个示例的DHCP配置文件。这个文件包含IPv4的示例配置`/usr/share/doc/dhcp-server/dhcpd.conf.example`和IPv6的示例配置`/usr/share/doc/dhcp-server/dhcpd6.conf.example`。对于这个DHCP服务器，我们将使用IPv4，并将示例配置文件复制到`/etc/dhcp/dhcpd.conf`。该目录下已有一个配置文件，但默认情况下它几乎是空的，没有任何配置，可以按照以下截图进行替换：
- en: '![Figure 2.5 – Copy dhcp.conf](img/B18349_02_05.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.5 – 复制 dhcp.conf](img/B18349_02_05.jpg)'
- en: Figure 2.5 – Copy dhcp.conf
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5 – 复制 dhcp.conf
- en: Next, the config file will need to be updated, changing the IP address range,
    as well as adding an NTP server to the configuration with the option of `option
    ntp-servers 192.168.200.1`, which sets the NTP server to `192.168.200.1`. While
    configuring a NTP server is optional, it is highly recommended. Additionally,
    when the PXE server is *not* the DHCP server, you will need to add the next server
    parameter to the subnet. This will point DHCP clients to the TFTP boot from the
    PXE server.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，需要更新配置文件，修改IP地址范围，并且通过`option ntp-servers 192.168.200.1`选项将NTP服务器添加到配置中，该选项将NTP服务器设置为`192.168.200.1`。虽然配置NTP服务器是可选的，但强烈推荐这么做。此外，当PXE服务器*不是*DHCP服务器时，你需要在子网中添加“next
    server”参数，这将指示DHCP客户端从PXE服务器的TFTP进行启动。
- en: Note
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you are using an existing DHCP server, make sure you add the `next-server`
    parameter to point to the PXE server that has the TFTP server.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用现有的DHCP服务器，请确保添加`next-server`参数，指向包含TFTP服务器的PXE服务器。
- en: 'Since the TFTP server is running on the PXE server, the DHCP server will need
    the next server option to be set to the IP address of the PXE server. A complete
    sample config file is shown here:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 由于TFTP服务器在PXE服务器上运行，因此DHCP服务器需要将“next server”选项设置为PXE服务器的IP地址。以下是一个完整的示例配置文件：
- en: '[PRE13]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Next, we need to test the DHCP server. To do this, install the `nmap` program
    with `dnf install -``y nmap`.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要测试DHCP服务器。为此，使用`dnf install -y nmap`命令安装`nmap`程序。
- en: 'Nmap is a powerful utility and can be used for many things. It is most well
    known as a port scanning tool, letting the user scan networks looking for servers
    that respond to a ping with `nmap -sP 192.168.200.1/28`, as seen in the following
    screenshot:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap 是一个功能强大的工具，可以用于许多用途。它最为人知的是作为端口扫描工具，允许用户扫描网络，寻找响应 ping 的服务器，使用命令 `nmap
    -sP 192.168.200.1/28`，如下所示：
- en: '![Figure 2.6 – Nmap ping scan](img/B18349_02_06.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.6 – Nmap ping 扫描](img/B18349_02_06.jpg)'
- en: Figure 2.6 – Nmap ping scan
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.6 – Nmap ping 扫描
- en: 'It can also be used to identify the OS and open ports of a specific server,
    with `nmap` `192.168.200.34 -O`:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 它还可以用于识别特定服务器的操作系统和开放端口，使用 `nmap` `192.168.200.34 -O` 命令：
- en: '![Figure 2.7 – Nmap ID server](img/B18349_02_07.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.7 – Nmap ID 服务器](img/B18349_02_07.jpg)'
- en: Figure 2.7 – Nmap ID server
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.7 – Nmap ID 服务器
- en: 'While Nmap is a powerful tool for scanning networks, it can also be used for
    many additional tasks, including checking that a DHCP server is replying correctly.
    This is done with the `broadcast-dhcp-discover` script and is used via the `nmnap
    ––script` option. Additionally, if your system has multiple interfaces, you can
    specify the network interface used by the scan with the `-e` option. In this environment,
    the DHCP server is verified with the `nmap --script broadcast-dhcp-discover -e`
    `enp0s8` command:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Nmap 是一个强大的网络扫描工具，但它也可以用于许多额外的任务，包括检查 DHCP 服务器是否正确响应。这可以通过 `broadcast-dhcp-discover`
    脚本实现，并通过 `nmnap ––script` 选项使用。此外，如果你的系统有多个接口，可以使用 `-e` 选项指定扫描所使用的网络接口。在这个环境中，DHCP
    服务器通过 `nmap --script broadcast-dhcp-discover -e` `enp0s8` 命令进行验证：
- en: '![Figure 2.8 – Nmap DHCP discovery](img/B18349_02_08.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.8 – Nmap DHCP 发现](img/B18349_02_08.jpg)'
- en: Figure 2.8 – Nmap DHCP discovery
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.8 – Nmap DHCP 发现
- en: We now know how the DHCP server works, so next is the Apache HTTPD server.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经了解了 DHCP 服务器的工作原理，接下来是 Apache HTTPD 服务器。
- en: Setting up the web server – HTTPD
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置 web 服务器 – HTTPD
- en: The next step for the PXE server is to install a web server. In this example,
    we will use Apache. Other web servers will also work, but Apache is one of the
    most common.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: PXE 服务器的下一步是安装 web 服务器。在本例中，我们将使用 Apache。其他 web 服务器也可以使用，但 Apache 是最常见的之一。
- en: Getting ready
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To set up an HTTP server, you will need an Oracle Linux 8 VM running in your
    environment. The server’s IP address should be routable to the subnets the VMs
    are using, and the firewall ports should allow HTTP/HTTPS traffic. Ideally, you
    should also have enough space for several ISO files. Normally, 20-30 GB is enough
    data space.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置一个 HTTP 服务器，你需要在环境中运行一个 Oracle Linux 8 虚拟机。服务器的 IP 地址应能路由到虚拟机使用的子网，并且防火墙端口应允许
    HTTP/HTTPS 流量。理想情况下，你还应有足够的空间存储多个 ISO 文件。通常，20-30 GB 的数据空间就足够了。
- en: How to do it…
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Starting the install of the Apache HTTPD server is simple; just run `yum install
    -``y httpd`.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 启动 Apache HTTPD 服务器的安装很简单；只需运行 `yum install -``y httpd`。
- en: Once the web server is installed, copy the full ISO file to the server into
    a directory of your choice. In our example, `OracleLinux-R8-U5-x86_64-dvd.iso`
    is copied into `/root`, as seen in *Figure 2**.9*.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了 web 服务器，将完整的 ISO 文件复制到服务器的任意目录。在我们的示例中，`OracleLinux-R8-U5-x86_64-dvd.iso`
    被复制到 `/root` 目录，如 *图 2.9* 所示。
- en: '![Figure 2.9 – Oracle Linux ISO in /root](img/B18349_02_09.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.9 – Oracle Linux ISO 位于 /root](img/B18349_02_09.jpg)'
- en: Figure 2.9 – Oracle Linux ISO in /root
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.9 – Oracle Linux ISO 位于 /root 目录
- en: 'The next step is to mount the ISO file in a directory under `docroot`. With
    the standard install of Apache, `docroot` is in `/var/www/html`, so a directory
    named `OL8` is created. When the ISO is mounted, it is more efficient to use a
    loopback mount method. This allows an ISO file to be mounted as a normal filesystem.
    Next, using a loopback mount, mount the ISO file using `/var/www/html/OL8` as
    the mount point using the following command:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是将 ISO 文件挂载到 `docroot` 目录下。对于 Apache 的标准安装，`docroot` 位于 `/var/www/html`，因此创建了一个名为
    `OL8` 的目录。当 ISO 挂载后，使用回环挂载方法会更高效。这使得 ISO 文件可以作为普通文件系统挂载。接下来，使用回环挂载方法，将 ISO 文件挂载到
    `/var/www/html/OL8` 作为挂载点，使用以下命令：
- en: '[PRE14]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Once mounted, a `df` command will show the mounted filesystem. The entire chain
    of commands can be seen in the following screenshot, *Figure 2**.10*.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 挂载后，使用 `df` 命令可以显示挂载的文件系统。整个命令链可以在以下截图中看到，*图 2.10*。
- en: '![Figure 2.10 – ISO mounted](img/B18349_02_10.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.10 – ISO 已挂载](img/B18349_02_10.jpg)'
- en: Figure 2.10 – ISO mounted
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.10 – ISO 已挂载
- en: 'Now that the filesystem is mounted, let’s open up ports `80` and `443` in the
    firewall. This is easily done with `firewall-cmd`, adding both the `http` and
    `https` ports opened and saved as permanent changes to the firewall. Once the
    ports are opened, the firewall rules are reloaded. The following three commands
    are run to perform these tasks:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在文件系统已挂载，我们来打开防火墙中的 `80` 和 `443` 端口。可以通过 `firewall-cmd` 命令轻松完成，添加 `http` 和
    `https` 端口，并将其作为永久更改保存到防火墙中。一旦端口打开，防火墙规则将被重新加载。以下三个命令执行这些任务：
- en: '[PRE15]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now that the firewall is opened, Apache is installed, and the ISO is mounted
    via a loopback, we can start the Apache server with the `systemctl start` `httpd`
    command.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 现在防火墙已打开，Apache 已安装，并且 ISO 已通过环回设备挂载，我们可以通过 `systemctl start` `httpd` 命令启动 Apache
    服务器。
- en: You can verify that all is working as expected by pointing your browser to the
    server’s IP address and the `OL8` directory, as seen in the following screenshot.
    This will show the contents of the ISO, including the release notes and the RPMs
    under the `BaseOS` directory, as seen in *Figure 2**.11*.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过将浏览器指向服务器的 IP 地址和 `OL8` 目录来验证一切是否按预期工作，如下截图所示。这将显示 ISO 的内容，包括发布说明和 `BaseOS`
    目录下的 RPM 文件，如 *图 2.11* 所示。
- en: '![Figure 2.11 – ISO file accessible via httpd](img/B18349_02_11.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.11 – 可通过 httpd 访问的 ISO 文件](img/B18349_02_11.jpg)'
- en: Figure 2.11 – ISO file accessible via httpd
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.11 – 可通过 httpd 访问的 ISO 文件
- en: Serving up the boot – TFTPD
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启动服务 – TFTPD
- en: '**TFTP** is used for simple file transfers over the network. This is most often
    used to load the initial bootloader for an OS, or some firmware updates for embedded
    devices and older hardware. In the context of the PXE server, the TFTP system
    is used for the initial bootloader.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '**TFTP** 用于通过网络传输简单文件。它最常用于加载操作系统的初始引导程序，或嵌入式设备和旧硬件的固件更新。在 PXE 服务器的上下文中，TFTP
    系统用于初始引导程序。'
- en: Getting ready
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To set up a TFTP server, you will need an Oracle Linux 8 VM running in your
    environment. The server should be on the same network subnet that the systems
    being built are using. Ideally, you should also have enough space for several
    boot files. Normally, 5 GB is enough data space.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置 TFTP 服务器，你需要在你的环境中运行一个 Oracle Linux 8 虚拟机。服务器应与正在构建的系统使用相同的网络子网。理想情况下，你还应有足够的空间来存放几个引导文件。通常，5
    GB 的数据空间就足够了。
- en: How to do it…
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Installing TFTP is simple. Run the `dnf install -y tftp-server` command, as
    seen in *Figure 2**.12*.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 TFTP 很简单。运行 `dnf install -y tftp-server` 命令，如 *图 2.12* 所示。
- en: '![Figure 2.12 – TFTP installation](img/B18349_02_12.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.12 – TFTP 安装](img/B18349_02_12.jpg)'
- en: Figure 2.12 – TFTP installation
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.12 – TFTP 安装
- en: 'Once the installation is complete, we need to open up the firewall for TFTP
    and reload it:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，我们需要为 TFTP 打开防火墙并重新加载它：
- en: '[PRE16]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The output of these commands is as shown in the following screenshot:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这些命令的输出如以下截图所示：
- en: '![Figure 2.13 – TFTP firewall](img/B18349_02_13.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.13 – TFTP 防火墙](img/B18349_02_13.jpg)'
- en: Figure 2.13 – TFTP firewall
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.13 – TFTP 防火墙
- en: After installation and the firewall has opened, we need to prepare the system
    by installing the bootloaders, preparing an Oracle Linux 8 TFTP location, and
    creating a boot menu.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 安装和打开防火墙后，我们需要通过安装引导程序、准备 Oracle Linux 8 TFTP 位置并创建启动菜单来准备系统。
- en: Note
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This example is using a BIOS-based host. If you want to use a UEFI host, you
    will need to install `grub2-efi` and configure UEFI-specific parameters. The Oracle
    docs for this can be found at [https://docs.oracle.com/en/operating-systems/oracle-linux/8/install/install-CreatingaNetworkInstallationSetup.html#uefi-clients](https://docs.oracle.com/en/operating-systems/oracle-linux/8/install/install-CreatingaNetworkInstallationSetup.html#uefi-clients).
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 本示例使用的是基于 BIOS 的主机。如果你想使用 UEFI 主机，你需要安装 `grub2-efi` 并配置 UEFI 特定的参数。Oracle 文档可以在
    [https://docs.oracle.com/en/operating-systems/oracle-linux/8/install/install-CreatingaNetworkInstallationSetup.html#uefi-clients](https://docs.oracle.com/en/operating-systems/oracle-linux/8/install/install-CreatingaNetworkInstallationSetup.html#uefi-clients)
    找到。
- en: 'To install the bootloaders for BIOS-based installs, we will install the `syslinux`
    package. The `syslinux` package includes bootloaders for network booting (`PXELINUX`),
    Linux (`ext2`/`ext3`/`ext4`) or `btrfs` filesystems (`EXTLINUX`), MS-DOS FAT filesystems
    (`SYSLINUX`), and bootable El Torito CD-ROMs (`ISOLINUX`). For network booting,
    we will be using `PXELINUX`:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 为了安装 BIOS 安装的引导程序，我们将安装 `syslinux` 包。`syslinux` 包包括用于网络启动的引导程序（`PXELINUX`）、Linux（`ext2`/`ext3`/`ext4`）或
    `btrfs` 文件系统（`EXTLINUX`）、MS-DOS FAT 文件系统（`SYSLINUX`）和可启动的 El Torito CD-ROM（`ISOLINUX`）。对于网络启动，我们将使用
    `PXELINUX`：
- en: '![Figure 2.14 – Syslinux installation](img/B18349_02_14.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.14 – Syslinux 安装](img/B18349_02_14.jpg)'
- en: Figure 2.14 – Syslinux installation
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.14 – Syslinux 安装
- en: 'Next, we will copy the boot image file, `pxelinux.0`, and copy the file into
    `/``var/lib/tftpboot`:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将复制启动镜像文件 `pxelinux.0`，并将文件复制到 `/var/lib/tftpboot`：
- en: '[PRE17]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Then, we will create an Oracle Linux 8 boot directory under `tftpboot`:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们将在 `tftpboot` 目录下创建一个 Oracle Linux 8 启动目录：
- en: '[PRE18]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now, we need to copy over the PXE boot files from the ISO we previously mounted
    when installing the HTTP server to the new Oracle Linux 8 boot directory:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要将之前挂载的 ISO 文件中的 PXE 启动文件复制到新的 Oracle Linux 8 启动目录：
- en: '[PRE19]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Next, we need a boot menu. Luckily, we can copy over the samples and get things
    moving quickly. We only need the menu files, so using the following command to
    copy things works just fine:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要一个启动菜单。幸运的是，我们可以复制示例并快速启动。我们只需要菜单文件，因此使用以下命令复制文件就能顺利进行：
- en: '[PRE20]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Almost done here. To make a directory for the PXS config files and build the
    default menu, use the following:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 快完成了。为了创建一个 PXS 配置文件目录并构建默认菜单，请使用以下命令：
- en: '[PRE21]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'We can finally install a config file. Copy this sample configuration file into
    `/var/lib/tftpboot/pxelinux.cfg/default`:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最终可以安装一个配置文件。将这个示例配置文件复制到 `/var/lib/tftpboot/pxelinux.cfg/default`：
- en: '[PRE22]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'In this sample, the default install will be `linux-auto`, and that will start
    in 60 seconds unless the user manually selects one of the following options:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，默认安装将是 `linux-auto`，它将在 60 秒内自动启动，除非用户手动选择以下选项之一：
- en: '`linux-auto`: This is the default and will install Oracle Linux using the kickstart
    parameters'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`linux-auto`：这是默认选项，将使用 kickstart 参数安装 Oracle Linux'
- en: '`linux-manual`: This will kick off a traditional install or Oracle Linux, prompting
    the user to select all the options from Anaconda manually'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`linux-manual`：这将启动一个传统的 Oracle Linux 安装，提示用户手动选择 Anaconda 中的所有选项'
- en: '`rescue`: This will boot in rescue mode'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rescue`：这将以救援模式启动'
- en: '`local`: This will boot from the existing local disk'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`local`：这将从现有的本地磁盘启动'
- en: You can easily modify the menus as needed to meet your specific needs. PXE booting,
    while daunting at first, provides a powerful tool to manage your Linux installations.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以根据需要轻松修改菜单，以满足你的具体需求。虽然 PXE 启动一开始可能让人感到棘手，但它提供了一个强大的工具来管理你的 Linux 安装。
- en: How it works…
  id: totrans-163
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: When systems boot, they will load the bootloader based on the DHCP server config.
    This will then have the system boot from the TFTP server, starting the PXE process.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 当系统启动时，它们会根据 DHCP 服务器的配置加载引导加载程序。然后，系统将从 TFTP 服务器启动，开始 PXE 过程。
- en: Back in the day – a manual installation
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 曾几何时——手动安装
- en: Automated installations are great, but for some admins, the complexity of configuring
    and maintaining the infrastructure to support an automated installation is more
    effort than doing a manual installation. This recipe will go over how the manual
    installation works.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 自动化安装很棒，但对于一些管理员来说，配置和维护支持自动化安装的基础设施的复杂性比手动安装更费力。这个指南将介绍手动安装的过程。
- en: Getting ready
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To do this, you will need a system to install from. In the example, Oracle VM
    VirtualBox will be used, but it could just as easily be on a bare-metal server
    or a different hypervisor. You will also need installation media. Normally, an
    ISO works fine, but you can also use a boot ISO and an HTTP server, an FTP server,
    or even a network file share.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，你需要一个安装源。在这个示例中，将使用 Oracle VM VirtualBox，但同样可以在裸机服务器或其他虚拟化平台上进行。你还需要安装介质。通常，ISO
    文件就可以正常工作，但你也可以使用启动 ISO 文件和 HTTP 服务器、FTP 服务器，甚至是网络文件共享。
- en: How to do it…
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Regardless of whether you boot from an ISO, a USB stick, or even a kickstart
    file with a graphical installation option set, the process is the same!
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是从 ISO、USB 驱动器，还是通过设置图形化安装选项的 kickstart 文件启动，过程都是一样的！
- en: 'If you are booting from a boot-only image, you will need to enable the network
    and then point to an installation source. This is shown in the next few steps.
    If you are installing from an ISO or USB, skip to the *How it* *works…* section:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是从仅有启动功能的镜像启动，你需要启用网络，并指向一个安装源。接下来的步骤将展示如何操作。如果你是从 ISO 或 USB 安装，跳到 *它是如何*
    *工作的…* 部分：
- en: 'When booting from a boot image, you will need to select **Install Oracle Linux
    X** to start the process. When possible, use the latest version of Oracle Linux.
    When doing an installation you will get the first screen where you can test the
    boot image or continue:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当从启动镜像启动时，你需要选择**安装 Oracle Linux X**来开始安装过程。尽可能使用最新版的 Oracle Linux。在安装过程中，你会看到第一个屏幕，你可以选择测试启动镜像或继续：
- en: '![Figure 2.15 – Linux installer boot](img/B18349_02_15.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.15 – Linux 安装程序启动](img/B18349_02_15.jpg)'
- en: Figure 2.15 – Linux installer boot
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.15 – Linux 安装程序启动
- en: 'Next, pick your language:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择你的语言：
- en: '![Figure 2.16 – Install language](img/B18349_02_16.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.16 – 安装语言](img/B18349_02_16.jpg)'
- en: Figure 2.16 – Install language
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.16 – 安装语言
- en: 'Click on **Continue** once you have picked your language. Next, you should
    see the **INSTALLATION** **SUMMARY** section:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你的语言后，点击**继续**。接下来，你应该会看到**安装** **总结**部分：
- en: '![Figure  2.17 – Installation Summary](img/B18349_02_17.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.17 – 安装总结](img/B18349_02_17.jpg)'
- en: Figure 2.17 – Installation Summary
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.17 – 安装总结
- en: 'For now, we need to do two tasks:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们需要完成两个任务：
- en: Enable the network
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用网络
- en: Set **Installation Source** to Oracle’s yum repo
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置**安装源**为 Oracle 的 yum 仓库
- en: To enable the network, click on the **Network & Host** **Name** option.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用网络，点击**网络与主机名**选项。
- en: Here, you will need to switch Ethernet on, and also update the hostname with
    the name of the server. The network will automatically use DHCP to configure the
    boot image. You can optionally manually configure the IP stack by clicking the
    **Configure** option.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，你需要开启以太网，并更新主机名为服务器名称。网络将自动使用 DHCP 配置启动镜像。你也可以选择手动配置 IP 堆栈，点击**配置**选项。
- en: '![Figure 2.18 – Network & Host Name](img/B18349_02_18.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.18 – 网络与主机名](img/B18349_02_18.jpg)'
- en: Figure 2.18 – Network & Host Name
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.18 – 网络与主机名
- en: Next, click **Apply** and then **Done**. This will take you back to the **INSTALLATION
    SUMMARY** page. From there, we will need to select **Installation Source** to
    set where we will get the install files.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击**应用**，然后点击**完成**。这将带你回到**安装总结**页面。接下来，我们需要选择**安装源**来设置安装文件的位置。
- en: '![Figure 2.19 – Installation Source](img/B18349_02_19.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.19 – 安装源](img/B18349_02_19.jpg)'
- en: Figure 2.19 – Installation Source
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.19 – 安装源
- en: In this example, we are using the Oracle Public YUM server as the installation
    source. You can optionally add additional repositories if needed, as well as set
    any proxy settings if required. You can also set an `FTP://` patch for an NFS
    server path. Once you have a path, select **Done**.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，我们使用 Oracle 公共 YUM 服务器作为安装源。你可以根据需要选择性地添加其他仓库，以及在需要时设置代理设置。你也可以为 NFS
    服务器路径设置 `FTP://` 补丁。一旦你设置了路径，点击**完成**。
- en: This will take you back to the **INSTALLATION SUMMARY** page. Wait a few minutes
    for the repo index to load. Once it loads, you should see the **Installation Source**
    option, as well as the option for **Software Selection**.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将带你回到**安装总结**页面。等待几分钟以加载仓库索引。加载完成后，你应该能看到**安装源**选项，以及**软件选择**选项。
- en: '![Figure 2.20 – Selecting Installation Source](img/B18349_02_20.jpg)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.20 – 选择安装源](img/B18349_02_20.jpg)'
- en: Figure 2.20 – Selecting Installation Source
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.20 – 选择安装源
- en: Manually network booting is otherwise the same as an ISO or USB boot.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 手动网络启动与 ISO 或 USB 启动基本相同。
- en: How it works…
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它的工作方式……
- en: 'A manual boot process is fairly simple to do. Once booted, on the **INSTALLATION
    SUMMARY** screen, you have many options:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 手动启动过程相对简单。一旦启动，在**安装总结**屏幕上，你有许多选项：
- en: '**LOCALIZATION**: This is where you can set settings for country-specific options
    language, keyboard type, time, and more:'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**本地化**：在这里你可以设置与国家相关的选项，如语言、键盘类型、时间等：'
- en: '**Keyboard**: This allows you to set what keyboard is used. You can use non-US
    keyboards.'
  id: totrans-199
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**键盘**：这让你可以设置使用的键盘类型。你可以使用非美国键盘。'
- en: '**Language Support**: This sets the language used.'
  id: totrans-200
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言支持**：这设置所使用的语言。'
- en: '**Time and Date**: This sets the system time, as well as the **Network Time
    Protocol** (**NTP**) servers to be used to automatically synchronize the time.'
  id: totrans-201
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间和日期**：这设置系统时间，以及将用于自动同步时间的**网络时间协议**（**NTP**）服务器。'
- en: '**SOFTWARE**: This sets the software sources and what software groups or packages
    will be installed:'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**软件**：这设置了软件源以及要安装的软件组或软件包：'
- en: '**Installation Source**: This sets the source and software being installed'
  id: totrans-203
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安装源**：这设置了安装的软件源和软件包'
- en: '**Software Selection**: This sets what software groups and packages are being
    installed'
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**软件选择**：此项设置将安装哪些软件组和包。'
- en: '**SYSTEM**: These are system-level parameters:'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统**：这些是系统级参数：'
- en: '**Installation Destination**: This is the destination for the install. This
    includes the initial filesystem layout.'
  id: totrans-206
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安装目标**：这是安装的目标位置，包括初始的文件系统布局。'
- en: '**KDUMP**: This allows you to set up kdump, a kernel crash dump tool that writes
    system information to disk for analysis later.'
  id: totrans-207
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**KDUMP**：这允许你设置 kdump，这是一个内核崩溃转储工具，将系统信息写入磁盘，以便稍后分析。'
- en: '**Network & Host Name**: This is where you set the hostname and network information.'
  id: totrans-208
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络与主机名**：在这里你可以设置主机名和网络信息。'
- en: '**Security Policy**: This enables a more secure installation, allowing you
    to start with a system that meets popular security standards such as STIG and
    PCI-DSS.'
  id: totrans-209
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全策略**：此项启用更安全的安装，允许你使用符合流行安全标准（如 STIG 和 PCI-DSS）要求的系统。'
- en: '**USER SETTINGS**: This is where you can set users, groups, and passwords:'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户设置**：在这里你可以设置用户、组和密码：'
- en: '**Root Password**: This sets the initial root password'
  id: totrans-211
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**根密码**：此项设置初始的 root 密码。'
- en: 'Generally, the first setting that is set is the network. This is key for not
    only network installations but also setting up NTP for time synchronization:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，首先设置的是网络。这对于网络安装以及设置 NTP 进行时间同步至关重要：
- en: 'To set up the network, select **Network &** **Host Name**:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要设置网络，请选择**网络与主机名**：
- en: '![Figure 2.21 – Setting hostname and IP info](img/B18349_02_21.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.21 – 设置主机名和 IP 信息](img/B18349_02_21.jpg)'
- en: Figure 2.21 – Setting hostname and IP info
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.21 – 设置主机名和 IP 信息
- en: 'By default, the network port is not enabled and the hostname is not set. You
    can manually set the hostname. Don’t forget to use an FQDN when setting the hostname.
    This should include the name and the domain name. When you enable the network,
    the system will automatically grab DHCP IP info. If you want to manually configure
    this, click on **Configure…**:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，网络端口未启用，且主机名未设置。你可以手动设置主机名。设置主机名时，别忘了使用 FQDN。它应包括名称和域名。启用网络时，系统会自动获取 DHCP
    的 IP 信息。如果你想手动配置此信息，请点击**配置…**：
- en: '![Figure 2.22 – Accessing manual network settings](img/B18349_02_22.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.22 – 访问手动网络设置](img/B18349_02_22.jpg)'
- en: Figure 2.22 – Accessing manual network settings
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.22 – 访问手动网络设置
- en: This will take you to the network details, where you can manually set the MTU,
    IP address, and other NIC-specific settings. You can also disable IPv6 if needed.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将带你进入网络详细信息页面，你可以手动设置 MTU、IP 地址和其他与网卡相关的设置。如果需要，你也可以禁用 IPv6。
- en: '![Figure 2.23 – Manual network settings](img/B18349_02_23.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.23 – 手动网络设置](img/B18349_02_23.jpg)'
- en: Figure 2.23 – Manual network settings
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.23 – 手动网络设置
- en: 'Once the network is set, you can use network resources such as NTP servers
    to synchronize the clock. To do this, under **TIME & DATE**, click on the gears:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 网络设置完成后，你可以使用网络资源，如 NTP 服务器，同步时钟。为此，在**时间和日期**下，点击齿轮图标：
- en: '![Figure 2.24 – Accessing NTP settings](img/B18349_02_24.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.24 – 访问 NTP 设置](img/B18349_02_24.jpg)'
- en: Figure 2.24 – Accessing NTP settings
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.24 – 访问 NTP 设置
- en: Then, you can add NTP servers. By default, a public server is used, but if you
    run local NTP servers, make sure you add those here.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，你可以添加 NTP 服务器。默认情况下，使用公共服务器，但如果你运行本地 NTP 服务器，确保在此添加它们。
- en: '![Figure 2.25 – NTP settings](img/B18349_02_25.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.25 – NTP 设置](img/B18349_02_25.jpg)'
- en: Figure 2.25 – NTP settings
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.25 – NTP 设置
- en: Next, additional software sources can be added under **Installation Source**
    as needed. This was done previously when doing a network install.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，根据需要可以在**安装源**下添加其他软件源。在进行网络安装时，这项操作已经完成。
- en: 'You can also set what RPM groups are installed, along with any additional software.
    This is done under **SOFTWARE SELECTION**:'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你还可以设置要安装的 RPM 组以及任何附加软件。这可以在**软件选择**下进行：
- en: '![Figure 2.26 – Software Selection](img/B18349_02_26.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.26 – 软件选择](img/B18349_02_26.jpg)'
- en: Figure 2.26 – Software Selection
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.26 – 软件选择
- en: After setting **Base Environment** and adding any additional software, the next
    task is to set up the installation destination. This is done by clicking on **Installation
    Destination**.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在设置了**基本环境**并添加了任何附加软件之后，下一步是设置安装目标。你可以通过点击**安装目标**来完成这项工作。
- en: From here, you should see the physical and logical drives available to the system.
    The default is to set **Storage Configuration** as **Automatic**, but let’s explore
    a different boot disk structure by selecting a custom configuration. Once **Custom**
    is selected, click on the **Done** button.
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从这里，你应该能看到系统可用的物理和逻辑驱动器。默认设置为将**存储配置**设置为**自动**，但我们可以通过选择自定义配置来探索一种不同的启动磁盘结构。一旦选择了**自定义**，点击**完成**按钮。
- en: '![Figure 2.27 – Installation Destination](img/B18349_02_27.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.27 – 安装目标](img/B18349_02_27.jpg)'
- en: Figure 2.27 – Installation Destination
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.27 – 安装目标
- en: From here, you can pick the default volume management strategy, as well as manually
    creating a new layout. Most systems will use an LVM install, as this gives you
    the flexibility to resize partitions down the road.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从这里，你可以选择默认的卷管理策略，并手动创建新的布局。大多数系统将使用 LVM 安装，因为这使你能够在以后调整分区大小。
- en: '![Figure 2.28 – Manual Partitioning](img/B18349_02_28.jpg)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.28 – 手动分区](img/B18349_02_28.jpg)'
- en: Figure 2.28 – Manual Partitioning
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.28 – 手动分区
- en: Don’t forget to click **Done** and accept all the changes to the layout.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 别忘了点击**完成**并接受所有对布局的更改。
- en: As a note, if you boot from a UEK-based install, you now have the option to
    use Btrfs as the root filesystem.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 需要注意的是，如果你从基于 UEK 的安装启动，现在可以选择使用 Btrfs 作为根文件系统。
- en: '![Figure 2.29 – Btfrs partitioning](img/B18349_02_29.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.29 – Btrfs 分区](img/B18349_02_29.jpg)'
- en: Figure 2.29 – Btfrs partitioning
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.29 – Btrfs 分区
- en: Btrfs will look a little different, as the system combines the role of volume
    manager and filesystem into one system. This means at the time of installation,
    all of the filesystems will show all the space available. This can be updated
    after the OS is installed and a quota is set for each directory that needs to
    be limited. This is covered in the Btfrs recipes in [*Chapter 4*](B18349_04.xhtml#_idTextAnchor104).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: Btrfs 看起来会有些不同，因为系统将卷管理器和文件系统的角色结合成一个系统。这意味着在安装时，所有文件系统将显示出所有可用的空间。安装操作系统后，可以更新这些空间，并为每个需要限制的目录设置配额。有关详细信息，请参阅
    [*第 4 章*](B18349_04.xhtml#_idTextAnchor104)中的 Btrfs 配方。
- en: You could finish up now by just giving root a password… but there is one more
    basic task, and that is to apply a security policy to the system. The security
    policy allows the installer to preconfigure the system to follow the policy set.
    This is very helpful when installing systems that support workloads such as HIPPA,
    PCI DSS for credit card processing, or STIG for public sector workloads.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在可以通过给 root 设置一个密码来完成这一步……但还有一个基本任务，那就是为系统应用安全政策。安全政策允许安装程序预先配置系统，以遵循设定的政策。这对于安装支持诸如
    HIPPA、PCI DSS（用于信用卡处理）或 STIG（用于公共部门工作负载）等工作负载的系统非常有帮助。
- en: 'To set a policy, select **Security Policy** from **Installation Summary**:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要设置一个政策，请从**安装总结**中选择**安全政策**：
- en: '![Figure 2.30 – Security Policy](img/B18349_02_30.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.30 – 安全政策](img/B18349_02_30.jpg)'
- en: Figure 2.30 – Security Policy
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.30 – 安全政策
- en: 'Once you know the policy you want to use, select it and click on **Select profile**:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你知道要使用的政策，选择它并点击**选择配置文件**：
- en: '![Figure 2.31 – Applying a security policy](img/B18349_02_31.jpg)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.31 – 应用安全政策](img/B18349_02_31.jpg)'
- en: Figure 2.31 – Applying a security policy
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.31 – 应用安全政策
- en: You will now see the policy and a list of all the changes being made to the
    system. You will also see some changes that may need to be made to the filesystem
    layout. This is seen in policies such as STIG, where `/var` and `/var/log` need
    to be separate filesystems.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你将看到政策以及所有正在对系统进行的更改的列表。你还会看到一些可能需要对文件系统布局进行更改的地方。像 STIG 这样的政策中就要求 `/var`
    和 `/var/log` 必须是独立的文件系统。
- en: Once done, from the **Installation Summary**, click on **Begin Installation**
    to start the install.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，从**安装总结**中点击**开始安装**以开始安装。
- en: Appendix – kickstart options
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 – kickstart 选项
- en: 'The following table covers the most popular options that control the installation
    and their syntax:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 以下表格列出了控制安装的最常见选项及其语法：
- en: '| **Option Name** | `authselect` |  |  |'
  id: totrans-255
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `authselect` |  |  |'
- en: '| **Description** | It configures the authentication options for the system
    using the `authselect` command. `authselect` options are the same as the `authselect`
    command. They are passed directly to the command. |'
  id: totrans-256
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 它使用 `authselect` 命令配置系统的身份验证选项。`authselect` 选项与 `authselect` 命令相同，直接传递给该命令。
    |'
- en: '| **Options** | See the `authselect` command. |'
  id: totrans-257
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | 查看`authselect`命令。 |'
- en: '| **Option Name** | `autostep` |  |  |'
  id: totrans-258
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `autostep` |  |  |'
- en: '| **Description** | This option is not recommended for production use. It is
    more of a troubleshooting command that makes the installer step through every
    screen, displaying them for a short amount of time. |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 此选项不推荐用于生产环境。它更像是一个故障排除命令，使安装程序逐步显示每个屏幕，每个屏幕显示的时间较短。 |'
- en: '| **Options** | `--autoscreenshot` will take an automated screenshot of every
    install screen. The images are stored in `/tmp/anaconda-screenshots/` during the
    installation and then moved over to `/root/anaconda-screenshots` when the installation
    completes. This is helpful for troubleshooting because if you missed a required
    kickstart option and the installation does not automatically run, you will be
    at the screen with missing data, and can manually enter the missing configuration
    data. Then, when you click to continue, the screen is automatically captured with
    the data you manually entered. |'
  id: totrans-260
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--autoscreenshot` 将自动截图每个安装屏幕。图像会在安装过程中存储在 `/tmp/anaconda-screenshots/`，安装完成后移动到
    `/root/anaconda-screenshots`。这对于故障排除非常有帮助，因为如果您错过了必需的 kickstart 选项，安装未能自动运行，您将会看到缺少数据的屏幕，并可以手动输入缺失的配置数据。然后，点击继续时，屏幕会自动捕获您手动输入的数据。
    |'
- en: '| **Option Name** | `cmdline` |  |  |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `cmdline` |  |  |'
- en: '| **Description** | When used, the install runs in a non-interactive command-line
    mode. Any prompt from Anaconda for input stops the installation. Make sure to
    test with the `autostep` option first. |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 当使用此选项时，安装将在非交互式命令行模式下运行。Anaconda 的任何输入提示将停止安装。请确保先使用 `autostep`
    选项进行测试。 |'
- en: '| **Options** | None |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | 无 |'
- en: '| **Option Name** | `eula` |  |  |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `eula` |  |  |'
- en: '| **Description** | If used, the `–-agreed` option is required. This option
    allows you to automatically accept the **End User License Agreement** (**EULA**).
    When this option is used, the installer will not prompt for acceptance of the
    EULA on the first reboot of the system. This is very useful for environments that
    use a PXE boot as part of the auto-scaling strategy. |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 如果使用此选项，则需要 `–-agreed` 选项。此选项允许您自动接受 **最终用户许可协议**（**EULA**）。使用此选项时，安装程序在系统第一次重启时将不会提示接受
    EULA。这对于使用 PXE 启动作为自动扩展策略的一部分的环境非常有用。 |'
- en: '| **Options** | `--agreed` forces the EULA to be accepted and must be used.
    If the option is not used, the EULA parameter is ignored. |'
  id: totrans-266
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--agreed` 强制接受 EULA（最终用户许可协议），必须使用此选项。如果未使用该选项，EULA 参数将被忽略。 |'
- en: '| **Option Name** | `firewall` |  |  |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `firewall` |  |  |'
- en: '| **Description** | This configures the firewall on the installed system. |'
  id: totrans-268
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 该选项配置已安装系统上的防火墙。 |'
- en: '| **Options** |'
  id: totrans-269
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--enabled` or `–enable` is required. It enables or disables the firewall.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--enabled` 或 `–enable` 是必需的。它启用或禁用防火墙。'
- en: '`--disabled` or `–disable` is required. If disabled, `iptables` rules are not
    configured.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--disabled` 或 `–disable` 是必需的。如果禁用，`iptables` 规则将不会配置。'
- en: '`--trust` sets a trusted network device, allowing all traffic to pass through
    the firewall. To configure multiple devices, list each one as its own entry with
    no commas, such as `–trust eth0 –``trust eth8`.'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--trust` 设置受信网络设备，允许所有流量通过防火墙。要配置多个设备，请分别列出每个设备项，不使用逗号，例如 `–trust eth0 –``trust
    eth8`。'
- en: '`--incoming` adds each of the following tags to allow incoming traffic for
    these common services:'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--incoming` 添加以下每个标签以允许这些常见服务的入站流量：'
- en: '`–``ssh`'
  id: totrans-274
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`–``ssh`'
- en: '`–``smtp`'
  id: totrans-275
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`–``smtp`'
- en: '`–``http`'
  id: totrans-276
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`–``http`'
- en: '`–``ftp`'
  id: totrans-277
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`–``ftp`'
- en: '`--port=` specifies a specific port to allow access to the server. You can
    use ports from `/etc/service` for specific `port:protocol` combinations. Multiple
    ports are comma delimited. An example is `ldap:tcp, 1521:tcp`.'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--port=` 指定一个特定的端口以允许访问服务器。可以使用 `/etc/service` 中的端口来指定特定的 `端口:协议` 组合。多个端口之间使用逗号分隔。例如
    `ldap:tcp, 1521:tcp`。'
- en: '`--service=` allows an easy way to enable specific services, such as CUPS,
    or services that require multiple UDP/TCP ports to be opened. This enables an
    easy way to open these ports in a readable format.'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--service=` 提供了一种简便的方法来启用特定服务，如 CUPS，或需要打开多个 UDP/TCP 端口的服务。这为打开这些端口提供了一种易于阅读的格式。'
- en: '`--use-system-defaults` does not configure the firewall. If other options are
    specified, they are ignored.'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--use-system-defaults` 不配置防火墙。如果指定了其他选项，则它们将被忽略。'
- en: '|'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: '|  |'
- en: '| **Option Name** | `firstboot` |  |  |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `firstboot` |  |  |'
- en: '| **Description** | This option can disable the running of the setup application
    when the system boots. If enabled, make sure you have `initial-setup.rpm` (`initial-setup-gui.rpm`
    if a GUI is required) installed. This option is disabled by default. |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 此选项可以禁用在系统启动时运行设置应用程序。如果启用，请确保已安装 `initial-setup.rpm`（如果需要图形界面，则为
    `initial-setup-gui.rpm`）。此选项默认禁用。 |'
- en: '| **Options** |'
  id: totrans-284
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--enable` or `–enabled` starts the setup the first time the system boots.'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--enable` 或 `–enabled` 会在系统第一次启动时启动设置程序。'
- en: '`--disable` or `–disabled` does not start the setup the first time the system
    boots.'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--disable` 或 `–disabled` 不会在系统第一次启动时启动设置程序。'
- en: '`--reconfig` enables the setup to start at boot time in reconfiguration mode.
    This enables the networking configuration, root password, time zone, language,
    mouse, and keyboard options to be set in addition to the default options.'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--reconfig` 启用设置程序在启动时以重新配置模式启动。这使得可以设置网络配置、root 密码、时区、语言、鼠标和键盘选项，除了默认选项之外。'
- en: '|'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '|  |  |  |  |'
- en: '| **Option Name** | `graphical` |  |  |'
  id: totrans-289
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `graphical` |  |  |'
- en: '| **Description** | The `graphical` command is the default, if not set. The
    installation continues with a fully graphical install. |'
  id: totrans-290
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 如果没有设置，`graphical` 命令是默认选项。安装将继续进行完全图形化安装。 |'
- en: '| **Options** | `--non-interactive` performs the installation in a completely
    non-interactive mode. This mode will terminate the installation when user interaction
    is required. |'
  id: totrans-291
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--non-interactive` 在完全非交互模式下执行安装。此模式将在需要用户交互时终止安装。 |'
- en: '| **Option Name** | `group` |  |  |'
  id: totrans-292
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `group` |  |  |'
- en: '| **Description** | This option creates a user group on the system. |'
  id: totrans-293
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 此选项在系统上创建一个用户组。 |'
- en: '| **Options** |'
  id: totrans-294
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--name=` is required and sets the name of the group.'
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--name=` 是必需的，并设置组的名称。'
- en: '`--gid=` is an optional parameter and will set the GID of the group.'
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--gid=` 是一个可选参数，将设置组的 GID。'
- en: '|'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Option Name** | `halt` |  |  |'
  id: totrans-298
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `halt` |  |  |'
- en: '| **Description** | If used, the system with halt after the installation is
    completed. This is the default completion method if no other method is set. Other
    completion methods are `poweroff`, `reboot`, and `shutdown`. |'
  id: totrans-299
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 如果使用，安装完成后系统将停止。这是默认的完成方法，如果没有设置其他方法。其他完成方法包括 `poweroff`、`reboot`
    和 `shutdown`。 |'
- en: '| **Options** | None |'
  id: totrans-300
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | 无 |'
- en: '| **Option Name** | `logging` |  |  |'
  id: totrans-301
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `logging` |  |  |'
- en: '| **Description** | This is useful for troubleshooting PXE installs. It controls
    the logging from the installer during the installation. It does not configure
    logging on the system being installed. |'
  id: totrans-302
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 这对于故障排除 PXE 安装非常有用。它控制安装过程中安装程序的日志记录。它不会配置正在安装的系统的日志记录。 |'
- en: '| **Options** |'
  id: totrans-303
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--host=` is the syslog host logs are sent to.'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--host=` 是 syslog 主机，日志会发送到该主机。'
- en: '`--port=` is the port used for syslog on the remote syslog host. If not set,
    the default port (UDP 514) is used.'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--port=` 是用于远程 syslog 主机的 syslog 端口。如果未设置，则使用默认端口（UDP 514）。'
- en: '`--level=` specifies the minimum level of messages sent to device `tty3`. Regardless
    of this level, all messages are still sent to the log host and file. Valid values
    are `critical`, `debug`, `error`, `info`, and `warning`.'
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--level=` 指定发送到设备 `tty3` 的最小消息级别。无论此级别如何，所有消息仍会发送到日志主机和文件。有效值包括 `critical`、`debug`、`error`、`info`
    和 `warning`。'
- en: '|'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Syntax** | `logging [--host=host] [--``port=port] [--level=critical&#124;debug&#124;error&#124;info]`
    |'
  id: totrans-308
  prefs: []
  type: TYPE_TB
  zh: '| **语法** | `logging [--host=host] [--port=port] [--level=critical|debug|error|info]`
    |'
- en: '| **Option Name** | `poweroff` |  |  |'
  id: totrans-309
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `poweroff` |  |  |'
- en: '| **Description** | When used, a shutdown and power-off are performed on the
    system after the installation completes. |'
  id: totrans-310
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 使用时，安装完成后会执行关机并关闭系统电源。 |'
- en: '| **Options** | None |'
  id: totrans-311
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | 无 |'
- en: '| **Option Name** | `reboot` |  |  |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `reboot` |  |  |'
- en: '| **Description** | It reboots the system after the install completes. |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 安装完成后重新启动系统。 |'
- en: '| **Options** | `--eject` ejects bootable media (DVD, USB, etc.) before rebooting
    the system. |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--eject` 在重新启动系统之前弹出可引导介质（DVD、USB 等）。 |'
- en: '| **Option Name** | `repo` |  |  |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `repo` |  |  |'
- en: '| **Description** | Enables additional DNF/YUM repos as installation sources.
    Each repo will need its own line. |'
  id: totrans-316
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 启用额外的 DNF/YUM 仓库作为安装源。每个仓库需要单独的一行。 |'
- en: '| **Options** |'
  id: totrans-317
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--name=` is required and sets both the repo name and URL. If a name conflicts
    with an existing repo, it will be ignored. The format is `--name=repoid [--baseurl=url&#124;--mirrorlist=url&#124;--metalink=url]
    [options]`. The following additional options can be added to the URL. As a warning,
    variables that can be used in yum repository config files are not supported. However,
    you can use `$releasever` and `$basearch`:'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--name=` 是必需的，它设置仓库的名称和 URL。如果名称与现有仓库冲突，将被忽略。格式为 `--name=repoid [--baseurl=url&#124;--mirrorlist=url&#124;--metalink=url]
    [options]`。以下是可以添加到 URL 的附加选项。作为警告，yum 仓库配置文件中可以使用的变量不受支持。但是，你可以使用 `$releasever`
    和 `$basearch`：'
- en: '`--baseurl`: This is the URL of the repo'
  id: totrans-319
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--baseurl`：这是仓库的 URL'
- en: '`--mirrorlist`: This is a list of mirrors for a repo'
  id: totrans-320
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--mirrorlist`：这是仓库的镜像列表'
- en: '`--metalink`: This is the URL with `metalink` for the repo'
  id: totrans-321
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--metalink`：这是仓库的 `metalink` URL'
- en: '`--proxy=[protocol://][username[:password]@]host[:port]` sets the proxy for
    the repo.'
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--proxy=[protocol://][username[:password]@]host[:port]` 设置仓库的代理。'
- en: '`--noverifyssl` disables SSL verification of an HTTPS server.'
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--noverifyssl` 禁用 HTTPS 服务器的 SSL 验证。'
- en: '|'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Option Name** | `selinux` |  |  |'
  id: totrans-325
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `selinux` |  |  |'
- en: '| **Description** | Used to configure the initial policy and state of `selinux`.
    The default policy is enforcing. |'
  id: totrans-326
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 用于配置 `selinux` 的初始策略和状态。默认策略为强制执行。 |'
- en: '| **Options** |'
  id: totrans-327
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--enforcing` enables SELinux with the policy set to enforcing. This is the
    default setting.'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--enforcing` 启用 SELinux，并将策略设置为强制执行。这是默认设置。'
- en: '`--permissive` enables SELinux with the policy set to permissive. This allows
    warnings to output to console of syslog without enforcing the policy.'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--permissive` 启用 SELinux，并将策略设置为宽松。这允许警告输出到控制台的 syslog，但不强制执行策略。'
- en: '`--disabled` disables SELinux.'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--disabled` 禁用 SELinux。'
- en: '|'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Option Name** | `shutdown` |  |  |'
  id: totrans-332
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `shutdown` |  |  |'
- en: '| **Description** | Runs the `shutdown` command on the system after the installation
    has completed. |'
  id: totrans-333
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 安装完成后，在系统上运行 `shutdown` 命令。 |'
- en: '| **Options** | None |'
  id: totrans-334
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | 无 |'
- en: '| **Option Name** | `sshkey` |  |  |'
  id: totrans-335
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `sshkey` |  |  |'
- en: '| **Description** | This adds an SSH key to the authorized keys files for the
    specified user. |'
  id: totrans-336
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 将 SSH 密钥添加到指定用户的授权密钥文件中。 |'
- en: '| **Options** | `--username` is mandatory. It is used with the following syntax:`sshkey
    --``username=user KEY` |'
  id: totrans-337
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--username` 是必需的。其用法为：`sshkey --``username=user KEY` |'
- en: '| **Option Name** | `text` |  |  |'
  id: totrans-338
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `text` |  |  |'
- en: '| **Description** | When used, the installation runs in text mode. By default,
    the installer runs the GUI install method. Only one of the text/graphical options
    can be used. |'
  id: totrans-339
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 使用时，安装将以文本模式运行。默认情况下，安装程序使用 GUI 安装方法。只能使用文本/图形模式中的一种选项。 |'
- en: '| **Options** | `--non-interactive` does the install in a non-interactive mode.
    If a user action is required, the mode will terminate the install. |'
  id: totrans-340
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | `--non-interactive` 以非交互模式进行安装。如果需要用户操作，该模式将终止安装。 |'
- en: '| **Option Name** | `url` |  |  |'
  id: totrans-341
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `url` |  |  |'
- en: '| **Description** | When used, it will use the URL specified for the install
    files from an ISO. URLs can be formatted for FTP, HTTP, or HTTPS. |'
  id: totrans-342
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 使用时，它将使用为安装文件指定的 URL，该文件来自 ISO。URL 可以格式化为 FTP、HTTP 或 HTTPS。 |'
- en: '| **Options** |'
  id: totrans-343
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--url` is required. This is the URL used for the source files. An example
    of the syntax is as follows:'
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--url` 是必需的。这是用于源文件的 URL。以下是语法示例：'
- en: '[`http://server/direcort`](http://server/direcort)[`ftp://username:password@server/path`](ftp://username:password@server/path)'
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[`http://server/direcort`](http://server/direcort)[`ftp://username:password@server/path`](ftp://username:password@server/path)'
- en: '`--mirrorlist` is an optional parameter that sets the mirror URL to install
    from.'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--mirrorlist` 是一个可选参数，用于设置用于安装的镜像 URL。'
- en: '`--proxy` is an optional parameter that sets a proxy to use while performing
    the install from an HTTP/HTTPS or FTP server.'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--proxy` 是一个可选参数，用于在从 HTTP/HTTPS 或 FTP 服务器安装时设置代理。'
- en: '`--noverifyssl` is an optional parameter that disables SSL verification when
    using an HTTPS server.'
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--noverifyssl` 是一个可选参数，禁用使用 HTTPS 服务器时的 SSL 验证。'
- en: '`--metalink` is an optional parameter that sets the ULN/metalink URL to install
    from. Variable substitution is done for `$releasever` and `$basearch`.'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--metalink` 是一个可选参数，用于设置用于安装的 ULN/metalink URL。变量替换会对 `$releasever` 和 `$basearch`
    进行。'
- en: '|'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Option Name** | `user` |  |  |'
  id: totrans-351
  prefs: []
  type: TYPE_TB
  zh: '| **选项名称** | `user` |  |  |'
- en: '| **Description** | Creates a new user on the system |'
  id: totrans-352
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 在系统上创建一个新用户 |'
- en: '| **Options** |'
  id: totrans-353
  prefs: []
  type: TYPE_TB
  zh: '| **选项** |'
- en: '`--name` is a required parameter and is the username.'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--name` 是一个必需的参数，表示用户名。'
- en: '`--uid` is the user’s **User** **ID** (**UID**).'
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--uid` 是用户的**用户** **ID**（**UID**）。'
- en: '`--gid` the user’s **Group** **ID** (**GID**).'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--gid` 是用户的**组** **ID**（**GID**）。'
- en: '`--groups` is a comma-separated list of group names the user should belong
    to.'
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--groups` 是一个以逗号分隔的用户应属于的组名列表。'
- en: '`--homedir` is the home directory for the user.'
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--homedir` 是用户的主目录。'
- en: '`--lock` will, if used, lock a new user’s account by default.'
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--lock` 如果使用，将默认锁定新用户的帐户。'
- en: '`--password` is the password for the new user.'
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--password` 是新用户的密码。'
- en: '`--iscrypted`, if used, means that the password argument is the encrypted password.
    You can get this from the `/etc/shadow` file on a running system.'
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--iscrypted`，如果使用，意味着密码参数是加密后的密码。你可以从运行中的系统的 `/etc/shadow` 文件中获取。'
- en: '`--plaintext`, if used, means that the password argument is the plain text
    password.'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--plaintext`，如果使用，意味着密码参数是明文密码。'
- en: '`--shell` is the path to the user’s default shell.'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--shell` 是用户默认 shell 的路径。'
- en: '|'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Table 2.1 – Kickstart options
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 表 2.1 – Kickstart 选项
