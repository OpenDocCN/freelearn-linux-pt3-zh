- en: 4\. Dual Booting Ubuntu with Windows
  prefs: []
  type: TYPE_NORMAL
- en: Ubuntu, just like most Linux distributions, will happily co-exist on a hard
    disk drive with just about any version of Windows. This is a concept known as
    dual-booting. Essentially, when you power up your PC, you will be presented with
    a menu providing the option to boot either Ubuntu or Windows. Obviously, you can
    only run one operating system at a time, but it is worth noting that the files
    on the Windows partition of your disk drive will be available to you from Ubuntu
    regardless of whether your Windows partition was formatted using NTFS, FAT16 or
    FAT32\.
  prefs: []
  type: TYPE_NORMAL
- en: During the installation process, the Ubuntu installer will detect the Windows
    installation on the drive and provide the option of deleting it and using the
    entire disk for Ubuntu, or sharing the disk with Windows. In the latter case,
    you will be able to specify the percentage of the disk to be used for Ubuntu.
  prefs: []
  type: TYPE_NORMAL
- en: According to the Ubuntu documentation, a minimum of 25 GB of disk space is required
    for a full Ubuntu Desktop Edition installation, and more space to store any files
    you may subsequently create. Once the disk space for Ubuntu has been selected,
    the installer will resize the Windows partition (without destroying any data)
    and use the remainder of the disk for Ubuntu.
  prefs: []
  type: TYPE_NORMAL
- en: This chapter will demonstrate how to set up a dual boot system with Ubuntu and
    Windows 10, change the system that boots by default when the computer system is
    powered on, and outline how to access files located on the Windows partition of
    the disk from within Ubuntu.
  prefs: []
  type: TYPE_NORMAL
- en: Within this chapter, the assumption is made that the steps outlined in the previous
    chapter have been followed to create a bootable Ubuntu installation USB drive
    using the Ubuntu Desktop installation image and that the system has been configured
    to boot from the USB drive when started.
  prefs: []
  type: TYPE_NORMAL
- en: 4.1 Beginning the Ubuntu Installation
  prefs: []
  type: TYPE_NORMAL
- en: 'Insert the Ubuntu installation media into the appropriate drive and power on
    the system. If the system starts Windows, you will need to enter the BIOS set
    up for your computer and change the boot order so that it boots from the installation
    media drive first. After the initial boot sequence completes, the GRUB menu shown
    in [Figure 4-1](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor062) will appear:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_grub_screen.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-1
  prefs: []
  type: TYPE_NORMAL
- en: 'Use the arrow keys to select the Try or Install Ubuntu menu option, then press
    Enter to boot into an Ubuntu Live session. After Ubuntu has booted completely,
    the window shown in [Figure 4-2](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor063)
    below will appear:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_choose_language.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-2
  prefs: []
  type: TYPE_NORMAL
- en: 'Select your preferred language followed by the Next button. On the next screen,
    options are provided to either try the Ubuntu Live session or to begin the installation
    process:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_or_try.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-3
  prefs: []
  type: TYPE_NORMAL
- en: 4.2 Installing Ubuntu
  prefs: []
  type: TYPE_NORMAL
- en: 'Select the Install Ubuntu option, then click the Next button to proceed to
    the Keyboard layout screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_keyboard.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-4
  prefs: []
  type: TYPE_NORMAL
- en: 'Either select your keyboard layout or, if you are unsure, click on the Detect
    button to work through some steps to identify your keyboard before clicking on
    Next to select the network connection to use during the installation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_network.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-5
  prefs: []
  type: TYPE_NORMAL
- en: 'On the next screen, choose whether to perform the Normal or Minimal installation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_type1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-6
  prefs: []
  type: TYPE_NORMAL
- en: Select the Normal option if you have plenty of disk space and want to explore
    the main applications and utilities included with Ubuntu without having to manually
    install them later. Alternatively, to avoid cluttering the system with software
    you may never need, select the Minimal option. Regardless of the choice made here,
    all of the software provided with Ubuntu can be easily installed or removed at
    any point in the future if needed.
  prefs: []
  type: TYPE_NORMAL
- en: The option is also available to update the software packages that comprise the
    Ubuntu distribution during the installation. Ubuntu, as with most actively supported
    operating systems, continues to be updated with bug fixes and security patches
    long after it has been released to the public. If this option is selected and
    the system is connected to the internet, the installer will download any updates
    issued since the Ubuntu installation image was released and applies them to the
    system during installation. If you choose not to perform this update during the
    installation process, these updates may still be applied at any time after the
    installation completes.
  prefs: []
  type: TYPE_NORMAL
- en: A second option provides the choice of whether to install 3rd party non-open
    source software to support specific hardware devices and the playback of proprietary
    media files on the system. Some users object fervently to using any software which
    is not published under a public license. If you are one of those people, then
    do not select this option. If, on the other hand, you just want the best experience
    from your Ubuntu installation, then this option is recommended.
  prefs: []
  type: TYPE_NORMAL
- en: 'Having made appropriate selections, click the Next button to proceed to the
    disk allocation screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_with_windows.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-7
  prefs: []
  type: TYPE_NORMAL
- en: 'Given that it is our intention to configure a dual boot system, the option
    to Install Ubuntu alongside Windows Boot Manager is the desired choice. With this
    option selected, click the Continue button to proceed. The subsequent screen allows
    the amount of disk space allocated to each operating system (in this case, Windows
    and Ubuntu) to be configured:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_windows_disk_divide.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-8
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you must decide how much of your Windows partition you wish to
    donate to the Ubuntu installation. Move the slider (positioned between the Windows
    and Ubuntu partitions in the diagram) until the Ubuntu partition allocation is
    a size you are comfortable with. At least 25GB of space should be made available
    for a full Ubuntu Desktop installation.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the selections have been made, click the Next button to review the disk
    partitioning information:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_windows_install.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-9
  prefs: []
  type: TYPE_NORMAL
- en: 'Click the Install button to start the installation. While the installation
    is in progress, the installer will ask for information about your geographical
    location to configure time zone settings:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_timezone.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-10
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, the installer will ask you to provide a username and password for the
    first account on the system:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_username.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-11
  prefs: []
  type: TYPE_NORMAL
- en: The option is also provided to dictate whether the password must be specified
    each time the user wishes to log into the system. By default, each time Ubuntu
    starts, a login screen will be presented seeking username and password credentials.
    If you are the sole user of the system and would like to bypass this screen and
    be logged in automatically each time the system boots, be sure to turn off the
    Require my password to log in switch before proceeding.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once all the questions have been answered, the installer will simply proceed
    with the installation. Depending on the speed of your system, and whether or not
    you opted to download updates during the installation, this process can take some
    time. For a more detailed view of the steps being performed by the installer,
    click on the button highlighted in [Figure 4-12](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor065):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_installing.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-12
  prefs: []
  type: TYPE_NORMAL
- en: 'When the installation is complete, a dialog will update to inform you the system
    is ready to be restarted:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_install_restart.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-13
  prefs: []
  type: TYPE_NORMAL
- en: When you are ready to reboot, press the Restart now button. The installer may
    prompt you to remove the installation media, and the system will take a few moments
    to shut down. At this point, remove the USB flash drive and press the Enter key
    to proceed.
  prefs: []
  type: TYPE_NORMAL
- en: When you are ready to reboot, press the Restart Now button. The installer may
    prompt you to remove the installation media, and the system will take a few moments
    to shut down. At this point, remove the USB flash drive and press the Enter key
    to proceed.
  prefs: []
  type: TYPE_NORMAL
- en: 4.3 Booting Ubuntu for the First Time
  prefs: []
  type: TYPE_NORMAL
- en: 'When the system reboots, a screen similar to the one illustrated below will
    appear, providing the option to boot either Windows or Ubuntu:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_dual_boot_grub_menu.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-14
  prefs: []
  type: TYPE_NORMAL
- en: Press Enter to boot Ubuntu. If you wish to boot Windows, use the keyboard arrow
    keys to select the Windows Boot Manager option. If you choose to boot Ubuntu,
    the operating system will load, and the Ubuntu login screen will appear (unless
    the automatic login option was selected). Enter the user name and password you
    set up during the installation process, and you will be logged into the Ubuntu
    Desktop environment.
  prefs: []
  type: TYPE_NORMAL
- en: 4.4 Changing the Default Boot Option
  prefs: []
  type: TYPE_NORMAL
- en: When the system starts, the boot options screen will appear, and wait 10 seconds
    for the user to make an operating system choice. If no selection has been made
    before the timeout elapses, the default operating system will be started. On a
    newly configured system, the default operating system will be the standard Ubuntu
    image. This default can, however, be changed from within Ubuntu.
  prefs: []
  type: TYPE_NORMAL
- en: 'A range of boot configuration options (including the 10-second timeout and
    the boot settings outlined in [“Installing Ubuntu on a Clean Disk Drive”](Ubuntu_Installation_Clean_Disk.xhtml#_idTextAnchor037))
    are declared in the /etc/default/grub file, which reads as follows on a new installation:'
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_DEFAULT=0
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_TIMEOUT_STYLE=hidden
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_TIMEOUT=10
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_DISTRIBUTOR=`lsb_release -i -s 2> /dev/null || echo Debian`
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_CMDLINE_LINUX_DEFAULT=”quiet splash”
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_CMDLINE_LINUX=""
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step in changing the default boot system is to declare the GRUB_SAVEDEFAULT
    setting within this file and to change the GRUB_DEFAULT setting to saved:'
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_DEFAULT=saved
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_SAVEDEFAULT=true
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_TIMEOUT_STYLE=hidden
  prefs: []
  type: TYPE_NORMAL
- en: GRUB_TIMEOUT=10
  prefs: []
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: 'This setting allows a new default value to be saved within the boot configuration.
    Next, run the grub-set-default command to change the default setting using a numbering
    system that counts the first option as 0\. For example, if the Windows 10 option
    is position 5 in the menu, the command to make Windows 10 the default boot option
    would read as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: grub-set-default 4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Check that the new setting has taken effect by running the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: grub-editenv list
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: saved_entry=4
  prefs: []
  type: TYPE_NORMAL
- en: 'Note that the saved_entry value is now set to 4\. After changing the default,
    regenerate the boot configuration file as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: grub-mkconfig --output=/boot/grub/grub.cfg
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Reboot the system and verify that the boot menu defaults to the Windows 10 option
    and that Windows loads after the timeout expires.
  prefs: []
  type: TYPE_NORMAL
- en: 4.5 Accessing the Windows Partition from the Command-line
  prefs: []
  type: TYPE_NORMAL
- en: When running Ubuntu in a dual boot configuration, it is still possible to access
    files located on the Windows partition. This can be achieved by manually mounting
    the partition from the command-line or from the desktop using the Disks (gnome-disks)
    graphical utility.
  prefs: []
  type: TYPE_NORMAL
- en: 'When working from the command line, the first step in this process is to create
    a directory to use as the mount point for our Windows partition. In this example,
    we will create a directory named /mnt/windows:'
  prefs: []
  type: TYPE_NORMAL
- en: mkdir /mnt/windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In order to identify the device name that has been assigned to the Windows
    partition, use the fdisk command as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: fdisk -l
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: 'Disk /dev/nvme0n1: 64 GiB, 68719476736 bytes, 134217728 sectors'
  prefs: []
  type: TYPE_NORMAL
- en: 'Disk model: VMware Virtual NVMe Disk'
  prefs: []
  type: TYPE_NORMAL
- en: 'Units: sectors of 1 * 512 = 512 bytes'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sector size (logical/physical): 512 bytes / 512 bytes'
  prefs: []
  type: TYPE_NORMAL
- en: 'I/O size (minimum/optimal): 512 bytes / 512 bytes'
  prefs: []
  type: TYPE_NORMAL
- en: 'Disklabel type: gpt'
  prefs: []
  type: TYPE_NORMAL
- en: 'Disk identifier: F0D04B58-29F5-4B6B-B10F-07295BEF9AAC'
  prefs: []
  type: TYPE_NORMAL
- en: Device Start End Sectors Size Type
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p1 2048 206847 204800 100M EFI System
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p2 206848 239615 32768 16M Microsoft reserved
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p3 239616 80184560 79944945 38.1G Microsoft basic data
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p4 132833280 134213631 1380352 674M Windows recovery environment
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p5 80185344 132833279 52647936 25.1G Linux filesystem
  prefs: []
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: 'In the above output, the main Windows partition containing the files we need
    access to is represented by /dev/nvme0n1p3\. Next, we need to run the mount command
    (assuming the Windows partition is /dev/nvme0n1p3) as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: mount /dev/nvme0n1p3 /mnt/windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Check that the mount was successful by listing the contents of the top-level
    directory of the mount point:'
  prefs: []
  type: TYPE_NORMAL
- en: ls /mnt/windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '''$Recycle.Bin'' pagefile.sys swapfile.sys'
  prefs: []
  type: TYPE_NORMAL
- en: '''$WinREAgent'' PerfLogs ''System Volume Information'''
  prefs: []
  type: TYPE_NORMAL
- en: '''Documents and Settings'' ProgramData Users'
  prefs: []
  type: TYPE_NORMAL
- en: DumpStack.log 'Program Files' Windows
  prefs: []
  type: TYPE_NORMAL
- en: DumpStack.log.tmp 'Program Files (x86)'
  prefs: []
  type: TYPE_NORMAL
- en: OneDriveTemp Recovery
  prefs: []
  type: TYPE_NORMAL
- en: 'To automate the mount each time the system is booted, simply add the appropriate
    mount line to the /etc/fstab file:'
  prefs: []
  type: TYPE_NORMAL
- en: /dev/nvme0n1p3 /mnt/windows ntfs defaults 0 0
  prefs: []
  type: TYPE_NORMAL
- en: 'To unmount the Windows file system at any time:'
  prefs: []
  type: TYPE_NORMAL
- en: umount /mnt/windows
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 4.6 Accessing the Windows Partition from the Desktop
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step in mounting a partition using the desktop environment is to
    launch the disks utility. With the desktop loaded, right-click on the desktop
    background and select Open Terminal from the resulting menu. Within the terminal
    window, gain root privileges before launching the Disks utility as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: $ gnome-disks
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the disks tool has launched, a window similar to that shown in [Figure
    4-15](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor071) will appear:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_gnome_disks_main.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-15
  prefs: []
  type: TYPE_NORMAL
- en: 'To view information about a partition, select it from the graphical representation
    in the Volumes section of the dialog. In the above example, the Windows system
    partition is selected and highlighted. To mount the partition so that the contents
    can be accessed from within Ubuntu, select the partition and click on the options
    button indicated in [Figure 4-16](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor072)
    to display the menu:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_gnome_disks_menu.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-16
  prefs: []
  type: TYPE_NORMAL
- en: 'From the menu, select Edit Mount Options... to display the dialog shown in
    [Figure 4-17](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor073). Turn off
    the User Session Defaults switch and make sure that Show in user interface option
    is enabled. Within the Mount Point text field, change the path to /mnt/windows.
    If the partition needs to be automatically mounted each time the system reboots,
    also enable the Mount at system startup option:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_gnome_disks_mount_options.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-17
  prefs: []
  type: TYPE_NORMAL
- en: 'With the changes made, click on the OK button to return to the main dialog.
    To mount the partition, simply click on the mount button highlighted in [Figure
    4-18](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor074) below:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_gnome_disks_mount_button.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-18
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the partition is mounted, exit from gnome-disks and note that an icon
    for the volume has appeared in the dock as shown in [Figure 4-19](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor075)
    (note that if the Show in user interface option has been disabled, this icon would
    not be present):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_windows_partition_in_dock.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-19
  prefs: []
  type: TYPE_NORMAL
- en: 'Double-click on the icon to browse the partition using the Files tool:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ubuntu_windows_in_files.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 4-20
  prefs: []
  type: TYPE_NORMAL
- en: To unmount the partition, click on the mount button (which will have changed
    to a stop button), as shown in [Figure 4-18](Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor074)
    above.
  prefs: []
  type: TYPE_NORMAL
- en: 4.7 Summary
  prefs: []
  type: TYPE_NORMAL
- en: Ubuntu can safely co-exist on the same disk drive as a Windows operating system
    by creating a dual boot environment. This involves shrinking the amount of space
    occupied by the Windows system to make room for Ubuntu during the installation.
    Once Ubuntu has been installed, the boot menu configuration can be modified to
    change the default operating system. The Windows partition on the disk drive may
    be accessed from Ubuntu either via the command line or using the Disks desktop
    utility.
  prefs: []
  type: TYPE_NORMAL
