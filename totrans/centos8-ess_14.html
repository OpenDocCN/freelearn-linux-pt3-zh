<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer159" class="_idGenObjectStyleOverride-1">&#13;
			<p id="_idParaDest-154" class="Chapter-Title"><span class="ChapterMarker">16. </span><a id="_idTextAnchor211"/>Displaying CentOS 8 Applications Remotely (<a id="_idIndexMarker356"/>X11 Forwarding)</p>&#13;
			<p class="My-Basic-Paragraph">In the previous chapter we looked at how to display the entire CentOS 8 desktop on a remote computer. While this works well if you actually need to remotely display the entire desktop, it could be considered overkill if all you want to do is display a single application. In this chapter, therefore, we will look at displaying individual applications on a remote system. </p>&#13;
			<p id="_idParaDest-155" class="Heading-1-1"><span class="Heading11Marker">16.1 </span><a id="_idTextAnchor212"/>Requirements for Remotely Displaying CentOS 8 Applications </p>&#13;
			<p class="My-Basic-Paragraph">In order to run an application on one CentOS 8 system and have it display on another system there are a couple of prerequisites. First, the system on which the application is to be displayed must be running an X server. If the system is a Linux or UNIX-based system with a desktop environment running then this is no problem. If the system is running Windows or macOS, however, then you must install an X server on it before you can display applications from a remote system. A number of commercial and free Windows based X servers are available for this purpose and a web search should provide you with a list of options. </p>&#13;
			<p class="My-Basic-Paragraph">Second, the system on which the application is being run (as opposed to the system on which the application is to be displayed) must be configured to allow SSH access. Details on configuring SSH on a CentOS 8 system can be found in the chapter entitled <a href="../Text/SSH_Authentication.xhtml#_idTextAnchor181"><span class="My-Italic _idGenCharOverride-1">“Configuring SSH Key-based Authentication on CentOS 8”</span></a>. This system must also be running the X Window system from X.org instead of Wayland. To find out which system is being used, open a terminal window and run the following command:</p>&#13;
			<p class="Code"># echo $XDG_SESSION_TYPE</p>&#13;
			<p class="Code">x11</p>&#13;
			<p class="My-Basic-Paragraph">If the above command outputs “wayland” instead of “x11”, edit the <span class="My-Italic _idGenCharOverride-1">/etc/gdm/custom.conf</span> file and uncomment the <span class="My-Italic _idGenCharOverride-1">WaylandEnable</span> line as follows and restart the system:</p>&#13;
			<p class="Code"># Uncoment the line below to force the login screen to use Xorg</p>&#13;
			<p class="Code">WaylandEnable=false</p>&#13;
			<p class="My-Basic-Paragraph">Finally, SSH must be configured to allow X11 forwarding. This is achieved by adding the following directive to the SSH configuration on the system from which forwarding is to occur. By default on CentOS 8, the <span class="My-Italic _idGenCharOverride-1">/etc/ssh_config</span> file contains a directive to include all of the configuration files contained in the <span class="My-Italic _idGenCharOverride-1">/etc/ssh/ssh_config.d</span> directory:</p>&#13;
			<p class="Code">Include /etc/ssh/ssh_config.d/*.conf</p>&#13;
			<p class="My-Basic-Paragraph">On a newly installed system, the only file within <span class="My-Italic _idGenCharOverride-1">/etc/ssh/</span><span class="My-Italic CharOverride-1"><a id="_idIndexMarker357"/></span><span class="My-Italic _idGenCharOverride-1">ssh_config.d</span> is named <a id="_idIndexMarker358"/><span class="My-Italic _idGenCharOverride-1">05-redhat.conf</span>. Edit this file and add a line to enable X11 forwarding as follows:</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">Host *</p>&#13;
			<p class="Code">        GSSAPIAuthentication yes</p>&#13;
			<p class="Code">        <span class="My-Bold _idGenCharOverride-2">X11Forwarding yes</span></p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="My-Basic-Paragraph">After making the change, save the file and restart the SSH service:</p>&#13;
			<p class="Code"># systemctl restart sshd</p>&#13;
			<p class="My-Basic-Paragraph">Once the above requirements are met it should be possible to remotely display an X-based desktop application. </p>&#13;
			<p id="_idParaDest-156" class="Heading-1-1"><span class="Heading11Marker">16.2 </span><a id="_idTextAnchor213"/>Remotely Displaying a CentOS 8 Application </p>&#13;
			<p class="My-Basic-Paragraph">The first step in remotely displaying an application is to move to the system where the application is to be displayed. At this system, establish an SSH connection to the remote system so that you have a command prompt. This can be achieved using the <span class="My-Italic _idGenCharOverride-1">ssh </span>command. When using the <span class="My-Italic _idGenCharOverride-1">ssh</span> command we need to use the -X flag to tell it that we plan to tunnel X11 traffic through the connection: </p>&#13;
			<p class="Code">$ ssh -X user@hostname</p>&#13;
			<p class="My-Basic-Paragraph">In the above example <span class="My-Italic _idGenCharOverride-1">user</span> is the user name to use to log into the remote system and <span class="My-Italic _idGenCharOverride-1">hostname</span> is the hostname or IP address of the remote system. Enter your password at the login prompt and, once logged in, run the following command to see the DISPLAY setting: </p>&#13;
			<p class="Code">$ echo $DISPLAY</p>&#13;
			<p class="My-Basic-Paragraph">The command should output something similar to the following: </p>&#13;
			<p class="Code">localhost:10.0</p>&#13;
			<p class="My-Basic-Paragraph">To display an application simply run it from the command prompt. For example: </p>&#13;
			<p class="Code">$ gedit</p>&#13;
			<p class="My-Basic-Paragraph">When executed, the above command should run the <span class="My-Italic _idGenCharOverride-1">gedit</span> tool on the remote system, but display the output on the local system. </p>&#13;
			<p id="_idParaDest-157" class="Heading-1-1"><span class="Heading11Marker">16.3 </span><a id="_idTextAnchor214"/>Trusted <a id="_idIndexMarker359"/>X11 Forwarding </p>&#13;
			<p class="My-Basic-Paragraph">If the<span class="My-Italic _idGenCharOverride-1"> /etc/ssh/ssh_config.d/05-redhat.conf </span>file on the remote system contains the following line, then it is possible to use trusted X11 forwarding: </p>&#13;
			<p class="Code">ForwardX11Trusted yes</p>&#13;
			<p class="My-Basic-Paragraph">Trusted X11 forwarding is slightly faster than untrusted forwarding but is less secure since it does not engage the X11 security controls. The -Y flag is needed when using trusted X11 forwarding: </p>&#13;
			<p class="Code">$ ssh -Y user@hostname</p>&#13;
			<p id="_idParaDest-158" class="Heading-1-1"><span class="Heading11Marker">16.4 </span><a id="_idTextAnchor215"/>Compressed <a id="_idIndexMarker360"/>X11 Forwarding </p>&#13;
			<p class="My-Basic-Paragraph">When using slower connections the X11 data can be compressed using the -C flag to improve performance: </p>&#13;
			<p class="Code">$ ssh -X -C user@hostname</p>&#13;
			<p id="_idParaDest-159" class="Heading-1-1"><span class="Heading11Marker">16.5 </span><a id="_idTextAnchor216"/>Displaying Remote CentOS 8 Apps on Windows</p>&#13;
			<p class="My-Basic-Paragraph">To display CentOS 8 based apps on Windows an SSH client and an X server will need to be installed on the Windows system. The subject of installing and using the PuTTY client on Windows was covered earlier in the book in the <a href="../Text/SSH_Authentication.xhtml#_idTextAnchor181"><span class="My-Italic _idGenCharOverride-1">“Configuring SSH Key-based Authentication on CentOS 8”</span></a><span class="My-Italic _idGenCharOverride-1"> </span>chapter. Refer to this chapter if you have not already installed PuTTY on your Windows system.</p>&#13;
			<p class="My-Basic-Paragraph">In terms of the X server, a number of options are available, though a popular choice appears to be <a id="_idIndexMarker361"/>VcXsrv which is available for free from the following URL:</p>&#13;
			<p class="My-Basic-Paragraph"><a href="http://www.ebookfrenzy.com/errata/androidstudio30.html"><span class="Hyperlink _idGenCharOverride-1">https://sourceforge.net/projects/vcxsrv/</span></a></p>&#13;
			<p class="My-Basic-Paragraph">Once the VcXsrv X server has been installed, an application named <span class="My-Italic _idGenCharOverride-1">XLaunch</span> will appear on the desktop and in the start menu. Start XLaunch and select a display option (the most flexible being the <span class="My-Italic _idGenCharOverride-1">Multiple windows</span> option which allows each client app to appear in its own window):</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-1" src="Images/win_10_configure_windows_x_server.png" alt="" width="767" height="588"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 16-1</span></p>&#13;
			<p class="My-Basic-Paragraph">Click the <span class="My-Italic _idGenCharOverride-1">Next</span> button to proceed through the remaining screens, accepting the default configuration settings. On the final screen, click on the <span class="My-Italic _idGenCharOverride-1">Finish</span> button to start the X server. If the Windows Defender dialog appears click on the button to allow access to your chosen networks. </p>&#13;
			<p class="My-Basic-Paragraph">Once running, XLaunch will appear in the taskbar and can be exited by right-clicking on the icon and selecting the <span class="My-Italic _idGenCharOverride-1">Exit...</span> menu option:</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-2" src="Images/win_10_x_server_running.png" alt="" width="648" height="456"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 16-2</span></p>&#13;
			<p class="My-Basic-Paragraph">With the X server installed and running, launch PuTTY and either enter the connection information for the remote host or load a previously saved session profile. Before establishing the connection, however, X11 forwarding needs to be enabled. Within the PuTTY main window, scroll down the options in the left-hand panel, unfold the SSH section and select the X11 option as shown in <a href="../Text/X11_Forwarding.xhtml#_idTextAnchor217">Figure 16-3</a>:</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-3" src="Images/win_10_putty_ssh.png" alt="" width="192" height="333"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 16-3</span><a id="_idTextAnchor217"/></p>&#13;
			<p class="My-Basic-Paragraph">Turn on the <span class="My-Italic _idGenCharOverride-1">Enable X11 forwarding</span> checkbox highlighted in <a href="../Text/X11_Forwarding.xhtml#_idTextAnchor218">Figure 16-4</a>, return to the sessions screen and open the connection (saving the session beforehand if you plan to use it again).</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-4" src="Images/win_10_putty_X11_settings.png" alt="" width="684" height="676"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 16-4</span><a id="_idTextAnchor218"/></p>&#13;
			<p class="My-Basic-Paragraph">Log into the CentOS 8 system within the PuTTY session window and run a desktop app. After a short delay, the app will appear in the Windows desktop in its own window. Any dialogs that are opened by the app will also appear in separate windows, just as they would on the CentOS 8 GNOME desktop. <a href="../Text/X11_Forwarding.xhtml#_idTextAnchor219">Figure 16-5</a>, for example, shows the CentOS 8 <span class="My-Italic _idGenCharOverride-1">nm-connection-editor</span> tool displayed on a Windows 10 system:</p>&#13;
			<p class="My-Basic-Paragraph ParaOverride-1"><img class="_idGenObjectAttribute-5" src="Images/win_10_xserver_app_displayed.png" alt="" width="1505" height="847"/></p>&#13;
			<p class="Figure-Caption"><span class="FigureCaptionMarker">Figure 16-5</span><a id="_idTextAnchor219"/></p>&#13;
			<p id="_idParaDest-160" class="Heading-1-1"><span class="Heading11Marker">16.6 </span><a id="_idTextAnchor220"/>Summary</p>&#13;
			<p class="My-Basic-Paragraph">For situations where remote access to individual CentOS 8 desktop applications is required as opposed to the entire GNOME desktop, X11 forwarding provides a lightweight solution to remotely displaying graphical applications. The system on which the applications are to appear must be running an X Window System based desktop environment (such as GNOME) or have an X server installed and running. Once X11 forwarding has been enabled on the remote server and a secure SSH connection established from the local system using the X11 forwarding option, most applications can be displayed remotely on the local X server.</p>&#13;
		</div>&#13;
</div>



  </body></html>