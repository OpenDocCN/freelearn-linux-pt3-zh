<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer049">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">6</span></h1>
<h1 class="chapterTitle" id="_idParaDest-115"><span class="koboSpan" id="kobo.2.1">Editing Files on the Command Line</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">Editing text on the command line is often a hard requirement due to the constraints of production systems, which tend to lack a graphical user interface. </span><span class="koboSpan" id="kobo.3.2">However, becoming fluent at editing text on the command line has many benefits even outside of those systems – indeed, even when you </span><a id="_idIndexMarker207"/><span class="koboSpan" id="kobo.4.1">have graphical text editors or </span><strong class="keyWord"><span class="koboSpan" id="kobo.5.1">integrated development environments</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">IDEs</span></strong><span class="koboSpan" id="kobo.8.1">) available.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.9.1">For example, many full-featured text editors and IDEs support the patterns you’ll learn about in this chapter, which means the speed and efficiency you gain is transferrable to other tools. </span><span class="koboSpan" id="kobo.9.2">In fact, you can use the shortcuts you’ll learn in this chapter for all kinds of things, from quickly finding and replacing text to correcting a misspelled word in the middle of a long shell command.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.10.1">You might even find similar shortcuts built into your favorite tools (sometimes via plugins); for example, you’re only a few Google searches away from discovering email clients, browser plugins, and web applications that support the vim keyboard shortcuts that you’ll learn later in this chapter.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.11.1">Learning how to think in the efficient patterns that these minimal, text-only interfaces require can help you find more efficient ways of doing things you’ll have to do every day, preventing you from wasting time tediously clicking through graphical menus or wizards when you can accomplish the same task with just a few keystrokes.</span></p>
<div class="note">
<p class="normal"><strong class="screenText"><span class="koboSpan" id="kobo.12.1">Note</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.13.1">Many extremely minimal (or highly secure) environments also tend to strip text editors out of production images, although that doesn’t improve security (cat, echo, mv, and input/output redirection are more than enough to improvise a workable text editor in a pinch). </span><span class="koboSpan" id="kobo.13.2">You — like hackers everywhere — will likely end up installing nano or vim in quite a few Docker containers over the course of your life.</span></p>
</div>
<p class="normal"><span class="koboSpan" id="kobo.14.1">In this chapter, you’ll learn the basics of two text editors: one that we think is the easiest to get started with (nano) and another that we think is the best long-term learning investment for your career (vim). </span><span class="koboSpan" id="kobo.14.2">You’ll get the basic context for how command-line text editing is done on Linux, dive into nano and vim, and finally, learn how to avoid the most common editing mistakes. </span><span class="koboSpan" id="kobo.14.3">We’ll also show you how to tweak your shell to automatically use your preferred editor when possible.</span></p>
<h1 class="heading-1" id="_idParaDest-116"><span class="koboSpan" id="kobo.15.1">Nano</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.16.1">Nano</span><a id="_idIndexMarker208"/><span class="koboSpan" id="kobo.17.1"> is a small and easy-to-use CLI text editor. </span><span class="koboSpan" id="kobo.17.2">One of the features of nano — you might even call it the main feature — is that it prominently has a keyboard-shortcut cheat sheet bolted to the bottom of your screen while you happily edit text in your terminal. </span><span class="koboSpan" id="kobo.17.3">This is particularly useful if you’re under stress and not used to editing text on the command line.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.18.1">Nano is good in a pinch, but you won’t find it installed in more minimal environments (such as Docker containers or production VMs). </span><span class="koboSpan" id="kobo.18.2">Be aware that nano also tends to automatically make backup files (</span><code class="inlineCode"><span class="koboSpan" id="kobo.19.1">~yourfile.txt</span></code><span class="koboSpan" id="kobo.20.1">), thereby potentially polluting the filesystem.</span></p>
<h2 class="heading-2" id="_idParaDest-117"><span class="koboSpan" id="kobo.21.1">Installing nano</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.22.1">On all the popular </span><a id="_idIndexMarker209"/><span class="koboSpan" id="kobo.23.1">Linux distributions you’re likely to use, the package name for nano is </span><code class="inlineCode"><span class="koboSpan" id="kobo.24.1">nano</span></code><span class="koboSpan" id="kobo.25.1"> – use your preferred OS’s package manager to install it (in this case, we’re installing it on Ubuntu):</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.26.1">apt-get install nano
</span></code></pre>
<h2 class="heading-2" id="_idParaDest-118"><span class="koboSpan" id="kobo.27.1">Nano cheat sheet</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.28.1">You can find an official, up-to-date nano cheat sheet</span><a id="_idIndexMarker210"/><span class="koboSpan" id="kobo.29.1"> here: </span><a href="https://www.nano-editor.org/dist/latest/cheatsheet.html"><span class="url"><span class="koboSpan" id="kobo.30.1">https://www.nano-editor.org/dist/latest/cheatsheet.html</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.31.1">Some of the most useful commands are called out in the following sections.</span></p>
<h3 class="heading-3" id="_idParaDest-119"><span class="koboSpan" id="kobo.32.1">File handling</span></h3>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.33.1">Ctrl</span></em><span class="koboSpan" id="kobo.34.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.35.1">S</span></em><span class="koboSpan" id="kobo.36.1">: Save current file</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.37.1">Ctrl</span></em><span class="koboSpan" id="kobo.38.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.39.1">O</span></em><span class="koboSpan" id="kobo.40.1">: Offer to write file (“Save as”)</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.41.1">Ctrl</span></em><span class="koboSpan" id="kobo.42.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.43.1">R</span></em><span class="koboSpan" id="kobo.44.1">: Insert a file into the current one</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.45.1">Ctrl</span></em><span class="koboSpan" id="kobo.46.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.47.1">X</span></em><span class="koboSpan" id="kobo.48.1">: Close buffer, exit from nano</span></li>
</ul>
<h3 class="heading-3" id="_idParaDest-120"><span class="koboSpan" id="kobo.49.1">Editing</span></h3>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.50.1">Ctrl</span></em><span class="koboSpan" id="kobo.51.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.52.1">K</span></em><span class="koboSpan" id="kobo.53.1">: Cut the current line into a cutbuffer</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.54.1">Ctrl</span></em><span class="koboSpan" id="kobo.55.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.56.1">U</span></em><span class="koboSpan" id="kobo.57.1">: Paste contents of the cutbuffer</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.58.1">Alt</span></em><span class="koboSpan" id="kobo.59.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.60.1">3</span></em><span class="koboSpan" id="kobo.61.1">: Comment/uncomment a line/region</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.62.1">Alt</span></em><span class="koboSpan" id="kobo.63.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.64.1">U</span></em><span class="koboSpan" id="kobo.65.1">: Undo last action</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.66.1">Alt</span></em><span class="koboSpan" id="kobo.67.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.68.1">E</span></em><span class="koboSpan" id="kobo.69.1">: Redo last undone action</span></li>
</ul>
<h3 class="heading-3" id="_idParaDest-121"><span class="koboSpan" id="kobo.70.1">Search and replace</span></h3>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.71.1">Ctrl</span></em><span class="koboSpan" id="kobo.72.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.73.1">Q</span></em><span class="koboSpan" id="kobo.74.1">: Start backward search</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.75.1">Ctrl</span></em><span class="koboSpan" id="kobo.76.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.77.1">W</span></em><span class="koboSpan" id="kobo.78.1">: Start forward search</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.79.1">Alt</span></em><span class="koboSpan" id="kobo.80.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.81.1">Q</span></em><span class="koboSpan" id="kobo.82.1">: Find next occurrence backward</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.83.1">Alt</span></em><span class="koboSpan" id="kobo.84.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.85.1">W</span></em><span class="koboSpan" id="kobo.86.1">: Find next occurrence forward</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.87.1">Alt</span></em><span class="koboSpan" id="kobo.88.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.89.1">R</span></em><span class="koboSpan" id="kobo.90.1">: Start a replacing session</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-122"><span class="koboSpan" id="kobo.91.1">Vi(m)</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.92.1">Vi (often referred to as ex-vi or nvi) is a command-line text editor. </span><span class="koboSpan" id="kobo.92.2">Vim (vi iMproved) is an extended version, that many people </span><a id="_idIndexMarker211"/><span class="koboSpan" id="kobo.93.1">use as an entire IDE. </span><span class="koboSpan" id="kobo.93.2">vi and vim share the same basic commands and keyboard bindings, so if you just learn the basics, you’ll be fine no matter what kind of ancient or modern system you log in to.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.94.1">Fair warning: vim is</span><a id="_idIndexMarker212"/><span class="koboSpan" id="kobo.95.1"> complicated and has a relatively steep learning curve. </span><span class="koboSpan" id="kobo.95.2">It’ll probably take a few weeks of spare time studying and experimenting to get comfortable with it – comparable to setting up your first Linux web server or writing your first 500-line program.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.96.1">The wonderful thing about learning </span><a id="_idIndexMarker213"/><span class="koboSpan" id="kobo.97.1">vim is that you can use it locally on your laptop or remotely on a server that has no GUI, and the editing experience is the same – beautifully efficient – in both places. </span><span class="koboSpan" id="kobo.97.2">To use it effectively, both a shift in mindset and an understanding of its vocabulary (the </span><em class="italic"><span class="koboSpan" id="kobo.98.1">commands</span></em><span class="koboSpan" id="kobo.99.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.100.1">modes</span></em><span class="koboSpan" id="kobo.101.1"> we’ll get into) are important. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.102.1">As with learning any other skill, some dedicated practice followed by consistent use of the editor is essential to really build up an understanding and feel comfortable. </span><span class="koboSpan" id="kobo.102.2">Some initial struggle and confusion will likely be part of that. </span><span class="koboSpan" id="kobo.102.3">Please don’t let this deter you!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.103.1">Vim is a modal editor, meaning that the same keys do different things depending on which “mode” you’re in. </span><span class="koboSpan" id="kobo.103.2">For example, when you’re in insert mode, your keypresses will simply be written into the file (or buffer) you’re editing – much like your IDE or Microsoft Word. </span><span class="koboSpan" id="kobo.103.3">However, in normal mode, pressing those same letter keys will execute whatever keybinding they are tied to. </span><span class="koboSpan" id="kobo.103.4">Once you’ve adjusted to that idea – </span><strong class="keyWord"><span class="koboSpan" id="kobo.104.1">modal editing</span></strong><span class="koboSpan" id="kobo.105.1"> – the rest of vi/vim is just practice.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.106.1">For example, if you start vim and type a lowercase </span><em class="keystroke"><span class="koboSpan" id="kobo.107.1">i</span></em><span class="koboSpan" id="kobo.108.1"> twice, the first </span><em class="keystroke"><span class="koboSpan" id="kobo.109.1">i</span></em><span class="koboSpan" id="kobo.110.1"> will enter insert mode, while the second will actually write an </span><em class="keystroke"><span class="koboSpan" id="kobo.111.1">i</span></em><span class="koboSpan" id="kobo.112.1"> character in the editing window (buffer) that you’re editing a file with. </span><span class="koboSpan" id="kobo.112.2">If this sounds confusing right now, it’s okay. </span><span class="koboSpan" id="kobo.112.3">Even if you never choose to use vim as your regular IDE, you’ll feel a lot more comfortable with its basics by the end of this chapter.</span></p>
<div class="note">
<p class="normal"><strong class="screenText"><span class="koboSpan" id="kobo.113.1">Note</span></strong></p>
<p class="normal"><span class="koboSpan" id="kobo.114.1">It is also worth mentioning that another vim-like editor, nvim (neovim), has started gaining traction at the time of writing this book. </span><span class="koboSpan" id="kobo.114.2">Most of what applies to vim also applies to nvim, so there is no need to worry about which one to get started with. </span><span class="koboSpan" id="kobo.114.3">The major differences are around plugin development, so you won’t lose anything if you decide to switch from vim to neovim down the road, as we have.</span></p>
</div>
<h2 class="heading-2" id="_idParaDest-123"><span class="koboSpan" id="kobo.115.1">Vi/vim commands</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.116.1">Here are some </span><a id="_idIndexMarker214"/><span class="koboSpan" id="kobo.117.1">basic vi(m) commands – hit </span><em class="keystroke"><span class="koboSpan" id="kobo.118.1">Escape</span></em><span class="koboSpan" id="kobo.119.1"> before using any of these, to make sure you’re in Normal mode.</span></p>
<h2 class="heading-2" id="_idParaDest-124"><span class="koboSpan" id="kobo.120.1">Modes</span></h2>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.121.1">v</span></em><span class="koboSpan" id="kobo.122.1"> – enter </span><a id="_idIndexMarker215"/><span class="koboSpan" id="kobo.123.1">visual mode. </span><span class="koboSpan" id="kobo.123.2">This feature only exists in vim (not vi) and can easily be overused in the beginning because it’s familiar to people coming from other editors.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.124.1">ESC</span></em><span class="koboSpan" id="kobo.125.1"> — exit whichever mode you’re in and go to Normal mode, where you can give commands.</span></li>
</ul>
<h3 class="heading-3" id="_idParaDest-125"><span class="koboSpan" id="kobo.126.1">Command mode</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.127.1">Command mode can be reached from normal mode (hit </span><em class="keystroke"><span class="koboSpan" id="kobo.128.1">Escape</span></em><span class="koboSpan" id="kobo.129.1">) by typing a colon (</span><code class="inlineCode"><span class="koboSpan" id="kobo.130.1">:</span></code><span class="koboSpan" id="kobo.131.1">). </span><span class="koboSpan" id="kobo.131.2">We’ve included the colon in the commands below for clarity.</span></p>
<h4 class="heading-4"><span class="koboSpan" id="kobo.132.1">Helpers</span></h4>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.133.1">:set number</span></code><span class="koboSpan" id="kobo.134.1"> – show line</span><a id="_idIndexMarker216"/><span class="koboSpan" id="kobo.135.1"> numbers.</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.136.1">:set paste</span></code><span class="koboSpan" id="kobo.137.1"> – this is helpful if you want to paste things into vim and don’t want it to interact with indentation. </span><span class="koboSpan" id="kobo.137.2">You can disable it again with </span><code class="inlineCode"><span class="koboSpan" id="kobo.138.1">:set nopaste</span></code><span class="koboSpan" id="kobo.139.1">.</span></li>
</ul>
<h4 class="heading-4"><span class="koboSpan" id="kobo.140.1">Exiting</span></h4>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.141.1">:q</span></code><span class="koboSpan" id="kobo.142.1"> – quit</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.143.1">:q!</span></code><span class="koboSpan" id="kobo.144.1"> – quit without saving (force quit)</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.145.1">:w</span></code><span class="koboSpan" id="kobo.146.1"> – write (“save”) the file</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.147.1">:wq</span></code><span class="koboSpan" id="kobo.148.1"> – write and quit</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.149.1">:wqa</span></code><span class="koboSpan" id="kobo.150.1"> – only vim; helps when multiple panes are open, such as a plugin opening a file browser on the side</span></li>
</ul>
<h3 class="heading-3" id="_idParaDest-126"><span class="koboSpan" id="kobo.151.1">Normal mode</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.152.1">Normal mode is the mode you’re in when you start vim, before typing anything. </span><span class="koboSpan" id="kobo.152.2">You can always get back to normal mode by hitting the </span><em class="keystroke"><span class="koboSpan" id="kobo.153.1">Escape</span></em><span class="koboSpan" id="kobo.154.1"> key.</span></p>
<h4 class="heading-4"><span class="koboSpan" id="kobo.155.1">Navigation</span></h4>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.156.1">k</span></em><span class="koboSpan" id="kobo.157.1"> – move </span><a id="_idIndexMarker217"/><span class="koboSpan" id="kobo.158.1">up</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.159.1">j</span></em><span class="koboSpan" id="kobo.160.1"> – move down</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.161.1">l</span></em><span class="koboSpan" id="kobo.162.1"> – move right</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.163.1">h</span></em><span class="koboSpan" id="kobo.164.1"> – move left</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.165.1">Alternatively, it is possible to use the arrow keys, but it can be helpful to think in terms of vi shortcuts, instead of trying to drive vi(m) like an ordinary editor. </span><span class="koboSpan" id="kobo.165.2">We’ve found that it helps to stick to vi’s movement keys when you’re practicing with it.</span></p>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.166.1">w</span></em><span class="koboSpan" id="kobo.167.1"> – next word</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.168.1">b</span></em><span class="koboSpan" id="kobo.169.1"> – beginning of the current word or previous word</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.170.1">^</span></em><span class="koboSpan" id="kobo.171.1"> or </span><em class="keystroke"><span class="koboSpan" id="kobo.172.1">0</span></em><span class="koboSpan" id="kobo.173.1"> – go to the beginning of the line </span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.174.1">$</span></em><span class="koboSpan" id="kobo.175.1"> – go to the end of the line</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.176.1">gg</span></em><span class="koboSpan" id="kobo.177.1"> – go to the beginning of the file</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.178.1">G</span></em><span class="koboSpan" id="kobo.179.1"> – go to the end of the file</span></li>
</ul>
<h4 class="heading-4"><span class="koboSpan" id="kobo.180.1">Editing</span></h4>
<ul>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.181.1">i</span></em><span class="koboSpan" id="kobo.182.1"> – enter insert mode (write actual text). </span><em class="keystroke"><span class="koboSpan" id="kobo.183.1">I</span></em><span class="koboSpan" id="kobo.184.1"> inserts at the beginning of the line.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.185.1">a</span></em><span class="koboSpan" id="kobo.186.1"> – insert text, appending after the cursor. </span><em class="keystroke"><span class="koboSpan" id="kobo.187.1">A</span></em><span class="koboSpan" id="kobo.188.1"> appends on the end of the current line.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.189.1">o</span></em><span class="koboSpan" id="kobo.190.1"> – open a new line (</span><em class="keystroke"><span class="koboSpan" id="kobo.191.1">O</span></em><span class="koboSpan" id="kobo.192.1"> opens a new line before the current one).</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.193.1">/</span></em><span class="koboSpan" id="kobo.194.1"> – search for pattern (regexes work here; use </span><em class="keystroke"><span class="koboSpan" id="kobo.195.1">ENTER</span></em><span class="koboSpan" id="kobo.196.1"> to search and </span><em class="keystroke"><span class="koboSpan" id="kobo.197.1">n</span></em><span class="koboSpan" id="kobo.198.1"> and </span><em class="keystroke"><span class="koboSpan" id="kobo.199.1">SHIFT</span></em><span class="koboSpan" id="kobo.200.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.201.1">n</span></em><span class="koboSpan" id="kobo.202.1"> to cycle forward or backward through search results).</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.203.1">dd</span></em><span class="koboSpan" id="kobo.204.1"> – delete (and cut) the current line.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.205.1">y</span></em><span class="koboSpan" id="kobo.206.1"> – yank (copy) selected text.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.207.1">yy</span></em><span class="koboSpan" id="kobo.208.1"> – yank (copy) the current line.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.209.1">p</span></em><span class="koboSpan" id="kobo.210.1"> – put/paste text after the cursor.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.211.1">u</span></em><span class="koboSpan" id="kobo.212.1"> – undo the last change.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.213.1">CTRL</span></em><span class="koboSpan" id="kobo.214.1">+</span><em class="keystroke"><span class="koboSpan" id="kobo.215.1">R</span></em><span class="koboSpan" id="kobo.216.1"> – redo.</span></li>
<li class="bulletList"><em class="keystroke"><span class="koboSpan" id="kobo.217.1">nX</span></em><span class="koboSpan" id="kobo.218.1"> – where </span><em class="keystroke"><span class="koboSpan" id="kobo.219.1">n</span></em><span class="koboSpan" id="kobo.220.1"> is a </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.221.1">number and </span><em class="keystroke"><span class="koboSpan" id="kobo.222.1">X</span></em><span class="koboSpan" id="kobo.223.1"> is a command, will execute </span><em class="keystroke"><span class="koboSpan" id="kobo.224.1">X n</span></em><span class="koboSpan" id="kobo.225.1"> times. </span><span class="koboSpan" id="kobo.225.2">For example, </span><em class="keystroke"><span class="koboSpan" id="kobo.226.1">3dd</span></em><span class="koboSpan" id="kobo.227.1"> will delete three lines.</span></li>
</ul>
<h2 class="heading-2" id="_idParaDest-127"><span class="koboSpan" id="kobo.228.1">Tips for learning vi(m)</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.229.1">Over a few weeks of normal editing tasks, you can become quite comfortable with vim. </span><span class="koboSpan" id="kobo.229.2">That said, it’s not always easy to get started. </span><span class="koboSpan" id="kobo.229.3">Here are our tips for making the journey smoother.</span></p>
<h3 class="heading-3" id="_idParaDest-128"><span class="koboSpan" id="kobo.230.1">Use vimtutor</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.231.1">Vim comes </span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.232.1">with a built-in tutorial. </span><span class="koboSpan" id="kobo.232.2">If you want to get started with vim, this is probably the very first thing you want to do. </span><span class="koboSpan" id="kobo.232.3">Just run </span><code class="inlineCode"><span class="koboSpan" id="kobo.233.1">vimtutor</span></code><span class="koboSpan" id="kobo.234.1"> on your command line to open vim and the tutorial.</span></p>
<h3 class="heading-3" id="_idParaDest-129"><span class="koboSpan" id="kobo.235.1">Think in terms of mnemonics</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.236.1">When using vi(m) to edit files, it’s common to “build sentences” using the commands you saw above. </span><span class="koboSpan" id="kobo.236.2">For example, </span><code class="inlineCode"><span class="koboSpan" id="kobo.237.1">d2w</span></code><span class="koboSpan" id="kobo.238.1"> means “delete two words.” </span><span class="koboSpan" id="kobo.238.2">While we tried to mention fitting words in the command list above, different people prefer different mental concepts, so don’t feel scared to build up your own vocabulary.</span></p>
<h3 class="heading-3" id="_idParaDest-130"><span class="koboSpan" id="kobo.239.1">Avoid using arrow keys</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.240.1">Avoid using arrow keys and consider disabling this feature. </span><span class="koboSpan" id="kobo.240.2">It prevents you from thinking of vim as another editor and reduces the time it takes until you’re comfortable with its standard keybindings. </span><span class="koboSpan" id="kobo.240.3">Don’t worry; although this may feel strange at the beginning, you will get used to the basic vim keybindings after a few sessions.</span></p>
<h3 class="heading-3" id="_idParaDest-131"><span class="koboSpan" id="kobo.241.1">Avoid using the mouse</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.242.1">While vim can be used with a mouse for visual selection, it makes sense to resist this temptation and keep training your working memory of the keyboard shortcuts. </span><span class="koboSpan" id="kobo.242.2">Otherwise, you’ll switch back and forth and not be comfortable when it counts, like when you’re troubleshooting on a remote server that has no mouse input at three in the morning.</span></p>
<h3 class="heading-3" id="_idParaDest-132"><span class="koboSpan" id="kobo.243.1">Don’t use gvim</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.244.1">While gvim (graphical/GUI vim) can be useful, it is not a good idea to use its graphical shortcuts when no proper terminal is available. </span><span class="koboSpan" id="kobo.244.2">The benefit of vi(m) is that it allows for effective text manipulation via the keyboard when you don’t have a graphical environment available – like the many Linux servers you’ll be troubleshooting after reading this book!</span></p>
<h3 class="heading-3" id="_idParaDest-133"><span class="koboSpan" id="kobo.245.1">Avoid starting with extensive configuration or plugins</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.246.1">A typical beginner’s </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.247.1">mistake is starting with someone else’s vim configuration. </span><span class="koboSpan" id="kobo.247.2">Although they seem useful at first, heavily customized vim setups can hinder you when you’re just trying to learn the basic concepts. </span><span class="koboSpan" id="kobo.247.3">Extensive configurations will not magically make you more productive, especially not in the beginning. </span><span class="koboSpan" id="kobo.247.4">Once you become more confident, you will find yourself writing your own configuration.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.248.1">Another thing to avoid is excessive plugin usage, especially early on. </span><span class="koboSpan" id="kobo.248.2">Occasionally, plugins break things, which can become a burden and lead to more issues. </span><span class="koboSpan" id="kobo.248.3">Vim plugin troubleshooting is not something you want to deal with when you are just getting started. </span><span class="koboSpan" id="kobo.248.4">Third-party configuration files and plugins can be amazingly useful, but they can also become a crutch: when you are suddenly thrown into an environment outside of your development machine, you won’t be able to rely on all of that fancy stuff. </span><span class="koboSpan" id="kobo.248.5">If you’ve come to depend heavily on a custom workflow, even basic edits can become difficult and frustrating, especially under stress.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.249.1">A more sensible approach is to start out with a minimal configuration and only add bits that you fully understand (and that you’re sure you will need). </span><span class="koboSpan" id="kobo.249.2">Your time is much better spent actually using the editor on real projects, because it trains you to retain the most important vim shortcuts in your working memory. </span><span class="koboSpan" id="kobo.249.3">It takes some time, but eventually you will use them without really thinking about the actual commands, rather just thinking in terms of the mnemonics you’ve made up for yourself.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.250.1">Here is an example of a minimal vim configuration that might be helpful in the beginning. </span><span class="koboSpan" id="kobo.250.2">Feel free to</span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.251.1"> change it, or just pick out parts that seem useful.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.252.1">Put this into your </span><code class="inlineCode"><span class="koboSpan" id="kobo.253.1">$HOME/.vimrc</span></code><span class="koboSpan" id="kobo.254.1">:</span></p>
<pre class="programlisting code"><code class="hljs-code"><span class="koboSpan" id="kobo.255.1">    "This breaks compatibility with vi, saying that we want to use the benefits of vim
    set nocompatible
    " Enable syntax highlighting
    syntax on
    " Increase the command history to be very big
    set history=10000
    " Indent based on the previous line
    set autoindent
    " Make it so searches wrap around at the end of the file
    set wrapscan
    " Show the current mode in the command line
    set showmode
    " Displays partial commands in the last line
    set showcmd
    " Highlight searches
    set hlsearch
    " Use case insensitive search
    set ignorecase
    " Don't use case insensitive search use when using capital letters
    set smartcase
    " Display the cursor position at the bottom
    set ruler
</span></code></pre>
<h2 class="heading-2" id="_idParaDest-134"><span class="koboSpan" id="kobo.256.1">Vim bindings in other software</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.257.1">Should you start </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.258.1">enjoying and preferring the way vim works, it is worth mentioning that many text editors and IDEs have options and plugins to switch to a vim input mode. </span><span class="koboSpan" id="kobo.258.2">There are even web browsers with vim-style inputs!</span></p>
<p class="normal"><span class="koboSpan" id="kobo.259.1">If you’re curious or would like a review of the vim material in this chapter, you can find a video tutorial that covers some of the most important parts of this chapter (and even some extra vim features!) here: </span><a href="https://www.youtube.com/watch?v=ggSyF1SVFr4"><span class="url"><span class="koboSpan" id="kobo.260.1">https://www.youtube.com/watch?v=ggSyF1SVFr4</span></span></a></p>
<h1 class="heading-1" id="_idParaDest-135"><span class="koboSpan" id="kobo.261.1">Editing a file you don’t have permissions for</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.262.1">Regardless of </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.263.1">which editor you use, sometimes you’ll want to edit a file that your user doesn’t have write permissions for. </span><span class="koboSpan" id="kobo.263.2">For example, if you’re a regular user and you want to edit </span><code class="inlineCode"><span class="koboSpan" id="kobo.264.1">/etc/hosts</span></code><span class="koboSpan" id="kobo.265.1"> – a file owned by root, and writable only by root – you’ll need to either become root or use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.266.1">sudo</span></code><span class="koboSpan" id="kobo.267.1"> command. </span><span class="koboSpan" id="kobo.267.2">See </span><em class="chapterRef"><span class="koboSpan" id="kobo.268.1">Chapter 7</span></em><span class="koboSpan" id="kobo.269.1">, </span><em class="italic"><span class="koboSpan" id="kobo.270.1">Users and Groups</span></em><span class="koboSpan" id="kobo.271.1">, for more details.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.272.1">While a command like </span><code class="inlineCode"><span class="koboSpan" id="kobo.273.1">sudo $EDITOR /etc/hosts</span></code><span class="koboSpan" id="kobo.274.1"> can be used to edit files as root, a better approach is to use </span><code class="inlineCode"><span class="koboSpan" id="kobo.275.1">sudoedit</span></code><span class="koboSpan" id="kobo.276.1"> to execute your editing command as root:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.277.1">sudoedit /etc/hosts</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.278.1">EDITOR=nano sudoedit /etc/hosts</span></code></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.279.1">EDITOR=vi sudoedit /etc/hosts</span></code></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.280.1">The first example will use whatever editor you’ve got set in your </span><code class="inlineCode"><span class="koboSpan" id="kobo.281.1">EDITOR</span></code><span class="koboSpan" id="kobo.282.1"> environment variable, while the other two commands pass in (or override) the </span><code class="inlineCode"><span class="koboSpan" id="kobo.283.1">EDITOR</span></code><span class="koboSpan" id="kobo.284.1"> environment variable as part of the command.</span></p>
<h1 class="heading-1" id="_idParaDest-136"><span class="koboSpan" id="kobo.285.1">Setting your preferred editor</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.286.1">Linux and in fact all</span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.287.1"> Unix-like systems allow you to set your preferred editor via the </span><code class="inlineCode"><span class="koboSpan" id="kobo.288.1">EDITOR</span></code><span class="koboSpan" id="kobo.289.1"> environment variable. </span><span class="koboSpan" id="kobo.289.2">Most command-line software that launches an editor for certain tasks, like </span><code class="inlineCode"><span class="koboSpan" id="kobo.290.1">git</span></code><span class="koboSpan" id="kobo.291.1"> when you make a commit or </span><code class="inlineCode"><span class="koboSpan" id="kobo.292.1">visudo</span></code><span class="koboSpan" id="kobo.293.1"> editing your sudoers file, will use this variable to know which editor to open. </span><span class="koboSpan" id="kobo.293.2">You can set this </span><code class="inlineCode"><span class="koboSpan" id="kobo.294.1">EDITOR</span></code><span class="koboSpan" id="kobo.295.1"> variable to a path to any editor you like, even graphical ones (provided your system has a graphical user interface installed):</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.296.1">bash-3.2$ echo $EDITOR
nano
bash-3.2$ export EDITOR=vim
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.297.1">Note that the </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.298.1">interactive shell command above will only work until the current shell session is closed; to persist this setting in the Bash shell, I’d add it to my </span><code class="inlineCode"><span class="koboSpan" id="kobo.299.1">~/.bashrc</span></code><span class="koboSpan" id="kobo.300.1"> file. </span><span class="koboSpan" id="kobo.300.2">See </span><em class="chapterRef"><span class="koboSpan" id="kobo.301.1">Chapter 4</span></em><span class="koboSpan" id="kobo.302.1">, </span><em class="italic"><span class="koboSpan" id="kobo.303.1">Using Shell History</span></em><span class="koboSpan" id="kobo.304.1"> for more details.</span></p>
<h1 class="heading-1" id="_idParaDest-137"><span class="koboSpan" id="kobo.305.1">Conclusion</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.306.1">In this chapter, you learned how to edit text files on the command line. </span><span class="koboSpan" id="kobo.306.2">First, we introduced the easiest way to get started (nano), and then we showed you how to start graduating to a skillset that will pay dividends for the duration of your career: vi/vim and their keybindings, which you’ll find supported in an incredibly wide variety of software.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.307.1">Use the cheat sheets in this chapter to get started with command-line editing, but know that after a day or two of practice, you’ll be ready to learn additional shortcuts and commands in vim. </span><span class="koboSpan" id="kobo.307.2">That’s best done through a combination of vimtutor, online cheat sheets, and YouTube videos. </span><span class="koboSpan" id="kobo.307.3">We also really like the book </span><em class="italic"><span class="koboSpan" id="kobo.308.1">Practical Vim</span></em><span class="koboSpan" id="kobo.309.1">, 2</span><sup class="superscript"><span class="koboSpan" id="kobo.310.1">nd</span></sup><span class="koboSpan" id="kobo.311.1"> Edition, by Drew Neil.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.312.1">Becoming comfortable with command-line text editing is one of the surest ways to look and feel like a professional when you’re working. </span><span class="koboSpan" id="kobo.312.2">Don’t neglect this skillset!</span></p>
<h1 class="heading-1"><span class="koboSpan" id="kobo.313.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.314.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="https://packt.link/SecNet"><span class="url"><span class="koboSpan" id="kobo.315.1">https://packt.link/SecNet</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.316.1"><img alt="" role="presentation" src="../Images/QR_Code1768422420210094187.png"/></span></p>
</div>
</body></html>