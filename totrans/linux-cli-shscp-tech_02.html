<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer038">
			<h1 id="_idParaDest-38"><em class="italic"><a id="_idTextAnchor037"/>Chapter 2</em>: Using Text Editors</h1>
			<p>There's just no way around the topic of this chapter, as system administrators edit <strong class="bold">text files</strong> daily. Therefore, we decided to cover three commonly used editors – <strong class="bold">vi</strong>, <strong class="bold">Vim</strong>, and <strong class="bold">nano</strong>. If you're more into GUI tools, make sure that you check <strong class="source-inline">gedit</strong>, although we won't cover that editor here as it's practically the same as using Notepad on Microsoft Windows. There are various reasons why these <strong class="bold">editors</strong> were chosen, but most importantly, they are installed out of the box on almost all Linux distributions, so they're the most common pre-installed editors. There are situations where additional software installation is not an option, such as <em class="italic">air-gapped</em> environments. </p>
			<p>We will cover the following recipes in this chapter: </p>
			<ul>
				<li>Learning the basics of the Vi(m) editor</li>
				<li>Learning the basics of the nano editor</li>
				<li>Going through the advanced Vi(m) settings</li>
			</ul>
			<h1 id="_idParaDest-39"><a id="_idTextAnchor038"/>Technical requirements </h1>
			<p>For these recipes, we're going to use a Linux machine. We can use any virtual machine from our previous recipe. For example, let's say that we're going to use a <strong class="source-inline">cli1</strong> virtual machine as it's the most convenient to use, seeing as it's a command-line-interface-only machine. So, all in all, we need the following:</p>
			<ul>
				<li>A virtual machine with any distribution of Linux installed (in our case, it's going to be <em class="italic">Ubuntu 20.10</em>).</li>
				<li>A bit of time to digest the complexities of using the Vi(m) editor. nano is less complex; therefore, it's going to be easier to learn about that one.</li>
			</ul>
			<p>So, start your virtual machine and let's get cracking!</p>
			<h1 id="_idParaDest-40"><a id="_idTextAnchor039"/>Learning the basics of the Vi(m) Editor </h1>
			<p>Vi and Vim are <em class="italic">the text editors</em> of choice for many system administrators and engineers. In a nutshell, the difference between them is that <strong class="bold">vim</strong> (<strong class="bold">vi improved</strong>) has many more capabilities than <a id="_idIndexMarker060"/>the original vi (visual editor). You can find these editors everywhere – from all the Unixes and Linuxes to the commercial Linux- or Unix-based software of today. For example, VMware's <em class="italic">vSphere Hypervisor</em> has a version of the vi editor built in. The rationale for this is simple – you need to have some sort of <em class="italic">standardized editor</em> that can be used to edit various text files available on a filesystem. Over the years, you'll surely find some cutdown version of vi or Vim on various network devices such as switches and routers, and even more complex devices like firewalls. It's just the way it is. If something's Unix- or Linux-based, chances are it's using text configuration files, and text configuration files need a text editor. Pretty straightforward logic, isn't it?</p>
			<p>Just as an example – the Vim editor has <a id="_idIndexMarker061"/>spinoffs that can be used in a variety of different <a id="_idIndexMarker062"/>ways, including <strong class="bold">vim-athena</strong> (created with <em class="italic">Athena GUI</em> support), <strong class="bold">vim-gtk</strong>, and <strong class="bold">vim-gtk3</strong> (created with <em class="italic">GTK/GTK3</em> support), <strong class="bold">vim-tiny</strong> (a slimmed-down version of Vim), and <strong class="bold">vim-nox</strong>. But <a id="_idIndexMarker063"/>still, most people that we know <a id="_idIndexMarker064"/>of prefer using the good<a id="_idIndexMarker065"/> old-fashioned vi or Vim in a CLI. </p>
			<p>For this first part of our recipe, we're going to explain the way vi and Vim work and use them to do some most common things, such as the following:</p>
			<ul>
				<li>Three <strong class="source-inline">vi(m)</strong> modes – <strong class="source-inline">insert</strong>, <strong class="source-inline">command</strong>, and <strong class="source-inline">ex</strong> mode</li>
				<li>Moving around a text file that we want to edit by moving the cursor</li>
				<li>Deleting text (we could refer to it as <em class="italic">cutting</em> and <em class="italic">deleting</em> at the same time)</li>
				<li>Inserting additional content into a text file</li>
				<li>Saving and exiting in the vi(m) editors</li>
				<li>Finding content in a text file</li>
				<li>Copying and pasting text (what vi and Vim refer to as <em class="italic">yank</em> and <em class="italic">paste</em>)</li>
			</ul>
			<p>That's going to be enough for this first recipe. We're going to go back to the <strong class="bold">advanced vim capabilities</strong> in the last recipe of this chapter, where we're going to dig much deeper into Vim and learn how to use much more advanced concepts, such as using regular expressions, line marking, buffers, and sorting.</p>
			<h2 id="_idParaDest-41"><a id="_idTextAnchor040"/>Getting ready</h2>
			<p>We just need to check whether vi and Vim are installed on our system. The simplest way to do it is to just go brute-force and issue the following command:</p>
			<p class="source-code">sudo apt-get -y install Vim-tiny busybox Vim dictionaries-common wamerican</p>
			<p>Ubuntu doesn't have or use the vi editor by default, so we can just install the <strong class="source-inline">Vim-tiny</strong> package to kind of emulate the same thing. Another way to use the vi editor in Ubuntu would be to use the following command:</p>
			<p class="source-code">busybox vi</p>
			<p>Seeing that <strong class="source-inline">busybox</strong> is a command-line tool that <em class="italic">embeds</em> multiple Linux command-line utilities into one, this command is something that we need to be aware of. But also, we need to remember <a id="_idIndexMarker066"/>that the intent of <strong class="source-inline">busybox</strong> is to have a way to embed multiple popular CLI tools into one, which in turn means that none of these tools are completely the same as their standalone versions. </p>
			<p>After installation is done (if needed at all), we're going to start using Vim and learn how to use it via examples. Let's issue the following commands as <strong class="source-inline">root</strong>:</p>
			<p class="source-code">cp /etc/passwd /root</p>
			<p class="source-code">cp /usr/share/dict/words /root</p>
			<p>Take note of the fact that between <strong class="source-inline">cp</strong>, <strong class="source-inline">/etc/passwd</strong>, and <strong class="source-inline">/root</strong> (the same thing applies to <strong class="source-inline">cp</strong>, <strong class="source-inline">/usr/share/dict/words</strong>, and <strong class="source-inline">/root</strong> in the second command), we need to hit <em class="italic">the spacebar</em> on our keyboard. We're effectively copying the <strong class="source-inline">passwd</strong> and <strong class="source-inline">words</strong> files to the <strong class="source-inline">/root</strong> directory to have some source files to play with.</p>
			<p>When we have successfully finished copying these files, we'll start the Vim editor and start editing. First, we're going to use the <strong class="source-inline">passwd</strong> file. Type in the following:</p>
			<p class="source-code">Vim /root/passwd</p>
			<p>Let's start learning!</p>
			<h2 id="_idParaDest-42"><a id="_idTextAnchor041"/>How to do it…</h2>
			<p>Now that we have the <strong class="source-inline">/root/passwd</strong> file opened in our Vim editor, let's play with it a bit. Moving around in normal mode is straightforward. Let's just start by using the arrow keys on our keyboard to move up and down and left and right. After we're done with that, let's just jump to the top of our file by using the <em class="italic">gg</em> sequence (by pressing the <em class="italic">g</em> key twice).</p>
			<p>First, we're going to delete <a id="_idIndexMarker067"/>the first line. Vi(m) starts in something called <em class="italic">normal</em> mode, and if we press the <em class="italic">d</em> key twice, we're going to delete the first line. Let's check the before state:</p>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="Images/Figure_2.1_B16269.jpg" alt="Figure 2.1 – The top section of the /root/passwd file&#13;&#10;" width="1225" height="515"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.1 – The top section of the /root/passwd file</p>
			<p>And now, after we have pressed the <em class="italic">d</em> key twice, it should look like this (if we are still positioned at the first line, the <strong class="source-inline">root</strong> line):</p>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="Images/Figure_2.2_B16269.jpg" alt="Figure 2.2 – After pressing the d key twice, the first line is gone&#13;&#10;" width="1478" height="731"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.2 – After pressing the d key twice, the first line is gone</p>
			<p>Let's now expand this <a id="_idIndexMarker068"/>use case further by pressing (just as an example) the <em class="italic">5dd</em> key sequence. The result should look something like this:</p>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="Images/Figure_2.3_B16269.jpg" alt="Figure 2.3 – After the 5dd operation (deleting five lines), we deleted five lines after the cursor&#13;&#10;" width="1431" height="588"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.3 – After the 5dd operation (deleting five lines), we deleted five lines after the cursor</p>
			<p>As we can see, the first five lines after our cursor (the lines starting with <strong class="source-inline">daemon</strong>, <strong class="source-inline">bin</strong>, <strong class="source-inline">sys</strong>, <strong class="source-inline">sync</strong>, and <strong class="source-inline">games</strong>) are gone.</p>
			<p>Let's now jump to the last line in our <strong class="source-inline">/root/passwd</strong> file, and copy and paste it behind the last line. First, we need to go to the end of our file, which can be achieved by using the <em class="italic">Shift </em>+<em class="italic"> g</em> sequence (basically, the capital letter <em class="italic">G</em>). After that, if we want to copy the line after the cursor (in effect, complete the last line in the file), we need to first yank it (copy) and then paste <a id="_idIndexMarker069"/>it to a correct spot. Yanking can be achieved by using the <em class="italic">yy</em> sequence (pressing the <em class="italic">y</em> key twice). That puts the line after our cursor in a copy and paste buffer. If we want to paste it after our last line, we need to press the <em class="italic">p</em> key. Our copied line will automatically be pasted after the last line. The end result, if we used the same virtual machine as in <a href="B16269_01_Final_PD_ePub.xhtml#_idTextAnchor012"><em class="italic">Chapter 1</em></a><em class="italic">, Basics of Shell and Text Terminal</em>, should be something like this:</p>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="Images/Figure_2.4_B16269.jpg" alt="Figure 2.4 – The yank and paste of a single line&#13;&#10;" width="1354" height="355"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.4 – The yank and paste of a single line</p>
			<p>Now, let's select three lines beginning with <strong class="source-inline">sshd</strong> (so, the <strong class="source-inline">sshd</strong>, <strong class="source-inline">systemd-coredump</strong>, and <strong class="source-inline">student</strong> lines) and copy and paste them after the line beginning with <strong class="source-inline">joe</strong>. First, we're going to use cursor keys to position at the beginning of the <strong class="source-inline">sshd</strong> line. Then, we're going to type the <em class="italic">y3y</em> key sequence. This will start yanking (copying) from the cursor, copy the next three lines in the copy and paste buffer, and then end yanking. If we did that successfully, Vim is going to throw us a message at the bottom of the screen, saying <strong class="source-inline">3 lines yanked</strong>. </p>
			<p>After we have these lines in the copy and paste buffer, we need to paste them. Let's use the cursor keys to move to the line beginning with <strong class="source-inline">joe</strong>, and then press the <em class="italic">p</em> key. The result should look like this:</p>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="Images/Figure_2.5_B16269.jpg" alt="Figure 2.5 – Yank and paste, and multiple lines of text&#13;&#10;" width="1262" height="264"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.5 – Yank and paste, and multiple lines of text</p>
			<p>Now that we have played with yank and paste and delete, it's time to add some content to this file. In order to <a id="_idIndexMarker070"/>do that, we need to enter <strong class="bold">insert mode</strong>. That can be achieved<a id="_idIndexMarker071"/> by typing the <em class="italic">i</em> key. So, let's add a bit of text after our cursor – press the <em class="italic">i</em> key and start typing. Let's add the following:</p>
			<p><strong class="source-inline">something:x:1400:1400::/home/something:/bin/bash</strong></p>
			<p>After we're done<a id="_idIndexMarker072"/> with inserting, press the <em class="italic">Esc</em> key (to go back to <strong class="bold">normal mode</strong>). The end result should look like this:</p>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="Images/Figure_2.6_B16269.jpg" alt="Figure 2.6 – Inserting additional text with insert mode&#13;&#10;" width="1160" height="294"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.6 – Inserting additional text with insert mode</p>
			<p>Now that we've done that successfully, the next logical step will be to save the file if we're happy with its contents. Let's say that we are and we're ready to save the file. In order for us to do that, we need to enter <strong class="bold">ex mode</strong> and tell Vim that we<a id="_idIndexMarker073"/> want to exit and save. There are several different key sequences that will make this happen for us. The first one is <em class="italic">:wq!</em> (write and quit – don't ask us for confirmation), and the second one is <em class="italic">:x</em>. There are other ways, such as using the <em class="italic">ZZ</em> key sequence, but let's stick to the more commonly used ones (<em class="italic">wq</em> and <em class="italic">x</em>). We need to make sure that we type these key sequences with a colon sign (<em class="italic">:</em>). As we will explain in a bit, using the colon sign means that we want to enter <a id="_idIndexMarker074"/>ex mode and do some final operations with our edited file. If we use this key sequence successfully, we should end up in shell, with our original file saved with all the changes that we made to it. </p>
			<p>In truth, Vim has a spectacular number of key sequences that can be used for a variety of operations on text files. Feel free to translate this <em class="italic">spectacular</em> as either a very good or very bad thing, as it's all subjective – some of us like it a lot, some of us will hate it. Here are some commonly used key sequences:</p>
			<ul>
				<li><em class="italic">dw</em> – delete a word</li>
				<li><em class="italic">2dw</em> – delete two words</li>
				<li><em class="italic">yw</em> – yank one word</li>
				<li><em class="italic">u</em> – undo the last change</li>
				<li><em class="italic">U</em> – undo changes made to the current line</li>
				<li><em class="italic">a</em> – append text after the cursor</li>
				<li><em class="italic">A </em>– append text to the end of the current line</li>
				<li><em class="italic">Ctrl </em>+<em class="italic"> f</em> – scroll the file forward by one screen</li>
				<li><em class="italic">n Ctrl </em>+<em class="italic"> f</em> – scroll the file forward by <em class="italic">n</em> screens</li>
				<li><em class="italic">Shift </em>+<em class="italic"> m</em> – move the cursor to the middle of the page</li>
				<li><em class="italic">:50</em> – move the cursor to line 50 of the current file</li>
				<li><em class="italic">$</em> – move the cursor to the end of the line</li>
				<li><em class="italic">x</em> – delete the character at the cursor</li>
				<li><em class="italic">X</em> – delete the character before the cursor</li>
				<li><em class="italic">^</em> – go to the first character of the line</li>
				<li><em class="italic">o</em> – insert a line after the current one</li>
				<li><em class="italic">Ctrl </em>+<em class="italic"> g</em> – print the file info</li>
			</ul>
			<p>There are literally hundreds of other commands, and we deliberately selected only some of them that we feel <a id="_idIndexMarker075"/>are useful and commonly used. Let's now do some more <a id="_idIndexMarker076"/>complex things by using a built-in Vim teaching tool called <strong class="bold">Vimtutor</strong>.  In the command line, start Vimtutor by typing the following:</p>
			<p class="source-code">Vimtutor</p>
			<p>After that, Vimtutor is going to ask us about the intended output file for practice, and we can just press the <em class="italic">Enter</em> key here. We should have the following content on our screen:</p>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="Images/Figure_2.7_B16269.jpg" alt="Figure 2.7 – The Vimtutor start page&#13;&#10;" width="1059" height="939"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.7 – The Vimtutor start page</p>
			<p>Let's now use this file to practice a bit. The first thing that we're going to do is copy the first paragraph (starting with <strong class="bold">Vim</strong> and ending with <strong class="bold">editor.</strong>) before the paragraph starting with <strong class="bold">The approximate time</strong>.</p>
			<p>Let's position our cursor at the beginning of the Vim line by using the arrow keys. After we have done that, we <a id="_idIndexMarker077"/>need to use the <em class="italic">y}</em> key sequence to instruct Vim to <strong class="bold">yank</strong> the paragraph starting at the cursor. Then, we need to move to the empty line between the first and second paragraphs by using the cursor keys and pressing the <em class="italic">p</em> key to paste the copied paragraph after the cursor. The result should look like this:</p>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="Images/Figure_2.8_B16269.jpg" alt="Figure 2.8 – Yanking and pasting a text paragraph&#13;&#10;" width="1173" height="913"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.8 – Yanking and pasting a text paragraph</p>
			<p>Let's say that we want to convert the complete file to lowercase characters. Of course, this operation <a id="_idIndexMarker078"/>involves several other operations:</p>
			<ul>
				<li>We need to move to the beginning of our file (<em class="italic">gg</em>).</li>
				<li>We need to turn on <strong class="bold">visual mode</strong> (more about this a bit later), achieved<a id="_idIndexMarker079"/> by pressing the <em class="italic">Shift </em>+<em class="italic"> v</em> key sequence (uppercase <em class="italic">V</em>).</li>
				<li>We need to mark the text all the way to the end of our file, achieved by pressing the <em class="italic">Shift </em>+<em class="italic"> g</em> key sequence (uppercase <em class="italic">G</em>).</li>
				<li>We need to make the text lowercase, achieved by pressing the <em class="italic">u</em> key.</li>
			</ul>
			<p>So, the key sequence we're looking for is <em class="italic">ggVGu</em>. The result of our operation should look like this:</p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="Images/Figure_2.9_B16269.jpg" alt="Figure 2.9 – Our Vimtutor file, with all lowercase characters&#13;&#10;" width="1106" height="917"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.9 – Our Vimtutor file, with all lowercase characters</p>
			<p>If we wanted to do the opposite (uppercase all the characters), we'd use the <em class="italic">ggVGU</em> key sequence (<em class="italic">U</em> is for uppercase and <em class="italic">u</em> is for lowercase characters).</p>
			<p>We're going to take a <a id="_idIndexMarker080"/>short break from all of these key sequences by explaining how Vim works – specifically, we're going to focus on commonly used modes and briefly mention some of the lesser-used ones. Let's start with <strong class="bold">normal mode</strong> and work our way toward visual and <strong class="bold">replace</strong> modes.</p>
			<h2 id="_idParaDest-43"><a id="_idTextAnchor042"/>How it works…</h2>
			<p>The Vim editor has more than 10 different modes, which roughly translates into the different ways in which it works. The most used modes are as follows:</p>
			<ul>
				<li>Normal mode</li>
				<li>Insert mode</li>
				<li>Ex mode</li>
				<li>Visual mode</li>
				<li>Replace mode</li>
			</ul>
			<p>When we start Vim, we're in normal mode; we can sniff around in it by using the cursor, we can do a bit of yank and paste, and we can delete. So, it's used for general operations such as navigating through an edited file, a bit of rough-cut editing, and that's that.</p>
			<p>If we want to add additional content to our text file, we usually switch<a id="_idIndexMarker081"/> to insert mode by using the <em class="italic">i</em> key. In insert <a id="_idIndexMarker082"/>mode, we can easily add a bit of text after our cursor and move around in our edited file. When we're ready to go back to normal mode, we can do that by pressing the <em class="italic">Esc</em> key. If, however, we're done with file editing and we just want to save the file and exit, we need to go to normal mode and then to ex mode. This is achieved by pressing the <em class="italic">Esc</em> key, followed by the colon (<em class="italic">:</em>). That puts us in ex mode, and then we can proceed to do <em class="italic">wq!</em>, <em class="italic">x</em>, or <em class="italic">ZZ</em>. </p>
			<p>Visual and replace modes <a id="_idIndexMarker083"/>are quite a bit different. Visual mode has sub-modes (<strong class="bold">character</strong>, <strong class="bold">line</strong>, and <strong class="bold">block</strong>), and can be used to select (highlight) parts of the text that we want to work with and manipulate. For example, line and block modes can be useful for modifying YAML files when working with Ansible. Character mode<a id="_idIndexMarker084"/> can be used to highlight a part of code. YAML syntax is sensitive to indenting, so<a id="_idIndexMarker085"/> by using line mode, we can highlight portions of our playbooks and indent them left or right (by using the <em class="italic">&gt;</em> and <em class="italic">&lt;</em> keys) so that we don't have to do it manually. Block mode<a id="_idIndexMarker086"/> can be used efficiently to check indentation that was created by using line mode. These modes can be entered by using <em class="italic">Shift</em> + <em class="italic">V</em> (line mode) and <em class="italic">Ctrl</em> + <em class="italic">v</em> (block mode). Character mode can be entered by using the <em class="italic">v</em> key.</p>
			<p>Replace mode<a id="_idIndexMarker087"/> allows us to type in our content in a text file over existing content. We can use the <em class="italic">R</em> key to enter replace mode (from normal mode).</p>
			<h2 id="_idParaDest-44"><a id="_idTextAnchor043"/>See also</h2>
			<p>If you need more information about the basics of Vim, we suggest that you check out this <a id="_idIndexMarker088"/>content:</p>
			<ul>
				<li>Vim: <a href="https://www.Vim.org/">https://www.Vim.org/</a></li>
				<li><em class="italic">Mastering Vim</em>: <a href="https://www.amazon.com/exec/obidos/ASIN/1789341094/stichtingiccfhol">https://www.amazon.com/exec/obidos/ASIN/1789341094/stichtingiccfhol</a></li>
				<li>An interactive Vim tutorial: <a href="https://www.openVim.com/">https://www.openVim.com/</a></li>
			</ul>
			<h1 id="_idParaDest-45"><a id="_idTextAnchor044"/>Learning the basics of the nano editor</h1>
			<p>If you feel that the Vim editor is too complicated for you, we can feel your pain. That's why choosing the <a id="_idIndexMarker089"/>editor you're going to work with is a subjective choice. We'd like to offer another much simpler editor to the table, called <strong class="bold">nano</strong>. </p>
			<h2 id="_idParaDest-46"><a id="_idTextAnchor045"/>Getting ready</h2>
			<p>Keep the CLI1 virtual machine powered on and let's continue editing our files.</p>
			<h2 id="_idParaDest-47"><a id="_idTextAnchor046"/>How to do it…</h2>
			<p>We're going to edit the <strong class="source-inline">words</strong> file that we copied in the previous recipe. Before that, let's just make sure that nano is installed by typing in the following command:</p>
			<p class="source-code">sudo apt-get -y install nano</p>
			<p>Let's now open the file called <strong class="source-inline">words</strong> from the <strong class="source-inline">root</strong> directory by typing in the following command:</p>
			<p class="source-code">nano /root/words</p>
			<p>Our file should be opened in the nano editor, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="Images/Figure_2.10_B16269.jpg" alt="Figure 2.10 – Starting editing with the nano editor&#13;&#10;" width="1589" height="1171"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.10 – Starting editing with the nano editor</p>
			<p>For those of us who are more prone to using text editors such as Notepad or Wordpad, nano should be a bit more familiar territory. It doesn't have the scope of capabilities or advanced functionality <a id="_idIndexMarker090"/>that Vim has, but for the most part, that might not be so important, at least not for most text file editing operations. Or is it really that simple? Let's check it out.</p>
			<p>Editing in nano works in the same fashion as with other <em class="italic">regular</em> editors – we just need to explain the lower part of the screenshot (the part where we can see <strong class="source-inline">Help</strong>, <strong class="source-inline">Exit</strong>, and so on). In nano, if we need help, we need to press <em class="italic">Ctrl</em> + <em class="italic">g</em>. This is the result that we'll get:</p>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="Images/Figure_2.11_B16269.jpg" alt="Figure 2.11 – nano help&#13;&#10;" width="1583" height="1164"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.11 – nano help</p>
			<p>We can spend our time scrolling through this help window if we want to. But, for starters, let's just say that this <strong class="source-inline">^</strong> character means <em class="italic">press the Ctrl key</em>. </p>
			<p>So, on our first nano screenshot, <strong class="source-inline">^G</strong> means <em class="italic">Ctrl </em> + <em class="italic">G</em>, <strong class="source-inline">^X</strong> means <em class="italic">Ctrl</em> + <em class="italic">X</em>, and so on. It still isn't as easy as using some text editors that a lot of people use on Microsoft Windows, but it's a bit <a id="_idIndexMarker091"/>more user-friendly than Vim. If nothing else, some of the commonly used commands are right at the bottom of our screen so that we don't have to learn all of the key sequences or research them online before we consider using the editor.</p>
			<p>If we want to close our help window from the second nano screenshot, we just need to press <em class="italic">Ctrl </em> + <em class="italic">X</em>. This will get us back to the state shown in the first nano screenshot.</p>
			<p>If we want to delete a line, we need to use <em class="italic">Ctrl</em> + <em class="italic">K</em>. If we need to delete multiple lines, things start to get a bit more complex. We first need to select the content that we want to delete (<em class="italic">Ctrl</em> + <em class="italic">Shift</em> + <em class="italic">6</em>), use the cursor to move to the place that we want to delete to, and then press <em class="italic">Ctrl</em> + <em class="italic">K</em>. Let's say that we want to delete five lines. So, selecting content that we <a id="_idIndexMarker092"/>want to delete looks like this:  </p>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="Images/Figure_2.12_B16269.jpg" alt="Figure 2.12 – After pressing Ctrl + Shift + 6 and using the cursor keys to &#13;&#10;go down five lines, we're ready for Ctrl + K&#13;&#10;" width="1563" height="1174"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.12 – After pressing Ctrl + Shift + 6 and using the cursor keys to go down five lines, we're ready for Ctrl + K</p>
			<p>After we have selected the correct text, we just need to press <em class="italic">Ctrl</em> + <em class="italic">K</em> to delete it. The result will look like this:</p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="Images/Figure_2.13_B16269.jpg" alt="Figure 2.13 – Five lines successfully deleted – result!&#13;&#10;" width="1581" height="1161"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.13 – Five lines successfully deleted – result!</p>
			<p>The same idea applies to doing a copy and paste operation on a paragraph. We'd use <em class="italic">Ctrl</em> + <em class="italic">Shift</em> + <em class="italic">6</em> and the <a id="_idIndexMarker093"/>cursor to mark the text, <em class="italic">Alt</em> + <em class="italic">6</em> to put the copied text in the copy and paste buffer, and then use <em class="italic">Ctrl</em> + <em class="italic">U</em> to paste it wherever it needs to be pasted in nano. Saving the file is equivalent to using <em class="italic">Ctrl</em> + <em class="italic">X</em> to exit, and then confirming that we want the changes to be saved to a file.</p>
			<h2 id="_idParaDest-48"><a id="_idTextAnchor047"/>There's more…</h2>
			<p>If you need to learn <a id="_idIndexMarker094"/>more about nano, check out the following links:</p>
			<ul>
				<li>The nano editor cheat sheet: <a href="https://www.nano-editor.org/dist/latest/cheatsheet.html">https://www.nano-editor.org/dist/latest/cheatsheet.html</a></li>
				<li>How to use nano: <a href="https://linuxize.com/post/how-to-use-nano-text-editor/">https://linuxize.com/post/how-to-use-nano-text-editor/</a></li>
			</ul>
			<h1 id="_idParaDest-49"><a id="_idTextAnchor048"/>Going through the advanced Vi(m) settings</h1>
			<p>In the first part of this chapter, we learned some basic Vim operations, which were moving around, copying and <a id="_idIndexMarker095"/>pasting, saving, and exiting. Let's take care of some more <strong class="bold">advanced operations</strong>, such as working with find and replace, regular expressions, and similar concepts.</p>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor049"/>Getting ready</h2>
			<p>We need to leave our CLI virtual machine running. If it's not powered on, we need to power it back on. </p>
			<h2 id="_idParaDest-51"><a id="_idTextAnchor050"/>How to do it…</h2>
			<p>Finding content in Vim is a multi-step process, and it depends on a couple of things. First, it depends on the <em class="italic">direction</em> that we want to take, <em class="italic">forward</em> or <em class="italic">backward</em>, as there are different key sequences for these operations. Let's open the <strong class="source-inline">/root/words</strong> file again to find some text:</p>
			<p class="source-code"><strong class="source-inline">Vim /root/words</strong></p>
			<p>Let's start by finding the word <strong class="source-inline">fast</strong>. For that to work, we need to use the <strong class="source-inline">/</strong> character from normal mode, as it tells Vim that we're about to use the <strong class="source-inline">search</strong> function. So, <strong class="source-inline">/fast</strong> will search for the words <strong class="source-inline">fast forward</strong> from our cursor. This is the expected result:</p>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="Images/Figure_2.14_B16269.jpg" alt="Figure 2.14 – Finding a word in Vim&#13;&#10;" width="1563" height="1164"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.14 – Finding a word in Vim</p>
			<p>If we now press <em class="italic">Enter</em> and then <a id="_idIndexMarker096"/>the <em class="italic">n</em> key, we will search for the next appearance of the word <strong class="source-inline">fast</strong>. This is the expected result:</p>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="Images/Figure_2.15_B16269.jpg" alt="Figure 2.15 – The next appearance of the word fast&#13;&#10;" width="1550" height="1165"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.15 – The next appearance of the word fast</p>
			<p>However, if we want to find the 10th appearance of the word <strong class="source-inline">fast</strong>, we need to either press the correct key <a id="_idIndexMarker097"/>sequence or use a regular expression. Let's start with a key sequence, which is going to be (again from normal mode) <strong class="source-inline">10/fast</strong>. This is the expected result:</p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="Images/Figure_2.16_B16269.jpg" alt="Figure 2.16 – Finding the n-th appearance of a word&#13;&#10;" width="1495" height="1164"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.16 – Finding the n-th appearance of a word</p>
			<p>If we want to find the <a id="_idIndexMarker098"/>previous appearance of our word (basically, search backward), we need to press the <em class="italic">N</em> key (capital <em class="italic">N</em>). This is the expected result:</p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="Images/Figure_2.17_B16269.jpg" alt="Figure 2.17 – Finding a word backward from the previous cursor&#13;&#10;" width="1559" height="1164"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.17 – Finding a word backward from the previous cursor</p>
			<p>Let's now do a bit of search and replace. Let's say that we want to find all appearances of the word <strong class="source-inline">airplane</strong> and <a id="_idIndexMarker099"/>change them to <strong class="source-inline">metro</strong>, starting from the beginning of our file. The key sequence used for that would be <em class="italic">gg</em> (to go back to the file beginning) and then <strong class="source-inline">:%s/airplane/metro/g</strong>, followed by the <em class="italic">Enter</em> key. This is the expected result:</p>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="Images/Figure_2.18_B16269.jpg" alt="Figure 2.18 – Replacing all appearances of a word with another word&#13;&#10;" width="1571" height="1165"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.18 – Replacing all appearances of a word with another word</p>
			<p>This syntax presumes the automatic replacement of all occurrences of the word <strong class="source-inline">airplane</strong> with the word <strong class="source-inline">metro</strong> placed anywhere in the file. If we just wanted to replace the first appearance of a string in any line, we need to first find that word by using the <strong class="source-inline">/word</strong> key sequence. Then, we need to use the <strong class="source-inline">:s/word1/word2/</strong> key sequence to only change <a id="_idIndexMarker100"/>the first appearance of <strong class="source-inline">word1</strong> with <strong class="source-inline">word2</strong>. Let's use the word <strong class="source-inline">airship</strong> for that example and change that word to <strong class="source-inline">ship</strong>. If we type in <strong class="source-inline">/airship</strong>, followed by the <em class="italic">Enter</em> key, Vim will position us to the first next appearance of the word <strong class="source-inline">airship</strong>. If we then use the <strong class="source-inline">:s/airship/ship/</strong> key sequence followed by the <em class="italic">Enter</em> key, we should get this result:</p>
			<div>
				<div id="_idContainer037" class="IMG---Figure">
					<img src="Images/Figure_2.19_B16269.jpg" alt="Figure 2.19 – Replacing one appearance of a word in a specific line with another word&#13;&#10;" width="367" height="897"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.19 – Replacing one appearance of a word in a specific line with another word</p>
			<p>It's a subtle difference, but an important one.</p>
			<p>We could also use many more commands in vi – for example, using a dot sign (<strong class="source-inline">.</strong>). That can be used to repeat the <a id="_idIndexMarker101"/>last change made in normal mode, which you might also find to be very useful.</p>
			<p>We're going to stop here, as we will cover more advanced text search patterns by using regular expressions in <a href="B16269_07_Final_PD_ePub.xhtml#_idTextAnchor160"><em class="italic">Chapter 7</em></a>, <em class="italic">Network-Based File Synchronization</em>.</p>
			<h2 id="_idParaDest-52"><a id="_idTextAnchor051"/>How it works…</h2>
			<p><strong class="bold">String replacement</strong> in Vim works by using an external<a id="_idIndexMarker102"/> command called <strong class="source-inline">sed</strong>, a <strong class="bold">stream editor</strong>. This command is regularly<a id="_idIndexMarker103"/> used by system engineers all over the world to quickly replace simple or complex text patterns of any given file (or multiple files) to another complex text pattern. It uses regular expressions as a basis (explained in <a href="B16269_07_Final_PD_ePub.xhtml#_idTextAnchor160"><em class="italic">Chapter 7</em></a>, <em class="italic">Network-Based File Synchronization</em>), which means that, by default, doing search and replace in Vim is quite powerful, albeit a bit complex, as we need to learn the ins and outs of sed and the way Vim treats it as a <em class="italic">plugin</em>. </p>
			<p>That being said, most of us focus on the <em class="italic">quite powerful</em> part of the last paragraph, as using a Vim/sed <a id="_idIndexMarker104"/>combination to quickly replace complex text patterns yields fast and precise results – as long as we know what we're doing, of course.</p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor052"/>There's more…</h2>
			<p>Using these concepts requires a bit of extra reading. So, we need to make sure that we check the following additional links:</p>
			<ul>
				<li>Vim Tips Wiki – search <a id="_idIndexMarker105"/>and replace: <a href="https://Vim.fandom.com/wiki/Search_and_replace">https://Vim.fandom.com/wiki/Search_and_replace</a></li>
				<li><em class="italic">Vim tips: the basics of search and replace</em>: <a href="https://www.linux.com/training-tutorials/Vim-tips-basics-search-and-replace/">https://www.linux.com/training-tutorials/Vim-tips-basics-search-and-replace/</a></li>
			</ul>
		</div>
	</div></body></html>