<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer366">
<p class="Chapter-Title" id="_idParaDest-257" lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">29. </span></span><a id="_idTextAnchor430"/><a id="_idTextAnchor431"/><span class="koboSpan" id="kobo.2.1">An Introduction to Linux </span><a id="_idIndexMarker641"/><span class="koboSpan" id="kobo.3.1">Containers</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.4.1">The preceding chapters covered the concept of virtualization, emphasizing creating and managing virtual machines using KVM. </span><span class="koboSpan" id="kobo.4.2">This chapter will introduce a related technology in the form of Linux Containers. </span><span class="koboSpan" id="kobo.4.3">While there are some similarities between virtual machines and containers, key differences will be outlined in this chapter, along with an introduction to the concepts and advantages of Linux Containers. </span><span class="koboSpan" id="kobo.4.4">The chapter will also introduce some Ubuntu container management tools. </span><span class="koboSpan" id="kobo.4.5">Once the basics of containers have been covered in this chapter, the next chapter will work through some practical examples of creating and running containers on Ubuntu.</span></p>
<p class="Heading-1-1" id="_idParaDest-258" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.5.1">29.1 </span></span><a id="_idTextAnchor432"/><span class="koboSpan" id="kobo.6.1">Linux Containers and Kernel Sharing</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.7.1">In simple terms, Linux containers are a lightweight alternative to virtualization. </span><span class="koboSpan" id="kobo.7.2">A virtual machine contains and runs the entire guest operating system in a virtualized environment. </span><span class="koboSpan" id="kobo.7.3">The virtual machine, in turn, runs on top of an environment such as a hypervisor that manages access to the physical resources of the host system. </span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.8.1">Containers work by using a concept referred to as kernel sharing, which takes advantage of the architectural design of Linux and UNIX-based operating systems. </span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.9.1">To understand how kernel sharing and containers work, it helps first to understand the two main components of Linux or UNIX operating systems. </span><span class="koboSpan" id="kobo.9.2">At the core of the operating system is the kernel. </span><span class="koboSpan" id="kobo.9.3">In simple terms, the kernel handles all the interactions between the operating system and the physical hardware. </span><span class="koboSpan" id="kobo.9.4">The second key component is the root file system which contains all the libraries, files, and utilities necessary for the operating system to function. </span><span class="koboSpan" id="kobo.9.5">Taking advantage of this structure, containers each have their own root file system but share the host operating system’s kernel. </span><span class="koboSpan" id="kobo.9.6">This structure is illustrated in the architectural diagram in </span><a href="Containers_Overview.xhtml#_idTextAnchor433"><span class="koboSpan" id="kobo.10.1">Figure 29-1</span></a><span class="koboSpan" id="kobo.11.1"> below.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.12.1">This type of resource sharing is made possible by the ability of the kernel to dynamically change the current root file system (a concept known as </span><a id="_idIndexMarker642"/><span class="koboSpan" id="kobo.13.1">change root or </span><a id="_idIndexMarker643"/><span class="koboSpan" id="kobo.14.1">chroot) to a different root file system without having to reboot the entire system. </span><span class="koboSpan" id="kobo.14.2">Linux containers are essentially an extension of this capability combined with a container runtime, the responsibility of which is to provide an interface for executing and managing the containers on the host system. </span><span class="koboSpan" id="kobo.14.3">Several container runtimes are available, including</span><a id="_idIndexMarker644"/><span class="koboSpan" id="kobo.15.1"> Docker, </span><a id="_idIndexMarker645"/><span class="koboSpan" id="kobo.16.1">lxd, </span><a id="_idIndexMarker646"/><span class="koboSpan" id="kobo.17.1">containerd, and </span><a id="_idIndexMarker647"/><span class="koboSpan" id="kobo.18.1">CRI-O.</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US"><span class="koboSpan" id="kobo.19.1"><img alt="" class="_idGenObjectAttribute-1" src="image/linux_container_diagram.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.20.1">Figure 29-1</span></span><a id="_idTextAnchor433"/></p>
<p class="Heading-1-1" id="_idParaDest-259" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.21.1">29.2 </span></span><a id="_idTextAnchor434"/><span class="koboSpan" id="kobo.22.1">Container Uses and Advantages</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.23.1">The main advantage of containers is that they require considerably less resource overhead than virtualization allowing many container instances to be run simultaneously on a single server. </span><span class="koboSpan" id="kobo.23.2">They can be started and stopped rapidly and efficiently in response to demand levels. </span><span class="koboSpan" id="kobo.23.3">In addition, containers run natively on the host system providing a level of performance that a virtual machine cannot match.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.24.1">Containers are also highly portable and can be easily migrated between systems. </span><span class="koboSpan" id="kobo.24.2">Combined with a container management system such as </span><a id="_idIndexMarker649"/><span class="koboSpan" id="kobo.25.1">Docker, </span><a id="_idIndexMarker650"/><span class="koboSpan" id="kobo.26.1">OpenShift, and </span><a id="_idIndexMarker651"/><span class="koboSpan" id="kobo.27.1">Kubernetes, it is possible to deploy and manage containers on a vast scale spanning multiple servers and cloud platforms, potentially running thousands of containers. </span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.28.1">Containers are frequently used to create lightweight execution environments for applications. </span><span class="koboSpan" id="kobo.28.2">In this scenario, each container provides an isolated environment containing the application together with all of the runtime and supporting files required by that application to run. </span><span class="koboSpan" id="kobo.28.3">The container can then be deployed to any other compatible host system that supports container execution and runs without any concerns that the target system may not have the necessary runtime configuration for the application - all of the application’s dependencies are already in the container.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.29.1">Containers are also helpful when bridging the gap between development and production environments. </span><span class="koboSpan" id="kobo.29.2">By performing development and QA work in containers, they can be passed to production and launched safely because the applications run in the same container environments in which they were developed and tested.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.30.1">Containers also promote a modular approach to deploying large and complex solutions. </span><span class="koboSpan" id="kobo.30.2">Instead of developing applications as single monolithic entities, containers can be used to design applications as groups of interacting modules, each running in a separate container.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.31.1">One possible drawback of containers is that the guest operating systems must be compatible with the shared kernel version. </span><span class="koboSpan" id="kobo.31.2">It is not, for example, possible to run Microsoft Windows in a container on a Linux system. </span><span class="koboSpan" id="kobo.31.3">Nor is it possible for a Linux guest system designed for the 2.6 version of the kernel to share a 2.4 version kernel. </span><span class="koboSpan" id="kobo.31.4">These requirements are not, however, what containers were designed for. </span><span class="koboSpan" id="kobo.31.5">Rather than being seen as limitations, these restrictions should be considered some of the key advantages of containers in providing a simple, scalable, and reliable deployment platform. </span></p>
<p class="Heading-1-1" id="_idParaDest-260" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.32.1">29.3 </span></span><a id="_idTextAnchor435"/><span class="koboSpan" id="kobo.33.1">Ubuntu Container Tools</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.34.1">Ubuntu provides several tools for creating, inspecting, and managing containers. </span><span class="koboSpan" id="kobo.34.2">The main tools are as follows:</span></p>
<p class="Bullet-List" lang="en-US"><span class="_idGenBNMarker-4"><span class="koboSpan" id="kobo.35.1">•</span></span><a id="_idIndexMarker652"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.36.1">buildah</span></span><span class="koboSpan" id="kobo.37.1"> – A command-line tool for building container images.</span></p>
<p class="Bullet-List" lang="en-US"><span class="_idGenBNMarker-4"><span class="koboSpan" id="kobo.38.1">•</span></span><a id="_idIndexMarker653"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.39.1">podman</span></span><span class="koboSpan" id="kobo.40.1"> – A command-line based container runtime and management tool. </span><span class="koboSpan" id="kobo.40.2">Performs tasks such as downloading container images from remote registries and inspecting, starting, and stopping images.</span></p>
<p class="Bullet-List" lang="en-US"><span class="_idGenBNMarker-4"><span class="koboSpan" id="kobo.41.1">•</span></span><a id="_idIndexMarker654"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.42.1">skopeo</span></span><span class="koboSpan" id="kobo.43.1"> – A command-line utility used to convert container images, copy images between registries and inspect images stored in registries without downloading them.</span></p>
<p class="Bullet-List" lang="en-US"><span class="_idGenBNMarker-4"><span class="koboSpan" id="kobo.44.1">•</span></span><a id="_idIndexMarker655"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.45.1">runc</span></span><span class="koboSpan" id="kobo.46.1"> – A lightweight container runtime for launching and running containers from the command line.</span></p>
<p class="Bullet-List" lang="en-US"><span class="_idGenBNMarker-4"><span class="koboSpan" id="kobo.47.1">•</span></span><a id="_idIndexMarker656"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.48.1">OpenShift</span></span><span class="koboSpan" id="kobo.49.1"> – An enterprise-level container application management platform consisting of command-line and web-based tools.</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.50.1">All of the above tools comply with the </span><a id="_idIndexMarker657"/><span class="koboSpan" id="kobo.51.1">Open Container Initiative (</span><a id="_idIndexMarker658"/><span class="koboSpan" id="kobo.52.1">OCI), a set of specifications designed to ensure that containers conform to the same standards between competing tools and platforms.</span></p>
<p class="Heading-1-1" id="_idParaDest-261" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.53.1">29.4 </span></span><a id="_idTextAnchor436"/><a id="_idTextAnchor442"/><a id="_idTextAnchor445"/><span class="koboSpan" id="kobo.54.1">The Ubuntu Docker Registry</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.55.1">Although Ubuntu is provided with a set of tools designed to be used in place of those provided by Docker, those tools still need access to Ubuntu images for use when building containers. </span><span class="koboSpan" id="kobo.55.2">For this purpose, the Ubuntu team maintains a set of Ubuntu container images within the Docker Hub. </span><span class="koboSpan" id="kobo.55.3">The Docker Hub is an online container </span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.56.1">registry</span></span><span class="koboSpan" id="kobo.57.1"> made of multiple </span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.58.1">repositories</span></span><span class="koboSpan" id="kobo.59.1">, each containing a wide range of container images available for download when building containers. </span><span class="koboSpan" id="kobo.59.2">The images within a repository are each assigned a </span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.60.1">repository tag</span></span><span class="koboSpan" id="kobo.61.1"> (for example, 21.04, 20.10, 23.04, latest etc.) which can be referenced when performing an image download. </span><span class="koboSpan" id="kobo.61.2">The following, for example, is the URL of the Ubuntu 23.04 image contained within the Docker Hub:</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="CharOverride-2"><span class="koboSpan" id="kobo.62.1">docker://docker.io/library/ubuntu:23.04</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.63.1">In addition to downloading (referred to as “pulling” in container terminology) container images from Docker and other third party hosts registries, you can also use registries to store your own images. </span><span class="koboSpan" id="kobo.63.2">This can be achieved either by hosting your own registry, or by making use of existing services such as those provided by Docker, Amazon AWS, Google Cloud, Microsoft Azure and IBM Cloud to name a few of the many options.</span></p>
<p class="Heading-1-1" id="_idParaDest-262" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.64.1">29.5 </span></span><a id="_idTextAnchor446"/><span class="koboSpan" id="kobo.65.1">Container Networking</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.66.1">By default, containers are connected to a network using a </span><a id="_idIndexMarker664"/><span class="koboSpan" id="kobo.67.1">Container Networking Interface (</span><a id="_idIndexMarker665"/><span class="koboSpan" id="kobo.68.1">CNI) bridged network stack. </span><span class="koboSpan" id="kobo.68.2">In the bridged configuration, all the containers running on a server belong to the same subnet and, as such, can communicate with each other. </span><span class="koboSpan" id="kobo.68.3">The containers are also connected to the external network by bridging the host system’s network connection. </span><span class="koboSpan" id="kobo.68.4">Similarly, the host can access the containers via a virtual network interface (usually named podman0) which will have been created as part of the container tool installation.</span></p>
<p class="Heading-1-1" id="_idParaDest-263" lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.69.1">29.6 </span></span><a id="_idTextAnchor447"/><span class="koboSpan" id="kobo.70.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US"><span class="koboSpan" id="kobo.71.1">Linux Containers offer a lightweight alternative to virtualization and take advantage of the structure of the Linux and Unix operating systems. </span><span class="koboSpan" id="kobo.71.2">Linux Containers share the host operating system’s kernel, with each container having its own root file system containing the files, libraries, and applications. </span><span class="koboSpan" id="kobo.71.3">As a result, containers are highly efficient and scalable and provide an ideal platform for building and deploying modular enterprise-level solutions. </span><span class="koboSpan" id="kobo.71.4">In addition, several tools and platforms are available for building, deploying, and managing containers, including third-party solutions and those provided with Ubuntu.</span></p>
</div>
</body></html>