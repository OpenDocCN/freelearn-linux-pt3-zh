<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer208">
<p class="Chapter-Title" id="_idParaDest-110" lang="en-US" xml:lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">12. </span></span><a id="_idTextAnchor216"/><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.2.1">Ubuntu Snap Package Management</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.3.1">The previous chapter explored the use of the Advanced Packaging Tool (APT) to install and update software packages on an Ubuntu system. </span><span class="koboSpan" id="kobo.3.2">In recent years a new package management system called Snap has been under development by the Ubuntu team at Canonical, Ltd. </span><span class="koboSpan" id="kobo.3.3">Although there are no official plans to replace APT entirely with Snap, the list of packages that can now be installed as “snaps” continues to grow.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.4.1">The goal of this chapter is to introduce the Snap system, highlight the key advantages it has over the APT system and to outline how to use the </span><a id="_idIndexMarker237"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.5.1">snap</span></span><span class="koboSpan" id="kobo.6.1"> command-line tool to install and manage snap -based software packages. </span></p>
<p class="Heading-1-1" id="_idParaDest-111" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.7.1">12.1 </span></span><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.8.1">Managing Software with Snap</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.9.1">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.10.1">apt</span></span><span class="koboSpan" id="kobo.11.1"> tool installs software that is packaged in </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.12.1">.deb</span></span><span class="koboSpan" id="kobo.13.1"> files.</span><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.14.1"> A package installed using apt will often be dependent upon other packages that will also need to be installed in order to function. </span><span class="koboSpan" id="kobo.14.2">During an installation, apt will also download and install these additional package dependencies. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.15.1">Consider a graphics design app which depends on a particular imaging library. </span><span class="koboSpan" id="kobo.15.2">During installation, apt will install the graphics app package in addition to the package containing the library on which it depends. </span><span class="koboSpan" id="kobo.15.3">Now, assume that the user decides to install a different graphics tool that also relies on the same graphics library. </span><span class="koboSpan" id="kobo.15.4">Usually this would not be a problem since the apps will both share the same library, but problems may occur if the two apps rely on different versions of the library. </span><span class="koboSpan" id="kobo.15.5">Installing the second app may, therefore, stop the first app from working correctly.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.16.1">Another limitation of apt and .deb packages is that it is difficult to have two different versions of the same tool or app installed in parallel on a system. </span><span class="koboSpan" id="kobo.16.2">A user might, for example, want to keep version 1.0 of the graphics app installed while also trying out the latest beta release of the 2.0 version. </span><span class="koboSpan" id="kobo.16.3">After trying out version 2.0, the user may then want to remove version 1.0, leaving the new version installed, a task that would be hard to achieve using apt.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.17.1">The snap system has been designed specifically to address these types of shortcomings. </span><span class="koboSpan" id="kobo.17.2">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.18.1">snap </span></span><span class="koboSpan" id="kobo.19.1">tool installs </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.20.1">.</span></span><span class="My-Italic CharOverride-1"><a id="_idIndexMarker238"/></span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.21.1">snap</span></span><span class="koboSpan" id="kobo.22.1"> packages that contain all of the libraries and assets that are required for the software to function. </span><span class="koboSpan" id="kobo.22.2">This avoids the need to install any dependencies as separate, independent packages. </span><span class="koboSpan" id="kobo.22.3">Once a snap has been installed it is placed in a self-contained location so that no dependencies are shared with other packages. </span><span class="koboSpan" id="kobo.22.4">Our hypothetical graphics apps, for example, each have their own copies of the exact imaging library version used by the app developer which cannot be deleted, replaced with an incompatible version or overwritten by any other package installations.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.23.1">Of course the use of snaps results in larger package files which leads to longer package download times, slower installation performance and increased disk space usage. </span><span class="koboSpan" id="kobo.23.2">That being said, these shortcomings are generally more than outweighed by the advantages of snap packages.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.24.1">Snap also supports the concept of </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.25.1">channels</span></span><span class="koboSpan" id="kobo.26.1"> which allow app developers to publish different versions of the same app. </span><span class="koboSpan" id="kobo.26.2">Snap channels are the mechanism by which multiple versions of the same software are able to be installed in parallel.</span></p>
<p class="Heading-1-1" id="_idParaDest-112" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.27.1">12.2 </span></span><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.28.1">Basic </span><a id="_idIndexMarker239"/><span class="koboSpan" id="kobo.29.1">Snap Commands</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.30.1">Although many software packages are still provided in .deb format and installed using apt, the number of apps and tools now provided in snap format is increasing rapidly. </span><span class="koboSpan" id="kobo.30.2">In fact, all of the software listed in the Ubuntu Software tool (outlined previously in the chapter entitled </span><a href=""><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.31.1">“A Guided Tour of the GNOME 3 Desktop”</span></span></a><span class="koboSpan" id="kobo.32.1">) are packaged and installed using snap. </span><span class="koboSpan" id="kobo.32.2">Snap-based software may also be installed using the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.33.1">snap</span></span><span class="koboSpan" id="kobo.34.1"> command-line tool, the basics of which will be covered in this section.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><a id="_idIndexMarker240"/><span class="koboSpan" id="kobo.35.1">To list the snap packages that are available for a specific category of software, run a command similar to the following:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.36.1"># snap find "image editor"</span></p>
<p class="Code"><span class="koboSpan" id="kobo.37.1">Name             Version               Publisher          Notes  Summary</span></p>
<p class="Code"><span class="koboSpan" id="kobo.38.1">gimp             2.10.18               snapcrafters       -      GNU Image Manipulation Program</span></p>
<p class="Code"><span class="koboSpan" id="kobo.39.1">paintsupreme-3d  1.0.41                braindistrict      -      PaintSupreme 3D</span></p>
<p class="Code"><span class="koboSpan" id="kobo.40.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.41.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.42.1">The above command will list all snap packages available for download and installation containing software related in some way to image editing. </span><span class="koboSpan" id="kobo.42.2">One such result will be the gimp image editor. </span><span class="koboSpan" id="kobo.42.3">Details about the gimp </span><a id="_idIndexMarker241"/><span class="koboSpan" id="kobo.43.1">snap can be found as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.44.1"># snap info gimp</span></p>
<p class="Code"><span class="koboSpan" id="kobo.45.1">name:      gimp</span></p>
<p class="Code"><span class="koboSpan" id="kobo.46.1">summary:   GNU Image Manipulation Program</span></p>
<p class="Code"><span class="koboSpan" id="kobo.47.1">publisher: Snapcrafters</span></p>
<p class="Code"><span class="koboSpan" id="kobo.48.1">store-url: https://snapcraft.io/gimp</span></p>
<p class="Code"><span class="koboSpan" id="kobo.49.1">contact:   https://github.com/snapcrafters/gimp/issues</span></p>
<p class="Code"><span class="koboSpan" id="kobo.50.1">license:   GPL-3.0+</span></p>
<p class="Code"><span class="koboSpan" id="kobo.51.1">description: |</span></p>
<p class="Code"><span class="koboSpan" id="kobo.52.1">  Whether you are a graphic designer, photographer, illustrator, or scientist, GIMP provides you</span></p>
<p class="Code"><span class="koboSpan" id="kobo.53.1">  with sophisticated tools to get your job done. </span><span class="koboSpan" id="kobo.53.2">You can further enhance your productivity with GIMP</span></p>
<p class="Code"><span class="koboSpan" id="kobo.54.1">  thanks to many customization options and 3rd party plugins.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.55.1">  </span></p>
<p class="Code"><span class="koboSpan" id="kobo.56.1">  This snap is maintained by the Snapcrafters community, and is not necessarily endorsed or</span></p>
<p class="Code"><span class="koboSpan" id="kobo.57.1">  officially maintained by the upstream developers.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.58.1">  </span></p>
<p class="Code"><span class="koboSpan" id="kobo.59.1">  Upstream Project: https://www.gimp.org/</span></p>
<p class="Code"><span class="koboSpan" id="kobo.60.1">  snapcraft.yaml Build Definition:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.61.1">  https://github.com/snapcrafters/gimp/blob/master/snap/snapcraft.yaml</span></p>
<p class="Code"><span class="koboSpan" id="kobo.62.1">snap-id: KDHYbyuzZukmLhiogKiUksByRhXD2gYV</span></p>
<p class="Code"><span class="koboSpan" id="kobo.63.1">channels:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.64.1">  latest/stable:     2.10.30 2022-08-19 (393) 546MB -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.65.1">  latest/candidate:  ↑                              </span></p>
<p class="Code"><span class="koboSpan" id="kobo.66.1">  latest/beta:       ↑                              </span></p>
<p class="Code"><span class="koboSpan" id="kobo.67.1">  latest/edge:       2.10.32 2022-08-23 (399) 547MB -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.68.1">  preview/stable:    –                              </span></p>
<p class="Code"><span class="koboSpan" id="kobo.69.1">  preview/candidate: –                              </span></p>
<p class="Code"><span class="koboSpan" id="kobo.70.1">  preview/beta:      –                              </span></p>
<p class="Code"><span class="koboSpan" id="kobo.71.1">  preview/edge:      2.99.10 2022-08-17 (397) 650MB - </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.72.1">The snap</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.73.1"> find</span></span><span class="koboSpan" id="kobo.74.1"> command can also be used to find a specific package by name, together with other packages that provide similar features. </span><span class="koboSpan" id="kobo.74.2">Searching for the VLC media player app, for example, also lists similar software packages:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.75.1"># snap find vlc</span></p>
<p class="Code"><span class="koboSpan" id="kobo.76.1">Name             Version                 Publisher     Notes  Summary</span></p>
<p class="Code"><span class="koboSpan" id="kobo.77.1">vlc              3.0.18                  videolan      -      The ultimate media player</span></p>
<p class="Code"><span class="koboSpan" id="kobo.78.1">orion-desktop    2.0.0                   keshavnrj     -      Complete torrent client and streamer for Linux Desktop</span></p>
<p class="Code"><span class="koboSpan" id="kobo.79.1">gridplayer       0.4.3                   vzhd1701      -      Play multiple videos side-by-side</span></p>
<p class="Code"><span class="koboSpan" id="kobo.80.1">mjpg-streamer    2.0                     ogra          -      UVC webcam streaming tool</span></p>
<p class="Code"><span class="koboSpan" id="kobo.81.1">audio-recorder   3.0.5+rev1432+pkg-7b07  brlin         -      A free audio-recorder for Linux (EXTREMELY BUGGY)</span></p>
<p class="Code"><span class="koboSpan" id="kobo.82.1">ustreamer        5.41                    pgentili      -      Lightweight and fast MJPEG-HTTP streamer</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.83.1">The </span><a id="_idIndexMarker242"/><span class="koboSpan" id="kobo.84.1">snap</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.85.1"> list </span></span><span class="koboSpan" id="kobo.86.1">command-line option can be used to obtain a list of snap packages that are already installed on a system:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.87.1"># snap list</span></p>
<p class="Code"><span class="koboSpan" id="kobo.88.1">Name                       Version           Rev    Tracking         Publisher   Notes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.89.1">bare                       1.0               5      latest/stable    canonical   base</span></p>
<p class="Code"><span class="koboSpan" id="kobo.90.1">canonical-livepatch        10.6.0            235    latest/stable    canonical  -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.91.1">core                       16-2.59.5         15511  latest/stable    canonical   core</span></p>
<p class="Code"><span class="koboSpan" id="kobo.92.1">core20                     20230622          1974   latest/stable    canonical   base</span></p>
<p class="Code"><span class="koboSpan" id="kobo.93.1">core22                     20230703          817    latest/stable    canonical base</span></p>
<p class="Code"><span class="koboSpan" id="kobo.94.1">firefox                    115.0-2           2850    latest/stable/…  mozilla    -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.95.1">gnome-3-38-2004            0+git.efb213a     143    latest/stable/…  canonical   -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.96.1">gnome-42-2204              0+git.ff35a85     120    latest/stable    canonical  - </span></p>
<p class="Code"><span class="koboSpan" id="kobo.97.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.98.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.99.1">To install a </span><a id="_idIndexMarker243"/><span class="koboSpan" id="kobo.100.1">snap package (for example, to install the Remmina remote desktop tool), run the snap command with the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.101.1">install</span></span><span class="koboSpan" id="kobo.102.1"> option followed by the name of the package to be installed:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.103.1"># snap install remmina</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.104.1">To remove a snap package, simply specify the package name when running </span><a id="_idIndexMarker244"/><span class="koboSpan" id="kobo.105.1">snap with the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.106.1">remove </span></span><span class="koboSpan" id="kobo.107.1">option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.108.1"># snap remove remmina</span></p>
<p class="Heading-1-1" id="_idParaDest-113" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.109.1">12.3 </span></span><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.110.1">Working with </span><a id="_idIndexMarker245"/><span class="koboSpan" id="kobo.111.1">Snap Channels</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.112.1">If no channel is specified when performing an installation, snap will default to the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.113.1">stable</span></span><span class="koboSpan" id="kobo.114.1"> channel. </span><span class="koboSpan" id="kobo.114.2">This ensures that the latest reliable version of the software is installed. </span><span class="koboSpan" id="kobo.114.3">To perform the installation from a different channel, begin by identifying the channels that are currently available for the required package using the snap </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.115.1">info</span></span><span class="koboSpan" id="kobo.116.1"> option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.117.1"># snap info remmina</span></p>
<p class="Code"><span class="koboSpan" id="kobo.118.1">name:      remmina</span></p>
<p class="Code"><span class="koboSpan" id="kobo.119.1">summary:   Remote Desktop Client</span></p>
<p class="Code"><span class="koboSpan" id="kobo.120.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.121.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.122.1">channels:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.123.1">  latest/stable:    v1.4.29                  2022-12-20 (5599) 146MB -</span></p>
<p class="Code"><span class="koboSpan" id="kobo.124.1">  latest/candidate: ↑                                                </span></p>
<p class="Code"><span class="koboSpan" id="kobo.125.1">  latest/beta:      ↑                                                </span></p>
<p class="Code"><span class="koboSpan" id="kobo.126.1">  latest/edge:      v1.4.31+git102.f5485fcfd 2023-07-17 (5925) 144MB -</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.127.1">From the above output we can see that while the stable version of the Remmina app is v1.4.3+git13.688f5f75 a more recent version is available in the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.128.1">edge </span></span><span class="koboSpan" id="kobo.129.1">channel. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.130.1">Of course the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.131.1">candidate</span></span><span class="koboSpan" id="kobo.132.1">, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.133.1">beta</span></span><span class="koboSpan" id="kobo.134.1"> and </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.135.1">edge</span></span><span class="koboSpan" id="kobo.136.1"> channels provide access to the software in increasingly unstable forms (referred to as </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.137.1">risk level</span></span><span class="koboSpan" id="kobo.138.1">), but if you would like to try out an early access version of upcoming features of a package, install from a higher risk channel. </span><span class="koboSpan" id="kobo.138.2">For example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.139.1"># snap install --channel=edge remmina</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.140.1">The channel selection may also be abbreviated to </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.141.1">--stable</span></span><span class="koboSpan" id="kobo.142.1">, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.143.1">--candidate</span></span><span class="koboSpan" id="kobo.144.1">, </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.145.1">--beta</span></span><span class="koboSpan" id="kobo.146.1"> or </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.147.1">--edge</span></span><span class="koboSpan" id="kobo.148.1">, for example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.149.1"># snap install --edge remmina</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.150.1">If the package is already installed, the risk level can be changed using the </span><a id="_idIndexMarker246"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.151.1">switch</span></span><span class="koboSpan" id="kobo.152.1"> option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.153.1"># snap switch channel=edge remmina</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.154.1">This will change the channel that snap is tracking for the specified package. </span><span class="koboSpan" id="kobo.154.2">The current channel being tracked for a package can be identified using the snap </span><a id="_idIndexMarker247"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.155.1">info</span></span><span class="koboSpan" id="kobo.156.1"> command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.157.1"># snap info remmina</span></p>
<p class="Code"><span class="koboSpan" id="kobo.158.1">name:      remmina</span></p>
<p class="Code"><span class="koboSpan" id="kobo.159.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.160.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.161.1">tracking:     latest/edge</span></p>
<p class="Code"><span class="koboSpan" id="kobo.162.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.163.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.164.1">Simply running a snap </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.165.1">switch</span></span><span class="koboSpan" id="kobo.166.1"> command will not immediately refresh the package to use the new channel. </span><span class="koboSpan" id="kobo.166.2">To understand how this works, it will help to explore the snap refresh schedule.</span></p>
<p class="Heading-1-1" id="_idParaDest-114" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.167.1">12.4 </span></span><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.168.1">Snap Refresh Schedule</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.169.1">The </span><a id="_idIndexMarker248"/><span class="koboSpan" id="kobo.170.1">snap system includes a background service named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.171.1">snapd</span></span><span class="koboSpan" id="kobo.172.1"> which is responsible for refreshing installed snaps based on the channels that they are tracking. </span><span class="koboSpan" id="kobo.172.2">By default, snapd performs refresh operations at regular intervals (typically four times a day). </span><span class="koboSpan" id="kobo.172.3">To identify when the last refresh was performed, and the next is due, run the following command:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.173.1"># snap refresh --time</span></p>
<p class="Code"><span class="koboSpan" id="kobo.174.1">timer: 00:00~24:00/4</span></p>
<p class="Code"><span class="koboSpan" id="kobo.175.1">last: today at 07:23 EDT</span></p>
<p class="Code"><span class="koboSpan" id="kobo.176.1">next: today at 14:25 EDT</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.177.1">The above output also includes timer information which indicates that the refresh will be performed four times within each 24-hour period:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.178.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.179.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.180.1">timer: 00:00~24:00/4</span></p>
<p class="Code"><span class="koboSpan" id="kobo.181.1">.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.182.1">.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.183.1">The snap command can also be used to force a refresh of all installed snap packages as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.184.1"># snap refresh</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.185.1">Alternatively, to refresh a specific package:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.186.1"># snap refresh remmina</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.187.1">To switch a package to a different channel without having to wait for the next snapd service refresh, simply run the snap refresh command as follows, specifying the target channel:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.188.1"># snap refresh remmina --channel=edge</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.189.1">The snap system also has a set of four properties that may be modified to adjust the refresh schedule used by snapd:</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.190.1">•</span></span><a id="_idIndexMarker249"/><a id="_idIndexMarker250"/><a id="_idIndexMarker251"/><a id="_idIndexMarker252"/><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.191.1">refresh.timer</span></span><span class="koboSpan" id="kobo.192.1">: Stores the current refresh schedule and frequency.</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.193.1">•</span></span><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.194.1">refresh.hold</span></span><span class="koboSpan" id="kobo.195.1">: Used to delay refresh operations until the specified day and time (in RFC 3339 format).</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.196.1">•</span></span><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.197.1">refresh.metered</span></span><span class="koboSpan" id="kobo.198.1">: Pauses refresh operations when network access is via a metered connection (such as a mobile data connection).</span></p>
<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3"><span class="koboSpan" id="kobo.199.1">•</span></span><span class="My-Bold _idGenCharOverride-1"><span class="koboSpan" id="kobo.200.1">refresh.retain</span></span><span class="koboSpan" id="kobo.201.1">: Used to configure the number of revisions of each snap installation that are to be retained.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.202.1">For example, to schedule the refresh to occur on weekdays between 1:00am and 2:00am:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.203.1"># </span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.204.1">snap set system refresh.timer=mon-fri,1:00-2:00</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1">Similarly, the following command will configure refreshes twice every day to occur between the hours of 6:00am and 7:00am, and 10:00pm and 11:00pm:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.206.1"># snap set system refresh.timer=6:00-7:00,22:00-23:00</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.207.1">A full explanation of the timer format and syntax can be found online at the following URL:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><a href="https://snapcraft.io/docs/timer-string-format"><span class="Hyperlink _idGenCharOverride-1"><span class="koboSpan" id="kobo.208.1">https://snapcraft.io/docs/timer-string-format</span></span></a></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.209.1">After making a change to the timer, be sure to check the settings as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.210.1"># snap refresh --time</span></p>
<p class="Code"><span class="koboSpan" id="kobo.211.1">timer: mon-fri,1:00-2:00</span></p>
<p class="Code"><span class="koboSpan" id="kobo.212.1">last: today at 07:23 EDT</span></p>
<p class="Code"><span class="koboSpan" id="kobo.213.1">next: tomorrow at 01:00 EDT</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1">To pause refreshes, the date and time at which refreshing is to resume must be specified using the </span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.215.1">RFC 3339 format, details of which can be found at the following URL:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><a href="https://tools.ietf.org/html/rfc3339"><span class="Hyperlink _idGenCharOverride-1"><span class="koboSpan" id="kobo.216.1">https://tools.ietf.org/html/rfc3339</span></span></a> </p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.217.1">In summary, the date and time should use the following format:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.218.1">YYYY-MM-DDTHH:MM.SS&lt;UTC offset&gt;</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.219.1">For example, to specify a hold until October 12, 2020 at 3:20am for a system located in New York, the date and time would be formatted as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.220.1">2020-10-12T03:20:50.0-05:00</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.221.1">Note that since New York uses Eastern Standard Time (EST) it has a -5 hour offset from Coordinated Universal Time (UTC-5:00). </span><span class="koboSpan" id="kobo.221.2">Having formatted the date and time, the following command would be used to set the hold:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.222.1"># snap set system refresh.hold="2020-10-12T03:20:50.0-05:00"</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.223.1">To check the current hold setting, use snap with the system </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.224.1">get</span></span><span class="koboSpan" id="kobo.225.1"> option:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.226.1"># snap get system refresh.hold</span></p>
<p class="Code"><span class="koboSpan" id="kobo.227.1">2020-10-12T03:20:50.0-04:00</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.228.1">To remove the hold, simply assign a null value to the property:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.229.1"># snap set system refresh.hold=null</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.230.1">The </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.231.1">refresh.retain</span></span><span class="koboSpan" id="kobo.232.1"> property can be set to any value between 0 and 20, for example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.233.1"># snap set system refresh.retain=10</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.234.1">Finally, to pause refresh updates while the system is on a metered connection, set the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.235.1">refresh.metered</span></span><span class="koboSpan" id="kobo.236.1"> property to </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.237.1">hold</span></span><span class="koboSpan" id="kobo.238.1"> as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.239.1"># snap set system refresh.metered=hold</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.240.1">As with the hold property, disable this setting by assigning a null value to the property:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.241.1"># snap set system refresh.metered=null</span></p>
<p class="Heading-1-1" id="_idParaDest-115" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.242.1">12.5 </span></span><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.243.1">Snap Services</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.244.1">It is worth noting that some snap packages include their own services, which run in the background when the package is installed (much like the systemd services described in the chapter entitled </span><a href=""><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.245.1">“Managing Ubuntu systemd Units”</span></span></a><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.246.1">)</span></span><span class="koboSpan" id="kobo.247.1">. </span><span class="koboSpan" id="kobo.247.2">To obtain a list of snap services that are currently running on a system, execute the </span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.248.1">snap command with the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.249.1">services</span></span><span class="koboSpan" id="kobo.250.1"> option: </span></p>
<p class="Code"><span class="koboSpan" id="kobo.251.1"># snap services</span></p>
<p class="Code"><span class="koboSpan" id="kobo.252.1">Service                                   Startup  Current  Notes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.253.1">remmina.ssh-agent                         enabled  active   -</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.254.1">The above output indicated that the Remmina Secure Shell agent snap service is currently enabled and active. </span><span class="koboSpan" id="kobo.254.2">To stop or stop a service the following </span><a id="_idIndexMarker256"/><a id="_idIndexMarker257"/><a id="_idIndexMarker258"/><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.255.1">snap commands can be used:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.256.1"># snap start remmina.ssh-agent</span></p>
<p class="Code"><span class="koboSpan" id="kobo.257.1"># snap stop remmina.ssh-agent</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.258.1">Similarly the snap </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.259.1">enable</span></span><span class="koboSpan" id="kobo.260.1"> and </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.261.1">disable</span></span><span class="koboSpan" id="kobo.262.1"> options may to used to control whether or not a service starts automatically on system startup:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.263.1"># snap enable remmina.ssh-agent</span></p>
<p class="Code"><span class="koboSpan" id="kobo.264.1"># snap disable remmina.ssh-agent</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.265.1">If the </span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.266.1">snap service generates a log file, that file can be viewed as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.267.1"># snap logs remmina.ssh-agent</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.268.1">It is also still possible to manage snap services using the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.269.1">systemctl </span></span><span class="koboSpan" id="kobo.270.1">command. </span><span class="koboSpan" id="kobo.270.2">This usually involves prefixing the service name with “snap.”. For example:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.271.1"># systemctl status snap.remmina.ssh-agent</span></p>
<p class="Heading-1-1" id="_idParaDest-116" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.272.1">12.6 </span></span><a id="_idTextAnchor224"/><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.273.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.274.1">Until recently, all Ubuntu software packages were stored in .deb files and installed using the Advanced Packaging Tool (APT). </span><span class="koboSpan" id="kobo.274.2">An increasing number of packages are now available for installation using Snap, a package management system developed by Canonical, Ltd. </span><span class="koboSpan" id="kobo.274.3">Unlike apt packages, snap bundles all of the dependencies for a package into a single .snap file. </span><span class="koboSpan" id="kobo.274.4">This ensures that the software package is self-contained with its own copy of all of the libraries and assets needed to run. </span><span class="koboSpan" id="kobo.274.5">This avoids the potential conflicts of packages relying on different versions of the same shared assets and libraries. </span><span class="koboSpan" id="kobo.274.6">The Snap system also allows different versions of the same packages to be installed in parallel. </span><span class="koboSpan" id="kobo.274.7">All of the software listed in the Ubuntu Software tool are supplied as snap packages. </span><span class="koboSpan" id="kobo.274.8">In addition, snap can be used to install, remove and manage packages from the command-line.</span></p>
</div>
</body></html>