<html><head></head><body>
		<div id="_idContainer084">
			<h1 id="_idParaDest-23" class="chapter-number"><a id="_idTextAnchor023"/>2</h1>
			<h1 id="_idParaDest-24"><a id="_idTextAnchor024"/>Linux User and Group Commands</h1>
			<p>As important as it is to choose the right distribution of Linux, it’s equally important to understand the key components of Linux system administration, including Linux user and group management. The Linux operating system allows administrators to create multiple users and assign different permissions and group policies, ensuring system security, stability, and resource allocation. In this chapter, we will dive into Linux user and group management and focus on the key commands and tools used by Linux system administrators to manage users <span class="No-Break">and groups.</span></p>
			<p>The history of Linux user and group commands dates back to the early days of the Unix operating system, where user and group management was a key aspect of system security and resource allocation. With the growth of the open source movement, Linux adopted these concepts and expanded upon them, allowing for granular control over user and group permissions, user authentication and access control, and more. Today, Linux user and group commands form a critical component of any Linux system, providing system administrators with the tools they need to manage users, assign permissions, and ensure secure access to sensitive resources <span class="No-Break">and data.</span></p>
			<p>In this chapter we are going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>useradd, userdel, <span class="No-Break">and usermod</span></li>
				<li>Files, directories, and <span class="No-Break">permission commands</span></li>
				<li>groupdel, groupmod, groupadd, <span class="No-Break">and grpck</span></li>
				<li>pwck, chage, and <span class="No-Break">passwd commands</span></li>
				<li>find, locate, and <span class="No-Break">whereis commands</span></li>
			</ul>
			<h1 id="_idParaDest-25"><a id="_idTextAnchor025"/>useradd, userdel, and usermod</h1>
			<p>In a Linux system, it is<a id="_idIndexMarker109"/> important to <a id="_idIndexMarker110"/>manage users and groups to ensure security and access<a id="_idIndexMarker111"/> control. The <strong class="source-inline">useradd</strong>, <strong class="source-inline">userdel</strong>, and <strong class="source-inline">usermod</strong> commands are fundamental tools for creating, deleting, and modifying users on a Linux system. These commands allow administrators to create user accounts, assign permissions, and limit access to resources. Understanding how to use these commands is essential for managing users on a Linux system. Whether you are setting up a single-user system or an enterprise-level environment, the <strong class="source-inline">useradd</strong>, <strong class="source-inline">userdel</strong>, and <strong class="source-inline">usermod</strong> commands are indispensable tools for Linux administrators. We will explore these commands in detail, including their usage, options, and examples, to give you a comprehensive understanding of user management on a <span class="No-Break">Linux system.</span></p>
			<p>These tools—<strong class="source-inline">useradd</strong>, <strong class="source-inline">userdel</strong>, and <strong class="source-inline">usermod</strong>—are<a id="_idIndexMarker112"/> part of the Shadow Password Suite, which<a id="_idIndexMarker113"/> is commonly used on Linux systems to manage user accounts. It is essential to understand how to use these tools properly to ensure the security and stability of a Linux system. While these tools are primarily used on Linux systems, they can also be used on other <span class="No-Break">Unix-like systems.</span></p>
			<p>We will cover their usage in detail, including the options and syntax for each command. We will also discuss best practices for managing user accounts on a Linux system, such as creating a standard user account and using <strong class="source-inline">sudo</strong> for administrative tasks. Now, let’s dive into these commands in the <span class="No-Break">following subsections.</span></p>
			<h2 id="_idParaDest-26">us<a id="_idTextAnchor026"/>eradd</h2>
			<p>The <strong class="source-inline">useradd</strong> command in <a id="_idIndexMarker114"/>Linux is used to create a new user account or update an existing one. It is a powerful tool that can be used to manage user accounts in a variety of ways, from assigning a home directory and shell to setting the user’s password and expiration date. When creating a new user account, <strong class="source-inline">useradd</strong> requires several pieces of information to be <a id="_idIndexMarker115"/>provided, such as the username, the <strong class="bold">user ID</strong> (<strong class="bold">UID</strong>), and the <strong class="bold">group ID</strong> (<strong class="bold">GID</strong>). The <a id="_idIndexMarker116"/>UID is a unique number assigned to the user, while the GID is the primary group that the user belongs to. These values are used by the system to identify and manage user accounts. In addition to the required information, there are several optional flags that can be used with <strong class="source-inline">useradd</strong> to customize the user account. For example, the <strong class="source-inline">-m</strong> flag can <a id="_idTextAnchor027"/>be used to create a home directory for the user, while the <strong class="source-inline">-s</strong> flag specifies the default shell for the user. The <strong class="source-inline">-c</strong> flag can be used to add a comment or description to the user account, which can be helpful in identifying the purpose of the account. Once the user account has been created, it can be modified using the <strong class="source-inline">usermod</strong> command. This command is used to modify the user’s account information, such as their password or expiration date. It can also be used to add or remove the user from groups, change the user’s default shell, and much more. The basic syntax of the <strong class="source-inline">useradd</strong> command is as follows (note that you will need <strong class="source-inline">sudo</strong> access to successfully run <span class="No-Break">the command):</span></p>
			<pre class="source-code">
<strong class="bold">sudo "useradd [options] username"</strong></pre>			<p>The following figure shows<a id="_idIndexMarker117"/> more details on the usage and options for the <span class="No-Break"><strong class="source-inline">useradd</strong></span><span class="No-Break"> command:</span></p>
			<div>
				<div id="_idContainer052" class="IMG---Figure">
					<img src="image/B18212_02_1.jpg" alt="Figure 2.1 – useradd usage and options"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1 – useradd usage and options</p>
			<p>To create a new user account named <strong class="source-inline">tester1</strong> and a corresponding home directory, as well as displaying the UID, use the <span class="No-Break">following command:</span></p>
			<div>
				<div id="_idContainer053" class="IMG---Figure">
					<img src="image/B18212_02_2.jpg" alt="Figure 2.2 – Creating a user and a home directory for the user"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2 – Creating a user and a home directory for the user</p>
			<p>The <strong class="source-inline">-m</strong> option tells the system to create the home directory, which is where the user will store their files and settings. The purpose of creating a home directory for a new user is to ensure that they have their own space on the system to work in and allow them to store files and customize their environment without affecting other users. Additionally, it provides a place for the user to store configuration files and other settings that are specific to <span class="No-Break">their account.</span></p>
			<p>We also introduced another command, <strong class="source-inline">id</strong>, in the process of creating a <span class="No-Break">new user.</span></p>
			<p>The <strong class="source-inline">id</strong> command from the <a id="_idIndexMarker118"/>preceding example is a Linux/Unix command that is used to display the UID and GID of our <strong class="source-inline">tester1</strong> user account. When used with a specific username as an argument, such as <strong class="source-inline">id username</strong>, the <strong class="source-inline">id instructor</strong> command will display output similar to the following if the <strong class="source-inline">instructor</strong> user exists on <span class="No-Break">the system:</span></p>
			<div>
				<div id="_idContainer054" class="IMG---Figure">
					<img src="image/B18212_02_3.jpg" alt="Figure 2.3 – Displaying the ﻿ID"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3 – Displaying the ID</p>
			<p>We can also check the existence of this user in the <strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">etc/passwd</strong></span><span class="No-Break"> file:</span></p>
			<pre class="console">
instructor:x:1000:1000:instructor:/home/instructor:/bin/bash
tester1:x:1001:1001::/home/tester1:/bin/bash</pre>			<p>The following screenshot shows <span class="No-Break">the result:</span></p>
			<div>
				<div id="_idContainer055" class="IMG---Figure">
					<img src="image/B18212_02_4.jpg" alt="Figure 2.4 – Evidence of the existence of the users"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4 – Evidence of the existence of the users</p>
			<p>The following are the details of the user information in the <span class="No-Break">preceding figure:</span></p>
			<ul>
				<li><span class="No-Break"><strong class="source-inline">tester1</strong></span><span class="No-Break">: Username</span></li>
				<li><span class="No-Break"><strong class="source-inline">1001</strong></span><span class="No-Break">: UID</span></li>
				<li><span class="No-Break"><strong class="source-inline">1001</strong></span><span class="No-Break">: GID</span></li>
				<li><strong class="source-inline">/home/tester1</strong>: User’s <span class="No-Break">home directory</span></li>
				<li><strong class="source-inline">/bin/bash</strong>: <span class="No-Break">Login shell</span></li>
				<li><strong class="source-inline">:</strong>: <span class="No-Break">Separator</span></li>
				<li><strong class="source-inline">::</strong>: A password-less <span class="No-Break">user account</span></li>
				<li><strong class="source-inline">x</strong>: The stored password in the <strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">etc/shadow</strong></span><span class="No-Break"> file</span></li>
			</ul>
			<h2 id="_idParaDest-27"><a id="_idTextAnchor028"/>userdel</h2>
			<p><strong class="source-inline">userdel</strong> is a Linux command used to delete a user account and its associated files and directories. It’s important to<a id="_idIndexMarker119"/> note that when a user account is deleted using <strong class="source-inline">userdel</strong>, all the files and directories under the user’s home directory are also deleted. Therefore, <strong class="source-inline">userdel</strong> should be used with caution to avoid the accidental deletion of important files. The command requires root privileges, and the syntax is <strong class="source-inline">userdel [options] username</strong>. The most commonly used option is <strong class="source-inline">-r</strong>, which removes the home directory and mail spool of the deleted user. When deleting a user with <strong class="source-inline">userdel</strong>, it’s important to make sure that the user account is no longer needed. It’s also important to consider the impact that deleting the user account will have on any applications or services that rely on the user account. This is especially true if the user account is used for system administration or runs any critical services. In such cases, it’s important to create a backup or a copy of the user’s files and directories before deleting <span class="No-Break">the account.</span></p>
			<p>Another consideration when using <strong class="source-inline">userdel</strong> is that it only deletes the user account from the system’s user database. Any processes that were started by the user before the account was deleted will continue to run until they are finished or manually stopped. It’s also possible that some system files or configuration files might still reference the deleted user, which could cause issues in <span class="No-Break">the future.</span></p>
			<p>The following screenshot shows the usage and options of the <span class="No-Break"><strong class="source-inline">userdel</strong></span><span class="No-Break"> command:</span></p>
			<div>
				<div id="_idContainer056" class="IMG---Figure">
					<img src="image/B18212_02_5.jpg" alt="Figure 2.5 – userdel usage and options"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.5 – userdel usage and options</p>
			<p>To delete the <strong class="source-inline">tester2</strong> user, you would run the <span class="No-Break">following command:</span></p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/B18212_02_6.jpg" alt="Figure 2.6 – Deleting the user account"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.6 – Deleting the user account</p>
			<p>As we observe the deletion of the <strong class="source-inline">tester2</strong> entry from the <strong class="source-inline">/etc/passwd</strong> file, we can also confirm<a id="_idIndexMarker120"/> whether the <strong class="source-inline">tester2</strong> user’s home directory is <span class="No-Break">still accessible:</span></p>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/B18212_02_7.jpg" alt="Figure 2.7 – Switching to the user’s home directory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.7 – Switching to the user’s home directory</p>
			<p>When you run the <strong class="source-inline">userdel</strong> command, it removes the user’s entry in the <strong class="source-inline">/etc/passwd</strong> file and the user’s group, but it does not remove the user’s home directory, <strong class="source-inline">/home/tester2</strong>. To remove a user and their home directory simultaneously, execute the <strong class="source-inline">userdel</strong> command followed by the <strong class="source-inline">-r</strong> option. Attempting to switch to the deleted user’s home directory will not be successful, as it has been removed. This can be verified by the <span class="No-Break">following example:</span></p>
			<div>
				<div id="_idContainer059" class="IMG---Figure">
					<img src="image/B18212_02_8.jpg" alt="Figure 2.8 – Deleting the user and the home directory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.8 – Deleting the user and the home directory</p>
			<p>Here are the steps <span class="No-Break">we took:</span></p>
			<ol>
				<li>Deleted the user and the home directory using the <strong class="source-inline">-</strong><span class="No-Break"><strong class="source-inline">r</strong></span><span class="No-Break"> flag</span></li>
				<li>Verified whether we could do a switch to the user <span class="No-Break">for confirmation</span></li>
				<li>Checked whether we could switch to that user’s <span class="No-Break">home directory</span></li>
			</ol>
			<p>Overall, <strong class="source-inline">userdel</strong> is a powerful command that should be used with caution. It’s important to ensure that the user account being deleted is no longer needed and that all necessary backups and <a id="_idIndexMarker121"/>precautions have been taken to avoid data loss or <span class="No-Break">system issues.</span></p>
			<h2 id="_idParaDest-28"><a id="_idTextAnchor029"/>usermod</h2>
			<p>The <strong class="source-inline">usermod</strong> command is a powerful Linux administration tool that allows system administrators to modify user<a id="_idIndexMarker122"/> account information. This includes changes to the user’s home directory, login shell, UID, GID, and other account properties. Additionally, <strong class="source-inline">usermod</strong> can be used to add or remove user groups, set password-aging policies, and more. This tool helps system administrators to manage user accounts on a Linux <span class="No-Break">system effectively.</span></p>
			<p>To use <strong class="source-inline">usermod</strong>, the command is followed by options that specify the changes to be made. For example, to add a user to a specific group, the <strong class="source-inline">-aG</strong> option is used, followed by the group name. Similarly, to change the user’s home directory, the <strong class="source-inline">-d</strong> option is used, followed by the new directory path. When making changes to a user’s account, it is important to consider the impact that the changes will have on the system and <span class="No-Break">other users.</span></p>
			<p><strong class="source-inline">usermod</strong> also has a useful feature that allows for the modification of multiple user accounts at once using a script or a list of usernames. This feature saves time and effort when making changes to a large number of user accounts. However, it is important to use <strong class="source-inline">usermod</strong> with caution, as improper use of the command can result in unintended consequences or even system damage. We’ll take a look at execution examples <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">usermod</strong></span><span class="No-Break">:</span></p>
			<ul>
				<li><strong class="bold">Adding a user to a group</strong>: Let’s say you want to add a user named <strong class="source-inline">tester1</strong> to the <strong class="source-inline">developers</strong> group and verify that the user has been added to the group. You can use the <span class="No-Break">following command:</span></li>
			</ul>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/B18212_02_9.jpg" alt="Figure 2.9 – Adding a user to a group"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.9 – Adding a user to a group</p>
			<ul>
				<li><strong class="bold">Changing the home directory of a user</strong>: Suppose you want to change the home directory of a user named <strong class="source-inline">tester1</strong> to <strong class="source-inline">/home/tester1_new</strong>. You can use the <span class="No-Break">following command:</span></li>
			</ul>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/B18212_02_10.jpg" alt="Figure 2.10 – Changing the user’s home directory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.10 – Changing the user’s home directory</p>
			<ul>
				<li><strong class="bold">Lock/unlock a user account</strong>: If you want to lock/unlock the account of a user named <strong class="source-inline">tester1</strong>, you can use the <span class="No-Break">following command:</span></li>
			</ul>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/B18212_02_11.jpg" alt="Figure 2.11 – Locking a user"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.11 – Locking a user</p>
			<p class="list-inset">The exclamation<a id="_idIndexMarker123"/> mark indicates that the <strong class="source-inline">tester1</strong> account is locked. If the account is not locked, the second field will contain the password hash for the <span class="No-Break">user’s password.</span></p>
			<p class="list-inset">Now let’s unlock the <span class="No-Break"><strong class="source-inline">tester1</strong></span><span class="No-Break"> user:</span></p>
			<div>
				<div id="_idContainer063" class="IMG---Figure">
					<img src="image/B18212_02_12.jpg" alt="Figure 2.12 – Unlocking a user"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.12 – Unlocking a user</p>
			<ul>
				<li><strong class="bold">Changing the UID and GID of a user</strong>: Let’s say you want to change the UID of a user named <strong class="source-inline">tester1</strong> to <strong class="source-inline">1001</strong> and the GID to <strong class="source-inline">1002</strong>. You can use the <span class="No-Break">following command:</span></li>
			</ul>
			<div>
				<div id="_idContainer064" class="IMG---Figure">
					<img src="image/B18212_02_13.jpg" alt="Figure 2.13 – Changing a user’s UID and GID"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.13 – Changing a user’s UID and GID</p>
			<p class="list-inset">This will change the<a id="_idIndexMarker124"/> UID of the user <strong class="source-inline">tester1</strong> to <strong class="source-inline">1001</strong> and the GID <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">1002</strong></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-29"><a id="_idTextAnchor030"/>Files, directories, and permission commands</h1>
			<p>Files and directories are organized in a hierarchical structure, with the <strong class="source-inline">root</strong> directory as the top-most level. Each file and directory has a set of permissions that determine who can read, write, or execute it. The file permissions are divided into three categories—user, group, <span class="No-Break">and others:</span></p>
			<ul>
				<li><strong class="bold">user</strong>: This refers to the<a id="_idIndexMarker125"/> owner of <span class="No-Break">the file</span></li>
				<li><strong class="bold">group</strong>:  This refers to a group of users<a id="_idIndexMarker126"/> assigned to the file (<span class="No-Break">e.g., developers)</span></li>
				<li><strong class="bold">others</strong>: This refers to anyone<a id="_idIndexMarker127"/> else who is not the owner or part of the <span class="No-Break">assigned group</span></li>
			</ul>
			<p>Let’s take a look at the <span class="No-Break">hierarchical structure:</span></p>
			<div>
				<div id="_idContainer065" class="IMG---Figure">
					<img src="image/B18212_02_14.jpg" alt="Figure 2.14 – Linux files and directory hierarchical structure"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.14 – Linux files and directory hierarchical structure</p>
			<p>To manage file and directory permissions in Linux, there are several command line tools available. Some of the commonly used commands include <strong class="source-inline">chmod</strong>, <strong class="source-inline">chown</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">chgrp</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-30"><a id="_idTextAnchor031"/>chmod</h2>
			<p>The <strong class="source-inline">chmod</strong> command is used to <a id="_idIndexMarker128"/>change the permissions of a file or directory. To recursively change the permissions of all files and subdirectories within a directory, we can use the <strong class="source-inline">-R</strong> flag of the <strong class="source-inline">chmod</strong> command. This flag is essential for applying permissions changes to all contents within <span class="No-Break">a directory.</span></p>
			<p>However, the suggested text after that doesn’t seem to directly address the significance of the <strong class="source-inline">700</strong> <span class="No-Break">permission setting.</span></p>
			<p>For example, in the following screenshot, <strong class="source-inline">700</strong> signifies that the owner of the <strong class="source-inline">Confidential_files </strong>directory has <strong class="bold">read, write, and execute</strong> (<strong class="bold">RWX</strong>) permissions (<strong class="source-inline">7</strong>), while the group and others have no <a id="_idIndexMarker129"/>permissions (<strong class="source-inline">0</strong>). This configuration ensures that only the owner can access, modify, or execute files within the directory, providing a high level of security for <span class="No-Break">sensitive information:</span></p>
			<div>
				<div id="_idContainer066" class="IMG---Figure">
					<img src="image/B18212_02_15.jpg" alt="Figure 2.15 – Granting the owner RWX permissions"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.15 – Granting the owner RWX permissions</p>
			<h2 id="_idParaDest-31"><a id="_idTextAnchor032"/>chown</h2>
			<p>The <strong class="source-inline">chown</strong> command is used to change the owner <a id="_idIndexMarker130"/>and group of a given file or directory. To change the owner and group of a directory, we must pass both arguments separated by the <strong class="source-inline">:</strong> sign. Just like the <strong class="source-inline">chmod</strong> command, you can replicate the new settings recursively by adding <strong class="source-inline">-R</strong> to <span class="No-Break">the command:</span></p>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/B18212_02_16.jpg" alt="Figure 2.16 – Changing the owner and group of a directory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.16 – Changing the owner and group of a directory</p>
			<p>This command changes the owner and group of the directory located at <strong class="source-inline">/home/instructor/Documents/office-docs/</strong> along with all its content recursively. The <strong class="source-inline">-R</strong> option <a id="_idIndexMarker131"/>stands <span class="No-Break">for </span><span class="No-Break"><strong class="bold">recursive</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-32"><a id="_idTextAnchor033"/>chgrp</h2>
			<p><strong class="source-inline">chgrp</strong> is used to change<a id="_idIndexMarker132"/> the group of a file or directory without touching the owner’s permission. To change the group ownership of a directory named <strong class="source-inline">project-001</strong> and all of its contents to a group named <strong class="source-inline">developers</strong>, use the <span class="No-Break">following command:</span></p>
			<div>
				<div id="_idContainer068" class="IMG---Figure">
					<img src="image/B18212_02_17.jpg" alt="Figure 2.17 – Changing the group ownership of a directory"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.17 – Changing the group ownership of a directory</p>
			<p>Security is also an essential aspect of file and directory management in Linux. System administrators must ensure that files and directories are secured and only accessible to authorized users. This can<a id="_idIndexMarker133"/> be achieved by implementing access control measures such as using strong passwords and configuring user access <span class="No-Break">permissions appropriately.</span></p>
			<h1 id="_idParaDest-33"><a id="_idTextAnchor034"/>groupdel, groupmod, groupadd, and grpck</h1>
			<p>Group management is an important aspect of Linux system administration. Groups are used to organize users and define their access privileges to files and directories on the system. The four main commands<a id="_idIndexMarker134"/> used for group management are <strong class="source-inline">groupadd</strong>, <strong class="source-inline">groupmod</strong>, <strong class="source-inline">grpck</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">groupdel</strong></span><span class="No-Break">.</span></p>
			<p><strong class="source-inline">groupadd</strong> is used to create a<a id="_idIndexMarker135"/> new group on the system. To use this command, type <strong class="source-inline">groupadd</strong> followed by the desired options and the new group name. For example, to create a new group called <strong class="source-inline">DevSec-group</strong>, the command would be <span class="No-Break"><strong class="source-inline">groupadd DevSec-group</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer069" class="IMG---Figure">
					<img src="image/B18212_02_18.jpg" alt="Figure 2.18 – Adding a new group"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.18 – Adding a new group</p>
			<p>This command will create a new group with the default settings, including a <span class="No-Break">new GID.</span></p>
			<p>Now that we’ve created our groups, let’s <a id="_idIndexMarker136"/>do some modifications such as changing its membership using the <strong class="source-inline">groupmod</strong> command. This is a command used to modify an existing group on the system. This command can be used to change the group’s name, GID, or membership. To modify a group, type <strong class="source-inline">groupmod</strong> followed by the desired options and the group name. For example, to change the name of the group <strong class="source-inline">DevSec-group</strong> to <strong class="source-inline">DevSec-group-new</strong>, the command would be <strong class="source-inline">groupmod -n </strong><span class="No-Break"><strong class="source-inline">DevSec-group-new DevSec-group</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer070" class="IMG---Figure">
					<img src="image/B18212_02_19.jpg" alt="Figure 2.19 – Modifying an existing group"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.19 – Modifying an existing group</p>
			<p>Our next command is <strong class="source-inline">grpck</strong>, which is <a id="_idIndexMarker137"/>used to check the integrity of the group files on the system. This command will check the group file (<strong class="source-inline">/etc/group</strong>) and make sure that all groups listed in the file have valid entries in the password file (<strong class="source-inline">/etc/passwd</strong>). To use this command, simply type <strong class="source-inline">grpck -</strong><span class="No-Break"><strong class="source-inline">r /etc/passwd</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer071" class="IMG---Figure">
					<img src="image/B18212_02_20.jpg" alt="Figure 2.20 – Checking the integrity of the /etc/passwd file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.20 – Checking the integrity of the /etc/passwd file</p>
			<p>Lastly, the <strong class="source-inline">groupdel</strong> command is <a id="_idIndexMarker138"/>used to delete a group from the system. To use this command, simply type <strong class="source-inline">groupdel</strong> followed by the group name. For example, to delete a group called <strong class="source-inline">DevSec-group-new</strong>, the command would be <strong class="source-inline">groupdel -</strong><span class="No-Break"><strong class="source-inline">f DevSec-group-new</strong></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer072" class="IMG---Figure">
					<img src="image/B18212_02_21.jpg" alt="Figure 2.21 – Deleting a group"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.21 – Deleting a group</p>
			<p>This command will remove the group from the system. The <strong class="source-inline">-f</strong> option is used to force the deletion of the group, along with any users who were assigned to <span class="No-Break">that group.</span></p>
			<p>Overall, group management is a critical aspect of Linux system administration. Proper management of groups can ensure the security and accessibility of files and directories on the system. The four main commands used for group management, <strong class="source-inline">groupdel</strong>, <strong class="source-inline">groupmod</strong>, <strong class="source-inline">groupadd</strong>, and <strong class="source-inline">grpck</strong>, provide system administrators with the necessary tools to effectively manage groups on a <span class="No-Break">Linux system.</span></p>
			<h1 id="_idParaDest-34"><a id="_idTextAnchor035"/>pwck, chage, and passwd commands</h1>
			<p>The <strong class="source-inline">pwck</strong> command is <a id="_idIndexMarker139"/>a Linux system administration tool that is used to verify the consistency of the <strong class="source-inline">passwd</strong>, <strong class="source-inline">shadow</strong>, and <strong class="source-inline">group</strong> files. The purpose of the command is to ensure that the user accounts and groups listed in these files are valid and to detect any inconsistencies between them. It is useful in maintaining the integrity and security of a <a id="_idIndexMarker140"/>Linux system, as it can help to identify and correct errors that may arise due to manual edits of these files. For example, if a user account exists in the <strong class="source-inline">passwd</strong> file but not in the <strong class="source-inline">shadow</strong> file, <strong class="source-inline">pwck</strong> will detect this and prompt the user to fix the inconsistency. Let’s take a look at some examples using <span class="No-Break">this tool:</span></p>
			<ul>
				<li>Verify the consistency of the <strong class="source-inline">passwd</strong> file with <strong class="source-inline">sudo </strong><span class="No-Break"><strong class="source-inline">pwck /etc/passwd</strong></span><span class="No-Break">.</span><p class="list-inset">The following output from the <strong class="source-inline">pwck</strong> command checks the consistency of the <strong class="source-inline">/etc/passwd</strong> file on our <span class="No-Break">Linux system:</span></p></li>
			</ul>
			<div>
				<div id="_idContainer073" class="IMG---Figure">
					<img src="image/B18212_02_22.jpg" alt="Figure 2.22 – Checking the consistency of the /etc/passwd file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.22 – Checking the consistency of the /etc/passwd file</p>
			<ul>
				<li>Check the consistency of the <span class="No-Break"><strong class="source-inline">shadow</strong></span><span class="No-Break"> file:</span></li>
			</ul>
			<div>
				<div id="_idContainer074" class="IMG---Figure">
					<img src="image/B18212_02_23.jpg" alt="Figure 2.23 – Checking the consistency of /etc/shadow file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.23 – Checking the consistency of /etc/shadow file</p>
			<p>The <strong class="source-inline">invalid password file entry</strong> message for the <strong class="source-inline">instructor</strong> user suggests deleting the invalid line for the <strong class="source-inline">instructor</strong> user account. However, we can keep the <strong class="source-inline">instructor</strong> user and<a id="_idIndexMarker141"/> resolve the error without deleting the invalid line by correcting it to ensure that it is <span class="No-Break">properly formatted.</span></p>
			<p>First, open the <strong class="source-inline">/etc/shadow</strong> file with the <strong class="source-inline">vipw</strong> command to edit the <strong class="source-inline">/etc/passwd</strong> and <strong class="source-inline">/etc/shadow</strong> files, or their respective shadow versions (<strong class="source-inline">/etc/gshadow</strong> and <strong class="source-inline">/etc/gshadow</strong>), with <strong class="source-inline">vigr</strong>. Locate the line that corresponds to the <strong class="source-inline">instructor</strong> user or any user you created and correct any <span class="No-Break">syntax errors.</span></p>
			<p>Using <strong class="source-inline">vipw</strong> and <strong class="source-inline">vigr</strong> is the recommended and safer approach to editing these critical system files, as these commands are specifically designed for this purpose and set appropriate locks to prevent <span class="No-Break">file corruption.</span></p>
			<p>The line should contain nine fields separated by colons (<strong class="source-inline">:</strong>). We’ll fix this error using our next command. Overall, the purpose of the <strong class="source-inline">pwck</strong> command is to ensure that the user and group information stored on a Linux system is accurate <span class="No-Break">and consistent:</span></p>
			<pre class="source-code">
username:password:lastpasswordchanged:minpasswordage:maxpasswordage:passwordwarningperiod:inactivityperiod:expirationdate:reservedfield</pre>			<p>The <strong class="source-inline">chage</strong> command is a Linux<a id="_idIndexMarker142"/> system administration tool that is used to change the aging and expiration policy of a user’s password. The purpose of the command is to enforce password policies and increase the security of a system by setting limits on the age of a password, the time between password changes, and the maximum number of failed logins attempts before a user is locked out. This helps to ensure that passwords are changed regularly and that users are prompted to create strong and secure passwords. Now, let’s use this command to correct <span class="No-Break">our error.</span></p>
			<p>We’ll use the <strong class="source-inline">chage -d 2023-12-1 instructor</strong> command to set the date of the last password change for the <strong class="source-inline">instructor</strong> user to December 1st, 2023. The <strong class="source-inline">-d</strong> option in the <strong class="source-inline">chage</strong> command is used to set the date of the last password change. By default, the last password change date is set to the current date, but using the <strong class="source-inline">-d</strong> option allows you (the admin) to set it to a specific date. In this case, the date is set to December <span class="No-Break">1st, 2023.</span></p>
			<p><strong class="source-inline">chage -E 2023-12-31 instructor</strong> is used to set the account expiration date for a specific user. The <strong class="source-inline">-E</strong> option is used to specify the expiration date, and the <strong class="source-inline">2023-12-31</strong> argument is the date when the account will expire. The <strong class="source-inline">instructor</strong> parameter at the end of the command is the username of the account that we want to set the expiration <span class="No-Break">date for.</span></p>
			<p>The <strong class="source-inline">chage -l instructor</strong> command shows the password aging information for the user account <span class="No-Break">named </span><span class="No-Break"><strong class="source-inline">instructor</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer075" class="IMG---Figure">
					<img src="image/B18212_02_24.jpg" alt="Figure 2.24 – Using chage"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.24 – Using chage</p>
			<p>It displays the <span class="No-Break">following information:</span></p>
			<ul>
				<li><strong class="bold">Last password change date</strong>: This shows the date when the password for the account was <span class="No-Break">last changed</span></li>
				<li><strong class="bold">Password expiration date</strong>: This shows the date when the current password <span class="No-Break">will expire</span></li>
				<li><strong class="bold">Password inactive date</strong>: This shows the date when the password will be disabled and the account will no longer <span class="No-Break">be accessible</span></li>
				<li><strong class="bold">Account expiration date</strong>: This shows the date when the account will expire and <span class="No-Break">be disabled</span></li>
				<li><strong class="bold">Minimum password age</strong>: This shows the minimum number of days that must pass before the password can <span class="No-Break">be changed</span></li>
				<li><strong class="bold">Maximum password age</strong>: This shows the maximum number of days that the password can be used before it must <span class="No-Break">be changed</span></li>
				<li><strong class="bold">Password warning period</strong>: This is the number of days before the password expiration date that a warning is given to <span class="No-Break">the user</span></li>
			</ul>
			<p><strong class="source-inline">chage</strong> is a very powerful <a id="_idIndexMarker143"/>command that’s useful for every system administrator who wants to improve the security of their systems by enforcing strong <span class="No-Break">password policies.</span></p>
			<p>The <strong class="source-inline">passwd</strong> command, on the <a id="_idIndexMarker144"/>other hand, is used to manage user passwords, allowing users to change their own password, while administrators can use it to change the password of another user. Its purpose is to ensure that user passwords are secure and that the password policies are enforced. The following are <span class="No-Break">some examples:</span></p>
			<ul>
				<li>Configure <span class="No-Break">password policies.</span><p class="list-inset">The <strong class="source-inline">/etc/security/pwquality.conf</strong> file is used to configure password quality-checking policies. It defines rules and settings that control the complexity and strength of user passwords. This file is used by the <strong class="bold">pluggable authentication module</strong> (<strong class="bold">PAM</strong>) system to <a id="_idIndexMarker145"/>enforce password policies on the system, such as minimum length, complexity requirements, and reuse prevention. Administrators can edit this file to customize password policy settings to align with their <span class="No-Break">security requirements.</span></p><p class="list-inset">As the admin with <strong class="source-inline">sudo</strong> privileges, you can locate and edit the <strong class="source-inline">/etc/security/pwquality.conf</strong> file using the Vim editor. Here are the specific requirements for password quality configuration you need <span class="No-Break">to follow:</span></p><ul><li><strong class="source-inline">minlen</strong> = <strong class="source-inline">8</strong> or <strong class="source-inline">16</strong> (for the sake of this example we <span class="No-Break">selected </span><span class="No-Break"><strong class="source-inline">8</strong></span><span class="No-Break">)</span></li><li><strong class="source-inline">minclass</strong> = <strong class="source-inline">3</strong></li><li><strong class="source-inline">maxrepeat</strong> = <strong class="source-inline">2</strong></li><li><strong class="source-inline">minsequence</strong> = <strong class="source-inline">4</strong></li><li><strong class="source-inline">maxclassrepeat</strong> = <strong class="source-inline">4</strong></li><li><strong class="source-inline">reject_username</strong> = <span class="No-Break"><strong class="source-inline">true</strong></span></li></ul></li>
			</ul>
			<div>
				<div id="_idContainer076" class="IMG---Figure">
					<img src="image/B18212_02_25.jpg" alt="Figure 2.25 – Editing /etc/security/pwquality.conf"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.25 – Editing /etc/security/pwquality.conf</p>
			<p class="list-inset">Here’s a brief summary <a id="_idIndexMarker146"/>of the <span class="No-Break">configuration parameters:</span></p>
			<ul>
				<li><strong class="source-inline">minlen</strong>: This specifies the minimum length of a password (<span class="No-Break">eight characters)</span></li>
				<li><strong class="source-inline">minclass</strong>: This sets the minimum number of character classes required (three classes, e.g., lowercase, uppercase, <span class="No-Break">and digits)</span></li>
				<li><strong class="source-inline">maxrepeat</strong>: This limits the maximum number of consecutive identical characters (two consecutive identical characters <span class="No-Break">are allowed)</span></li>
				<li><strong class="source-inline">minsequence</strong>: This sets the minimum length of a sequence (four characters, e.g., ‘1234’ <span class="No-Break">or ‘abcd’)</span></li>
				<li><strong class="source-inline">maxclassrepeat</strong>: This limits the maximum number of consecutive characters from the same character class (four consecutive characters from the same class <span class="No-Break">are allowed)</span></li>
				<li><strong class="source-inline">reject_username</strong>: This ensures that the password does not contain <span class="No-Break">the username</span></li>
			</ul>
			<ul>
				<li>Change the password <a id="_idIndexMarker147"/>of a <span class="No-Break">specific user:</span></li>
			</ul>
			<div>
				<div id="_idContainer077" class="IMG---Figure">
					<img src="image/B18212_02_26.jpg" alt="Figure 2.26 – Changing a user’s password"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.26 – Changing a user’s password</p>
			<ul>
				<li>Lock a <span class="No-Break">user’s password:</span></li>
			</ul>
			<div>
				<div id="_idContainer078" class="IMG---Figure">
					<img src="image/B18212_02_27.jpg" alt="Figure 2.27 – Locking a user’s password"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.27 – Locking a user’s password</p>
			<ul>
				<li>Unlock a <span class="No-Break">user’s password:</span></li>
			</ul>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="image/B18212_02_28.jpg" alt="Figure 2.28 – Unlocking a user’s password"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.28 – Unlocking a user’s password</p>
			<p>Unlocking a user’s account with the <strong class="source-inline">passwd -u tester1</strong> command is a crucial part of managing user account settings in Linux. In our next topic, we’ll explore techniques for discovering and locating files and identifying them within the <span class="No-Break">Linux filesystem.</span></p>
			<h1 id="_idParaDest-35"><a id="_idTextAnchor036"/>find, locate, and whereis commands</h1>
			<p>One of the most common tasks in Linux system administration is finding files. In CentOS 8, there are several commands that you can use to find files based on different criteria. The most commonly used commands for finding files are <strong class="source-inline">find</strong>, <strong class="source-inline">locate</strong>, and <strong class="source-inline">whereis</strong>. Each command has its own syntax and options, making them suitable for different <span class="No-Break">use cases.</span></p>
			<p>The <strong class="source-inline">find</strong> command is<a id="_idIndexMarker148"/> used to search for files and directories based on various criteria such as name, size, type, and modification time. Here’s an example of how to use the <strong class="source-inline">find</strong> command to search for all files with the <strong class="source-inline">.txt</strong> extension in the current directory and <span class="No-Break">its subdirectories:</span></p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="image/B18212_02_29.jpg" alt="Figure 2.29 – Finding files with the ﻿.txt﻿ extension"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.29 – Finding files with the .txt extension</p>
			<p>The first argument of the command is the starting directory for the search. In our example, the dot <strong class="source-inline">.</strong> character means “current directory,” and <strong class="source-inline">-name</strong> is used to specify the filename pattern to match. The <strong class="source-inline">*</strong> character is a wildcard that matches any number of characters, and <strong class="source-inline">*.txt</strong> matches all files that end <span class="No-Break">with </span><span class="No-Break"><strong class="source-inline">.txt</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="source-inline">locate</strong> command, on the<a id="_idIndexMarker149"/> other hand, uses a pre-built database to search for files based on name or pattern. The advantage of <strong class="source-inline">locate</strong> over <strong class="source-inline">find</strong> is that it’s much faster since it searches a <span class="No-Break">pre-built database.</span></p>
			<p>Here’s an example of how to use the <strong class="source-inline">locate</strong> command to find all files with <strong class="source-inline">sensitive</strong> in <span class="No-Break">their names:</span></p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="image/B18212_02_30.jpg" alt="Figure 2.30 – Using the locate command to find all files"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.30 – Using the locate command to find all files</p>
			<p>Finally, the <strong class="source-inline">whereis</strong> command is used to<a id="_idIndexMarker150"/> locate the binary, source, and manual page files for a given command. Here’s an example of how to use the <strong class="source-inline">whereis</strong> command to find the location of the <span class="No-Break"><strong class="source-inline">ls</strong></span><span class="No-Break"> command:</span></p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="image/B18212_02_31.jpg" alt="Figure 2.31 – Locating binary, source, and manual page﻿ files for the ls command"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.31 – Locating binary, source, and manual page files for the ls command</p>
			<p>Here’s another example using <strong class="source-inline">whereis</strong> to find the location of the <span class="No-Break"><strong class="source-inline">passwd</strong></span><span class="No-Break"> command:</span></p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="image/B18212_02_32.jpg" alt="Figure 2.32 – Locating binary, source, and manual page﻿ files for the passwd command"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.32 – Locating binary, source, and manual page files for the passwd command</p>
			<p>These commands are essential tools for managing and locating files on a Linux system. By mastering these commands, you can easily search for and identify files based on various criteria and improve your productivity as a <span class="No-Break">system administrator.</span></p>
			<h1 id="_idParaDest-36"><a id="_idTextAnchor037"/>Summary</h1>
			<p>In this chapter, we explored Linux user and group management, a crucial aspect of system security, stability, and resource allocation. We began by introducing the concept of user management and explained how to use commands such as <strong class="source-inline">useradd</strong>, <strong class="source-inline">userdel</strong>, and <strong class="source-inline">usermod</strong> to add, remove, and modify users on a Linux system. We also covered how to verify and set password expiration using the <strong class="source-inline">pwck</strong>, <strong class="source-inline">chage</strong>, and <strong class="source-inline">passwd</strong> commands, ensuring that user accounts <span class="No-Break">remain secure.</span></p>
			<p>The second section focused on file permissions and security basics, essential knowledge for any system administrator. We discussed the various file and directory permissions and how to use commands such as <strong class="source-inline">chmod</strong> and <strong class="source-inline">chown</strong> to modify them. In the third section, we delved into group management and covered commands such as <strong class="source-inline">groupadd</strong>, <strong class="source-inline">groupmod</strong>, <strong class="source-inline">groupdel</strong>, and <strong class="source-inline">grpck</strong>. We explained how groups allow for the efficient management of multiple users with similar permissions and access, and we learned how to use these commands to create and modify groups on a <span class="No-Break">Linux system.</span></p>
			<p>Moving on to the fourth section, we discussed the <strong class="source-inline">pwck</strong> <strong class="source-inline">and</strong> <strong class="source-inline">chage</strong> commands, which are used to verify the integrity of user and password files and set password expiration policies, respectively. We also covered the <strong class="source-inline">passwd</strong> command, which is used to change user passwords. Finally, the fifth section, <em class="italic">find, locate, and whereis commands</em>, covered how to locate files in directories and print their location using the <strong class="source-inline">find</strong>, <strong class="source-inline">locate</strong>, and <strong class="source-inline">whereis</strong> commands, which are particularly useful for system administrators who need to quickly locate files on a <span class="No-Break">Linux system.</span></p>
			<p>The next chapter delves into the topic of file compression and archiving in Linux. Through this chapter, readers will gain an understanding of how to use various commands such as <strong class="source-inline">gzip</strong>, <strong class="source-inline">tar</strong>, <strong class="source-inline">zip</strong>, and more to compress and <span class="No-Break">decompress files.</span></p>
		</div>
	</body></html>