["```\nsudo systemctl edit apache2\n```", "```\n. . .\n. . .\n[Install]\nWantedBy=multi-user.target\nAlias=sshd.service\n```", "```\n[Install]\nAlias=httpd.service\n```", "```\ndonnie@ubuntu20-04:/etc/systemd/system$ ls -l\ntotal 104\ndrwxr-xr-x 2 root root 4096 AprÂ Â 5 16:55 apache2.service.d\n. . .\n. . .\n```", "```\ndonnie@ubuntu20-04:/etc/systemd/system/apache2.service.d$ ls -l\ntotal 4\n-rw-r--r-- 1 root root 30 AprÂ Â 5 16:55 override.conf\ndonnie@ubuntu20-04:/etc/systemd/system/apache2.service.d$\n```", "```\n[Install]\nAlias=httpd.service\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl daemon-reload\n[sudo] password for donnie: \ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:/etc/systemd/system$ sudo systemctl disable apache2\nSynchronizing state of apache2.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install disable apache2\nRemoved /etc/systemd/system/multi-user.target.wants/apache2.service.\ndonnie@ubuntu20-04:/etc/systemd/system$\n```", "```\ndonnie@ubuntu20-04:/etc/systemd/system$ sudo systemctl enable apache2\nSynchronizing state of apache2.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install enable apache2\nCreated symlink /etc/systemd/system/httpd.service â†’ /lib/systemd/system/apache2.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/apache2.service â†’ /lib/systemd/system/apache2.service.\ndonnie@ubuntu20-04:/etc/systemd/system$\n```", "```\ndonnie@ubuntu20-04:/etc/systemd/system$ ls -l httpd.service \nlrwxrwxrwx 1 root root 35 AprÂ Â 5 17:39 httpd.service -> /lib/systemd/system/apache2.service\ndonnie@ubuntu20-04:/etc/systemd/system$\n```", "```\ndonnie@ubuntu20-04:~$ systemctl status httpd\nâ€¢ apache2.service - The Apache HTTP Server\nÂ Â Â Â Â Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)\nÂ Â Â Â Drop-In: /etc/systemd/system/apache2.service.d\nÂ Â Â Â Â Â Â Â Â Â Â Â Â â””â”€override.conf\nÂ Â Â Â Â Active: active (running) since Mon 2021-04-05 17:19:08 UTC; 34min ago\n. . .\n. . .\n```", "```\ndonnie@ubuntu20-04:~$ systemctl cat apache2\n# /lib/systemd/system/apache2.service\n[Unit]\nDescription=The Apache HTTP Server\n. . .\n. . .\n[Install]\nWantedBy=multi-user.target\n# /etc/systemd/system/apache2.service.d/override.conf\n[Install]\nAlias=httpd.service\ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:~$ systemd-analyze security\nUNITÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â EXPOSURE PREDICATE HAPPY\naccounts-daemon.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.6 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \napache2.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.2 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \napport.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.6 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \n. . .\n. . .Â Â Â Â Â Â ğŸ™‚Â Â Â Â \nsystemd-udevd.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 8.4 EXPOSED ğŸ™Â Â Â Â \nthermald.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.6 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \nunattended-upgrades.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.6 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \nuser@1000.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.4 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \nuuidd.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 4.5 OKÂ Â Â Â Â Â ğŸ™‚Â Â Â Â \nvgauth.serviceÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 9.5 UNSAFEÂ Â ğŸ˜¨Â Â Â Â \ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:~$ systemd-analyze security apache2\nÂ Â NAMEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â DESCRIPTIONÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â EXPOSURE\nâœ— PrivateNetwork=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has access to the host's networkÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.5\nâœ— User=/DynamicUser=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service runs as root userÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.4\nâœ— CapabilityBoundingSet=~CAP_SET(UID|GID|PCAP)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service may change UID/GID identities/capabilitiesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.3\nâœ— CapabilityBoundingSet=~CAP_SYS_ADMINÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has administrator privilegesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.3\nâœ— CapabilityBoundingSet=~CAP_SYS_PTRACEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has ptrace() debugging abilitiesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.3\n. . .\n. . .\n```", "```\n. . .\n. . .\nâœ“ PrivateMounts=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service cannot install system mountsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \nâœ“ PrivateTmp=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has no access to other software's temporary filesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \nâœ— PrivateUsers=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has access to other usersÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.2\nâœ— ProtectClock=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service may write to the hardware clock or system clockÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.2\nâœ— ProtectControlGroups=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service may modify the control group file systemÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.2\nâœ— ProtectHome=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has full access to home directoriesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.2\n. . .\n. . .\nâœ— ProtectSystem=Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Service has full access to the OS file hierarchyÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0.2\n. . .\n. . .\n```", "```\ndonnie@ubuntu20-04:/etc/apache2$ ps aux | grep apache\nrootÂ Â Â Â Â Â Â Â 2290Â Â 0.0Â Â 0.2Â Â Â 6520Â Â 4480 ?Â Â Â Â Â Â Â Â SsÂ Â Â 18:40Â Â Â 0:00 /usr/sbin/apache2 -k start\nwww-dataÂ Â Â Â 2291Â Â 0.0Â Â 0.2 752656Â Â 4344 ?Â Â Â Â Â Â Â Â SlÂ Â Â 18:40Â Â Â 0:00 /usr/sbin/apache2 -k start\nwww-dataÂ Â Â Â 2292Â Â 0.0Â Â 0.2 752656Â Â 4344 ?Â Â Â Â Â Â Â Â SlÂ Â Â 18:40Â Â Â 0:00 /usr/sbin/apache2 -k start\ndonnieÂ Â Â Â Â Â 2554Â Â 0.0Â Â 0.0Â Â Â 6432Â Â Â 724 pts/0Â Â Â Â S+Â Â Â 19:55Â Â Â 0:00 grep --color=auto apache\ndonnie@ubuntu20-04:/etc/apache2$\n```", "```\ndonnie@ubuntu20-04:/etc/apache2$ grep -r 'USER' *\napache2.conf:User ${APACHE_RUN_USER}\nenvvars:export APACHE_RUN_USER=www-data\ndonnie@ubuntu20-04:/etc/apache2$\n```", "```\n[Service]\nProtectHome=yes\nProtectSystem=strict\n[Install]\nAlias=httpd.service\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl daemon-reload\ndonnie@ubuntu20-04:~$ sudo systemctl restart apache2\nJob for apache2.service failed because the control process exited with error code.\nSee \"systemctl status apache2.service\" and \"journalctl -xe\" for details.\ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl status apache2\n. . .\n. . .\nApr 10 21:52:20 ubuntu20-04 apachectl[3848]: (30)Read-only file system: AH00091: apache2: could not open error log file /var/log/apache2/error.log.\nApr 10 21:52:20 ubuntu20-04 apachectl[3848]: AH00015: Unable to open logs\nApr 10 21:52:20 ubuntu20-04 apachectl[3836]: Action 'start' failed.\nApr 10 21:52:20 ubuntu20-04 apachectl[3836]: The Apache error log may have more information.\n. . .\n. . .\ndonnie@ubuntu20-04:~$\n```", "```\n[Service]\nProtectHome=yes\nProtectSystem=fullÂ Â \n[Install]\nAlias=httpd.service\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl daemon-reload\ndonnie@ubuntu20-04:~$ sudo systemctl restart apache2\ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl status apache2\nâ— apache2.service - The Apache HTTP Server\nÂ Â Â Â Â Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)\nÂ Â Â Â Drop-In: /etc/systemd/system/apache2.service.d\nÂ Â Â Â Â Â Â Â Â Â Â Â Â â””â”€override.conf\nÂ Â Â Â Â Active: active (running) since Sat 2021-04-10 21:58:22 UTC; 4s ago\n. . .\n. . .\n```", "```\n[Service]\nProtectHome=yes\nProtectSystem=full\nPrivateDevices=yes\nProtectKernelTunables=yes\nProtectKernelModules=yes\nProtectControlGroups=yes\nSystemCallFilter=@system-service\nSystemCallErrorNumber=EPERM\nNoNewPrivileges=yes\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl edit --full ssh.service\n```", "```\nIPAddressAllow=192.168.0.222\nIPAddressDeny=any\n```", "```\ndonnie@ubuntu20-04:~$ cd /etc/systemd/system/\ndonnie@ubuntu20-04:/etc/systemd/system$ ls -l ssh.service \n-rw-r--r-- 1 root root 586 Apr 11 20:07 ssh.service\ndonnie@ubuntu20-04:/etc/systemd/system$\n```", "```\ndonnie@ubuntu20-04:~$ sudo systemctl edit --force --full timestamp.service\n```", "```\n[Unit]\nDescription=Service Creation Demo\nWants=network.target\nAfter=syslog.target network-online.target\n[Service]\nExecStart=/usr/local/bin/timestamp.sh\nRestart=on-failure\nRestartSec=20\nKillMode=process\n[Install]\nWantedBy=multi-user.target\n```", "```\n#!/bin/bash\necho \"Starting the timestamp service\" | systemd-cat -p info\nwhile :\ndo\nÂ Â Â Â Â Â Â Â echo \"timestamp.service: The current time is $(date '+%m-%d-%Y %H:%M:%S')\" | systemd-cat -p info\nÂ Â Â Â Â Â Â Â sleep 60\ndone\n```", "```\ndonnie@ubuntu20-04:~$ chmod u+x timestamp.sh \ndonnie@ubuntu20-04:~$ sudo cp timestamp.sh /usr/local/bin\ndonnie@ubuntu20-04:~$ sudo systemctl start timestamp\ndonnie@ubuntu20-04:~$\n```", "```\ndonnie@ubuntu20-04:~$ systemctl status timestamp\nâ— timestamp.service - Service Creation Demo\nÂ Â Â Â Â Loaded: loaded (/etc/systemd/system/timestamp.service; disabled; vendor preset: enabled)\nÂ Â Â Â Â Active: active (running) since Sun 2021-04-11 21:57:26 UTC; 13min ago\nÂ Â Â Main PID: 14293 (timestamp.sh)\nÂ Â Â Â Â Â Tasks: 2 (limit: 2281)\nÂ Â Â Â Â Memory: 820.0K\nÂ Â Â Â Â CGroup: /system.slice/timestamp.service\nÂ Â Â Â Â Â Â Â Â Â Â Â Â â”œâ”€14293 /bin/bash /usr/local/bin/timestamp.sh\nÂ Â Â Â Â Â Â Â Â Â Â Â Â â””â”€14411 sleep 60\nApr 11 22:00:26 ubuntu20-04 cat[14335]: timestamp.service: The current time is 04-11-2021 22:00:26\n. . .\n. . .\n```", "```\n[donnie@localhost ~]$ sudo EDITOR=vim systemctl edit --full sshd\n[donnie@localhost ~]$\n```", "```\nexport SYSTEMD_EDITOR=vim\n```", "```\n[donnie@localhost ~]$ source .bashrc\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ sudo visudo\n```", "```\nDefaultsÂ Â Â env_keep += \"SYSTEMD_EDITOR\"\n```", "```\n[donnie@localhost ~]$ sudo dnf install podman-docker\n```", "```\n[donnie@localhost ~]$ sudo podman run -d -p 8080:80 --name wordpress wordpress\n```", "```\n[donnie@localhost ~]$ sudo podman ps\nCONTAINER IDÂ Â IMAGEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â COMMANDÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â CREATEDÂ Â Â Â Â Â Â Â STATUSÂ Â Â Â Â Â Â Â Â Â Â Â PORTSÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â NAMES\ncc06c35f21ceÂ Â docker.io/library/wordpress:latestÂ Â apache2-foregroun...Â Â 2 minutes agoÂ Â Up 2 minutes agoÂ Â 0.0.0.0:8080->80/tcpÂ Â wordpress\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ sudo firewall-cmd --permanent --add-port=8080/tcp\nsuccess\n[donnie@localhost ~]$ sudo firewall-cmd --reload\nsuccess\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ sudo podman generate systemd wordpress | sudo tee /etc/systemd/system/wordpress-container.service\n```", "```\n[donnie@localhost ~]$ sudo systemctl daemon-reload\n[donnie@localhost ~]$ sudo systemctl enable wordpress-container\nCreated symlink /etc/systemd/system/multi-user.target.wants/wordpress-container.service â†’ /etc/systemd/system/wordpress-container.service.\nCreated symlink /etc/systemd/system/default.target.wants/wordpress-container.service â†’ /etc/systemd/system/wordpress-container.service.\n[donnie@localhost ~]$ sudo shutdown -r now\n```", "```\n[donnie@localhost ~]$ sudo podman ps\n[sudo] password for donnie: \nCONTAINER IDÂ Â IMAGEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â COMMANDÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â CREATEDÂ Â Â Â Â Â Â Â Â STATUSÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â PORTS Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â NAMES\ncc06c35f21ceÂ Â docker.io/library/wordpress:latestÂ Â apache2-foregroun...Â Â 12 minutes agoÂ Â Up About a minute agoÂ Â 0.0.0.0:8080->80/tcpÂ Â wordpress\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ systemctl status wordpress-container\nâ— wordpress-container.service - Podman container-cc06c35f21cedd4d2384cf2c048f013748e84cabdc594b110a8c8529173f4c81.service\nÂ Â Â Loaded: loaded (/etc/systemd/system/wordpress-container.service; enabled; vendor preset: disabled)\nÂ Â Â Active: active (running) since Wed 2021-04-14 15:27:37 EDT; 2min 38s ago\n. . .\n. . .\n```", "```\n[donnie@localhost ~]$ podman run -d -p 9080:80 --name wordpress-noroot wordpress\n```", "```\n[donnie@localhost ~]$ podman container stop wordpress-noroot\na6e2117dd4d5148d01a55d64ad8753c03436bfd9a573435e95d927f74 dc48f9e\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ mkdir -p .config/systemd/user/\n[donnie@localhost ~]$\n```", "```\n[donnie@localhost ~]$ podman generate systemd wordpress-noroot > .config/systemd/user/wordpress-noroot.service\n[donnie@localhost ~]$\n```", "```\n. . .\n. . .\n[Install]\nWantedBy=multi-user.target default.target\n```", "```\n[donnie@localhost ~]$ systemctl --user daemon-reload\n[donnie@localhost ~]$ systemctl --user status wordpress-noroot\nâ— wordpress-noroot.service - Podman container-a6e2117dd4d5148d01a55d64ad8753c03436bfd9a573435e95d927f74dc48f9e.service\nÂ Â Â Loaded: loaded (/home/donnie/.config/systemd/user/wordpress-noroot.service; disabled; vendor preset: enabled)\nÂ Â Â Active: inactive (dead)\n. . .\n. . .\n```", "```\n[donnie@localhost ~]$ systemctl --user enable --now wordpress-noroot\nCreated symlink /home/donnie/.config/systemd/user/multi-user.target.wants/wordpress-noroot.service â†’ /home/donnie/.config/systemd/user/wordpress-noroot.service.\nCreated symlink /home/donnie/.config/systemd/user/default.target.wants/wordpress-noroot.service â†’ /home/donnie/.config/systemd/user/wordpress-noroot.service.\n[donnie@localhost ~]$ systemctl --user status wordpress-noroot\nâ— wordpress-noroot.service - Podman container-a6e2117dd4d5148d01a55d64ad8753c03436bfd9a573435e95d927f74dc48f9e.service\nÂ Â Â Loaded: loaded (/home/donnie/.config/systemd/user/wordpress-noroot.service; enabled; vendor preset: enabled)\nÂ Â Â Active: active (running) since Wed 2021-04-14 15:44:26 EDT; 12s ago\n. . .\n. . .\n```", "```\n[donnie@localhost ~]$ loginctl enable-linger donnie\n[donnie@localhost ~]$\n```"]