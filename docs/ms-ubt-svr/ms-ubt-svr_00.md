# 前言

Linux 是一个令人兴奋的平台。你几乎可以在任何地方找到它——桌面、笔记本、手机、嵌入式设备，尤其是服务器。Linux 服务器为全球许多著名的技术提供动力，并且在物理和云服务器环境中具有庞大的存在。Linux 服务器具有可扩展性、稳定性和强大功能。

早在 1991 年，芬兰一位名为 Linus Torvalds 的计算机科学学生将 Linux 内核作为学校项目创建了。那个时候他并不知道，Linux 将帮助我们见证一些基础设施设计领域最激动人心的创新。诸如多核处理器、虚拟化、容器化和云计算（仅举几例）等技术，已经改变了全球的数据中心，而 Linux 一直是这些进步的一部分。

Ubuntu 是一个流行的 Linux 发行版，一直是 Linux 被广泛采用的重要推动力。自 2004 年首次发布以来，Ubuntu 使得 Linux 更加易于新手使用，同时为服务器管理员提供了强大的功能。Ubuntu 不仅可以在笔记本电脑和工作站上找到，还可以在服务器上运行。

Ubuntu Server 使管理员能够创建高效、灵活且高度可用的服务器，为组织提供开源的强大力量。作为 Ubuntu 管理员，我们身处良好的环境——根据 W3Techs 的数据，Ubuntu 是 Linux 系统中在网络上最广泛部署的发行版。随着 Ubuntu 22.04 的发布，这一平台变得更加令人兴奋！

在本书中，我们将深入探讨 Ubuntu Server，你将学习所有管理服务器所需的概念，并配置它们以执行各种有趣的任务，例如提供网页服务、管理虚拟机、运行容器、自动化配置、与其他用户共享文件，甚至在云中运行 Ubuntu。

我们将从第一章开始我们的旅程，在这一章中，我们将走过安装 Ubuntu Server 22.04 的过程，它将作为本书其余部分的基础。在接下来的旅程中，我们将学习如何管理用户、连接网络和控制进程。随后，我们将实现一些重要的技术，如 DHCP、DNS、Apache、MariaDB 等。我们甚至会在过程中设置自己的 Nextcloud 服务器。

最后，本书的结尾部分将讨论我们可以做些什么来排除故障，以及如何防止和从灾难中恢复。

# 本书适合谁阅读

本书适合具备中级或高级初学者 Linux 技能的读者，帮助他们了解如何使用 Ubuntu Server 设置服务器。本书假设读者已经掌握 Linux 的基础知识，例如编辑配置文件和运行基本命令。此外，本书假设读者具备基础的网络概念理解，如 DHCP、DNS、IP 地址等。并且假设读者理解基本网络硬件的用途，如路由器、交换机以及类似设备。

# 本书涵盖的内容

*第一章*，*部署 Ubuntu 服务器*，介绍了 Ubuntu 服务器的安装过程。本章将带你完成创建启动介质和安装过程。

*第二章*，*管理用户和权限*，全面介绍了用户管理。本章内容包括创建和删除用户、配置密码策略、使用`sudo`命令、进行组管理以及在用户之间切换。

*第三章*，*管理软件包*，引导读者完成搜索、安装和管理软件包的过程。内容包括管理 APT 仓库、安装软件包，甚至包括 Snap 软件包的介绍。

*第四章*，*导航和基本命令*，教授了在目录树中导航、查看日志文件内容以及浏览日志文件所需的基本命令。

*第五章*，*管理文件和目录*，在前一章的基础上扩展了知识，并通过讲解如何编辑、复制、移动和重命名文件，完善了你的必备命令工具集。

*第六章*，*提升命令行效率*，介绍了一些额外的技巧、窍门和方法，以增强读者在使用命令行时的效率。内容包括管理输出、查看 Bash 历史记录等。

*第七章*，*控制和管理进程*，教你如何管理服务器上正在运行的程序，并且如何停止不正常的进程。内容包括查看 htop、使用 systemd 以及管理作业。

*第八章*，*监控系统资源*，介绍了如何管理服务器上的重要系统资源，例如查看磁盘和内存使用情况、理解负载平均值以及它如何影响 CPU。

*第九章*，*管理存储卷*，介绍了存储卷的相关内容。你将学习如何查看磁盘使用情况、格式化卷、管理`/etc/fstab`文件、使用 LVM 等。此外，我们还将讨论如何管理交换空间（swap）。

*第十章*，*连接到网络*，探讨了 Ubuntu 中的网络配置，特别是如何连接到其他节点的资源。我们将讨论如何分配 IP 地址、通过 OpenSSH 连接其他节点以及名称解析。

*第十一章*，*设置网络服务*，重新探讨了更高级的网络概念。在本章中，读者将学习更多关于将我们的网络连接在一起的技术，如 DHCP 和 DNS。读者将设置自己的 DHCP 和 DNS 服务器，并安装 NTP。

*第十二章*，*共享与传输文件*，专注于如何与他人共享文件。内容包括 Samba 和 NFS 网络共享的设置，我们还将介绍如何使用`rsync`和`scp`手动传输文件。

*第十三章*，*管理数据库*，带领读者完成通过 MariaDB 设置和管理数据库的过程。读者将学习如何安装 MariaDB、如何设置数据库以及如何创建辅助数据库服务器。

*第十四章*，*提供 Web 内容*，介绍了如何使用 Apache 提供内容。此外，读者还将学习如何使用 SSL 证书来保护 Apache，如何管理模块，甚至在章节结束时搭建一个 Nextcloud 服务器。

*第十五章*，*使用 Ansible 自动化服务器配置*，将向读者展示如何设置一个用于存储配置管理脚本的 Git 仓库，如何使用强大的 Ansible 工具来自动化常见的管理任务，并且还会介绍如何使用`ansible-pull`。

*第十六章*，*虚拟化*，讲解了虚拟化的所有内容（不出所料！）。读者将学习如何设置自己的 KVM 安装，以及如何使用 virt-manager 管理虚拟机。

*第十七章*，*运行容器*，讨论了容器的相关内容，并展示了如何在 Docker 和 LXD 中管理容器。

*第十八章*，*容器编排*，教你如何将容器提升到一个新的水平，并通过 Kubernetes 的强大功能进行管理。你不仅会学到如何安装 Micro K8s，还会学会如何从零开始构建自己的 Kubernetes 集群。

*第十九章*，*在云中部署 Ubuntu*，展示了如何在云中启动 Ubuntu 服务器，并介绍了**亚马逊网络服务**（**AWS**）。

*第二十章*，*使用 Terraform 自动化云部署*，讲解了如何通过 Terraform 自动化构建云基础设施的过程。

*第二十一章*，*保护服务器安全*，介绍了读者可以采取的各种措施来加强 Ubuntu 服务器的安全性。话题包括减少攻击面、保护 OpenSSH、设置防火墙等内容。

*第二十二章*，*故障排除 Ubuntu 服务器*，包含了当我们的部署没有按照计划进行时，可以采取的措施。读者还将研究问题空间、查看系统日志并追踪网络问题。

*第二十三章*，*防范灾难*，向读者介绍了可以用于预防和恢复灾难的各种策略。这包括利用 Git 进行配置管理、实施备份计划等内容。

# 为了最大限度地利用本书

本书适合已经有一定 Linux 经验的读者，尽管不一定非要是 Ubuntu 的经验。理想情况下，读者应了解基本的 Linux 命令行技能，例如切换目录、列出内容以及以普通用户或 root 用户身份执行命令。还希望读者了解基础的网络概念，如 DHCP、DNS 的作用以及 IP 地址分配。即使您觉得自己需要复习，仍然应该阅读本书——开头几章会涵盖许多这些概念。

本书将带您了解我们可以部署 Ubuntu Server 的实际场景。这将包括安装过程、提供网页服务、设置数据库等内容。具体而言，目标是提高生产力。每一章都会教会读者一个新的、有价值的概念，使用与实际组织相关的实用示例。基本上，我们专注于完成任务，而不是仅仅专注于理论。尽管 Linux 及其许多发行版的理论非常有趣，但本书的目标是让您处于这样一个位置：当同事或客户要求您在基于 Ubuntu 的服务器上执行工作时，您能够顺利完成任务。因此，如果您的目标是快速上手 Ubuntu Server 并学习真正重要的概念，那么本书绝对适合您。

若要跟随本书的教程，您需要一台安装了 Ubuntu Server 的服务器、一台来自云服务提供商的虚拟 Ubuntu 实例，或者一台至少能够运行一个虚拟机的笔记本或台式机。

## 下载示例代码文件

本书的代码包托管在 GitHub 上，链接为 [`github.com/PacktPublishing/Mastering-Ubuntu-Server-Fourth-Edition`](https://github.com/PacktPublishing/Mastering-Ubuntu-Server-Fourth-Edition)

我们还有其他来自我们丰富书籍和视频目录的代码包，您可以在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 查看。赶快去看看吧！

## 下载彩色图片

我们还提供了一个 PDF 文件，包含本书中使用的屏幕截图/图表的彩色图片。您可以在这里下载：[`static.packt-cdn.com/downloads/9781803234243_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781803234243_ColorImages.pdf)

## 使用的约定

本书中使用了若干文本约定。

`CodeInText`：表示文本中的代码字词、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL、用户输入以及 Twitter 用户名。以下是一个例子：“总之，回到我们的`/etc/passwd`文件。第五列用于用户信息，最常见的是用户的名字和姓氏。”

一段代码的设置如下：

```
description: External access profile
devices:
  eth0:
  name: eth0
  nictype: bridged
  parent: br0
  type: nic 
```

当我们希望特别强调代码块中的某一部分时，相关的行或项目会被高亮显示：

```
- name: Start the apache2 services
    ansible.builtin.service:
    name: apache2
    state: started
    **enabled: true** 
```

任何命令行输入或输出都如下所示：

```
sudo apt install docker.io 
```

**粗体**：表示新术语、重要词汇或屏幕上出现的词语。例如，在菜单或对话框中出现的词汇会以这种方式显示在文本中。例如：“从**管理**面板中选择**系统信息**。”

警告或重要说明如下所示。

提示和技巧如下所示。

## 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：请发送电子邮件至`feedback@packtpub.com`，并在邮件主题中注明书名。如果您对本书的任何内容有疑问，请通过`questions@packtpub.com`与我们联系。

**勘误**：尽管我们已尽一切努力确保内容的准确性，但难免会有错误。如果您发现本书中有错误，欢迎向我们报告。请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，点击**提交勘误**并填写表格。

**盗版**：如果您在互联网上发现任何非法的作品复制品，我们将非常感谢您提供相关的网址或网站名称。请通过`copyright@packtpub.com`联系并提供链接。

**如果您有兴趣成为作者**：如果您在某个领域拥有专业知识，并且有兴趣写书或参与书籍的创作，请访问[`authors.packtpub.com`](http://authors.packtpub.com)。

# 分享您的想法

阅读完*《Mastering Ubuntu Server, 第四版》*后，我们希望听听您的想法！请[点击这里直接访问亚马逊评论页面](https://www.packtpub.com/)并分享您的反馈。

您的评价对我们和技术社区都非常重要，它将帮助我们确保提供优质的内容。
