<html><head></head><body>
<div id="_idContainer210" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-91"><a id="_idTextAnchor155" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1.1">6</span></h1>
<h1 id="_idParaDest-92" class="calibre5"><a id="_idTextAnchor156" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.2.1">Sandbox Applications</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">To provide children with a safe place to play, you create a walled area and store their toys inside a small box (or </span><em class="italic"><span class="kobospan" id="kobo.4.1">container</span></em><span class="kobospan" id="kobo.5.1">). </span><span class="kobospan" id="kobo.5.2">When this idea moves to the playground, we refer to it as a </span><strong class="bold"><span class="kobospan" id="kobo.6.1">sandbox</span></strong><span class="kobospan" id="kobo.7.1">. </span><span class="kobospan" id="kobo.7.2">The term sandbox in application development comes from this </span><span><span class="kobospan" id="kobo.8.1">same idea.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.9.1">In the </span><em class="italic"><span class="kobospan" id="kobo.10.1">sandboxing</span></em><span class="kobospan" id="kobo.11.1"> approach, each application resides in a sandbox, a controlled and restricted environment for running its code. </span><span class="kobospan" id="kobo.11.2">This environment helps developers isolate and protect </span><span><span class="kobospan" id="kobo.12.1">system resources.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.13.1">Developers also use </span><em class="italic"><span class="kobospan" id="kobo.14.1">sandboxed environments</span></em><span class="kobospan" id="kobo.15.1"> to identify an application’s behavior and to detect bugs or other undesirable elements of </span><span><span class="kobospan" id="kobo.16.1">its behavior.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.17.1">There are several methods of sandboxing applications for Linux environments. </span><span class="kobospan" id="kobo.17.2">In this book, we focus on some of them, including those considered the </span><em class="italic"><span class="kobospan" id="kobo.18.1">least intrusive</span></em><span class="kobospan" id="kobo.19.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.20.1">Applmage</span></strong><span class="kobospan" id="kobo.21.1">) and those developed and supported by the </span><strong class="bold"><span class="kobospan" id="kobo.22.1">Fedora </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.23.1">Project</span></strong></span><span><span class="kobospan" id="kobo.24.1"> (</span></span><span><strong class="bold"><span class="kobospan" id="kobo.25.1">Flatpak</span></strong></span><span><span class="kobospan" id="kobo.26.1">).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.27.1">In this chapter, we’re going to cover the following </span><span><span class="kobospan" id="kobo.28.1">main topics:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.29.1">Inspecting </span><span><span class="kobospan" id="kobo.30.1">sandbox applications</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.31.1">Diving deep into </span><span><span class="kobospan" id="kobo.32.1">AppImage apps</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.33.1">Examining </span><span><span class="kobospan" id="kobo.34.1">Flatpak applications</span></span></li>
</ul>
<h1 id="_idParaDest-93" class="calibre5"><a id="_idTextAnchor157" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.35.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.36.1">For sandboxing or development of sandbox applications, you will need to install some packages. </span><span class="kobospan" id="kobo.36.2">Most of them are included in Fedora’s </span><span><span class="kobospan" id="kobo.37.1">official repositories.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.38.1">In each section, you will see the required packages and how to install each one </span><span><span class="kobospan" id="kobo.39.1">of them.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.40.1">If we use any package or code that’s not included in the official Fedora repositories, we will include the link to get it and the instructions to </span><span><span class="kobospan" id="kobo.41.1">install it.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.42.1">The examples created in this chapter can be found in the book’s GitHub repository that you can find at the following </span><span><span class="kobospan" id="kobo.43.1">URL: </span></span><a href="https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter6" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.44.1">https://github.com/PacktPublishing/Fedora-Linux-System-Administration/tree/main/chapter6</span></span></a><span><span class="kobospan" id="kobo.45.1">.</span></span></p>
<h1 id="_idParaDest-94" class="calibre5"><a id="_idTextAnchor158" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.46.1">Inspecting sandbox applications</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.47.1">Before we begin, we </span><a id="_idIndexMarker401" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.48.1">must make a distinction. </span><span class="kobospan" id="kobo.48.2">Application isolation has always been sought as a </span><em class="italic"><span class="kobospan" id="kobo.49.1">security</span></em><span class="kobospan" id="kobo.50.1"> or </span><em class="italic"><span class="kobospan" id="kobo.51.1">restriction measure</span></em><span class="kobospan" id="kobo.52.1">, either in case of intrusions or excessive use </span><span><span class="kobospan" id="kobo.53.1">of resources.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.54.1">With this, we can distinguish the development of applications according to the relationship between their use of resources and their interaction with privileged files of the </span><span><span class="kobospan" id="kobo.55.1">host system.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.56.1">Then, based on the aforementioned abstraction required to host code in a system, we could typify an application </span><span><span class="kobospan" id="kobo.57.1">as follows:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.58.1">Native</span></strong><span class="kobospan" id="kobo.59.1"> or </span><strong class="bold"><span class="kobospan" id="kobo.60.1">compiled</span></strong><span class="kobospan" id="kobo.61.1">: It runs on the system with all system restrictions </span><span><span class="kobospan" id="kobo.62.1">and privileges.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.63.1">Interpret</span></strong><span class="kobospan" id="kobo.64.1">: Interpreters walk through an application’s code line by line and run each instruction into the system. </span><span class="kobospan" id="kobo.64.2">In the past, applications created with interpreted languages were much slower than applications created with compiled languages. </span><span class="kobospan" id="kobo.64.3">But, with the development of </span><em class="italic"><span class="kobospan" id="kobo.65.1">just-in-time compilation</span></em><span class="kobospan" id="kobo.66.1">, this difference </span><span><span class="kobospan" id="kobo.67.1">is reduced.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.68.1">Jailed</span></strong><span class="kobospan" id="kobo.69.1">: It allows application code to run on the system but from a </span><em class="italic"><span class="kobospan" id="kobo.70.1">restricted location</span></em><span class="kobospan" id="kobo.71.1">. </span><span class="kobospan" id="kobo.71.2">This restriction could include system resources or even system files. </span><span class="kobospan" id="kobo.71.3">The structure of the jail could look like the system, but the changes or alterations to the files inside the jail do not affect the behavior of the </span><span><span class="kobospan" id="kobo.72.1">host system.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.73.1">Sandbox</span></strong><span class="kobospan" id="kobo.74.1">: This is a more </span><em class="italic"><span class="kobospan" id="kobo.75.1">restrictive</span></em><span class="kobospan" id="kobo.76.1"> environment than a jail. </span><span class="kobospan" id="kobo.76.2">The sandbox includes </span><em class="italic"><span class="kobospan" id="kobo.77.1">only</span></em><span class="kobospan" id="kobo.78.1"> the files required to run the application and interact with the system. </span><span class="kobospan" id="kobo.78.2">This feature allows the portability of the application in an efficient way. </span><span class="kobospan" id="kobo.78.3">The distribution of the host system does not affect the runtime of the sandbox application. </span><span class="kobospan" id="kobo.78.4">It only requires that the distribution supports the </span><span><span class="kobospan" id="kobo.79.1">sandbox type.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.80.1">The development of a sandbox application could be very simple, from opening an application installed on the system in a controlled environment to porting applications from other distributions, without all the development involved in making it run on </span><span><span class="kobospan" id="kobo.81.1">each distribution.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.82.1">Let’s see how to</span><a id="_idIndexMarker402" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.83.1"> create a simple sandbox application. </span><span class="kobospan" id="kobo.83.2">Then, let’s learn about the common packaging methods for sandbox applications </span><span><span class="kobospan" id="kobo.84.1">in Fedora.</span></span></p>
<h2 id="_idParaDest-95" class="calibre7"><a id="_idTextAnchor159" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.85.1">SELinux sandbox</span></h2>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.86.1">SELinux</span></strong><span class="kobospan" id="kobo.87.1"> is a set of </span><a id="_idIndexMarker403" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.88.1">policies that allow us to add a </span><em class="italic"><span class="kobospan" id="kobo.89.1">security layer</span></em><span class="kobospan" id="kobo.90.1"> to</span><a id="_idIndexMarker404" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.91.1"> our system environment. </span><span class="kobospan" id="kobo.91.2">Based on these policies, we could set up a sandbox </span><span><span class="kobospan" id="kobo.92.1">for applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.93.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.94.1">SELinux will be covered in detail in </span><a href="B19121_12.xhtml#_idTextAnchor240" class="pcalibre1 calibre6 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.95.1">Chapter 12</span></em></span></a><span class="kobospan" id="kobo.96.1"> of </span><span><span class="kobospan" id="kobo.97.1">this book.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.98.1">For example, let’s run the </span><strong class="bold"><span class="kobospan" id="kobo.99.1">Firefox</span></strong><span class="kobospan" id="kobo.100.1"> browser inside a sandbox isolated from the system environment. </span><span class="kobospan" id="kobo.100.2">To do this, follow the </span><span><span class="kobospan" id="kobo.101.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.102.1">As a </span><strong class="source-inline1"><span class="kobospan" id="kobo.103.1">root</span></strong><span class="kobospan" id="kobo.104.1"> user, install the SELinux sandbox utilities. </span><span class="kobospan" id="kobo.104.2">Install the </span><strong class="source-inline1"><span class="kobospan" id="kobo.105.1">policycoreutils-sandbox</span></strong><span class="kobospan" id="kobo.106.1"> package with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.107.1">dnf</span></strong></span><span><span class="kobospan" id="kobo.108.1"> command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.109.1">[root@workstation ~]# dnf install policycoreutils-sandbox</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.110.1">Configure SELinux in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.111.1">Permissive</span></strong><span class="kobospan" id="kobo.112.1"> mode to allow SELinux sandboxing. </span><span class="kobospan" id="kobo.112.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.113.1">setenforce</span></strong><span class="kobospan" id="kobo.114.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.115.1">getenforce</span></strong><span class="kobospan" id="kobo.116.1"> commands to verify </span><span><span class="kobospan" id="kobo.117.1">the change:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.118.1">[root@workstation ~]# setenforce 0</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.119.1">[root@workstation ~]# getenforce</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.120.1">Permissive</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.121.1">As a </span><em class="italic"><span class="kobospan" id="kobo.122.1">non-privileged user</span></em><span class="kobospan" id="kobo.123.1">, open a terminal and, inside the SELinux sandbox, run </span><strong class="source-inline1"><span class="kobospan" id="kobo.124.1">firefox</span></strong><span class="kobospan" id="kobo.125.1"> in a </span><em class="italic"><span class="kobospan" id="kobo.126.1">1280x1024</span></em><span class="kobospan" id="kobo.127.1"> window. </span><span class="kobospan" id="kobo.127.2">Use the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.128.1">sandbox</span></strong></span><span><span class="kobospan" id="kobo.129.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.130.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.131.1">sandbox -X -t sandbox_net -t sandbox_web_t -w 1280x1024 firefox</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.132.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.133.1">sandbox</span></strong><span class="kobospan" id="kobo.134.1"> command runs its own </span><em class="italic"><span class="kobospan" id="kobo.135.1">X server</span></em><span class="kobospan" id="kobo.136.1"> (</span><strong class="source-inline"><span class="kobospan" id="kobo.137.1">-X</span></strong><span class="kobospan" id="kobo.138.1">) and enables policy enforcement for network and browser usage (</span><strong class="source-inline"><span class="kobospan" id="kobo.139.1">-t sandbox_net -t sandbox_web_t</span></strong><span class="kobospan" id="kobo.140.1">). </span><span class="kobospan" id="kobo.140.2">Set up </span><strong class="source-inline"><span class="kobospan" id="kobo.141.1">sandbox</span></strong><span class="kobospan" id="kobo.142.1"> and run </span><strong class="source-inline"><span class="kobospan" id="kobo.143.1">firefox</span></strong><span class="kobospan" id="kobo.144.1"> in a </span><em class="italic"><span class="kobospan" id="kobo.145.1">1280x1024 window</span></em><span class="kobospan" id="kobo.146.1"> (</span><strong class="source-inline"><span class="kobospan" id="kobo.147.1">-w </span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.148.1">1280x1024 firefox</span></strong></span><span><span class="kobospan" id="kobo.149.1">):</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer169">
<span class="kobospan" id="kobo.150.1"><img alt="Figure 6.1 – Firefox on SELinux sandbox" src="image/6.1.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.151.1">Figure 6.1 – Firefox on SELinux sandbox</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.152.1">Let’s find</span><a id="_idIndexMarker405" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.153.1"> out </span><a id="_idIndexMarker406" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.154.1">how to </span><em class="italic"><span class="kobospan" id="kobo.155.1">monitor the performance</span></em><span class="kobospan" id="kobo.156.1"> of </span><span><span class="kobospan" id="kobo.157.1">the sandbox.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.158.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.159.1">ps</span></strong><span class="kobospan" id="kobo.160.1"> command to find the </span><span><span class="kobospan" id="kobo.161.1">sandbox’s PID:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.162.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.163.1">ps auf | grep firefox</span></strong><span class="kobospan1" id="kobo.164.1">
acallej+   </span><strong class="bold1"><span class="kobospan1" id="kobo.165.1">30511</span></strong><span class="kobospan1" id="kobo.166.1">  0.0  0.9 ...output omitted...</span></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer170">
<span class="kobospan" id="kobo.167.1"><img alt="Figure 6.2 – Finding the sandbox pid" src="image/B19121_06_2.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.168.1">Figure 6.2 – Finding the sandbox pid</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.169.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.170.1">top</span></strong><span class="kobospan" id="kobo.171.1"> command to monitor the performance of the </span><span><span class="kobospan" id="kobo.172.1">found </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.173.1">PID</span></strong></span><span><span class="kobospan" id="kobo.174.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.175.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.176.1">top -p 30511</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer171">
<span class="kobospan" id="kobo.177.1"><img alt="Figure 6.3 – Monitoring sandbox performance" src="image/B19121_06_3.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.178.1">Figure 6.3 – Monitoring sandbox performance</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.179.1">The web</span><a id="_idIndexMarker407" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.180.1"> browser is isolated, so its behavior does not</span><a id="_idIndexMarker408" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.181.1"> affect the rest of the system. </span><span class="kobospan" id="kobo.181.2">Let’s see how to </span><span><span class="kobospan" id="kobo.182.1">verify it.</span></span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.183.1">On Firefox sandboxing, open</span><a id="_idIndexMarker409" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.184.1"> the Fedora Project home </span><span><span class="kobospan" id="kobo.185.1">page (</span></span><a href="https://start.fedoraproject.org/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.186.1">https://start.fedoraproject.org/</span></span></a><span><span class="kobospan" id="kobo.187.1">):</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer172">
<span class="kobospan" id="kobo.188.1"><img alt="Figure 6.4 – Browsing with Firefox sandboxing" src="image/6.4.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.189.1">Figure 6.4 – Browsing with Firefox sandboxing</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.190.1">Close Firefox</span><a id="_idIndexMarker410" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.191.1"> sandboxing by clicking the </span><strong class="bold"><span class="kobospan" id="kobo.192.1">X</span></strong><span class="kobospan" id="kobo.193.1"> button in</span><a id="_idIndexMarker411" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.194.1"> the upper-right corner of the </span><span><span class="kobospan" id="kobo.195.1">Firefox window.</span></span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.196.1">Run Firefox in the </span><span><span class="kobospan" id="kobo.197.1">sandbox again:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.198.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.199.1">sandbox -X -t sandbox_net -t sandbox_web_t -w 1280x1024 firefox</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.200.1">Use </span><em class="italic"><span class="kobospan" id="kobo.201.1">Ctrl</span></em><span class="kobospan" id="kobo.202.1"> + </span><em class="italic"><span class="kobospan" id="kobo.203.1">H</span></em><span class="kobospan" id="kobo.204.1"> to open the </span><span><span class="kobospan" id="kobo.205.1">browsing history:</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer173">
<span class="kobospan" id="kobo.206.1"><img alt="Figure 6.5 – Checking browsing history" src="image/6.5.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.207.1">Figure 6.5 – Checking browsing history</span></p>
<ol class="calibre13">
<li value="8" class="calibre14"><span class="kobospan" id="kobo.208.1">Close the Firefox sandboxing </span><span><span class="kobospan" id="kobo.209.1">window again.</span></span></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.210.1">Observe that no information about the website visited was saved. </span><span class="kobospan" id="kobo.210.2">This information gets saved in a system file. </span><span class="kobospan" id="kobo.210.3">Firefox runs in isolation and the information is stored inside the sandbox. </span><span class="kobospan" id="kobo.210.4">When the</span><a id="_idIndexMarker412" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.211.1"> sandbox is closed, the information stored in it </span><span><span class="kobospan" id="kobo.212.1">is </span></span><span><a id="_idIndexMarker413" class="pcalibre1 calibre6 pcalibre"/></span><span><span class="kobospan" id="kobo.213.1">deleted.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.214.1">The SELinux sandbox has many practical uses, for example, if an </span><em class="italic"><span class="kobospan" id="kobo.215.1">untrusted file</span></em><span class="kobospan" id="kobo.216.1"> needs to </span><span><span class="kobospan" id="kobo.217.1">be opened.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.218.1">With a </span><strong class="source-inline"><span class="kobospan" id="kobo.219.1">pdf</span></strong><span class="kobospan" id="kobo.220.1"> file, as an example, run </span><strong class="source-inline"><span class="kobospan" id="kobo.221.1">evince</span></strong><span class="kobospan" id="kobo.222.1"> in a sandbox to read it. </span><span class="kobospan" id="kobo.222.2">Use the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.223.1">sandbox</span></strong></span><span><span class="kobospan" id="kobo.224.1"> command:</span></span></p>
<pre class="console"><span class="kobospan1" id="kobo.225.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.226.1">sandbox -X -i /home/acallejas/findings.pdf evince /home/acallejas/findings.pdf</span></strong></pre> <p class="calibre3"><span class="kobospan" id="kobo.227.1">With the preceding command, an untrusted file is added to the sandbox, indicating the full path to the file (</span><strong class="source-inline"><span class="kobospan" id="kobo.228.1">-</span></strong><span><strong class="source-inline"><span class="kobospan" id="kobo.229.1">i /home/acallejas/findings.pdf</span></strong></span><span><span class="kobospan" id="kobo.230.1">).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.231.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.232.1">For more information on the use of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.233.1">sandbox</span></strong><span class="kobospan" id="kobo.234.1"> command, refer to the </span><strong class="bold"><span class="kobospan" id="kobo.235.1">manual</span></strong><span class="kobospan" id="kobo.236.1"> by running </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.237.1">man sandbox</span></strong></span><span><span class="kobospan" id="kobo.238.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.239.1">The SELinux sandbox is one of the most basic ways to isolate an application. </span><span class="kobospan" id="kobo.239.2">Using this idea, it is now taken a step further using different frameworks or forms to package the applications to</span><a id="_idIndexMarker414" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.240.1"> make them portable to different </span><a id="_idIndexMarker415" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.241.1">environments, easing </span><span><span class="kobospan" id="kobo.242.1">their installation.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.243.1">Let’s look at the most common examples of sandbox applications: </span><strong class="bold"><span class="kobospan" id="kobo.244.1">AppImages</span></strong> <span><span class="kobospan" id="kobo.245.1">and </span></span><span><strong class="bold"><span class="kobospan" id="kobo.246.1">Flatpaks</span></strong></span><span><span class="kobospan" id="kobo.247.1">.</span></span></p>
<h1 id="_idParaDest-96" class="calibre5"><a id="_idTextAnchor160" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.248.1">Diving deep into AppImage apps</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.249.1">Introduced in 2004 as </span><strong class="bold"><span class="kobospan" id="kobo.250.1">klik</span></strong><span class="kobospan" id="kobo.251.1"> by </span><em class="italic"><span class="kobospan" id="kobo.252.1">Simon Peter</span></em><span class="kobospan" id="kobo.253.1"> and</span><a id="_idIndexMarker416" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.254.1"> renamed in 2011 as </span><strong class="bold"><span class="kobospan" id="kobo.255.1">PortableLinuxApp</span></strong><span class="kobospan" id="kobo.256.1">, it was finally named in 2013 as we know it </span><span><span class="kobospan" id="kobo.257.1">today: </span></span><span><strong class="bold"><span class="kobospan" id="kobo.258.1">AppImage</span></strong></span><span><span class="kobospan" id="kobo.259.1">.</span></span></p>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.260.1">AppImage</span></strong><span class="kobospan" id="kobo.261.1"> is a universal portable distribution format, also known as </span><span><em class="italic"><span class="kobospan" id="kobo.262.1">upstream packaging</span></em></span><span><span class="kobospan" id="kobo.263.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.264.1">AppImages, as portable applications, do not need installation by the user. </span><span class="kobospan" id="kobo.264.2">They also do not need administrator privileges to run. </span><span class="kobospan" id="kobo.264.3">The user downloads the AppImage and assigns it execution permissions, and the </span><span><span class="kobospan" id="kobo.265.1">application starts.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.266.1">For a developer, creating AppImages is quite simple. </span><span class="kobospan" id="kobo.266.2">An AppImage consists of a program package with dependency libraries and all the resources it needs </span><span><span class="kobospan" id="kobo.267.1">during runtime.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.268.1">AppImages are unique binaries, following the basic principle of </span><em class="italic"><span class="kobospan" id="kobo.269.1">one application = </span></em><span><em class="italic"><span class="kobospan" id="kobo.270.1">one file</span></em></span><span><span class="kobospan" id="kobo.271.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.272.1">The tools to generate an AppImage from an </span><strong class="bold"><span class="kobospan" id="kobo.273.1">AppDir</span></strong><span class="kobospan" id="kobo.274.1">. </span><span class="kobospan" id="kobo.274.2">They are aware of possible incompatibilities between distributions and try to </span><span><span class="kobospan" id="kobo.275.1">avoid them.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.276.1">Once the AppImage is built, it runs on all major </span><span><span class="kobospan" id="kobo.277.1">desktop distributions.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.278.1">Let’s see how to run an AppImage as a user. </span><span class="kobospan" id="kobo.278.2">Then, let’s walk through the development of </span><span><span class="kobospan" id="kobo.279.1">an AppImage.</span></span></p>
<h2 id="_idParaDest-97" class="calibre7"><a id="_idTextAnchor161" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.280.1">Running an AppImage</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.281.1">An AppImage is an </span><a id="_idIndexMarker417" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.282.1">image of the application.When you are running it, it mounts on the filesystem in the user space. </span><span class="kobospan" id="kobo.282.2">Just give it </span><em class="italic"><span class="kobospan" id="kobo.283.1">execution permissions</span></em><span class="kobospan" id="kobo.284.1"> and double-click </span><span><span class="kobospan" id="kobo.285.1">on it.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.286.1">AppImages do not have an </span><em class="italic"><span class="kobospan" id="kobo.287.1">application store</span></em><span class="kobospan" id="kobo.288.1"> from which to download them, but there is a place to find and download hundreds of applications, known as </span><span><strong class="bold"><span class="kobospan" id="kobo.289.1">AppImageHub </span></strong></span><span><span class="kobospan" id="kobo.290.1">(</span></span><a href="https://appimage.github.io/apps/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.291.1">https://appimage.github.io/apps/</span></span></a><span><span class="kobospan" id="kobo.292.1">).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.293.1">For example, to download the developer</span><a id="_idIndexMarker418" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.294.1"> version of </span><strong class="bold"><span class="kobospan" id="kobo.295.1">Firefox Nightly</span></strong><span class="kobospan" id="kobo.296.1"> and test new features without installing it, follow the </span><span><span class="kobospan" id="kobo.297.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.298.1">Open the Firefox browser and go to </span><a href="https://appimage.github.io/apps/" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.299.1">https://appimage.github.io/apps/</span></a><span class="kobospan" id="kobo.300.1">. </span><span class="kobospan" id="kobo.300.2">Press the </span><em class="italic"><span class="kobospan" id="kobo.301.1">Ctrl</span></em><span class="kobospan" id="kobo.302.1"> + </span><em class="italic"><span class="kobospan" id="kobo.303.1">F</span></em><span class="kobospan" id="kobo.304.1"> key combination and search for the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.305.1">firefox</span></strong></span><span><span class="kobospan" id="kobo.306.1"> string:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer174">
<span class="kobospan" id="kobo.307.1"><img alt="Figure 6.6 – Searching for the Firefox Nightly AppImage" src="image/B19121_06_6.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.308.1">Figure 6.6 – Searching for the Firefox Nightly AppImage</span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.309.1">Click on the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.310.1">Firefox_Nightly</span></strong></span><span><span class="kobospan" id="kobo.311.1"> link:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer175">
<span class="kobospan" id="kobo.312.1"><img alt="Figure 6.7 – Firefox_Nightly download window" src="image/B19121_06_7.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.313.1">Figure 6.7 – Firefox_Nightly download window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.314.1">Scroll down and</span><a id="_idIndexMarker419" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.315.1"> click on the </span><span><strong class="bold"><span class="kobospan" id="kobo.316.1">Download</span></strong></span><span><span class="kobospan" id="kobo.317.1"> button.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.318.1">This button takes us to the GitHub repository where the AppImage resides. </span><span class="kobospan" id="kobo.318.2">Click on the </span><em class="italic"><span class="kobospan" id="kobo.319.1">latest version</span></em><span class="kobospan" id="kobo.320.1"> to </span><span><span class="kobospan" id="kobo.321.1">download it:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer176">
<span class="kobospan" id="kobo.322.1"><img alt="Figure 6.8 – Latest version in AppImage format" src="image/B19121_06_8.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.323.1">Figure 6.8 – Latest version in AppImage format</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.324.1">Wait for the </span><a id="_idIndexMarker420" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.325.1">download </span><span><span class="kobospan" id="kobo.326.1">to finish.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.327.1">Open a terminal and switch to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.328.1">Downloads</span></strong><span class="kobospan" id="kobo.329.1"> directory. </span><span class="kobospan" id="kobo.329.2">Review the downloaded AppImage by running a long listing. </span><span class="kobospan" id="kobo.329.3">Use the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.330.1">ls</span></strong></span><span><span class="kobospan" id="kobo.331.1"> command:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer177">
<span class="kobospan" id="kobo.332.1"><img alt="Figure 6.9 – Checking the AppImage" src="image/B19121_06_9.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.333.1">Figure 6.9 – Checking the AppImage</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.334.1">Grant </span><em class="italic"><span class="kobospan" id="kobo.335.1">execution permissions</span></em><span class="kobospan" id="kobo.336.1"> to AppImage using the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.337.1">chmod</span></strong></span><span><span class="kobospan" id="kobo.338.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.339.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.340.1">chmod +x firefox-nightly-113.0.r20230321213816-x86_64.AppImage</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.341.1">Open the file browser and change parent directory to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.342.1">Downloads</span></strong><span class="kobospan" id="kobo.343.1"> directory. </span><span class="kobospan" id="kobo.343.2">Right-click on the AppImage icon and click on </span><strong class="bold"><span class="kobospan" id="kobo.344.1">Properties</span></strong><span class="kobospan" id="kobo.345.1">. </span><span class="kobospan" id="kobo.345.2">Verify that the </span><strong class="bold"><span class="kobospan" id="kobo.346.1">Executable as program</span></strong><span class="kobospan" id="kobo.347.1"> switch </span><a id="_idIndexMarker421" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.348.1">button </span><span><span class="kobospan" id="kobo.349.1">is enabled:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer178">
<span class="kobospan" id="kobo.350.1"><img alt="Figure 6.10 – AppImage properties" src="image/B19121_06_10.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.351.1">Figure 6.10 – AppImage properties</span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.352.1">Close the </span><strong class="bold"><span class="kobospan" id="kobo.353.1">Properties</span></strong><span class="kobospan" id="kobo.354.1"> window by clicking on </span><strong class="bold"><span class="kobospan" id="kobo.355.1">X</span></strong><span class="kobospan" id="kobo.356.1"> in the </span><span><span class="kobospan" id="kobo.357.1">upper-right corner.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.358.1">Double-click on the AppImage icon. </span><span class="kobospan" id="kobo.358.2">The Firefox Nightly </span><span><span class="kobospan" id="kobo.359.1">window opens:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer179">
<span class="kobospan" id="kobo.360.1"><img alt="Figure 6.11 – Firefox Nightly on AppImage" src="image/B19121_06_11.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.361.1">Figure 6.11 – Firefox Nightly on AppImage</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.362.1">With these simple steps, the</span><a id="_idIndexMarker422" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.363.1"> application runs without being installed. </span><span class="kobospan" id="kobo.363.2">If we prefer, we could create a </span><em class="italic"><span class="kobospan" id="kobo.364.1">launcher</span></em><span class="kobospan" id="kobo.365.1"> and add it to the shortcuts of </span><span><span class="kobospan" id="kobo.366.1">the taskbar.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.367.1">Let’s see now how to </span><span><span class="kobospan" id="kobo.368.1">develop AppImages.</span></span></p>
<h2 id="_idParaDest-98" class="calibre7"><a id="_idTextAnchor162" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.369.1">Developing AppImages</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.370.1">Developing AppImages</span><a id="_idIndexMarker423" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.371.1"> is very simple. </span><span class="kobospan" id="kobo.371.2">The </span><strong class="bold"><span class="kobospan" id="kobo.372.1">AppImage</span></strong><span class="kobospan" id="kobo.373.1"> proje</span><a id="_idTextAnchor163" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.374.1">ct provides </span><strong class="bold"><span class="kobospan" id="kobo.375.1">AppImageKit</span></strong><span class="kobospan" id="kobo.376.1">,  an implementation of the AppImage format focused on the </span><em class="italic"><span class="kobospan" id="kobo.377.1">tiny runtime</span></em><span class="kobospan" id="kobo.378.1"> of </span><span><span class="kobospan" id="kobo.379.1">each one.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.380.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.381.1">AppImageKit is available to download </span><span><span class="kobospan" id="kobo.382.1">at </span></span><a href="https://github.com/AppImage/AppImageKit/releases/continuous" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.383.1">https://github.com/AppImage/AppImageKit/releases/continuous</span></span></a><span><span class="kobospan" id="kobo.384.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.385.1">The core components of AppImageKit are </span><span><span class="kobospan" id="kobo.386.1">as follows:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.387.1">runtime</span></strong><span class="kobospan" id="kobo.388.1">: The runtime provides an executable header for an AppImage. </span><span class="kobospan" id="kobo.388.2">The runtime mounts the filesystem image to a temporary location. </span><span class="kobospan" id="kobo.388.3">Such a filesystem image is called an </span><em class="italic"><span class="kobospan" id="kobo.389.1">AppDir</span></em><span class="kobospan" id="kobo.390.1">. </span><span class="kobospan" id="kobo.390.2">It then launches the payload application. </span><span class="kobospan" id="kobo.390.3">Downloading it is </span><span><span class="kobospan" id="kobo.391.1">not required.</span></span></li>
<li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.392.1">Appimagetool</span></strong><span class="kobospan" id="kobo.393.1">: This creates the AppImages by embedding the runtime and attaching the AppDir inside it. </span><span class="kobospan" id="kobo.393.2">This tool comes as </span><span><span class="kobospan" id="kobo.394.1">an AppImage.</span></span></li>
<li class="calibre14"><strong class="source-inline1"><span class="kobospan" id="kobo.395.1">AppRun</span></strong><span class="kobospan" id="kobo.396.1">: This provides the entry point of the AppImage. </span><span class="kobospan" id="kobo.396.2">The runtime executes this file inside the AppDir. </span><span class="kobospan" id="kobo.396.3">It doesn’t need to be a regular file; it could be a symlink to the </span><span><span class="kobospan" id="kobo.397.1">main binary.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.398.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.399.1">The project adds and deprecates extra tools in the AppImageKit all the time, even those from third parties. </span><span class="kobospan" id="kobo.399.2">So, keep an eye out for updates to the </span><span><span class="kobospan" id="kobo.400.1">GitHub repository.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.401.1">To create an AppImage, according to the project documentation, follow </span><span><span class="kobospan" id="kobo.402.1">these steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.403.1">Download </span><strong class="source-inline1"><span class="kobospan" id="kobo.404.1">appimagetool</span></strong><span class="kobospan" id="kobo.405.1"> using the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.406.1">wget</span></strong></span><span><span class="kobospan" id="kobo.407.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.408.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.409.1">wget</span></strong><span class="kobospan1" id="kobo.410.1"> \
&gt; </span><strong class="bold1"><span class="kobospan1" id="kobo.411.1">https://github.com/AppImage/AppImageKit/releases/download/continuous/appimagetool-x86_64.AppImage</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.412.1">Add execution permissions with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.413.1">chmod</span></strong></span><span><span class="kobospan" id="kobo.414.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.415.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.416.1">chmod a+x appimagetool-x86_64.AppImage</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.417.1">To create the AppDir, use a high-level tool such as </span><strong class="source-inline1"><span class="kobospan" id="kobo.418.1">linuxdeployqt</span></strong><span class="kobospan" id="kobo.419.1">. </span><span class="kobospan" id="kobo.419.2">Assuming that the AppDir already has everything needed to run the application, run the </span><strong class="source-inline1"><span class="kobospan" id="kobo.420.1">appimagetool</span></strong><span class="kobospan" id="kobo.421.1"> command to generate </span><span><span class="kobospan" id="kobo.422.1">the AppImage:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.423.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.424.1">./appimagetool-x86_64.AppImage some.AppDir</span></strong></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.425.1">With this simple procedure, the new AppImage is created and ready </span><span><span class="kobospan" id="kobo.426.1">to distribute.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.427.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.428.1">For more information on the use of AppImageKit, refer to the GitHub repository </span><span><span class="kobospan" id="kobo.429.1">at </span></span><a href="https://github.com/AppImage/AppImageKit" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.430.1">https://github.com/AppImage/AppImageKit</span></span></a><span><span class="kobospan" id="kobo.431.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.432.1">So, now we know how to </span><a id="_idIndexMarker424" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.433.1">create and use AppImages, it’s time to look at the proposal drawn up by the Fedora Project itself. </span><span class="kobospan" id="kobo.433.2">Let’s take a walk through </span><span><span class="kobospan" id="kobo.434.1">the </span></span><span><strong class="bold"><span class="kobospan" id="kobo.435.1">flatpaks</span></strong></span><span><span class="kobospan" id="kobo.436.1">.</span></span></p>
<h1 id="_idParaDest-99" class="calibre5"><a id="_idTextAnchor164" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.437.1">Examining Flatpak applications</span></h1>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.438.1">First</span></strong><span class="kobospan" id="kobo.439.1"> is one of </span><a id="_idIndexMarker425" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.440.1">Fedora’s </span><a id="_idIndexMarker426" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.441.1">founding principles, so </span><strong class="bold"><span class="kobospan" id="kobo.442.1">Fedora Linux</span></strong><span class="kobospan" id="kobo.443.1"> is always on the </span><span><em class="italic"><span class="kobospan" id="kobo.444.1">cutting edge</span></em></span><span><span class="kobospan" id="kobo.445.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.446.1">Flatpak is a new distribution-independent format for packaging and distributing Linux </span><span><span class="kobospan" id="kobo.447.1">desktop applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.448.1">The main goals of Flatpak include </span><span><span class="kobospan" id="kobo.449.1">the following:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span class="kobospan" id="kobo.450.1">Create a single installation file that could be distributed to users of </span><span><span class="kobospan" id="kobo.451.1">all distributions</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.452.1">Run applications that are as isolated as possible from the rest of </span><span><span class="kobospan" id="kobo.453.1">the system</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.454.1">The biggest benefit to users is the ability to run any application, regardless of the version of Fedora Linux </span><span><span class="kobospan" id="kobo.455.1">they use.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.456.1">Its development name was </span><strong class="source-inline"><span class="kobospan" id="kobo.457.1">xdg-app</span></strong><span class="kobospan" id="kobo.458.1"> and it was renamed </span><strong class="bold"><span class="kobospan" id="kobo.459.1">Flatpak</span></strong><span class="kobospan" id="kobo.460.1"> in 2016 to reflect the fact that it became ready for </span><span><span class="kobospan" id="kobo.461.1">wider use.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.462.1">Flatpak is a system for building, distributing, and running sandboxed desktop applications </span><span><span class="kobospan" id="kobo.463.1">on Linux.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.464.1">Flatpak applications are installed through the </span><strong class="source-inline"><span class="kobospan" id="kobo.465.1">flatpak</span></strong><span class="kobospan" id="kobo.466.1"> command or through a GUI such as </span><strong class="bold"><span class="kobospan" id="kobo.467.1">GNOME Software</span></strong><span class="kobospan" id="kobo.468.1"> or </span><span><strong class="bold"><span class="kobospan" id="kobo.469.1">KDE Discover</span></strong></span><span><span class="kobospan" id="kobo.470.1">.</span></span></p>
<p class="calibre3"><strong class="bold"><span class="kobospan" id="kobo.471.1">Flatpak</span></strong><span class="kobospan" id="kobo.472.1"> introduces some basic concepts, such as </span><span><span class="kobospan" id="kobo.473.1">the following:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.474.1">Runtime</span></strong><span class="kobospan" id="kobo.475.1">: A platform that provides the basic utilities needed for a Flatpak application </span><span><span class="kobospan" id="kobo.476.1">to run.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.477.1">BaseApp</span></strong><span class="kobospan" id="kobo.478.1">: An integrated platform for frameworks such </span><span><span class="kobospan" id="kobo.479.1">as </span></span><span><em class="italic"><span class="kobospan" id="kobo.480.1">Electron</span></em></span><span><span class="kobospan" id="kobo.481.1">.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.482.1">Flatpak bundle</span></strong><span class="kobospan" id="kobo.483.1">: A specific export format for a single file. </span><span class="kobospan" id="kobo.483.2">It contains one application. </span><span class="kobospan" id="kobo.483.3">It is also known as </span><span><em class="italic"><span class="kobospan" id="kobo.484.1">Flatpak runtime</span></em></span><span><span class="kobospan" id="kobo.485.1">.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.486.1">Sandboxes</span></strong><span class="kobospan" id="kobo.487.1">: Applications build and run in an isolated environment. </span><span class="kobospan" id="kobo.487.2">Only the content of the sandbox can be accessed by the program. </span><span class="kobospan" id="kobo.487.3">Access to other resources, such as processes other than the sandbox, is </span><span><span class="kobospan" id="kobo.488.1">not possible.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.489.1">Portals</span></strong><span class="kobospan" id="kobo.490.1">: The mechanism through which applications interact with the host environment from within a sandbox. </span><span class="kobospan" id="kobo.490.2">It provides interaction with data, files, and services without the need to add permissions to </span><span><span class="kobospan" id="kobo.491.1">the sandbox.</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.492.1">Repositories</span></strong><span class="kobospan" id="kobo.493.1">: Flatpak applications and runtimes get stored and published via repositories such as Git repositories, which in some cases are </span><span><span class="kobospan" id="kobo.494.1">named </span></span><span><em class="italic"><span class="kobospan" id="kobo.495.1">registries</span></em></span><span><span class="kobospan" id="kobo.496.1">.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.497.1">Let’s now look at the</span><a id="_idIndexMarker427" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.498.1"> mechanisms for running Flatpak applications, and then we’ll walk a little bit through the development of </span><span><span class="kobospan" id="kobo.499.1">Flatpak applications.</span></span></p>
<h2 id="_idParaDest-100" class="calibre7"><a id="_idTextAnchor165" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.500.1">Using Flatpak applications</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.501.1">Flatpak is installed </span><a id="_idIndexMarker428" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.502.1">by default on Fedora </span><span><span class="kobospan" id="kobo.503.1">desktop variants.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.504.1">Flatpak applications are </span><em class="italic"><span class="kobospan" id="kobo.505.1">fully integrated</span></em><span class="kobospan" id="kobo.506.1"> into the operating system’s package manager. </span><span class="kobospan" id="kobo.506.2">We can install them using the graphical interface or the </span><span><span class="kobospan" id="kobo.507.1">command line.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.508.1">Let’s first look at the simplest form of installation using </span><span><span class="kobospan" id="kobo.509.1">the GUI.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.510.1">Using the GUI</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.511.1">The origin of</span><a id="_idIndexMarker429" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.512.1"> installable applications might come as a package built on</span><a id="_idIndexMarker430" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.513.1"> the OS, not sandboxed or built in </span><span><span class="kobospan" id="kobo.514.1">a sandbox.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.515.1">For the end user, there is no difference, but it is possible to find out the installation format of an application from the software manager. </span><span class="kobospan" id="kobo.515.2">It is very simple. </span><span class="kobospan" id="kobo.515.3">For example, let’s inspect the format that installed the Firefox browser and its installation options. </span><span class="kobospan" id="kobo.515.4">Follow the </span><span><span class="kobospan" id="kobo.516.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.517.1">As a </span><em class="italic"><span class="kobospan" id="kobo.518.1">non-root user</span></em><span class="kobospan" id="kobo.519.1">, open the </span><strong class="bold"><span class="kobospan" id="kobo.520.1">Activities Overview</span></strong><span class="kobospan" id="kobo.521.1"> menu and click </span><span><span class="kobospan" id="kobo.522.1">on </span></span><span><strong class="bold"><span class="kobospan" id="kobo.523.1">Software</span></strong></span><span><span class="kobospan" id="kobo.524.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer180">
<span class="kobospan" id="kobo.525.1"><img alt="Figure 6.12 – Activities Overview menu" src="image/6.12.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.526.1">Figure 6.12 – Activities Overview menu</span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.527.1">Click on the </span><em class="italic"><span class="kobospan" id="kobo.528.1">search</span></em><span class="kobospan" id="kobo.529.1"> icon in the upper-left corner. </span><span class="kobospan" id="kobo.529.2">In the search field, type </span><strong class="source-inline1"><span class="kobospan" id="kobo.530.1">firefox</span></strong><span class="kobospan" id="kobo.531.1"> and </span><span><span class="kobospan" id="kobo.532.1">press </span></span><span><em class="italic"><span class="kobospan" id="kobo.533.1">Enter</span></em></span><span><span class="kobospan" id="kobo.534.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer181">
<span class="kobospan" id="kobo.535.1"><img alt="Figure 6.13 – Search for the application" src="image/6.13.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.536.1">Figure 6.13 – Search for the application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.537.1">Click </span><a id="_idIndexMarker431" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.538.1">on the </span><strong class="bold"><span class="kobospan" id="kobo.539.1">Firefox</span></strong><span class="kobospan" id="kobo.540.1"> icon, shown</span><a id="_idIndexMarker432" class="pcalibre1 calibre6 pcalibre"/> <span><span class="kobospan" id="kobo.541.1">as </span></span><span><strong class="bold"><span class="kobospan" id="kobo.542.1">Installed</span></strong></span><span><span class="kobospan" id="kobo.543.1">.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.544.1">Below the </span><strong class="bold"><span class="kobospan" id="kobo.545.1">Open</span></strong><span class="kobospan" id="kobo.546.1"> button, find the </span><em class="italic"><span class="kobospan" id="kobo.547.1">installation source</span></em><span class="kobospan" id="kobo.548.1">. </span><span class="kobospan" id="kobo.548.2">Click on the </span><span><span class="kobospan" id="kobo.549.1">drop-down list:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer182">
<span class="kobospan" id="kobo.550.1"><img alt="Figure 6.14 – Firefox installation source" src="image/6.14.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.551.1">Figure 6.14 – Firefox installation source</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.552.1">Installation options for Firefox include </span><span><span class="kobospan" id="kobo.553.1">the following:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.554.1">FLATPAK</span></strong><span class="kobospan" id="kobo.555.1">: From the official Fedora registry (</span><a href="http://registry.fedoraproject.org" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.556.1">registry.fedoraproject.org</span></a><span class="kobospan" id="kobo.557.1">) as a </span><span><span class="kobospan" id="kobo.558.1">Flatpak application</span></span></li>
<li class="calibre14"><strong class="bold"><span class="kobospan" id="kobo.559.1">RPM</span></strong><span class="kobospan" id="kobo.560.1">: From the official Fedora repositories (</span><a href="http://fedoraproject.org" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.561.1">fedoraproject.org</span></a><span class="kobospan" id="kobo.562.1">) </span><span><span class="kobospan" id="kobo.563.1">as RPM</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.564.1">In this case, it </span><a id="_idIndexMarker433" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.565.1">shows that Firefox was installed from</span><a id="_idIndexMarker434" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.566.1"> the official Fedora repositories as a </span><span><span class="kobospan" id="kobo.567.1">built RPM.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.568.1">So, to install a Flatpak application with the software manager, just select the </span><span><span class="kobospan" id="kobo.569.1">installation source.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.570.1">Let’s install a </span><em class="italic"><span class="kobospan" id="kobo.571.1">digital painting editor</span></em><span class="kobospan" id="kobo.572.1"> as an example. </span><span class="kobospan" id="kobo.572.2">Follow the </span><span><span class="kobospan" id="kobo.573.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.574.1">In the search field of the software manager, </span><span><span class="kobospan" id="kobo.575.1">type </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.576.1">krita</span></strong></span><span><span class="kobospan" id="kobo.577.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer183">
<span class="kobospan" id="kobo.578.1"><img alt="Figure 6.15 – Search for the application" src="image/6.15.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.579.1">Figure 6.15 – Search for the application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.580.1">Click on</span><a id="_idIndexMarker435" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.581.1"> the</span><a id="_idIndexMarker436" class="pcalibre1 calibre6 pcalibre"/> <span><span class="kobospan" id="kobo.582.1">first result.</span></span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.583.1">Verify the installation source as a Flatpak application. </span><span class="kobospan" id="kobo.583.2">Below the </span><strong class="bold"><span class="kobospan" id="kobo.584.1">Install</span></strong><span class="kobospan" id="kobo.585.1"> button, click on the </span><span><span class="kobospan" id="kobo.586.1">drop-down list:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer184">
<span class="kobospan" id="kobo.587.1"><img alt="Figure 6.16 – Verifying the installation source" src="image/6.16.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.588.1">Figure 6.16 – Verifying the installation source</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.589.1">Choose </span><strong class="bold"><span class="kobospan" id="kobo.590.1">Flatpak</span></strong><span class="kobospan" id="kobo.591.1"> as </span><a id="_idIndexMarker437" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.592.1">the </span><a id="_idIndexMarker438" class="pcalibre1 calibre6 pcalibre"/><span><span class="kobospan" id="kobo.593.1">installation source.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.594.1">Click the </span><strong class="bold"><span class="kobospan" id="kobo.595.1">Install</span></strong><span class="kobospan" id="kobo.596.1"> button. </span><span class="kobospan" id="kobo.596.2">Wait until the installation </span><span><span class="kobospan" id="kobo.597.1">is complete.</span></span></li>
<li class="calibre14"><span class="kobospan" id="kobo.598.1">Click the </span><span><strong class="bold"><span class="kobospan" id="kobo.599.1">Open</span></strong></span><span><span class="kobospan" id="kobo.600.1"> button:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer185">
<span class="kobospan" id="kobo.601.1"><img alt="Figure 6.17 – Open the application" src="image/6.17.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.602.1">Figure 6.17 – Open the application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.603.1">The </span><a id="_idIndexMarker439" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.604.1">application </span><a id="_idIndexMarker440" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.605.1">opens and is ready </span><span><span class="kobospan" id="kobo.606.1">for use:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer186">
<span class="kobospan" id="kobo.607.1"><img alt="Figure 6.18 – Krita as a Flatpak application" src="image/B19121_06_18.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.608.1">Figure 6.18 – Krita as a Flatpak application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.609.1">As mentioned earlier, the end user experiences no difference with applications built on </span><strong class="source-inline"><span class="kobospan" id="kobo.610.1">rpm</span></strong><span class="kobospan" id="kobo.611.1">. </span><span class="kobospan" id="kobo.611.2">Through the command line, it is possible to inspect the resources used and the isolation of the </span><a id="_idIndexMarker441" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.612.1">application from the system along with other options</span><a id="_idIndexMarker442" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.613.1"> such as adding other repositories of </span><span><span class="kobospan" id="kobo.614.1">Flatpak applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.615.1">Let’s now see how to use the command line to manage </span><span><span class="kobospan" id="kobo.616.1">Flatpak applications.</span></span></p>
<h3 class="calibre9"><span class="kobospan" id="kobo.617.1">Using the CLI</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.618.1">As mentioned</span><a id="_idIndexMarker443" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.619.1"> in </span><a href="B19121_01_split_000.xhtml#_idTextAnchor014" class="pcalibre1 calibre6 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.620.1">Chapter 1</span></em></span></a><span class="kobospan" id="kobo.621.1">, the</span><a id="_idIndexMarker444" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.622.1"> use of the command line expands the system administration capabilities. </span><span class="kobospan" id="kobo.622.2">Let’s analyze the performance of the Flatpak application installed in the previous section. </span><span class="kobospan" id="kobo.622.3">Follow the </span><span><span class="kobospan" id="kobo.623.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.624.1">As a </span><strong class="source-inline1"><span class="kobospan" id="kobo.625.1">root</span></strong><span class="kobospan" id="kobo.626.1"> user, open a terminal and use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.627.1">ps</span></strong><span class="kobospan" id="kobo.628.1"> command to search for the </span><strong class="source-inline1"><span class="kobospan" id="kobo.629.1">xdg-dbus-proxy</span></strong><span class="kobospan" id="kobo.630.1"> and </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.631.1">krita</span></strong></span><span><span class="kobospan" id="kobo.632.1"> processes:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.633.1">[root@workstation ~]# ps axf | egrep "krita|xdg-dbus-proxy"</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.634.1">  13340 ?  S   0:00  |   \_ bwrap --args 42 krita</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.635.1">  13359 ?  S   0:00  |       \_ bwrap --args 42 krita</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.636.1">  13360 ?  Sl  0:04 |           \_ krita</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.637.1">  13353 ?  S   0:00 \_ </span></strong><strong class="bold1"><span class="kobospan1" id="kobo.638.1">bwrap --args 42 xdg-dbus-proxy --args=44</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.639.1">  13354 ?  Sl  0:00      \_ xdg-dbus-proxy --args=44</span></strong></pre><p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.640.1">xdg-dbus-proxy</span></strong><span class="kobospan" id="kobo.641.1"> is a filtering proxy for </span><em class="italic"><span class="kobospan" id="kobo.642.1">D-Bus</span></em><span class="kobospan" id="kobo.643.1"> connections. </span><span class="kobospan" id="kobo.643.2">It is the portal through which the </span><strong class="source-inline"><span class="kobospan" id="kobo.644.1">krita</span></strong><span class="kobospan" id="kobo.645.1"> application interacts with </span><span><span class="kobospan" id="kobo.646.1">the system.</span></span></p></li> <li class="calibre14"><span class="kobospan" id="kobo.647.1">Using the method of the first section of this chapter, track the performance of both </span><a id="_idIndexMarker445" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.648.1">processes. </span><span class="kobospan" id="kobo.648.2">Use</span><a id="_idIndexMarker446" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.649.1"> the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.650.1">top</span></strong></span><span><span class="kobospan" id="kobo.651.1"> command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.652.1">[root@workstation ~]# top -p 13353,13360</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer187">
<span class="kobospan" id="kobo.653.1"><img alt="Figure 6.19 – Flatpak application performance" src="image/B19121_06_19.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.654.1">Figure 6.19 – Flatpak application performance</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.655.1">As mentioned at the beginning of this section, </span><strong class="source-inline"><span class="kobospan" id="kobo.656.1">flatpak</span></strong><span class="kobospan" id="kobo.657.1"> comes installed by default in Fedora Linux. </span><span class="kobospan" id="kobo.657.2">It is available as a command to build, install, and run applications and runtimes. </span><span class="kobospan" id="kobo.657.3">It could operate at the local or wide level, as a </span><strong class="source-inline"><span class="kobospan" id="kobo.658.1">root</span></strong><span class="kobospan" id="kobo.659.1"> or </span><span><em class="italic"><span class="kobospan" id="kobo.660.1">non-root</span></em></span><span><span class="kobospan" id="kobo.661.1"> user.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.662.1">Let’s start to explore the capabilities of the </span><strong class="source-inline"><span class="kobospan" id="kobo.663.1">flatpak</span></strong> <span><span class="kobospan" id="kobo.664.1">command line.</span></span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.665.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.666.1">flatpak</span></strong><span class="kobospan" id="kobo.667.1"> command to list the Flatpak </span><span><span class="kobospan" id="kobo.668.1">applications installed:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.669.1">[root@workstation ~]# flatpak list --app</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer188">
<span class="kobospan" id="kobo.670.1"><img alt="Figure 6.20 – Listing Flatpak applications" src="image/B19121_06_20.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.671.1">Figure 6.20 – Listing Flatpak applications</span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.672.1">To inspect the changes to Flatpak applications on the system, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.673.1">flatpak</span></strong><span class="kobospan" id="kobo.674.1"> command with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.675.1">history</span></strong></span><span><span class="kobospan" id="kobo.676.1"> option:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.677.1">[root@workstation ~]# flatpak history</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer189">
<span class="kobospan" id="kobo.678.1"><img alt="Figure 6.21 – Flatpak history" src="image/B19121_06_21.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.679.1">Figure 6.21 – Flatpak history</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.680.1">These</span><a id="_idIndexMarker447" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.681.1"> changes </span><a id="_idIndexMarker448" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.682.1">include installation, update, or removal, covering applications </span><span><span class="kobospan" id="kobo.683.1">and runtimes.</span></span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.684.1">To show the application details, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.685.1">flatpak</span></strong><span class="kobospan" id="kobo.686.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.687.1">info</span></strong><span class="kobospan" id="kobo.688.1"> option and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.689.1">Application ID</span></strong><span class="kobospan" id="kobo.690.1"> of </span><span><span class="kobospan" id="kobo.691.1">the application:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.692.1">[root@workstation ~]# flatpak info org.kde.krita</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer190">
<span class="kobospan" id="kobo.693.1"><img alt="Figure 6.22 – Flatpak application info" src="image/B19121_06_22.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.694.1">Figure 6.22 – Flatpak application info</span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.695.1">To display the </span><a id="_idIndexMarker449" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.696.1">running applications, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.697.1">flatpak</span></strong><span class="kobospan" id="kobo.698.1"> command</span><a id="_idIndexMarker450" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.699.1"> with the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.700.1">ps</span></strong></span><span><span class="kobospan" id="kobo.701.1"> option:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.702.1">[root@workstation ~]# flatpak ps</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer191">
<span class="kobospan" id="kobo.703.1"><img alt="Figure 6.23 – Running Flatpak applications" src="image/B19121_06_23.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.704.1">Figure 6.23 – Running Flatpak applications</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.705.1">Observe that the </span><strong class="source-inline"><span class="kobospan" id="kobo.706.1">root</span></strong><span class="kobospan" id="kobo.707.1"> user is not running any </span><span><span class="kobospan" id="kobo.708.1">Flatpak applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.709.1">Switch to the </span><em class="italic"><span class="kobospan" id="kobo.710.1">non-root</span></em><span class="kobospan" id="kobo.711.1"> user and run the </span><span><span class="kobospan" id="kobo.712.1">same command:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer192">
<span class="kobospan" id="kobo.713.1"><img alt="Figure 6.24 – Running Flatpak applications" src="image/B19121_06_24.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.714.1">Figure 6.24 – Running Flatpak applications</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.715.1">Let’s now see how we can add Flatpak applications from the command line. </span><span class="kobospan" id="kobo.715.2">But before that, it is important to identify the </span><span><span class="kobospan" id="kobo.716.1">installation source.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.717.1">As mentioned before, Flatpak applications in Fedora Linux are set by default and point to the official registry of </span><span><span class="kobospan" id="kobo.718.1">the distribution.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.719.1">Through the command line, it’s possible to add other repositories as installation sources and install more Flatpak applications because they are not in the Fedora registry, the version is different, or just to have more </span><span><span class="kobospan" id="kobo.720.1">installation sources.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.721.1">Let’s verify the general </span><a id="_idIndexMarker451" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.722.1">repository of Flatpak applications as an</span><a id="_idIndexMarker452" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.723.1"> installation source. </span><span class="kobospan" id="kobo.723.2">Follow the </span><span><span class="kobospan" id="kobo.724.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.725.1">As a </span><strong class="source-inline1"><span class="kobospan" id="kobo.726.1">root</span></strong><span class="kobospan" id="kobo.727.1"> user, open a terminal and use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.728.1">flatpak</span></strong><span class="kobospan" id="kobo.729.1"> command to list </span><span><span class="kobospan" id="kobo.730.1">the repositories:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.731.1">[root@workstation ~]# flatpak remotes</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer193">
<span class="kobospan" id="kobo.732.1"><img alt="Figure 6.25 – Flatpak repositories" src="image/B19121_06_25.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.733.1">Figure 6.25 – Flatpak repositories</span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.734.1">Add more columns to show the details of the repositories. </span><span class="kobospan" id="kobo.734.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.735.1">–</span></strong> <strong class="source-inline1"><span class="kobospan" id="kobo.736.1">–</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.737.1">columns=name,title,url,homepage</span></strong></span><span><span class="kobospan" id="kobo.738.1"> parameter:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer194">
<span class="kobospan" id="kobo.739.1"><img alt="Figure 6.26 – Flatpak application repositories" src="image/B19121_06_26.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.740.1">Figure 6.26 – Flatpak application repositories</span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.741.1">To list the applications available in a repository, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.742.1">flatpak</span></strong><span class="kobospan" id="kobo.743.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.744.1">remote-ls</span></strong><span class="kobospan" id="kobo.745.1"> option and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.746.1">Name</span></strong><span class="kobospan" id="kobo.747.1"> repository. </span><span class="kobospan" id="kobo.747.2">To avoid </span><em class="italic"><span class="kobospan" id="kobo.748.1">runtimes</span></em><span class="kobospan" id="kobo.749.1"> and only list</span><a id="_idIndexMarker453" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.750.1"> the </span><a id="_idIndexMarker454" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.751.1">applications, add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.752.1">–</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.753.1">app</span></strong></span><span><span class="kobospan" id="kobo.754.1"> parameter:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.755.1">[root@workstation ~]# flatpak remote-ls flathub --app</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer195">
<span class="kobospan" id="kobo.756.1"><img alt="Figure 6.27 – Applications available on Flathub" src="image/B19121_06_27.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.757.1">Figure 6.27 – Applications available on Flathub</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.758.1">In </span><em class="italic"><span class="kobospan" id="kobo.759.1">step 1</span></em><span class="kobospan" id="kobo.760.1">, </span><span><em class="italic"><span class="kobospan" id="kobo.761.1">Figure 6</span></em></span><em class="italic"><span class="kobospan" id="kobo.762.1">.25</span></em><span class="kobospan" id="kobo.763.1"> shows that the </span><strong class="source-inline"><span class="kobospan" id="kobo.764.1">flathub</span></strong><span class="kobospan" id="kobo.765.1"> repository appears </span><span><span class="kobospan" id="kobo.766.1">as </span></span><span><em class="italic"><span class="kobospan" id="kobo.767.1">filtered</span></em></span><span><span class="kobospan" id="kobo.768.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.769.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.770.1">This is true for versions before Fedora Linux 38, where the Flathub filter </span><span><span class="kobospan" id="kobo.771.1">was removed.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.772.1">This is because the Fedora Linux configuration points to </span><strong class="source-inline"><span class="kobospan" id="kobo.773.1">Fedora Flatpaks</span></strong><span class="kobospan" id="kobo.774.1">. </span><strong class="source-inline"><span class="kobospan" id="kobo.775.1">Fedora Flatpaks</span></strong><span class="kobospan" id="kobo.776.1"> is the remote Flatpak repository of the </span><span><span class="kobospan" id="kobo.777.1">Fedora Project.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.778.1">The difference is that Flathub makes applications and tools </span><em class="italic"><span class="kobospan" id="kobo.779.1">as accessible as possible</span></em><span class="kobospan" id="kobo.780.1">, no matter what distribution they’re </span><span><span class="kobospan" id="kobo.781.1">used in.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.782.1">On the other hand, </span><strong class="source-inline"><span class="kobospan" id="kobo.783.1">Fedora Flatpaks</span></strong><span class="kobospan" id="kobo.784.1"> pushes RPMs from the Fedora Project and makes them accessible through Fedora Linux as </span><span><span class="kobospan" id="kobo.785.1">Flatpak applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.786.1">To have access to all the Flathub applications, let’s add the repository again </span><span><span class="kobospan" id="kobo.787.1">without restrictions.</span></span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.788.1">Add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.789.1">flathub</span></strong><span class="kobospan" id="kobo.790.1"> repository</span><a id="_idIndexMarker455" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.791.1"> using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.792.1">flatpak</span></strong><span class="kobospan" id="kobo.793.1"> command </span><a id="_idIndexMarker456" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.794.1">with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.795.1">remote-add</span></strong><span class="kobospan" id="kobo.796.1"> option. </span><span class="kobospan" id="kobo.796.2">Add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.797.1">--if-not-exists</span></strong><span class="kobospan" id="kobo.798.1"> parameter</span><a href="https://flathub" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.799.1"> to prevent </span><em class="italic"><span class="kobospan" id="kobo.800.1">reg</span></em></a><em class="italic"><span class="kobospan" id="kobo.801.1">istry overwriting</span></em><span class="kobospan" id="kobo.802.1"> (the repository URL </span><span><span class="kobospan" id="kobo.803.1">is </span></span><a href="https://flathub.org/repo/flathub.flatpakrepo" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.804.1">https://flathub.org/repo/flathub.flatpakrepo</span></span></a><span><span class="kobospan" id="kobo.805.1">):</span></span><pre class="source-code"><span class="kobospan1" id="kobo.806.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.807.1">flatpak remote-add --if-not-exists flathub \</span></strong><span class="kobospan1" id="kobo.808.1">
&gt; </span><strong class="bold1"><span class="kobospan1" id="kobo.809.1">.org/repo/flathub.flatpakrepo</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer196">
<span class="kobospan" id="kobo.810.1"><img alt="Figure 6.28 – Adding the Flathub repository" src="image/B19121_06_28.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.811.1">Figure 6.28 – Adding the Flathub repository</span></p>
<ol class="calibre13">
<li value="5" class="calibre14"><span class="kobospan" id="kobo.812.1">List the repositories again using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.813.1">flatpak </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.814.1">remotes</span></strong></span><span><span class="kobospan" id="kobo.815.1"> command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.816.1">[root@workstation ~]# flatpak remotes</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer197">
<span class="kobospan" id="kobo.817.1"><img alt="Figure 6.29 – Flatpak repositories" src="image/B19121_06_29.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.818.1">Figure 6.29 – Flatpak repositories</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.819.1">Note that Flathub is no longer </span><em class="italic"><span class="kobospan" id="kobo.820.1">filtered</span></em><span class="kobospan" id="kobo.821.1">. </span><span class="kobospan" id="kobo.821.2">Let’s now see what Flatpak applications </span><span><span class="kobospan" id="kobo.822.1">offer us.</span></span></p>
<ol class="calibre13">
<li value="6" class="calibre14"><span class="kobospan" id="kobo.823.1">List the </span><a id="_idIndexMarker457" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.824.1">applications</span><a id="_idIndexMarker458" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.825.1"> available in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.826.1">flathub</span></strong><span class="kobospan" id="kobo.827.1"> repository. </span><span class="kobospan" id="kobo.827.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.828.1">flatpak remote-ls flathub –</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.829.1">app</span></strong></span><span><span class="kobospan" id="kobo.830.1"> command:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer198">
<span class="kobospan" id="kobo.831.1"><img alt="Figure 6.30 – Flathub applications" src="image/B19121_06_30.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.832.1">Figure 6.30 – Flathub applications</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.833.1">If we get the number of applications, we find that it </span><span><span class="kobospan" id="kobo.834.1">has increased:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.835.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.836.1">flatpak remote-ls flathub --app | wc -l</span></strong></pre> <ul class="calibre15">
<li class="calibre14"><span><strong class="bold"><span class="kobospan" id="kobo.837.1">2164</span></strong></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.838.1">Let’s install </span><span><span class="kobospan" id="kobo.839.1">an application.</span></span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.840.1">Switch to a </span><em class="italic"><span class="kobospan" id="kobo.841.1">non-root</span></em><span class="kobospan" id="kobo.842.1"> user and search for the </span><strong class="source-inline1"><span class="kobospan" id="kobo.843.1">Telegram Desktop</span></strong><span class="kobospan" id="kobo.844.1"> app. </span><span class="kobospan" id="kobo.844.2">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.845.1">flatpak remote-ls flathub –app</span></strong><span class="kobospan" id="kobo.846.1"> command and filter the </span><strong class="source-inline1"><span class="kobospan" id="kobo.847.1">Telegram </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.848.1">Desktop</span></strong></span><span><span class="kobospan" id="kobo.849.1"> string:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.850.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.851.1">flatpak remote-ls flathub --app | grep "Telegram Desktop"</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer199">
<span class="kobospan" id="kobo.852.1"><img alt="Figure 6.31 – Searching for the Telegram Desktop Flatpak application" src="image/B19121_06_31.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.853.1">Figure 6.31 – Searching for the Telegram Desktop Flatpak application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.854.1">Before</span><a id="_idIndexMarker459" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.855.1"> installing it, let’s</span><a id="_idIndexMarker460" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.856.1"> get the details of the </span><span><span class="kobospan" id="kobo.857.1">Flatpak application.</span></span></p>
<ol class="calibre13">
<li value="8" class="calibre14"><span class="kobospan" id="kobo.858.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.859.1">flatpak remote-info</span></strong><span class="kobospan" id="kobo.860.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.861.1">flathub</span></strong><span class="kobospan" id="kobo.862.1"> repository option and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.863.1">Application ID</span></strong><span class="kobospan" id="kobo.864.1"> from </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.865.1">Telegram Desktop</span></strong></span><span><span class="kobospan" id="kobo.866.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.867.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.868.1">flatpak remote-info flathub org.telegram.desktop</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer200">
<span class="kobospan" id="kobo.869.1"><img alt="Figure 6.32 – Telegram Desktop info" src="image/B19121_06_32.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.870.1">Figure 6.32 – Telegram Desktop info</span></p>
<ol class="calibre13">
<li value="9" class="calibre14"><span class="kobospan" id="kobo.871.1">To install the </span><a id="_idIndexMarker461" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.872.1">application, use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.873.1">flatpak install</span></strong><span class="kobospan" id="kobo.874.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.875.1">flathub</span></strong><span class="kobospan" id="kobo.876.1"> repository</span><a id="_idIndexMarker462" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.877.1"> option and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.878.1">Telegram Desktop </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.879.1">Application ID</span></strong></span><span><span class="kobospan" id="kobo.880.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.881.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.882.1">flatpak install flathub org.telegram.desktop</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.883.1">Here’s </span><span><span class="kobospan" id="kobo.884.1">the output:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.885.1">Looking for matches…
Required runtime for org.telegram.desktop/x86_64/stable (runtime/org.freedesktop.Platform/x86_64/22.08) found in remote flathub
Do you want to install it? </span><span class="kobospan1" id="kobo.885.2">[Y/n]: </span><strong class="bold1"><span class="kobospan1" id="kobo.886.1">Y</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.887.1">Since it requires a </span><em class="italic"><span class="kobospan" id="kobo.888.1">runtime</span></em><span class="kobospan" id="kobo.889.1"> to be installed first, the command asks us whether we want to install it. </span><span class="kobospan" id="kobo.889.2">Type </span><strong class="source-inline"><span class="kobospan" id="kobo.890.1">Y</span></strong> <span><span class="kobospan" id="kobo.891.1">to install.</span></span></p><p class="calibre3"><span class="kobospan" id="kobo.892.1">Wait for the installation </span><span><span class="kobospan" id="kobo.893.1">to finish:</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer201">
<span class="kobospan" id="kobo.894.1"><img alt="Figure 6.33 – Telegram Desktop installation" src="image/B19121_06_33.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.895.1">Figure 6.33 – Telegram Desktop installation</span></p>
<ol class="calibre13">
<li value="10" class="calibre14"><span class="kobospan" id="kobo.896.1">Once</span><a id="_idIndexMarker463" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.897.1"> installed, use </span><a id="_idIndexMarker464" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.898.1">the </span><strong class="source-inline1"><span class="kobospan" id="kobo.899.1">flatpak run</span></strong><span class="kobospan" id="kobo.900.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.901.1">Application ID</span></strong><span class="kobospan" id="kobo.902.1"> to run </span><span><span class="kobospan" id="kobo.903.1">the application:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.904.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.905.1">flatpak run org.telegram.desktop</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer202">
<span class="kobospan" id="kobo.906.1"><img alt="Figure 6.34 – Telegram Desktop Flatpak application" src="image/6.34.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.907.1">Figure 6.34 – Telegram Desktop Flatpak application</span></p>
<ol class="calibre13">
<li value="11" class="calibre14"><span class="kobospan" id="kobo.908.1">After installation, it is possible to find it in the </span><strong class="bold"><span class="kobospan" id="kobo.909.1">Activities</span></strong><span class="kobospan" id="kobo.910.1"> menu and/or add it to </span><strong class="bold"><span class="kobospan" id="kobo.911.1">Favorites</span></strong><span class="kobospan" id="kobo.912.1"> to display the icon in the </span><span><span class="kobospan" id="kobo.913.1">top bar:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer203">
<span class="kobospan" id="kobo.914.1"><img alt="Figure 6.35 – Searching for Telegram Desktop in the Activities menu" src="image/6.35.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.915.1">Figure 6.35 – Searching for Telegram Desktop in the Activities menu</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.916.1">Both procedures, graphical and CLI, provide an intuitive way to use Flatpak applications, regardless of </span><a id="_idIndexMarker465" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.917.1">the </span><a id="_idIndexMarker466" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.918.1">distribution or </span><span><span class="kobospan" id="kobo.919.1">version installed.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.920.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.921.1">For more information on the use of Flatpak applications,</span><a href="https://docs" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.922.1"> refer to th</span></a><span class="kobospan" id="kobo.923.1">e </span><em class="italic"><span class="kobospan" id="kobo.924.1">Using Flatpak</span></em><span class="kobospan" id="kobo.925.1"> section of Flatpak’s documentation </span><span><span class="kobospan" id="kobo.926.1">at </span></span><a href="https://docs.flatpak.org/en/latest/using-flatpak.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.927.1">https://docs.flatpak.org/en/latest/using-flatpak.html</span></span></a><span><span class="kobospan" id="kobo.928.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.929.1">Now, let’s walk through the process of creating </span><span><span class="kobospan" id="kobo.930.1">Flatpak applications.</span></span></p>
<h2 id="_idParaDest-101" class="calibre7"><a id="_idTextAnchor166" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.931.1">Building Flatpak applications</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.932.1">Building Flatpak</span><a id="_idIndexMarker467" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.933.1"> applications is relatively simple. </span><span class="kobospan" id="kobo.933.2">As a prerequisite, you must install, as a </span><strong class="source-inline"><span class="kobospan" id="kobo.934.1">root</span></strong><span class="kobospan" id="kobo.935.1"> user, the </span><strong class="source-inline"><span class="kobospan" id="kobo.936.1">flatpak-builder</span></strong><span class="kobospan" id="kobo.937.1"> package, either as an RPM or </span><span><span class="kobospan" id="kobo.938.1">Flatpak application:</span></span></p>
<ul class="calibre15">
<li class="calibre14"><span><span class="kobospan" id="kobo.939.1">RP</span></span><p class="calibre3"><span class="kobospan" id="kobo.940.1"># </span><strong class="bold"><span class="kobospan" id="kobo.941.1">dnf </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.942.1">list flatpak-builder</span></strong></span></p></li>
<li class="calibre14"><span><span class="kobospan" id="kobo.943.1">Flatpak application</span></span><p class="calibre3"><span class="kobospan" id="kobo.944.1"># </span><strong class="bold"><span class="kobospan" id="kobo.945.1">flatpak install </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.946.1">flathub org.flatpak.Builder</span></strong></span></p></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.947.1">As an example, let’s create a Flatpak application based on a simple </span><strong class="source-inline"><span class="kobospan" id="kobo.948.1">bash</span></strong><span class="kobospan" id="kobo.949.1"> script. </span><span class="kobospan" id="kobo.949.2">To create our Flatpak application, follow the </span><span><span class="kobospan" id="kobo.950.1">subsequent steps:</span></span></p>
<ol class="calibre13">
<li class="calibre14"><span class="kobospan" id="kobo.951.1">Identify the runtime using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.952.1">flatpak remote-ls</span></strong><span class="kobospan" id="kobo.953.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.954.1">-a</span></strong><span class="kobospan" id="kobo.955.1"> (</span><em class="italic"><span class="kobospan" id="kobo.956.1">all</span></em><span class="kobospan" id="kobo.957.1">) parameter. </span><span class="kobospan" id="kobo.957.2">To search both runtimes and applications in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.958.1">flathub</span></strong><span class="kobospan" id="kobo.959.1"> repository, filter the </span><strong class="source-inline1"><span class="kobospan" id="kobo.960.1">freedesktop platform</span></strong><span class="kobospan" id="kobo.961.1"> string to find the latest version. </span><span class="kobospan" id="kobo.961.2">As an optional</span><a id="_idIndexMarker468" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.962.1"> filter, add a parameter to </span><span><span class="kobospan" id="kobo.963.1">avoid </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.964.1">translations</span></strong></span><span><span class="kobospan" id="kobo.965.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.966.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.967.1">flatpak remote-ls flathub -a | grep -i \</span></strong><span class="kobospan1" id="kobo.968.1">
&gt; </span><strong class="bold1"><span class="kobospan1" id="kobo.969.1">"freedesktop platform" | grep -v translations</span></strong></pre></li> </ol>
<p class="calibre3"> </p>
<div class="calibre2">
<div class="img---figure" id="_idContainer204">
<span class="kobospan" id="kobo.970.1"><img alt="Figure 6.36 – Identifying the runtime" src="image/B19121_06_36.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.971.1">Figure 6.36 – Identifying the runtime</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.972.1">From the preceding figure, we can see that the last version is </span><strong class="source-inline"><span class="kobospan" id="kobo.973.1">22.08</span></strong><span class="kobospan" id="kobo.974.1">. </span><span class="kobospan" id="kobo.974.2">Next, we’ll search for the same version of </span><span><span class="kobospan" id="kobo.975.1">the SDK.</span></span></p>
<ol class="calibre13">
<li value="2" class="calibre14"><span class="kobospan" id="kobo.976.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.977.1">flatpak remote-ls</span></strong><span class="kobospan" id="kobo.978.1"> command with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.979.1">-a</span></strong><span class="kobospan" id="kobo.980.1"> (</span><em class="italic"><span class="kobospan" id="kobo.981.1">all</span></em><span class="kobospan" id="kobo.982.1">) parameter in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.983.1">flathub</span></strong><span class="kobospan" id="kobo.984.1"> repository. </span><span class="kobospan" id="kobo.984.2">Filter the </span><strong class="source-inline1"><span class="kobospan" id="kobo.985.1">freedesktop SDK</span></strong><span class="kobospan" id="kobo.986.1"> string and the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.987.1">22.08</span></strong></span><span><span class="kobospan" id="kobo.988.1"> version:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.989.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.990.1">flatpak remote-ls flathub -a | grep -i \</span></strong><span class="kobospan1" id="kobo.991.1">
&gt; </span><strong class="bold1"><span class="kobospan1" id="kobo.992.1">"freedesktop SDK" | grep 22.08</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer205">
<span class="kobospan" id="kobo.993.1"><img alt="Figure 6.37 – Searching the SDK" src="image/B19121_06_37.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.994.1">Figure 6.37 – Searching the SDK</span></p>
<ol class="calibre13">
<li value="3" class="calibre14"><span class="kobospan" id="kobo.995.1">Use the </span><strong class="source-inline1"><span class="kobospan" id="kobo.996.1">flatpak install</span></strong><span class="kobospan" id="kobo.997.1"> command </span><a id="_idIndexMarker469" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.998.1">to </span><span><span class="kobospan" id="kobo.999.1">install both:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1000.1">
# </span><strong class="bold1"><span class="kobospan1" id="kobo.1001.1">flatpak install flathub \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1002.1">org.freedesktop.Platform//22.08 \</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1003.1">org.freedesktop.Sdk//22.08</span></strong></pre><ul class="calibre17"><li class="calibre14"><span class="kobospan" id="kobo.1004.1">Looking </span><span><span class="kobospan" id="kobo.1005.1">for matches…</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1006.1">Skipping: org.telegram.desktop/x86_64/22.08 is already installed</span></pre></li></ul><p class="calibre3"><span class="kobospan" id="kobo.1007.1">Since we installed the runtime in a previous step, the </span><strong class="source-inline"><span class="kobospan" id="kobo.1008.1">flatpak</span></strong><span class="kobospan" id="kobo.1009.1"> command skips its installation. </span><span class="kobospan" id="kobo.1009.2">Type </span><strong class="source-inline"><span class="kobospan" id="kobo.1010.1">Y</span></strong><span class="kobospan" id="kobo.1011.1"> to install </span><span><span class="kobospan" id="kobo.1012.1">the SDK:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.1013.1">Do you want to install it? </span><span class="kobospan1" id="kobo.1013.2">[Y/n]: </span><strong class="bold1"><span class="kobospan1" id="kobo.1014.1">Y</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.1015.1">Wait for the installation </span><span><span class="kobospan" id="kobo.1016.1">to finish:</span></span></p></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer206">
<span class="kobospan" id="kobo.1017.1"><img alt="Figure 6.38 – SDK installation" src="image/B19121_06_38.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1018.1">Figure 6.38 – SDK installation</span></p>
<ol class="calibre13">
<li value="4" class="calibre14"><span class="kobospan" id="kobo.1019.1">Create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.1020.1">bash</span></strong><span class="kobospan" id="kobo.1021.1"> script. </span><span class="kobospan" id="kobo.1021.2">For example, as a </span><em class="italic"><span class="kobospan" id="kobo.1022.1">non-root</span></em><span class="kobospan" id="kobo.1023.1"> user, copy the following and save it </span><span><span class="kobospan" id="kobo.1024.1">as </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1025.1">script.sh</span></strong></span><span><span class="kobospan" id="kobo.1026.1">:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.1027.1">#!/bin/sh</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.1028.1">echo "Hello world, I'm a flatpak application"</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.1029.1">Add the </span><em class="italic"><span class="kobospan" id="kobo.1030.1">manifest</span></em><span class="kobospan" id="kobo.1031.1">. </span><span class="kobospan" id="kobo.1031.2">Each Flatpak application includes a file with basic build information known </span><a id="_idIndexMarker470" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1032.1">as the </span><em class="italic"><span class="kobospan" id="kobo.1033.1">manifest</span></em><span class="kobospan" id="kobo.1034.1">. </span><span class="kobospan" id="kobo.1034.2">Create a file with the following and save it as </span><strong class="source-inline1"><span class="kobospan" id="kobo.1035.1">org.flatpak.script.yml</span></strong><span class="kobospan" id="kobo.1036.1"> in the same directory as the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1037.1">bash</span></strong></span><span><span class="kobospan" id="kobo.1038.1"> script:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1039.1">
app-id: </span><strong class="bold1"><span class="kobospan1" id="kobo.1040.1">org.flatpak.script</span></strong><span class="kobospan1" id="kobo.1041.1">
runtime: </span><strong class="bold1"><span class="kobospan1" id="kobo.1042.1">org.freedesktop.Platform</span></strong><span class="kobospan1" id="kobo.1043.1">
runtime-version: </span><strong class="bold1"><span class="kobospan1" id="kobo.1044.1">'22.08'</span></strong><span class="kobospan1" id="kobo.1045.1">
sdk: </span><strong class="bold1"><span class="kobospan1" id="kobo.1046.1">org.freedesktop.Sdk</span></strong><span class="kobospan1" id="kobo.1047.1">
command: </span><strong class="bold1"><span class="kobospan1" id="kobo.1048.1">script.sh</span></strong><span class="kobospan1" id="kobo.1049.1">
modules:
  - name: </span><strong class="bold1"><span class="kobospan1" id="kobo.1050.1">script</span></strong><span class="kobospan1" id="kobo.1051.1">
    buildsystem: </span><strong class="bold1"><span class="kobospan1" id="kobo.1052.1">simple</span></strong><span class="kobospan1" id="kobo.1053.1">
    build-commands:
      - </span><strong class="bold1"><span class="kobospan1" id="kobo.1054.1">install -D script.sh /app/bin/script.sh</span></strong><span class="kobospan1" id="kobo.1055.1">
    sources:
      - type: </span><strong class="bold1"><span class="kobospan1" id="kobo.1056.1">file</span></strong><span class="kobospan1" id="kobo.1057.1">
        path: </span><strong class="bold1"><span class="kobospan1" id="kobo.1058.1">script.sh</span></strong></pre></li> <li class="calibre14"><span class="kobospan" id="kobo.1059.1">Build the Flatpak application using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1060.1">flatpak-builder</span></strong><span class="kobospan" id="kobo.1061.1"> command with the target directory and </span><span><span class="kobospan" id="kobo.1062.1">the </span></span><span><em class="italic"><span class="kobospan" id="kobo.1063.1">manifest</span></em></span><span><span class="kobospan" id="kobo.1064.1">:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1065.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1066.1">flatpak-builder build-dir org.flatpak.script.yml</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer207">
<span class="kobospan" id="kobo.1067.1"><img alt="Figure 6.39 – Building the Flatpak application" src="image/B19121_06_39.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1068.1">Figure 6.39 – Building the Flatpak application</span></p>
<ol class="calibre13">
<li value="7" class="calibre14"><span class="kobospan" id="kobo.1069.1">Install the Flatpak </span><a id="_idIndexMarker471" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1070.1">application using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1071.1">flatpak-builder</span></strong><span class="kobospan" id="kobo.1072.1"> command. </span><span class="kobospan" id="kobo.1072.2">Add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1073.1">--user</span></strong><span class="kobospan" id="kobo.1074.1"> option to install dependencies on the user’s local installation. </span><span class="kobospan" id="kobo.1074.2">With the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1075.1">--force-clean</span></strong><span class="kobospan" id="kobo.1076.1"> option, delete the previously created directory. </span><span class="kobospan" id="kobo.1076.2">This removes the contents of the directory and creates new </span><span><span class="kobospan" id="kobo.1077.1">build content:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1078.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1079.1">flatpak-builder --user --install --force-clean \</span></strong><span class="kobospan1" id="kobo.1080.1">
&gt; </span><strong class="bold1"><span class="kobospan1" id="kobo.1081.1">build-dir org.flatpak.script.yml</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer208">
<span class="kobospan" id="kobo.1082.1"><img alt="Figure 6.40 – Installing the Flatpak application" src="image/B19121_06_40.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1083.1">Figure 6.40 – Installing the Flatpak application</span></p>
<ol class="calibre13">
<li value="8" class="calibre14"><span class="kobospan" id="kobo.1084.1">Run the Flatpak application using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1085.1">flatpak </span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.1086.1">run</span></strong></span><span><span class="kobospan" id="kobo.1087.1"> command:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.1088.1">
$ </span><strong class="bold1"><span class="kobospan1" id="kobo.1089.1">flatpak run org.flatpak.script</span></strong></pre></li> </ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer209">
<span class="kobospan" id="kobo.1090.1"><img alt="Figure 6.41 – Running the Flatpak application" src="image/B19121_06_41.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1091.1">Figure 6.41 – Running the Flatpak application</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1092.1">This way, we have a</span><a id="_idIndexMarker472" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1093.1"> Flatpak application based on a simple script with all the necessary sandbox and </span><span><span class="kobospan" id="kobo.1094.1">isolation features.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1095.1">In a more complex case, the </span><em class="italic"><span class="kobospan" id="kobo.1096.1">manifest</span></em><span class="kobospan" id="kobo.1097.1"> should include all the necessary dependencies and files, declared </span><span><span class="kobospan" id="kobo.1098.1">as </span></span><span><em class="italic"><span class="kobospan" id="kobo.1099.1">modules</span></em></span><span><span class="kobospan" id="kobo.1100.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1101.1">Note</span></p>
<p class="callout"><span class="kobospan" id="kobo.1102.1">For more information on the build of Flatpak applications, refer to the </span><em class="italic"><span class="kobospan" id="kobo.1103.1">Building</span></em><span class="kobospan" id="kobo.1104.1"> section of Flatpak’s documentation </span><span><span class="kobospan" id="kobo.1105.1">at </span></span><a href="https://docs.flatpak.org/en/latest/building.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1106.1">https://docs.flatpak.org/en/latest/building.html</span></span></a><span><span class="kobospan" id="kobo.1107.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1108.1">This concludes our tour of sandbox applications. </span><span class="kobospan" id="kobo.1108.2">In the following chapters, we will discuss the installation options for different applications. </span><span class="kobospan" id="kobo.1108.3">Some should be installed via RPM and some </span><a id="_idIndexMarker473" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1109.1">others should be available as AppImages or </span><span><span class="kobospan" id="kobo.1110.1">Flatpak applications.</span></span></p>
<h1 id="_idParaDest-102" class="calibre5"><a id="_idTextAnchor167" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1111.1">Summary</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.1112.1">In this chapter, we learned how sandbox applications work, from a very illustrative example using SELinux and Firefox, to portable application formats widely </span><span><span class="kobospan" id="kobo.1113.1">used today.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1114.1">We explored AppImage apps, from how to run them to using the AppImageKit to </span><span><span class="kobospan" id="kobo.1115.1">generate AppImages.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1116.1">Finally, we took a deep look at Flatpak applications, a format that supports the Fedora Project and even maintains its own version of Fedora Flatpaks based </span><span><span class="kobospan" id="kobo.1117.1">on RPMs.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1118.1">We also learned how to use the command line to extend the administration and use of </span><span><span class="kobospan" id="kobo.1119.1">sandboxed applications.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1120.1">In the next chapter, we will take a walk through the most popular terminal-based text editors, plus look at some usage tricks </span><span><span class="kobospan" id="kobo.1121.1">and customizations.</span></span></p>
<h1 id="_idParaDest-103" class="calibre5"><a id="_idTextAnchor168" class="pcalibre1 calibre6 pcalibre"/><span class="kobospan" id="kobo.1122.1">Further reading</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.1123.1">To learn more about the top</span><a href="https://flatpak.org/" class="pcalibre1 calibre6 pcalibre"><span class="kobospan" id="kobo.1124.1">ics covered in this </span></a><span class="kobospan" id="kobo.1125.1">chapter, you can visit the </span><span><span class="kobospan" id="kobo.1126.1">foll</span></span><a href="https://fedoramagazine.org/getting-started-flatpak/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1127.1">owing links:</span></span></a></p>
<ul class="calibre15">
<li class="calibre14"><a href="https://fedoramagazine.org/getting-started-flatpak/" class="pcalibre1 calibre6 pcalibre"><span><em class="italic"><span class="kobospan" id="kobo.1128.1">Flatpak</span></em></span><span><span class="kobospan" id="kobo.1129.1">: </span></span><span><span class="kobospan" id="kobo.1130.1">https://flatpak.org/</span></span></a></li>
<li class="calibre14"><a href="https://fedoramagazine.org/getting-started-flatpak/" class="pcalibre1 calibre6 pcalibre"><em class="italic"><span class="kobospan" id="kobo.1131.1">Getting </span></em></a><em class="italic"><span class="kobospan" id="kobo.1132.1">Started with </span></em><span><em class="italic"><span class="kobospan" id="kobo.1133.1">Flatpak</span></em></span><span><span class="kobospan" id="kobo.1134.1">: </span></span><span><span class="kobospan" id="kobo.1135.1">https://fedoram</span></span><a href="https://fedoramagazine.org/an-introduction-to-fedora-flatpaks/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1136.1">agazine.org/getting-started-flatpak/</span></span></a></li>
<li class="calibre14"><a href="https://fedoramagazine.org/an-introduction-to-fedora-flatpaks/" class="pcalibre1 calibre6 pcalibre"><em class="italic"><span class="kobospan" id="kobo.1137.1">An introduction to Fedora</span></em></a><em class="italic"> </em><span><em class="italic"><span class="kobospan" id="kobo.1138.1">Flatpaks</span></em></span><span><span class="kobospan" id="kobo.1139.1">: </span></span><span><span class="kobospan" id="kobo.1140.1">https://fedoramagazine.org/an-introductio</span></span><a href="https://fedoramagazine.org/comparison-of-fedora-flatpaks-and-flathub-remotes/" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1141.1">n-to-fedora-flatpaks/</span></span></a></li>
<li class="calibre14"><a href="https://fedoramagazine.org/comparison-of-fedora-flatpaks-and-flathub-remotes/" class="pcalibre1 calibre6 pcalibre"><em class="italic"><span class="kobospan" id="kobo.1142.1">Comparison of Fedora Flatpaks and Flathub </span></em><span><em class="italic"><span class="kobospan" id="kobo.1143.1">remotes</span></em></span><span><span class="kobospan" id="kobo.1144.1">: </span></span><span><span class="kobospan" id="kobo.1145.1">http</span></span></a><span><span class="kobospan" id="kobo.1146.1">s://fedoramagazi</span></span><a href="https://developer.fedoraproject.org/deployment/flatpak/flatpak-usage.html" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1147.1">ne.org/comparison-of-fedora-flatpaks-and-flathub-remotes/</span></span></a></li>
<li class="calibre14"><a href="https://developer.fedoraproject.org/deployment/flatpak/flatpak-usage.html" class="pcalibre1 calibre6 pcalibre"><em class="italic"><span class="kobospan" id="kobo.1148.1">Flatpak </span></em><span><em class="italic"><span class="kobospan" id="kobo.1149.1">Usage</span></em></span><span><span class="kobospan" id="kobo.1150.1">: </span></span></a><span><span class="kobospan" id="kobo.1151.1">https://de</span></span><a href="https://flathub.org/home" class="pcalibre1 calibre6 pcalibre"><span><span class="kobospan" id="kobo.1152.1">veloper.fedoraproject.or</span></span></a><span><span class="kobospan" id="kobo.1153.1">g/deployment/flatpak/flatpak-usage.html</span></span></li>
<li class="calibre14"><span><em class="italic"><span class="kobospan" id="kobo.1154.1">Flathub</span></em></span><span><span class="kobospan" id="kobo.1155.1">: </span></span><span><span class="kobospan" id="kobo.1156.1">https://flathub.org/home</span></span></li>
</ul>
</div>
</body></html>