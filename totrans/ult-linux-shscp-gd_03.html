<html><head></head><body>
  <div id="_idContainer037" class="Basic-Text-Frame">
    <h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">3</span></h1>
    <h1 id="_idParaDest-57" class="chapterTitle"><span class="koboSpan" id="kobo.2.1">Understanding Variables and Pipelines</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapter, you saw how the shell interprets users’ commands, and you saw various examples of how to craft your commands. </span><span class="koboSpan" id="kobo.3.2">In this chapter, I’ll tell you about variables and pipelines.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.4.1">The ability to create variables and assign values to them is an important part of any programming environment. </span><span class="koboSpan" id="kobo.4.2">As you would expect, both </span><code class="inlineCode"><span class="koboSpan" id="kobo.5.1">bash</span></code><span class="koboSpan" id="kobo.6.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.7.1">zsh</span></code><span class="koboSpan" id="kobo.8.1"> have this capability. </span><span class="koboSpan" id="kobo.8.2">In the first part of this chapter, we’ll cover the basics about environmental variables and programming variables.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.9.1">In the second part of the chapter, we’ll cover how to use pipelines. </span><span class="koboSpan" id="kobo.9.2">Pipelines are very simple, and you might have already used them at some point. </span><span class="koboSpan" id="kobo.9.3">So, I promise to make this write-up both short and sweet. </span><span class="koboSpan" id="kobo.9.4">(Actually, there’s not a lot to say just yet about either of these topics, which is why I’m combining both of them into one chapter.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.10.1">Topics in the chapter include:</span></p>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.11.1">Understanding environmental variables</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.12.1">Understanding programming variables</span></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.13.1">Understanding pipelines</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.14.1">If you’re ready, let’s get started.</span></p>
    <h1 id="_idParaDest-58" class="heading 1"><span class="koboSpan" id="kobo.15.1">Understanding Environmental Variables</span></h1>
    <p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.16.1">Environmental variables</span></strong><span class="koboSpan" id="kobo.17.1"> control the configuration</span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.18.1"> and functioning of the operating system shell. </span><span class="koboSpan" id="kobo.18.2">When you install either a Linux or Unix/Unix-like operating system such as FreeBSD or OpenIndiana, you’ll find that a default set of environmental variables has already been defined at both the global and user levels.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.19.1">To see the list of environmental variables and their settings, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.20.1">env</span></code><span class="koboSpan" id="kobo.21.1"> command, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.22.1">[donnie@fedora ~]$ env
SHELL=/bin/bash
IMSETTINGS_INTEGRATE_DESKTOP=yes
COLORTERM=truecolor
XDG_CONFIG_DIRS=/etc/xdg/lxsession:/etc/xdg
HISTCONTROL=ignoredups
. </span><span class="koboSpan" id="kobo.22.2">. </span><span class="koboSpan" id="kobo.22.3">.
</span><span class="koboSpan" id="kobo.22.4">. </span><span class="koboSpan" id="kobo.22.5">. </span><span class="koboSpan" id="kobo.22.6">.
</span><span class="koboSpan" id="kobo.22.7">MAIL=/var/spool/mail/donnie
OLDPWD=/etc/profile.d
_=/bin/env
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.23.1">The complete list of environmental variables is very extensive. </span><span class="koboSpan" id="kobo.23.2">Fortunately, you don’t need to memorize what each and every item does for you. </span><span class="koboSpan" id="kobo.23.3">Most of the ones that you do need to know are self-explanatory.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.24.1">Instead of viewing the entire list, you can also view the value of a specific item. </span><span class="koboSpan" id="kobo.24.2">Just use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.25.1">echo</span></code><span class="koboSpan" id="kobo.26.1"> command, and precede the variable name with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.27.1">$</span></code><span class="koboSpan" id="kobo.28.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.29.1">[donnie@fedora ~]$ echo $USER
donnie
[donnie@fedora ~]$ echo $PATH
/home/donnie/.local/bin:/home/donnie/bin:/home/donnie/.cargo/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin
[donnie@fedora ~]$ echo $EDITOR
/usr/bin/nano
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.30.1">Here we see that I (</span><code class="inlineCode"><span class="koboSpan" id="kobo.31.1">donnie</span></code><span class="koboSpan" id="kobo.32.1">) am the current logged-in user, what my path setting is, and what my default editor is. </span><span class="koboSpan" id="kobo.32.2">You would view the value of any other environmental variable the same way.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.33.1">An important thing to note is that the names of all environmental variables always consist of all upper-case letters. </span><span class="koboSpan" id="kobo.33.2">Nothing in either the operating system or the shell prevents the use of lower-case letters, but there is a very good reason for not using them. </span><span class="koboSpan" id="kobo.33.3">It’s just that variable names are case-sensitive. </span><span class="koboSpan" id="kobo.33.4">Best practice dictates using nothing but upper-case letters for environmental variable names and either all lower-case letters or a mix of upper and lower-case letters for programming variable names. </span><span class="koboSpan" id="kobo.33.5">This will prevent you from accidentally overwriting the value of an environmental variable. </span><span class="koboSpan" id="kobo.33.6">(I’ll show you more about that in the next section.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.34.1">As I mentioned before, environmental variables</span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.35.1"> are configured at both the global and user levels. </span><span class="koboSpan" id="kobo.35.2">Variable settings at the global level affect all users of </span><code class="inlineCode"><span class="koboSpan" id="kobo.36.1">bash</span></code><span class="koboSpan" id="kobo.37.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.38.1">zsh</span></code><span class="koboSpan" id="kobo.39.1">. </span><span class="koboSpan" id="kobo.39.2">For </span><code class="inlineCode"><span class="koboSpan" id="kobo.40.1">bash</span></code><span class="koboSpan" id="kobo.41.1">, you’ll find most of these global settings in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.42.1">/etc/profile</span></code><span class="koboSpan" id="kobo.43.1"> file, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.44.1">/etc/bashrc</span></code><span class="koboSpan" id="kobo.45.1"> file, and various files in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.46.1">/etc/profile.d/</span></code><span class="koboSpan" id="kobo.47.1"> directory. </span><span class="koboSpan" id="kobo.47.2">For </span><code class="inlineCode"><span class="koboSpan" id="kobo.48.1">zsh</span></code><span class="koboSpan" id="kobo.49.1">, you’ll find these settings in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.50.1">/etc/zprofile</span></code><span class="koboSpan" id="kobo.51.1">, </span><code class="inlineCode"><span class="koboSpan" id="kobo.52.1">/etc/zshrc</span></code><span class="koboSpan" id="kobo.53.1">, and </span><code class="inlineCode"><span class="koboSpan" id="kobo.54.1">/etc/zshenv</span></code><span class="koboSpan" id="kobo.55.1"> files. </span><span class="koboSpan" id="kobo.55.2">(Note that </span><code class="inlineCode"><span class="koboSpan" id="kobo.56.1">zsh</span></code><span class="koboSpan" id="kobo.57.1"> also references the same </span><code class="inlineCode"><span class="koboSpan" id="kobo.58.1">/etc/profile</span></code><span class="koboSpan" id="kobo.59.1"> file that </span><code class="inlineCode"><span class="koboSpan" id="kobo.60.1">bash</span></code><span class="koboSpan" id="kobo.61.1"> references.) If you were to open one of these files at this point, you likely won’t understand much of what’s going on in them. </span><span class="koboSpan" id="kobo.61.2">That’s okay, because for now that doesn’t matter. </span><span class="koboSpan" id="kobo.61.3">But, you’ll easily be able to find where the environmental variables are set, because the variable names are all in upper-case letters.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.62.1">Now, let’s say you don’t like a particular setting. </span><span class="koboSpan" id="kobo.62.2">For example, let’s say that you want to customize your command-line prompt to your own liking. </span><span class="koboSpan" id="kobo.62.3">Here on my Fedora workstation, my </span><code class="inlineCode"><span class="koboSpan" id="kobo.63.1">bash</span></code><span class="koboSpan" id="kobo.64.1"> prompt looks like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.65.1">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.66.1">The format of the prompt is determined by the </span><code class="inlineCode"><span class="koboSpan" id="kobo.67.1">PS1</span></code><span class="koboSpan" id="kobo.68.1"> environmental variable. </span><span class="koboSpan" id="kobo.68.2">We can see the </span><code class="inlineCode"><span class="koboSpan" id="kobo.69.1">PS1</span></code><span class="koboSpan" id="kobo.70.1"> settings like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.71.1">[donnie@fedora ~]$ echo $PS1
[\u@\h \W]\$
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.72.1">Here’s the breakdown of what you’ve just seen:</span></p>
    <ul>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.73.1">[</span></code><span class="koboSpan" id="kobo.74.1">: This is a literal character, which is the first thing we see in the prompt.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.75.1">\u</span></code><span class="koboSpan" id="kobo.76.1">: This causes the current user’s username to appear.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.77.1">@</span></code><span class="koboSpan" id="kobo.78.1">: This is another literal character.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.79.1">\h</span></code><span class="koboSpan" id="kobo.80.1">: This causes the first component of the machine’s hostname to appear.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.81.1">\W</span></code><span class="koboSpan" id="kobo.82.1">: This causes the name of the current working directory to appear. </span><span class="koboSpan" id="kobo.82.2">Note that the upper-case W doesn’t cause the entire pathname to appear.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.83.1">]</span></code><span class="koboSpan" id="kobo.84.1">: This is another literal character.</span></li>
      <li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.85.1">\$</span></code><span class="koboSpan" id="kobo.86.1">: This causes the </span><code class="inlineCode"><span class="koboSpan" id="kobo.87.1">$</span></code><span class="koboSpan" id="kobo.88.1"> to show for all normal users, and the </span><code class="inlineCode"><span class="koboSpan" id="kobo.89.1">#</span></code><span class="koboSpan" id="kobo.90.1"> to appear for the root user.</span></li>
    </ul>
    <p class="normal"><span class="koboSpan" id="kobo.91.1">A while ago, I said that we can</span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.92.1"> use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.93.1">\</span></code><span class="koboSpan" id="kobo.94.1"> to force the shell to interpret a metacharacter as a literal character. </span><span class="koboSpan" id="kobo.94.2">Here though, we see another use for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.95.1">\</span></code><span class="koboSpan" id="kobo.96.1">. </span><span class="koboSpan" id="kobo.96.2">When configuring the </span><code class="inlineCode"><span class="koboSpan" id="kobo.97.1">PS1</span></code><span class="koboSpan" id="kobo.98.1"> parameters, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.99.1">\</span></code><span class="koboSpan" id="kobo.100.1"> indicates that we’re about to use a </span><strong class="keyWord"><span class="koboSpan" id="kobo.101.1">macro</span></strong><span class="koboSpan" id="kobo.102.1"> command. </span><span class="koboSpan" id="kobo.102.2">(Think of a macro as a command that runs when you perform some simple action, such as hitting a specific key or clicking on a specific button.)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.103.1">Now, let’s say that we want the entire path of the current working directory to appear, along with the current date and time. </span><span class="koboSpan" id="kobo.103.2">To do that, we’ll replace the </span><code class="inlineCode"><span class="koboSpan" id="kobo.104.1">\W</span></code><span class="koboSpan" id="kobo.105.1"> with </span><code class="inlineCode"><span class="koboSpan" id="kobo.106.1">\w</span></code><span class="koboSpan" id="kobo.107.1">, and add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.108.1">\d</span></code><span class="koboSpan" id="kobo.109.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.110.1">\t</span></code><span class="koboSpan" id="kobo.111.1"> macros, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.112.1">[donnie@fedora ~]$ export PS1="[\d \t \u@\h \w]\$"
[Wed Aug 09 18:14:26 donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.113.1">Note that I had to surround the new parameter within a pair of quotes so that the shell would interpret the metacharacters properly. </span><span class="koboSpan" id="kobo.113.2">Also, note what happens when I </span><code class="inlineCode"><span class="koboSpan" id="kobo.114.1">cd</span></code><span class="koboSpan" id="kobo.115.1"> into a down-level directory:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.116.1">[Wed Aug 09 18:14:26 donnie@fedora ~]$cd /etc/profile.d/
[Wed Aug 09 18:29:15 donnie@fedora /etc/profile.d]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.117.1">Substituting the </span><code class="inlineCode"><span class="koboSpan" id="kobo.118.1">/w</span></code><span class="koboSpan" id="kobo.119.1"> for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.120.1">/W</span></code><span class="koboSpan" id="kobo.121.1"> causes the entire path of the current working directory to show up.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.122.1">When you configure the </span><code class="inlineCode"><span class="koboSpan" id="kobo.123.1">PS1</span></code><span class="koboSpan" id="kobo.124.1"> parameter from the command-line, the new settings will disappear as soon as you either log out from the machine or close the terminal window. </span><span class="koboSpan" id="kobo.124.2">To make the setting permanent, just edit the </span><code class="inlineCode"><span class="koboSpan" id="kobo.125.1">.bashrc</span></code><span class="koboSpan" id="kobo.126.1"> file that’s in your home directory. </span><span class="koboSpan" id="kobo.126.2">Add the </span><code class="inlineCode"><span class="koboSpan" id="kobo.127.1">export PS1="[\d \t \u@\h \w]$ "</span></code><span class="koboSpan" id="kobo.128.1"> line to the end of the file, and you’ll see the new prompt the next time you either log into the machine or open a new terminal window.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.129.1">There are still a lot more ways to customize the command prompt that I haven’t shown you. </span><span class="koboSpan" id="kobo.129.2">For a more complete list, see the reference that I provided in the </span><em class="chapterRef"><span class="koboSpan" id="kobo.130.1">Further Reading </span></em><span class="koboSpan" id="kobo.131.1">section. </span><span class="koboSpan" id="kobo.131.2">Also, note that I’ve only covered how to do this with </span><code class="inlineCode"><span class="koboSpan" id="kobo.132.1">bash</span></code><span class="koboSpan" id="kobo.133.1">, because </span><code class="inlineCode"><span class="koboSpan" id="kobo.134.1">zsh</span></code><span class="koboSpan" id="kobo.135.1"> uses different command prompt parameters. </span><span class="koboSpan" id="kobo.135.2">(I’ll show you all about that in </span><em class="chapterRef"><span class="koboSpan" id="kobo.136.1">Chapter 22, Using the Z Shell</span></em><span class="koboSpan" id="kobo.137.1">.)</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.138.1">I can read your mind, and can see that you’re wondering what environmental variables have to do with shell scripting. </span><span class="koboSpan" id="kobo.138.2">Well, it’s just that sometimes you’ll need to have your script perform a specific action that depends upon the value of a specific environmental variable. </span><span class="koboSpan" id="kobo.138.3">For example, let’s say that you only want the script to run for the root user, and not for any unprivileged user. </span><span class="koboSpan" id="kobo.138.4">Since we know that the user identification number for the root user is </span><code class="inlineCode"><span class="koboSpan" id="kobo.139.1">0</span></code><span class="koboSpan" id="kobo.140.1">, we can write code that allows the script to run if the </span><code class="inlineCode"><span class="koboSpan" id="kobo.141.1">UID</span></code><span class="koboSpan" id="kobo.142.1"> variable is set to </span><code class="inlineCode"><span class="koboSpan" id="kobo.143.1">0</span></code><span class="koboSpan" id="kobo.144.1">, and to prevent the script from running if the </span><code class="inlineCode"><span class="koboSpan" id="kobo.145.1">UID</span></code><span class="koboSpan" id="kobo.146.1"> is set to anything other than </span><code class="inlineCode"><span class="koboSpan" id="kobo.147.1">0</span></code><span class="koboSpan" id="kobo.148.1">.</span></p>
      <p class="normal"><span class="koboSpan" id="kobo.149.1">And by the way, I apologize if it seems a bit creepy that I can read your mind.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.150.1">That does it for our introduction</span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.151.1"> to environmental variables. </span><span class="koboSpan" id="kobo.151.2">Let’s now take a quick look at programming variables.</span></p>
    <h1 id="_idParaDest-59" class="heading 1"><span class="koboSpan" id="kobo.152.1">Understanding Programming Variables</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.153.1">Sometimes, it’s necessary</span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.154.1"> to define variables to use in your scripts. </span><span class="koboSpan" id="kobo.154.2">You can define, view, and unset these variables as needed for your programming needs. </span><span class="koboSpan" id="kobo.154.3">Note that although the system will allow you to create programming variable names with all upper-case letters, it’s considered bad form to do so. </span><span class="koboSpan" id="kobo.154.4">Best practice is to always name your programming variables with lower-case letters, so that you won’t risk accidentally overwriting the value of an environmental variable with the same name. </span><span class="koboSpan" id="kobo.154.5">(Of course, you won’t cause any long-term damage by overwriting an environmental variable. </span><span class="koboSpan" id="kobo.154.6">But, why risk overwriting an environmental variable that you might need to use later in your script?)</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.155.1">To show how this all works, let’s create some programming variables from the command-line, and view the assigned values. </span><span class="koboSpan" id="kobo.155.2">First, we’ll create the </span><code class="inlineCode"><span class="koboSpan" id="kobo.156.1">car</span></code><span class="koboSpan" id="kobo.157.1"> variable and assign to it the value </span><code class="inlineCode"><span class="koboSpan" id="kobo.158.1">Ford</span></code><span class="koboSpan" id="kobo.159.1">, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.160.1">[donnie@fedora ~]$ car=Ford
[donnie@fedora ~]$ echo $car
Ford
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.161.1">To view the value of a variable, use </span><code class="inlineCode"><span class="koboSpan" id="kobo.162.1">echo</span></code><span class="koboSpan" id="kobo.163.1">, and precede the name of the variable with a </span><code class="inlineCode"><span class="koboSpan" id="kobo.164.1">$</span></code><span class="koboSpan" id="kobo.165.1">, just as we did with the environmental variables. </span><span class="koboSpan" id="kobo.165.2">Now, let’s open a child shell with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.166.1">bash</span></code><span class="koboSpan" id="kobo.167.1"> command, to see if we can still view the value of this </span><code class="inlineCode"><span class="koboSpan" id="kobo.168.1">car</span></code><span class="koboSpan" id="kobo.169.1"> variable, and then exit back to the parent shell, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.170.1">[donnie@fedora ~]$ bash
[donnie@fedora ~]$ echo $car
[donnie@fedora ~]$ exit
exit
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.171.1">We can’t see the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.172.1">car</span></code><span class="koboSpan" id="kobo.173.1"> this time, because we didn’t </span><strong class="keyWord"><span class="koboSpan" id="kobo.174.1">export</span></strong><span class="koboSpan" id="kobo.175.1"> the variable. </span><span class="koboSpan" id="kobo.175.2">Exporting the variable will permit a child shell to access the variable. </span><span class="koboSpan" id="kobo.175.3">As you might have guessed, we’ll use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.176.1">export</span></code><span class="koboSpan" id="kobo.177.1"> command to do this, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.178.1">[donnie@fedora ~]$ export car=Ford
[donnie@fedora ~]$ echo $car
Ford
[donnie@fedora ~]$ bash
[donnie@fedora ~]$ echo $car
Ford
[donnie@fedora ~]$ exit
exit
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.179.1">This time, we see that the value of </span><code class="inlineCode"><span class="koboSpan" id="kobo.180.1">car</span></code><span class="koboSpan" id="kobo.181.1"> now shows up in the child shell.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.182.1">We’ll be working with variables</span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.183.1"> throughout the rest of this book, so you’ll be learning a lot more about how to use them. </span><span class="koboSpan" id="kobo.183.2">For now though, this quick introduction is enough.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.184.1">Next, let’s do some plumbing.</span></p>
    <h1 id="_idParaDest-60" class="heading 1"><span class="koboSpan" id="kobo.185.1">Understanding Pipelines</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.186.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.187.1">pipe</span></strong><span class="koboSpan" id="kobo.188.1"> will take the output</span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.189.1"> of one command</span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.190.1"> and use it as the input for another command. </span><span class="koboSpan" id="kobo.190.2">It’s represented by the </span><code class="inlineCode"><span class="koboSpan" id="kobo.191.1">|</span></code><span class="koboSpan" id="kobo.192.1"> symbol, which is on the same key as the backslash. </span><span class="koboSpan" id="kobo.192.2">You’ll often invoke a simple </span><strong class="keyWord"><span class="koboSpan" id="kobo.193.1">pipeline</span></strong><span class="koboSpan" id="kobo.194.1"> from the command-line for various purposes. </span><span class="koboSpan" id="kobo.194.2">But, you can also create very complex, multi-stage pipelines for your shell scripts.</span></p>
    <figure class="mediaobject"><span class="koboSpan" id="kobo.195.1"><img src="../Images/B21693_03_01.png" alt=""/></span></figure>
    <p class="packt_figref"><span class="koboSpan" id="kobo.196.1">Figure 3.1: Creating a pipeline. </span><span class="koboSpan" id="kobo.196.2">Note that stdout is short for Standard Output, and stdin is short for Standard Input.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.197.1">To see how this can be useful, let’s say that you want to look at a listing of all files in a certain directory. </span><span class="koboSpan" id="kobo.197.2">But, there are so many files that the output would scroll off of the screen where you’d never be able to see it. </span><span class="koboSpan" id="kobo.197.3">You can solve the problem by taking the output of the </span><code class="inlineCode"><span class="koboSpan" id="kobo.198.1">ls</span></code><span class="koboSpan" id="kobo.199.1"> command and using it as the input for the </span><code class="inlineCode"><span class="koboSpan" id="kobo.200.1">less</span></code><span class="koboSpan" id="kobo.201.1"> command. </span><span class="koboSpan" id="kobo.201.2">It would look something like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.202.1">[donnie@fedora ~]$ ls -l | less
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.203.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.204.1">ls -l</span></code><span class="koboSpan" id="kobo.205.1"> listing will open in the </span><code class="inlineCode"><span class="koboSpan" id="kobo.206.1">less</span></code><span class="koboSpan" id="kobo.207.1"> pager, so that you can scroll through the output or perform searches for particular text strings.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.208.1">Now, let’s say that I only want to see files</span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.209.1"> with the text string </span><code class="inlineCode"><span class="koboSpan" id="kobo.210.1">alma</span></code><span class="koboSpan" id="kobo.211.1"> in their filenames. </span><span class="koboSpan" id="kobo.211.2">That’s easy enough. </span><span class="koboSpan" id="kobo.211.3">I’ll just pipe the </span><code class="inlineCode"><span class="koboSpan" id="kobo.212.1">ls -l</span></code><span class="koboSpan" id="kobo.213.1"> output into </span><code class="inlineCode"><span class="koboSpan" id="kobo.214.1">grep</span></code><span class="koboSpan" id="kobo.215.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.216.1">[donnie@fedora ~]$ ls -l | grep alma
-rw-r--r--.  </span><span class="koboSpan" id="kobo.216.2">1 donnie donnie        1438 Nov  2  2022 alma9_default.txt
-rw-r--r--.  </span><span class="koboSpan" id="kobo.216.3">1 donnie donnie        1297 Nov  2  2022 alma9_future.txt
-rw-r--r--.  </span><span class="koboSpan" id="kobo.216.4">1 donnie donnie          81 Jan 11  2023 alma_link.txt
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.217.1">Now, let’s say that I don’t want to see the filenames, but I do want to know how many files there are. </span><span class="koboSpan" id="kobo.217.2">I’ll just add another pipe stage, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.218.1">[donnie@fedora ~]$ ls -l | grep alma | wc -l
3
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.219.1">The </span><code class="inlineCode"><span class="koboSpan" id="kobo.220.1">wc -l</span></code><span class="koboSpan" id="kobo.221.1"> command counts the number of lines in the output, which in this case tells us how many files I have that contain the text string </span><code class="inlineCode"><span class="koboSpan" id="kobo.222.1">alma</span></code><span class="koboSpan" id="kobo.223.1"> in their filenames.</span></p>
    <div class="note">
      <p class="normal"><span class="koboSpan" id="kobo.224.1">If you’re not familiar with </span><code class="inlineCode"><span class="koboSpan" id="kobo.225.1">grep</span></code><span class="koboSpan" id="kobo.226.1">, just understand for now that it’s a utility that can search for either specific text strings or for text patterns. </span><span class="koboSpan" id="kobo.226.2">It can search through text files without you having to open them, or it can search for text strings or patterns in the output that you would pipe into it from another command.</span></p>
    </div>
    <p class="normal"><span class="koboSpan" id="kobo.227.1">Okay, I’ve shown you some simple examples of how to create pipelines from the command-line. </span><span class="koboSpan" id="kobo.227.2">Now, I want to show you something that I hope you’ll </span><em class="italic"><span class="koboSpan" id="kobo.228.1">never</span></em><span class="koboSpan" id="kobo.229.1"> do. </span><span class="koboSpan" id="kobo.229.2">This involves using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.230.1">cat</span></code><span class="koboSpan" id="kobo.231.1"> utility.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.232.1">One thing that you can do with </span><code class="inlineCode"><span class="koboSpan" id="kobo.233.1">cat</span></code><span class="koboSpan" id="kobo.234.1"> is to dump the contents of a text file to your screen. </span><span class="koboSpan" id="kobo.234.2">It’s mainly useful for viewing small files, as you see here:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.235.1">[donnie@fedora ~]$ cat somefile.txt
This is just some file that I created to demonstrate cat.
</span><span class="koboSpan" id="kobo.235.2">[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.236.1">If you use </span><code class="inlineCode"><span class="koboSpan" id="kobo.237.1">cat</span></code><span class="koboSpan" id="kobo.238.1"> to view a large file, the output</span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.239.1"> will scroll off of the screen where you might not be able to view it. </span><span class="koboSpan" id="kobo.239.2">I have seen cases where somebody would still use </span><code class="inlineCode"><span class="koboSpan" id="kobo.240.1">cat</span></code><span class="koboSpan" id="kobo.241.1"> to dump the file, and then pipe the output into </span><code class="inlineCode"><span class="koboSpan" id="kobo.242.1">less</span></code><span class="koboSpan" id="kobo.243.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.244.1">[donnie@fedora ~]$ cat files.txt | less
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.245.1">I’ve also seen people pipe </span><code class="inlineCode"><span class="koboSpan" id="kobo.246.1">cat</span></code><span class="koboSpan" id="kobo.247.1"> output into </span><code class="inlineCode"><span class="koboSpan" id="kobo.248.1">grep</span></code><span class="koboSpan" id="kobo.249.1"> to search for a text string, like this:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.250.1">[donnie@fedora ~]$ cat files.txt | grep darkfi
drwxr-xr-x.  </span><span class="koboSpan" id="kobo.250.2">1 donnie donnie         414 Apr  3 12:41 darkfi
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.251.1">Both of these examples work, but it requires less typing to just use either </span><code class="inlineCode"><span class="koboSpan" id="kobo.252.1">less</span></code><span class="koboSpan" id="kobo.253.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.254.1">grep</span></code><span class="koboSpan" id="kobo.255.1"> without </span><code class="inlineCode"><span class="koboSpan" id="kobo.256.1">cat</span></code><span class="koboSpan" id="kobo.257.1">, like so:</span></p>
    <pre class="programlisting gen"><code class="hljs-con"><span class="koboSpan" id="kobo.258.1">[donnie@fedora ~]$ less files.txt
. </span><span class="koboSpan" id="kobo.258.2">. </span><span class="koboSpan" id="kobo.258.3">.
</span><span class="koboSpan" id="kobo.258.4">. </span><span class="koboSpan" id="kobo.258.5">. </span><span class="koboSpan" id="kobo.258.6">.
</span><span class="koboSpan" id="kobo.258.7">[donnie@fedora ~]$ grep darkfi files.txt
drwxr-xr-x.  </span><span class="koboSpan" id="kobo.258.8">1 donnie donnie         414 Apr  3 12:41 darkfi
[donnie@fedora ~]$
</span></code></pre>
    <p class="normal"><span class="koboSpan" id="kobo.259.1">In other words, although piping </span><code class="inlineCode"><span class="koboSpan" id="kobo.260.1">cat</span></code><span class="koboSpan" id="kobo.261.1"> output into other utilities does work, it’s less efficient than just directly using the other utilities, and can make your scripts a bit less efficient and a bit harder to read. </span><span class="koboSpan" id="kobo.261.2">And, as a real-life lover of cats, it always bothers me to see someone engaging in </span><code class="inlineCode"><span class="koboSpan" id="kobo.262.1">cat</span></code><span class="koboSpan" id="kobo.263.1"> abuse.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.264.1">What I’ve shown you here is just scratching the surface of what you can do with pipelines. </span><span class="koboSpan" id="kobo.264.2">A major reason why Linux and Unix administrators need to create shell scripts is to automate the extraction and formatting of information from either text files or the output of certain programs. </span><span class="koboSpan" id="kobo.264.3">Doing that often requires very long, complex, multi-stage pipelines with a different extraction or formatting utility at each stage. </span><span class="koboSpan" id="kobo.264.4">Before you can start doing that, you’ll need to learn how to use these utilities, which you’ll begin doing in </span><em class="chapterRef"><span class="koboSpan" id="kobo.265.1">Chapter 6, Text Stream Filters – Part 1</span></em><span class="koboSpan" id="kobo.266.1">. </span><span class="koboSpan" id="kobo.266.2">And, before we can get to that, we need to cover</span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.267.1"> a few more basic functions of </span><code class="inlineCode"><span class="koboSpan" id="kobo.268.1">bash</span></code><span class="koboSpan" id="kobo.269.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.270.1">zsh</span></code><span class="koboSpan" id="kobo.271.1">.</span></p>
    <h1 id="_idParaDest-61" class="heading 1"><span class="koboSpan" id="kobo.272.1">Summary</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.273.1">Although this chapter has been rather short, we covered a good bit of important information. </span><span class="koboSpan" id="kobo.273.2">We began by looking at environmental variables, showing how to modify one of them, and explaining why you might need to use environmental variables in your shell scripts. </span><span class="koboSpan" id="kobo.273.3">Next, we covered programming variables, explaining how to create and export them. </span><span class="koboSpan" id="kobo.273.4">Finally, we did a bit of plumbing work by creating some pipelines.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.274.1">In the next chapter, we’ll cover the concept of input/output redirection. </span><span class="koboSpan" id="kobo.274.2">I’ll see you there.</span></p>
    <h1 id="_idParaDest-62" class="heading 1"><span class="koboSpan" id="kobo.275.1">Questions</span></h1>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.276.1">Which of the following metacharacters allows you to view the assigned value of a variable?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.277.1">*</span></code></li>
          <li class="alphabeticList level 2"> <code class="inlineCode"><span class="koboSpan" id="kobo.278.1">%</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.279.1">$</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.280.1">^</span></code></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.281.1">Which of the following statements is true?</span><ol>
          <li class="alphabeticList level 2" value="1"><span class="koboSpan" id="kobo.282.1">It’s perfectly correct to use either all upper-case or all lower-case letters to create your programming variable names.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.283.1">Variable names are not case-sensitive.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.284.1">You should always use upper-case letters to create the names of programming variables.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.285.1">You should always use lower-case letters to create the names of programming variables.</span></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.286.1">How would you cause a child shell to recognize a variable that you created in the parent shell?</span><ol>
          <li class="alphabeticList level 2" value="1"><span class="koboSpan" id="kobo.287.1">In the child shell, import the variable from the parent shell.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.288.1">In the parent shell, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.289.1">export</span></code><span class="koboSpan" id="kobo.290.1"> keyword when creating the variable.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.291.1">You can’t, because the parent shell and child shell are isolated from each other.</span></li>
          <li class="alphabeticList level 2"><span class="koboSpan" id="kobo.292.1">The child shell and the parent shell always share variables by default.</span></li>
        </ol>
      </li>
      <li class="numberedList"><span class="koboSpan" id="kobo.293.1">Which of these metacharacters would you use to take the output of one command and use it at the input of another command?</span><ol>
          <li class="alphabeticList level 2" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.294.1">$</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.295.1">|</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.296.1">&amp;</span></code></li>
          <li class="alphabeticList level 2"><code class="inlineCode"><span class="koboSpan" id="kobo.297.1">%</span></code></li>
        </ol>
      </li>
    </ol>
    <h1 id="_idParaDest-63" class="heading 1"><span class="koboSpan" id="kobo.298.1">Further Reading</span></h1>
    <ul>
      <li class="bulletList"><span class="koboSpan" id="kobo.299.1">How to Change/Set up bash custom prompt (PS1) in Linux: </span><a href="https://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html"><span class="url"><span class="koboSpan" id="kobo.300.1">https://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html</span></span></a></li>
      <li class="bulletList"><span class="koboSpan" id="kobo.301.1">How to Count Files in a Directory in Linux?: </span><a href="https://www.linuxjournal.com/content/how-count-files-directory-linux"><span class="url"><span class="koboSpan" id="kobo.302.1">https://www.linuxjournal.com/content/how-count-files-directory-linux</span></span></a></li>
    </ul>
    <h1 id="_idParaDest-64" class="heading 1"><span class="koboSpan" id="kobo.303.1">Answers</span></h1>
    <ol>
      <li class="numberedList" value="1"><span class="koboSpan" id="kobo.304.1">c</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.305.1">d</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.306.1">b</span></li>
      <li class="numberedList"><span class="koboSpan" id="kobo.307.1">b</span></li>
    </ol>
    <h1 id="_idParaDest-65" class="heading 1"><span class="koboSpan" id="kobo.308.1">Join our community on Discord!</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.309.1">Read this book alongside other users, Linux experts, and the author himself. </span></p>
    <p class="normal"><span class="koboSpan" id="kobo.310.1">Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. </span><span class="koboSpan" id="kobo.310.2">Scan the QR code or visit the link to join the community.</span></p>
    <p class="normal"><a href="https://packt.link/SecNet"><span class="url"><span class="koboSpan" id="kobo.311.1">https://packt.link/SecNet</span></span></a></p>
    <p class="normal"><span class="koboSpan" id="kobo.312.1"><img src="../Images/QR_Code10596186092701843.png" alt=""/></span></p>
<h1 id="_idParaDest-4" class="heading 1"><span class="koboSpan" id="kobo.313.1">Leave a Review!</span></h1>
    <p class="normal"><span class="koboSpan" id="kobo.314.1">Thank you for purchasing this book from Packt Publishing—we hope you enjoy it! </span><span class="koboSpan" id="kobo.314.2">Your feedback is invaluable and helps us improve and grow. </span><span class="koboSpan" id="kobo.314.3">Once you've completed reading it, please take a moment to leave an Amazon review; it will only take a minute, but it makes a big difference for readers like you.</span></p>
    <p class="normal"><span class="koboSpan" id="kobo.315.1">Scan the QR code below to receive a free ebook of your choice.</span></p>
    <p class="normal"><a href="https://packt.link/NzOWQ"><span class="url"><span class="koboSpan" id="kobo.316.1">https://packt.link/NzOWQ</span></span></a></p>
    <p class="normal"><span class="koboSpan" id="kobo.317.1"><img src="../Images/review.png" alt=""/></span></p>
  </div>
</body></html>