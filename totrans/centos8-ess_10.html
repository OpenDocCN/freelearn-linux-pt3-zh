<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer132" class="_idGenObjectStyleOverride-1">&#13;
			<p id="_idParaDest-104" class="Chapter-Title" lang="en-US" xml:lang="en-US"><span class="ChapterMarker">12. </span><a id="_idTextAnchor150"/>CentOS 8 Network Management</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">It is difficult to envisage a CentOS 8 system that does not have at least one network connection, and harder still to imagine how such an isolated system could be of much practical use. The simple fact is that CentOS 8 is designed to provide enterprise level services over network and internet connections. A key part of learning how to administer a CentOS 8 system involves learning how to configure and manage the network interfaces installed on the system.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">This chapter is intended to provide an overview of network management on CentOS 8 including the NetworkManager service and tools together with some other useful utilities.</p>&#13;
			<p id="_idParaDest-105" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.1 </span><a id="_idTextAnchor151"/>An Introduction to <a id="_idIndexMarker235"/>NetworkManager</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">NetworkManager is a service and set of tools designed specifically to make it easier to manage the networking configuration on Linux systems and is the default network management service on CentOS 8.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">In addition to a service that runs in the background, NetworkManager also includes the following tools:</p>&#13;
			<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3">•</span><a id="_idIndexMarker236"/><a id="_idIndexMarker237"/><a id="_idIndexMarker238"/><span class="My-Bold _idGenCharOverride-1">nmcli</span> - A tool for working with NetworkManager via the command-line. This tool is useful when access to a graphical environment is not available and can also be used within scripts to make network configuration changes.</p>&#13;
			<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3">•</span><a id="_idIndexMarker239"/><a id="_idIndexMarker240"/><span class="My-Bold _idGenCharOverride-1">nmtui</span> - A basic text-based user interface for managing NetworkManager. This tool can be run within any terminal window and allows changes to be made by making menu selections and entering data. While useful for performing basic tasks, <span class="My-Italic _idGenCharOverride-1">nmtui</span> lacks many of the features provided by the <span class="My-Italic _idGenCharOverride-1">nmcli </span>tool.</p>&#13;
			<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3">•</span><a id="_idIndexMarker241"/><a id="_idIndexMarker242"/><span class="My-Bold _idGenCharOverride-1">nm-connection-editor</span> - A full graphical management tool providing access to most of the NetworkManager configuration options.</p>&#13;
			<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3">•</span><span class="My-Bold _idGenCharOverride-1">GNOME Settings</span> - The Network screen of the GNOME desktop Settings application allows basic network management tasks to be performed. </p>&#13;
			<p class="Bullet-List" lang="en-US" xml:lang="en-US"><span class="_idGenBNMarker-3">•</span><span class="My-Bold _idGenCharOverride-1">Cockpit Network Settings</span> - The Network screen of the Cockpit web interface allows a range of network management tasks to be performed.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Although there a number of different ways to manage the network environment on a CentOS 8 system, for the purposes of this chapter we will focus on the <span class="My-Italic _idGenCharOverride-1">nmcli</span> command. While the graphical tools are certainly useful when you have access to a desktop environment or Cockpit has been enabled, understanding the command-line interface is essential for situations where a command prompt is all that is available. Also, the graphical tools (Cockpit included) do not include all of the capabilities of the <span class="My-Italic _idGenCharOverride-1">nmcli</span> tool. Finally, once you have gained some familiarity with NetworkManager and <span class="My-Italic _idGenCharOverride-1">nmcli</span>, those skills will translate easily when using the more intuitive tool options. The same cannot be said of the graphical tool options. It is harder to use <span class="My-Italic _idGenCharOverride-1">nmcli</span> if, for example, you have only ever used <span class="My-Italic _idGenCharOverride-1">nm-connection-editor.</span></p>&#13;
			<p id="_idParaDest-106" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.2 </span><a id="_idTextAnchor152"/>Installing and Enabling <a id="_idIndexMarker243"/><a id="_idIndexMarker244"/>NetworkManager</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">NetworkManager should be installed by default for most CentOS 8 installations. Use the <span class="My-Italic _idGenCharOverride-1">rpm</span> command to find out if it needs to be installed:</p>&#13;
			<p class="Code"># rpm -q NetworkManager</p>&#13;
			<p class="Code">NetworkManager-1.14.0-14.el8.x86_64</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">If necessary, install the package as follows:</p>&#13;
			<p class="Code"># dnf install NetworkManager</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Once the package is installed, the NetworkManager daemon will need to be enabled so that it starts each time the system boots:</p>&#13;
			<p class="Code"># systemctl enable NetworkManager</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Finally, start the service running and check the status to verify that the launch was successful:</p>&#13;
			<p class="Code"># systemctl start NetworkManager</p>&#13;
			<p class="Code"># systemctl status NetworkManager</p>&#13;
			<p class="Code">● NetworkManager.service - Network Manager</p>&#13;
			<p class="Code">   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor &gt;</p>&#13;
			<p class="Code">  Drop-In: /usr/lib/systemd/system/NetworkManager.service.d</p>&#13;
			<p class="Code">           └─NetworkManager-ovs.conf</p>&#13;
			<p class="Code">   Active: active (running) since Tue 2019-04-09 10:07:22 EDT; 2h 48min ago</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p id="_idParaDest-107" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.3 </span><a id="_idTextAnchor153"/>Basic <a id="_idIndexMarker245"/>nmcli Commands</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The <span class="My-Italic _idGenCharOverride-1">nmcli</span> command will have been installed as part of the Networkmanager package and can be executed from the command-line using the following syntax:</p>&#13;
			<p class="Code"># nmcli [Options] Object {Command | help}</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">In the above syntax, <span class="My-Italic _idGenCharOverride-1">Object</span> will be one of <span class="My-Italic _idGenCharOverride-1">general</span>, <span class="My-Italic _idGenCharOverride-1">networking</span>, <span class="My-Italic _idGenCharOverride-1">radio</span>, <span class="My-Italic _idGenCharOverride-1">connection</span>, <span class="My-Italic _idGenCharOverride-1">monitor</span>, <span class="My-Italic _idGenCharOverride-1">device</span> or <span class="My-Italic _idGenCharOverride-1">agent</span>, all of which can be abbreviated to a few letters of the word (for example <span class="My-Italic _idGenCharOverride-1">con</span>, or even just the letter <span class="My-Italic _idGenCharOverride-1">c</span>, for <span class="My-Italic _idGenCharOverride-1">connection</span>). For example, all of the following commands will output help information relating to the <span class="My-Italic _idGenCharOverride-1">device</span> object:</p>&#13;
			<p class="Code"># nmcli device help</p>&#13;
			<p class="Code"># nmcli dev help</p>&#13;
			<p class="Code"># nmcli d help</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">To check the overall status of <a id="_idIndexMarker246"/><a id="_idIndexMarker247"/>NetworkManager on the system, use the following command:</p>&#13;
			<p class="Code"># nmcli general status</p>&#13;
			<p class="Code">STATE      CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN    </p>&#13;
			<p class="Code">connected  full          enabled  enabled  enabled  enabled</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">To check the status of the devices installed on a system, the following command can be used:</p>&#13;
			<p class="Code"># nmcli dev status</p>&#13;
			<p class="Code">DEVICE       TYPE      STATE      CONNECTION </p>&#13;
			<p class="Code">eno1         ethernet  connected  eno1       </p>&#13;
			<p class="Code">wlp0s26u1u2  wifi       connected  zoneone  </p>&#13;
			<p class="Code">virbr0       bridge    connected  virbr0     </p>&#13;
			<p class="Code">lo           loopback  unmanaged  --         </p>&#13;
			<p class="Code">virbr0-nic   tun       unmanaged  --     </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The output may also be modified by using the -p (pretty) option to make the output more human friendly:</p>&#13;
			<p class="Code"># nmcli -p dev status</p>&#13;
			<p class="Code">=====================</p>&#13;
			<p class="Code">  Status of devices</p>&#13;
			<p class="Code">=====================</p>&#13;
			<p class="Code">DEVICE       TYPE      STATE      CONNECTION </p>&#13;
			<p class="Code">-------------------------------------------------------------------</p>&#13;
			<p class="Code">eno1         ethernet  connected  eno1       </p>&#13;
			<p class="Code">wlp0s26u1u2  wifi       connected  zoneone  </p>&#13;
			<p class="Code">virbr0       bridge    connected  virbr0     </p>&#13;
			<p class="Code">lo           loopback  unmanaged  --         </p>&#13;
			<p class="Code">virbr0-nic   tun       unmanaged  -- </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Conversely, the -t option may be used to make the output more terse and suitable for automated processing:</p>&#13;
			<p class="Code"># nmcli -t dev status</p>&#13;
			<p class="Code">eno1:ethernet:connected:eno1</p>&#13;
			<p class="Code">wlp0s26u1u2:wifi:connected:emilyzone</p>&#13;
			<p class="Code">virbr0:bridge:connected:virbr0</p>&#13;
			<p class="Code">lo:loopback:unmanaged:</p>&#13;
			<p class="Code">virbr0-nic:tun:unmanaged:</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">From the status output, we can see that the system has two physical devices installed, one Ethernet and the other a Wi-Fi device.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The bridge (virbr) entries are virtual devices used to provide networking for virtual machines (the topic of virtualization will be covered starting with the chapter entitled <a href="../Text/Virtualization_Overview.xhtml#_idTextAnchor248"><span class="My-Italic _idGenCharOverride-1">“An Overview of Virtualization Techniques”</span></a>). The loopback interface is a special virtual device that allows the system to communicate with itself and is typically used to perform network diagnostics.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">When working with <a id="_idIndexMarker248"/><a id="_idIndexMarker249"/>NetworkManager, it is important to understand the difference between a device and a connection. As described above, a device is either a physical or virtual network device while a connection is a network configuration that the device connects to.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The following command displays information about the connections configured on the system:</p>&#13;
			<p class="Code"># nmcli con show</p>&#13;
			<p class="Code">NAME          UUID                                  TYPE      DEVICE      </p>&#13;
			<p class="Code">zoneone       2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94  wifi       wlp0s26u1u2 </p>&#13;
			<p class="Code">eno1          99d40009-6bb1-4182-baad-a103941c90ff  ethernet  eno1        </p>&#13;
			<p class="Code">virbr0        e13e9552-1765-42d1-b739-ff981668fbee  bridge    virbr0      </p>&#13;
			<p class="Code">zonetwo       f940a2d1-8c18-4a9e-bf29-817702429b8a  wifi       --          </p>&#13;
			<p class="Code">zonethree     fd65c5e5-3e92-4e9e-b924-1b0b07b70032  wifi       --          </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">From the above output, we can see that the Wi-Fi device (<span class="My-Italic _idGenCharOverride-1">wlp0s26u1u2</span>) is connected to a wireless network named <span class="My-Italic _idGenCharOverride-1">zoneone</span> while the Ethernet device (<span class="My-Italic _idGenCharOverride-1">eno1</span>) is connected to a connection named <span class="My-Italic _idGenCharOverride-1">eno1</span>. In addition to zoneone, NetworkManager has also listed two other Wi-Fi connections named <span class="My-Italic _idGenCharOverride-1">zonetwo</span> and <span class="My-Italic _idGenCharOverride-1">zonethree</span>, neither of which currently have a device connected.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">To find out the IP address allocated to a connection, the <span class="My-Italic _idGenCharOverride-1">ip</span> tool can be used with the <span class="My-Italic _idGenCharOverride-1">address</span> option:</p>&#13;
			<p class="Code"># ip address</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">This can also be abbreviated:</p>&#13;
			<p class="Code"># <a id="_idIndexMarker250"/><a id="_idIndexMarker251"/>ip a</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">3: wlp0s26u1u2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</p>&#13;
			<p class="Code">    link/ether 74:da:38:ee:be:50 brd ff:ff:ff:ff:ff:ff</p>&#13;
			<p class="Code">    inet <span class="My-Bold _idGenCharOverride-2">192.168.1.121</span>/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s26u1u2</p>&#13;
			<p class="Code">       valid_lft 57584sec preferred_lft 57584sec</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The ip command will output information for all of the devices detected on the system. The above output shows that the Wi-Fi device has been assigned an IP address of 192.168.1.121.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">If we only wanted to list active connections, the <span class="My-Italic _idGenCharOverride-1">nmcli</span> command could have been used with the -a option:</p>&#13;
			<p class="Code"># nmcli con show -a</p>&#13;
			<p class="Code">NAME       UUID                                  TYPE      DEVICE      </p>&#13;
			<p class="Code">emilyzone  2abecafa-4ea2-47f6-b20f-4fb0c0fd5e94  wifi       wlp0s26u1u2 </p>&#13;
			<p class="Code">eno1       99d40009-6bb1-4182-baad-a103941c90ff  ethernet  eno1        </p>&#13;
			<p class="Code">virbr0     e13e9552-1765-42d1-b739-ff981668fbee  bridge    virbr0  </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">To switch the Wi-Fi device connection from zoneone to zonetwo, we can run the following command:</p>&#13;
			<p class="Code"># nmcli device wifi connect zonetwo -ask</p>&#13;
			<p class="Code">Password:</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The <span class="My-Italic _idGenCharOverride-1">-ask</span> flag causes <span class="My-Italic _idGenCharOverride-1">nmcli</span> to prompt the user to enter the password for the Wi-Fi network. To include the Wi-Fi password on the command-line (particularly useful if the command is being executed in a script), use the <span class="My-Italic _idGenCharOverride-1">password </span>option:</p>&#13;
			<p class="Code"># nmcli device wifi connect zonetwo password &lt;password here&gt;</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The <a id="_idIndexMarker252"/><a id="_idIndexMarker253"/><span class="My-Italic _idGenCharOverride-1">nmcli</span> tool may also be used to scan for available Wi-Fi networks as follows:</p>&#13;
			<p class="Code"># nmcli device wifi list</p>&#13;
			<p class="Code">IN-USE  SSID        MODE   CHAN  RATE        SIGNAL  BARS  SECURITY  </p>&#13;
			<p class="Code">        zoneone     Infra  6     195 Mbit/s  80            WPA2      </p>&#13;
			<p class="Code">*       zonetwo     Infra  11    130 Mbit/s  74            WPA1 WPA2</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">A currently active connection can be deactivated as follows:</p>&#13;
			<p class="Code"># nmcli con down &lt;connection name&gt;</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Similarly, an inactive connection can be brought back up at any time:</p>&#13;
			<p class="Code"># nmcli con up &lt;connection name&gt;</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">When a connection is brought down, <a id="_idIndexMarker254"/><a id="_idIndexMarker255"/>NetworkManager<a id="_idIndexMarker256"/> automatically searches for another connection, activates it and assigns it to the device to which the previous connection was established. To prevent a connection from being used in this situation, disable the autoconnect option as follows:</p>&#13;
			<p class="Code"># nmcli con mod &lt;connection name&gt; connection.autoconnect no</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The following command may be used to obtain additional information about a specific connection. This includes the current values for all the connection properties:</p>&#13;
			<p class="Code"># nmcli con show eno1</p>&#13;
			<p class="Code">connection.id:                          eno1</p>&#13;
			<p class="Code">connection.uuid:                        99d40009-6bb1-4182-baad-a103941c90ff</p>&#13;
			<p class="Code">connection.stable-id:                   --</p>&#13;
			<p class="Code">connection.type:                        802-3-ethernet</p>&#13;
			<p class="Code">connection.interface-name:              eno1</p>&#13;
			<p class="Code">connection.autoconnect:                 yes</p>&#13;
			<p class="Code">connection.autoconnect-priority:        0</p>&#13;
			<p class="Code">connection.autoconnect-retries:         -1 (default)</p>&#13;
			<p class="Code">connection.multi-connect:               0 (default)</p>&#13;
			<p class="Code">connection.auth-retries:                -1</p>&#13;
			<p class="Code">connection.timestamp:                   1554833695</p>&#13;
			<p class="Code">connection.read-only:                   no</p>&#13;
			<p class="Code">connection.permissions:                 --</p>&#13;
			<p class="Code">connection.zone:                        --</p>&#13;
			<p class="Code">connection.master:                      --</p>&#13;
			<p class="Code">connection.slave-type:                  --</p>&#13;
			<p class="Code">connection.autoconnect-slaves:          -1 (default)</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="Code">.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">All of these properties can be modified using <span class="My-Italic _idGenCharOverride-1">nmcli</span> with the modify option using the following syntax:</p>&#13;
			<p class="Code"># nmcli con mod &lt;connection name&gt; connection.&lt;property name&gt; &lt;setting&gt;</p>&#13;
			<p id="_idParaDest-108" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.4 </span><a id="_idTextAnchor154"/>Working with <a id="_idIndexMarker257"/><a id="_idIndexMarker258"/><a id="_idIndexMarker259"/>Connection Profiles</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">So far we have explored the use of connections without explaining how a connection is configured. The configuration of a connection is referred to as a <span class="My-Italic _idGenCharOverride-1">connection profile</span> and is stored in a file located in the <span class="My-Italic _idGenCharOverride-1">/etc/sysconfig/</span><span class="My-Italic CharOverride-1"><a id="_idIndexMarker260"/><a id="_idIndexMarker261"/><a id="_idIndexMarker262"/></span><span class="My-Italic _idGenCharOverride-1">network-scripts</span> directory, the contents of which might read as follows:</p>&#13;
			<p class="Code"># ls /etc/sysconfig/network-scripts</p>&#13;
			<p class="Code">ifcfg-zoneone    ifcfg-eno1       ifdown-ppp</p>&#13;
			<p class="Code">ifcfg-zonethree  ifcfg-zonetwo    ifup-ppp        keys-zonethree</p>&#13;
			<p class="Code">keys-zoneone     keys-zonetwo</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Each of the files prefixed with <span class="My-Italic _idGenCharOverride-1">ifcg-</span> is an interface configuration file containing the connection profile for the corresponding connection while the <span class="My-Italic _idGenCharOverride-1">key-</span> files contain the passwords for the Wi-Fi connections.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Consider, for example, the contents of the <span class="My-Italic _idGenCharOverride-1">ifcfg-eno1</span> file:</p>&#13;
			<p class="Code">TYPE=Ethernet</p>&#13;
			<p class="Code">PROXY_METHOD=none</p>&#13;
			<p class="Code">BROWSER_ONLY=no</p>&#13;
			<p class="Code">DEFROUTE=yes</p>&#13;
			<p class="Code">IPV4_FAILURE_FATAL=no</p>&#13;
			<p class="Code">NAME=eno1</p>&#13;
			<p class="Code">UUID=99d40009-6bb1-4182-baad-a103941c90ff</p>&#13;
			<p class="Code">DEVICE=eno1</p>&#13;
			<p class="Code">ONBOOT=yes</p>&#13;
			<p class="Code">BOOTPROTO=dhcp</p>&#13;
			<p class="Code">IPV6INIT=yes</p>&#13;
			<p class="Code">IPV6_AUTOCONF=yes</p>&#13;
			<p class="Code">IPV6_DEFROUTE=yes</p>&#13;
			<p class="Code">IPV6_FAILURE_FATAL=no</p>&#13;
			<p class="Code">IPV6_ADDR_GEN_MODE=stable-privacy</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The file contains basic information about the connection, including the type (Ethernet) of the device to which it is currently assigned (eno1) and the fact that the connection is to be automatically activated on system boot with an IP address obtained using DHCP. Changes to the connection profile can be implemented by modifying this file and instructing <span class="My-Italic _idGenCharOverride-1">nmcli</span> to reload the connection configuration files:</p>&#13;
			<p class="Code"># nmcli con reload</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">New connection profiles can also be created manually or generated automatically by <span class="My-Italic _idGenCharOverride-1">nmcli</span>. As an example, assume that a new network device has been installed on the system. When this happens, the NetworkManager service will detect the new hardware and create a device for it. In the example below, the new device has been assigned the name <span class="My-Italic _idGenCharOverride-1">eno2</span>:</p>&#13;
			<p class="Code"># nmcli dev status</p>&#13;
			<p class="Code">DEVICE      TYPE      STATE         CONNECTION </p>&#13;
			<p class="Code">en01        ethernet  connected     eno1         </p>&#13;
			<p class="Code">eno2        ethernet  connected     Wired connection 1         </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">NetworkManager automatically detected the device, activated it and assigned it to a connection named “Wired connection 1”. This is a default connection over which we have no configuration control because there is no interface configuration file for it in <span class="My-Italic _idGenCharOverride-1">/etc/sysconfig/network-scripts</span>. The next steps are to delete the “Wired connection 1” connection and use <span class="My-Italic _idGenCharOverride-1">nmcli</span> to create a new connection and assign it to the device. The command to delete a connection is as follows:</p>&#13;
			<p class="Code"># nmcli con delete "Wired connection 1"</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Next, <span class="My-Italic _idGenCharOverride-1">nmcli</span> can be used to create a new connection profile configured either with a static IP address, or a dynamic IP address obtained from a DHCP server. To create a dynamic connection profile named <span class="My-Italic _idGenCharOverride-1">dyn_ip</span>, the following command would be used:</p>&#13;
			<p class="Code"># nmcli connection add type ethernet con-name dyn_ip ifname eno2</p>&#13;
			<p class="Code">Connection 'dyn_ip' (160d9e10-bbc8-439a-9c47-a2ec52990472) successfully added.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">To create a new connection profile without locking it to a specific device, simply omit the <span class="My-Italic _idGenCharOverride-1">ifname </span>option in the command:</p>&#13;
			<p class="Code"># nmcli connection add type ethernet con-name dyn_ip</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">After the connection has been created, a file named <span class="My-Italic _idGenCharOverride-1">ifcg-dyn_ip</span> will have been added to the <span class="My-Italic _idGenCharOverride-1">/etc/sysconfig/network-scripts</span> directory.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Alternatively, to create a connection named <span class="My-Italic _idGenCharOverride-1">static_ip</span> assigned a static IP address (in this case 192.168.1.200) the following command would be used:</p>&#13;
			<p class="Code"># nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24 gw4 192.168.1.1</p>&#13;
			<p class="Code">Connection ‘static_ip’ (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully added.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The corresponding <span class="My-Italic _idGenCharOverride-1">ifcg-static_ip</span> file will read as follows:</p>&#13;
			<p class="Code">TYPE=Ethernet</p>&#13;
			<p class="Code">PROXY_METHOD=none</p>&#13;
			<p class="Code">BROWSER_ONLY=no</p>&#13;
			<p class="Code">BOOTPROTO=none</p>&#13;
			<p class="Code">IPADDR=192.168.1.200</p>&#13;
			<p class="Code">PREFIX=24</p>&#13;
			<p class="Code">GATEWAY=192.168.1.1</p>&#13;
			<p class="Code">DEFROUTE=yes</p>&#13;
			<p class="Code">IPV4_FAILURE_FATAL=no</p>&#13;
			<p class="Code">IPV6INIT=yes</p>&#13;
			<p class="Code">IPV6_AUTOCONF=yes</p>&#13;
			<p class="Code">IPV6_DEFROUTE=yes</p>&#13;
			<p class="Code">IPV6_FAILURE_FATAL=no</p>&#13;
			<p class="Code">IPV6_ADDR_GEN_MODE=stable-privacy</p>&#13;
			<p class="Code">NAME=static_ip</p>&#13;
			<p class="Code">UUID=3fccafb3-e761-4271-b310-ad0f28ee8606</p>&#13;
			<p class="Code">DEVICE=eno2</p>&#13;
			<p class="Code">ONBOOT=yes</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The command to add a new connection may be altered slightly to also assign both IPv4 and IPv6 static addresses:</p>&#13;
			<p class="Code"># nmcli con add type ethernet con-name static_ip ifname eno0 ip4 192.168.1.200/24 gw4 192.168.1.1  gw4 192.168.1.1 ip6 cabf::4532 gw6 2010:dfa::1</p>&#13;
			<p id="_idParaDest-109" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.5 </span><a id="_idTextAnchor155"/><a id="_idIndexMarker263"/>Interactive Editing</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">In addition to using <span class="My-Italic _idGenCharOverride-1">nmcli</span> with command-line options, the tool also includes an interactive mode that can be used to create and modify connection profiles. The following transcript, for example, shows interactive mode being used to create a new Ethernet connection named <span class="My-Italic _idGenCharOverride-1">demo_con</span>:</p>&#13;
			<p class="Code"># nmcli con edit</p>&#13;
			<p class="Code">Valid connection types: 6lowpan, 802-11-olpc-mesh (olpc-mesh), 802-11-wireless (wifi), 802-3-ethernet (ethernet), adsl, bluetooth, bond, bridge, cdma, dummy, generic, gsm, infiniband, ip-tunnel, macsec, macvlan, ovs-bridge, ovs-interface, ovs-port, pppoe, team, tun, vlan, vpn, vxlan, wimax, wpan, bond-slave, bridge-slave, team-slave</p>&#13;
			<p class="Code">Enter connection type: <span class="My-Bold _idGenCharOverride-2">ethernet</span></p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">===| nmcli interactive connection editor |===</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">Adding a new ‘802-3-ethernet’ connection</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">Type ‘help’ or ‘?’ for available commands.</p>&#13;
			<p class="Code">Type ‘print’ to show all the connection properties.</p>&#13;
			<p class="Code">Type ‘describe [&lt;setting&gt;.&lt;prop&gt;]’ for detailed property description.</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy</p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set connection.id demo_con</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set connection.interface eno1</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set connection.autoconnect yes</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set ipv4.method auto </span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set 802-3-ethernet.mtu auto</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set ipv6.method auto</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">save</span></p>&#13;
			<p class="Code">Saving the connection with ‘autoconnect=yes’. That might result in an immediate activation of the connection.</p>&#13;
			<p class="Code">Do you still want to save? (yes/no) [yes] yes</p>&#13;
			<p class="Code">Connection ‘demo_con’ (cb837408-6c6f-4572-9548-4932f88b9275) successfully saved.</p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">quit</span></p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">The following transcript, on the other hand, modifies the previously created <span class="My-Italic _idGenCharOverride-1">static_ip</span> connection profile to use a different static IP address to the one originally specified:</p>&#13;
			<p class="Code"># nmcli con edit static_ip</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">===| nmcli interactive connection editor |===</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">Editing existing '802-3-ethernet' connection: 'static_ip'</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">Type 'help' or '?' for available commands.</p>&#13;
			<p class="Code">Type 'print' to show all the connection properties.</p>&#13;
			<p class="Code">Type 'describe [&lt;setting&gt;.&lt;prop&gt;]' for detailed property description.</p>&#13;
			<p class="Code"> </p>&#13;
			<p class="Code">You may edit the following settings: connection, 802-3-ethernet (ethernet), 802-1x, dcb, sriov, ethtool, match, ipv4, ipv6, tc, proxy</p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">print ipv4.addresses</span></p>&#13;
			<p class="Code">ipv4.addresses: 192.168.1.200/24</p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">set ipv4.addresses 192.168.1.201/24</span></p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">save</span></p>&#13;
			<p class="Code">Connection 'static_ip' (3fccafb3-e761-4271-b310-ad0f28ee8606) successfully updated.</p>&#13;
			<p class="Code">nmcli&gt; <span class="My-Bold _idGenCharOverride-2">quit</span></p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">After modifying an existing connection, remember to instruct NetworkManager to reload the configuration profiles:</p>&#13;
			<p class="Code"># nmcli con reload</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">When using interactive mode, it is useful to know that there is an extensive built-in help system available to learn how to use the tool. The help topics can be accessed by typing <span class="My-Bold _idGenCharOverride-1">help</span> or <span class="My-Italic _idGenCharOverride-1">?</span> at the <span class="My-Italic _idGenCharOverride-1">nmcli &gt;</span> prompt:</p>&#13;
			<p class="Code">nmcli&gt; ?</p>&#13;
			<p class="Code">------------------------------------------------------------------------------</p>&#13;
			<p class="Code">---[ Main menu ]---</p>&#13;
			<p class="Code">goto     [&lt;setting&gt; | &lt;prop&gt;]        :: go to a setting or property</p>&#13;
			<p class="Code">remove   &lt;setting&gt;[.&lt;prop&gt;] | &lt;prop&gt; :: remove setting or reset property value</p>&#13;
			<p class="Code">set      [&lt;setting&gt;.&lt;prop&gt; &lt;value&gt;]  :: set property value</p>&#13;
			<p class="Code">describe [&lt;setting&gt;.&lt;prop&gt;]          :: describe property</p>&#13;
			<p class="Code">print    [all | &lt;setting&gt;[.&lt;prop&gt;]]  :: print the connection</p>&#13;
			<p class="Code">verify   [all | fix]                 :: verify the connection</p>&#13;
			<p class="Code">save     [persistent|temporary]      :: save the connection</p>&#13;
			<p class="Code">activate [&lt;ifname&gt;] [/&lt;ap&gt;|&lt;nsp&gt;]    :: activate the connection</p>&#13;
			<p class="Code">back                                 :: go one level up (back)</p>&#13;
			<p class="Code">help/?   [&lt;command&gt;]                 :: print this help</p>&#13;
			<p class="Code">nmcli    &lt;conf-option&gt; &lt;value&gt;       :: nmcli configuration</p>&#13;
			<p class="Code">quit                                 :: exit nmcli</p>&#13;
			<p class="Code">------------------------------------------------------------------------------</p>&#13;
			<p id="_idParaDest-110" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.6 </span><a id="_idTextAnchor156"/>Configuring <a id="_idIndexMarker264"/><a id="_idIndexMarker265"/><a id="_idIndexMarker266"/>NetworkManager Permissions</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">In addition to making it easier to manage networks on CentOS 8, NetworkManager also allows permissions to be specified for connections. The following command, for example, restricts a connection profile to root and user accounts named john and caitlyn:</p>&#13;
			<p class="Code"># nmcli con mod static_ip connection.permissions user:root,john,caitlyn</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Once the connection profiles have been reloaded by NetworkManager, the <span class="My-Italic _idGenCharOverride-1">static_ip</span> connection will only be active and accessible to other users when at least one of the designated users is logged in to an active session on the system. As soon as the last of these users logs out, the connection will go down and remain inactive until one of the users signs back in.</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">In addition, only users with permission are able to make changes to the connection status or configuration.</p>&#13;
			<p id="_idParaDest-111" class="Heading-1-1" lang="en-US" xml:lang="en-US"><span class="Heading11Marker">12.7 </span><a id="_idTextAnchor157"/>Summary</p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">Network management on CentOS 8 is handled by the NetworkManager service. NetworkManager views a network as consisting of network interface devices and connections. A network device can be a physical Ethernet or Wi-Fi device or a virtual device used by a virtual machine guest. Connections represent the network to which the devices connect and are configured by connection profiles. A configuration profile will, among other settings, define whether the connection has a static or dynamic IP address, the IP address of any gateway used by the network and whether or not the connection should be established automatically each time the system starts up. </p>&#13;
			<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US">NetworkManager can be administered using a number of different tools including the <span class="My-Italic _idGenCharOverride-1">nmcli</span> and <span class="My-Italic _idGenCharOverride-1">nmtui </span>command-line tools, the <span class="My-Italic _idGenCharOverride-1">nm-connection-editor</span> graphical tool and the network settings section of the Cockpit web interface. In general, the <span class="My-Italic _idGenCharOverride-1">nmcli</span> command-line tool provides the most features and flexibility. </p>&#13;
		</div>&#13;
</div>



  </body></html>