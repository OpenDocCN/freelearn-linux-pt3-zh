- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The major benefit of open source operating systems such as Linux is that anyone
    can dig deep and uncover how they work under the hood. Even with the astronomical
    advances in software development, the Linux kernel remains one of the most complex
    pieces of code. Developers, programmers, and would-be kernel hackers are constantly
    diving into the kernel code and are pushing for new features. Hobbyists and enthusiasts
    like me are trying to understand and unravel mysteries.
  prefs: []
  type: TYPE_NORMAL
- en: As one of those enthusiasts, I have spent quite some time exploring the intricacies
    of the Linux storage stack. From simple hard drives to complex networked storage
    systems, Linux is at the heart of many of the world’s most complex storage technologies.
    Over the last few years, I’ve had a chance to work on Linux and several storage
    technologies, which piqued my interest in this area. This book is the result of
    that exploration. I’ve tried peeling off all the layers of the Linux storage stack
    to show how they all work in unison. My goal is to share what I have learned with
    others who share my fascination with this topic.
  prefs: []
  type: TYPE_NORMAL
- en: This book provides an in-depth and conceptual overview of the Linux storage
    stack. It covers all of the major components of the stack and includes an in-depth
    and detailed analysis of the storage subsystem and its architecture, the virtual
    filesystem layer, different filesystems and the differences in their implementations,
    the block layer, multi-queue and device mapper frameworks, scheduling, and physical
    layers. It also covers a variety of topics relating to storage performance analysis,
    tuning, and troubleshooting.
  prefs: []
  type: TYPE_NORMAL
- en: I’m sure anyone who wants to widen their understanding of Linux and its storage
    landscape will find this book informative and useful.
  prefs: []
  type: TYPE_NORMAL
- en: Who this book is for
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The primary target audience for this book is Linux system and storage administrators,
    engineers, Linux professionals, the Linux community in general, and anyone who
    wants to widen their understanding of Linux. When working in any environment,
    it is imperative to have a deep understanding of the technology that you’re working
    on. I believe this book will give you a better understanding of Linux internals,
    equip you with the necessary knowledge, and increase your general interest in
    the subject.
  prefs: []
  type: TYPE_NORMAL
- en: What this book covers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[*Chapter 1*](B19430_01.xhtml#_idTextAnchor015), *Where It All Starts From
    – The Virtual Filesystem*, provides an introduction to the **virtual filesystem**
    (**VFS**) in the Linux kernel. The chapter will explain the pivotal role of the
    VFS in the I/O stack and provide a strong conceptual understanding of VFS as it
    is the starting point of an I/O request in Linux.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 2*](B19430_02.xhtml#_idTextAnchor028), *Explaining the Data Structures
    in a VFS*, introduces the various data structures utilized by the VFS in the kernel.
    The usage of structures by the kernel such as inodes, directory entries, and file
    objects to store file metadata, directories, and open files will be explained.
    Furthermore, the method by which the superblock structure enables the kernel to
    record filesystem characteristics will also be covered. Finally, the page caching
    mechanism in the kernel will be explained.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 3*](B19430_03.xhtml#_idTextAnchor053), *Exploring the Actual Filesystems
    Under the VFS*, introduces the concept of filesystems in Linux. One of the most
    popular block-based filesystems in Linux, the extended filesystem, will be explained.
    Additionally, important filesystem concepts such as journaling and copy-on-write
    will be discussed in detail. The chapter will also delve into the differences
    between file and block I/O and explore the network filesystem. Finally, the concept
    of userspace filesystems will be introduced.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 4*](B19430_04.xhtml#_idTextAnchor072), *Understanding the Block Layer,
    Block Devices, and Data Structures*, introduces the block layer in the kernel.
    The chapter will explain the concept of block devices and how they differ from
    character devices, and covers the major data structures in the block layer.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 5*](B19430_05.xhtml#_idTextAnchor090), *Understanding the Block Layer,
    Multi-Queue, and Device Mapper*, introduces the device mapper framework and the
    multi-queue block I/O queuing mechanism in the kernel. The chapter will explain
    how the multi-queue framework improves the performance of I/O operations on modern
    storage devices. Further, the role of the device mapper in laying the foundation
    for features such as LVM will be explained.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 6*](B19430_06.xhtml#_idTextAnchor101), *Understanding I/O Handling
    and Scheduling in the Block Layer*, discusses the different I/O handling mechanisms
    and I/O schedulers in the kernel. Operations such as merging, coalescing, and
    plugging are discussed in terms of how they are handled in the block layer. The
    different I/O schedulers supported in the Linux kernel are also explained in detail,
    along with the differences in their operational logic.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 7*](B19430_07.xhtml#_idTextAnchor124), *The SCSI Subsystem*, focuses
    on the SCSI subsystem in Linux and its multi-layered architecture. The chapter
    will explain the multilayered SCSI architecture, the SCSI device addressing mechanism,
    and the main data structures in the SCSI layer.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 8*](B19430_08.xhtml#_idTextAnchor134), *Illustrating the Layout of
    Physical Media*, discusses the different storage media available today, and the
    differences in their architecture. The traditional mechanical drives, solid-state
    drives, and the new NVMe interface are compared.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 9*](B19430_09.xhtml#_idTextAnchor160), *Analyzing Physical Storage
    Performance*, covers the performance analysis and characteristics of the storage
    subsystem. This chapter will present the different metrics that can be used to
    assess the performance of physical storage. Later on, the different tools and
    mechanisms that can be used to gauge storage performance are discussed.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 10*](B19430_10.xhtml#_idTextAnchor184), *Analyzing Filesystems and
    the Block Layer*, focuses on the techniques that can be used to analyze the performance
    of the block layer and filesystems. This chapter will explain the different types
    of filesystem I/O and the factors that can affect the I/O request of an application.
    Later on, the different tools and tracing mechanisms, such as the Berkeley Packet
    Filter compiler collection, are looked at to identify potential bottlenecks at
    each layer.'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 11*](B19430_11.xhtml#_idTextAnchor199), *Tuning the I/O Stack*, discusses
    some recommended practices for tuning the underlying storage layer for application
    needs. The different options that can be used to tune the performance at each
    layer are discussed.'
  prefs: []
  type: TYPE_NORMAL
- en: To get the most out of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The main objective of the book is to comprehend the inner workings of the Linux
    kernel and its major subsystems. Therefore, to get the most out of this book you’ll
    need to have a decent understanding of operating system concepts in general and
    Linux in particular. Above all, it is important to approach these topics with
    patience, curiosity, and a willingness to learn.
  prefs: []
  type: TYPE_NORMAL
- en: '| **Software/hardware covered in** **the book** | **Operating** **system requirements**
    |'
  prefs: []
  type: TYPE_TB
- en: '|  | Linux |'
  prefs: []
  type: TYPE_TB
- en: The commands for installing specific packages are included in the technical
    requirements section of each chapter.
  prefs: []
  type: TYPE_NORMAL
- en: Download the example code files
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We have code bundles from our rich catalog of books and videos available at
    [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/). Check
    them out!
  prefs: []
  type: TYPE_NORMAL
- en: Download the color images
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://packt.link/Uz9ge](https://packt.link/Uz9ge)'
  prefs: []
  type: TYPE_NORMAL
- en: Conventions used
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are a number of text conventions used throughout this book.
  prefs: []
  type: TYPE_NORMAL
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: “If we look at the `sd*` devices in `/dev`, notice
    that the file type is being shown as `b`, for block devices.”'
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Any command-line input or output is written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    “In the case of a directory, the **type** field in an inode is a **directory**.”'
  prefs: []
  type: TYPE_NORMAL
- en: Tips or important notes
  prefs: []
  type: TYPE_NORMAL
- en: Appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Get in touch
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Feedback from our readers is always welcome.
  prefs: []
  type: TYPE_NORMAL
- en: '`customercare@packtpub.com` and mention the book title in the subject of your
    message.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  prefs: []
  type: TYPE_NORMAL
- en: '`copyright@packt.com` with a link to the material.'
  prefs: []
  type: TYPE_NORMAL
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  prefs: []
  type: TYPE_NORMAL
- en: Share Your Thoughts
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once you’ve read *Architecture and Design of Linux Storage Stack*, we’d love
    to hear your thoughts! Please click here to go straight to the Amazon review page
    for this book and share your feedback.
  prefs: []
  type: TYPE_NORMAL
- en: Your review is important to us and the tech community and will help us make
    sure we’re delivering excellent quality content.
  prefs: []
  type: TYPE_NORMAL
- en: Download a free PDF copy of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Thanks for purchasing this book!
  prefs: []
  type: TYPE_NORMAL
- en: Do you like to read on the go but are unable to carry your print books everywhere?
  prefs: []
  type: TYPE_NORMAL
- en: Is your eBook purchase not compatible with the device of your choice?
  prefs: []
  type: TYPE_NORMAL
- en: Don’t worry, now with every Packt book you get a DRM-free PDF version of that
    book at no cost.
  prefs: []
  type: TYPE_NORMAL
- en: Read anywhere, any place, on any device. Search, copy, and paste code from your
    favorite technical books directly into your application.
  prefs: []
  type: TYPE_NORMAL
- en: The perks don’t stop there, you can get exclusive access to discounts, newsletters,
    and great free content in your inbox daily
  prefs: []
  type: TYPE_NORMAL
- en: 'Follow these simple steps to get the benefits:'
  prefs: []
  type: TYPE_NORMAL
- en: Scan the QR code or visit the link below
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/B19430_QR_Free_PDF.jpg)'
  prefs: []
  type: TYPE_IMG
- en: '[https://packt.link/free-ebook/9781837639960](https://packt.link/free-ebook/9781837639960)'
  prefs: []
  type: TYPE_NORMAL
- en: Submit your proof of purchase
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: That’s it! We’ll send your free PDF and other benefits to your email directly
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Part 1: Diving into the Virtual Filesystem'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This part offers a detailed introduction to the **virtual filesystem** (**VFS**)
    layer and the actual filesystems underneath it. You will learn about VFS, its
    major data structures, the extended filesystem family, and the major concepts
    associated with the different filesystems in Linux.
  prefs: []
  type: TYPE_NORMAL
- en: 'This part contains the following chapters:'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Chapter 1*](B19430_01.xhtml#_idTextAnchor015), *Where It All Starts From
    – The Virtual Filesystem*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[*Chapter 2*](B19430_02.xhtml#_idTextAnchor028), *Explaining the Data Structures
    in a VFS*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[*Chapter 3*](B19430_03.xhtml#_idTextAnchor053), *Exploring the Actual Filesystems
    Under the VFS*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
