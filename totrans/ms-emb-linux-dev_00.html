<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div id="_idContainer006" class="Basic-Text-Frame">
    <h1 id="_idParaDest-5" class="mainHeading"><a id="_idTextAnchor004"/>Preface</h1>
    <p class="normal">Linux has been the mainstay of embedded computing for many years. And yet, there are remarkably few books that cover the topic as a whole: this book is intended to fill that gap. The term embedded Linux is not well-defined and can be applied to the operating system inside a wide range of devices ranging from thermostats to Wi-Fi routers to industrial control units. However, they are all built on the same basic open source software. Those are the technologies that I describe in this book, based on my experience as an engineer.</p>
    <p class="normal">Technology does not stand still. The industry based around embedded computing is just as susceptible to Moore’s law as mainstream computing. The exponential growth that this implies has meant that a surprisingly large number of things have changed since the first edition of this book was published. This fourth edition is fully revised to use the latest versions of the major open source components, which include Linux 6.6, Yocto Project 5.0 Scarthgap, and Buildroot 2024.02 LTS. In addition to Autotools, the book now covers CMake, a modern build system that has seen increased adoption in recent years.</p>
    <h1 id="_idParaDest-6" class="heading-1"><a id="_idTextAnchor005"/>Who this book is for</h1>
    <p class="normal">This book is written for developers with an interest in embedded computing and Linux, who want to extend their knowledge into the various branches of the subject. In writing the book, I assume a basic understanding of the Linux command line, and in the programming examples, a working knowledge of the C and Python languages. Several chapters focus on the hardware that goes into an embedded target board, so a familiarity with hardware and hardware interfaces will be a definite advantage in these cases.</p>
    <h1 id="_idParaDest-7" class="heading-1"><a id="_idTextAnchor006"/>What this book covers</h1>
    <p class="normal"><a href="Chapter_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, <em class="italic">Starting Out</em>, sets the scene by describing the embedded Linux ecosystem and the choices available to you as you start your project.</p>
    <p class="normal"><a href="Chapter_01.xhtml#_idTextAnchor028"><em class="italic">Chapter 2</em></a>, <em class="italic">Learning about Toolchains</em>, describes the components of a toolchain and where to obtain a toolchain for cross-compiling code for your target board.</p>
    <p class="normal"><a href="Chapter_03.xhtml#_idTextAnchor061"><em class="italic">Chapter 3</em></a>, <em class="italic">All about Bootloaders</em>, explains the role of the bootloader in loading the Linux kernel into memory, and uses U-Boot as an example. It also introduces device trees as the mechanism used to encode the details of hardware in almost all embedded Linux systems.</p>
    <p class="normal"><a href="Chapter_04.xhtml#_idTextAnchor096"><em class="italic">Chapter 4</em></a>, <em class="italic">Configuring and Building the Kernel</em>, provides information on how to select a Linux kernel for an embedded system and configure it for the hardware within the device. It also covers how to port Linux to the new hardware.</p>
    <p class="normal"><a href="Chapter_05.xhtml#_idTextAnchor138"><em class="italic">Chapter 5</em></a>, <em class="italic">Building a Root Filesystem</em>, introduces the ideas behind the user space part of an embedded Linux implementation by means of a step-by-step guide on how to configure a root filesystem.</p>
    <p class="normal"><a href="Chapter_04.xhtml#_idTextAnchor110"><em class="italic">Chapter 6</em></a>, <em class="italic">Selecting a Build System</em>, covers two commonly used embedded Linux build systems, Buildroot and The Yocto Project, which automate the steps described in the previous four chapters.</p>
    <p class="normal"><a href="Chapter_05.xhtml#_idTextAnchor151"><em class="italic">Chapter 7</em></a>, <em class="italic">Developing with Yocto</em>, demonstrates how to build system images on top of an existing BSP layer, develop onboard software packages with Yocto’s extensible SDK, and roll your own embedded Linux distribution complete with runtime package management.</p>
    <p class="normal"><a href="Chapter_08.xhtml#_idTextAnchor258"><em class="italic">Chapter 8</em></a>, <em class="italic">Yocto under the Hood</em>, is a tour of Yocto’s build workflow and architecture, including an explanation of Yocto’s unique multi-layer approach. It also breaks down the basics of BitBake syntax and semantics with examples from actual recipe files.</p>
    <p class="normal"><a href="Chapter_09.xhtml#_idTextAnchor293"><em class="italic">Chapter 9</em></a>, <em class="italic">Creating a Storage Strategy</em>, discusses the challenges created by managing flash memory, including raw flash chips and <strong class="keyWord">embedded MMC</strong> (<strong class="keyWord">eMMC</strong>) packages. It describes the filesystems that are applicable to each type of technology.</p>
    <p class="normal"><a href="Chapter_10.xhtml#_idTextAnchor341"><em class="italic">Chapter 10</em></a>, <em class="italic">Updating Software in the Field</em>, examines various ways of updating the software after the device has been deployed, and includes fully managed <strong class="keyWord">Over-the-Air</strong> (<strong class="keyWord">OTA</strong>) updates. The key topics under discussion are reliability and security.</p>
    <p class="normal"><a href="Chapter_11.xhtml#_idTextAnchor373"><em class="italic">Chapter 11</em></a>, <em class="italic">Interfacing with Device Drivers</em>, describes how kernel device drivers interact with the hardware by implementing a simple driver. It also describes the various ways of calling device drivers from user space.</p>
    <p class="normal"><a href="Chapter_04.xhtml#_idTextAnchor126"><em class="italic">Chapter 12</em></a>, <em class="italic">Prototyping with Add-On Boards</em>, demonstrates how to prototype hardware and software quickly using a pre-built Debian image for the BeaglePlay together with MikroElektronika peripheral add-on boards.</p>
    <p class="normal"><a href="Chapter_13.xhtml#_idTextAnchor431"><em class="italic">Chapter 13</em></a>, <em class="italic">Starting Up – The init Program</em>, explains how the first user space program, <code class="inlineCode">init</code>, starts the rest of the system. It describes three versions of the <code class="inlineCode">init</code> program, each suitable for a different group of embedded systems, ranging from the simplicity of the BusyBox <code class="inlineCode">init</code>, through System V <code class="inlineCode">init</code>, to the current state-of-the-art, <code class="inlineCode">systemd</code>.</p>
    <p class="normal"><a href="Chapter_14.xhtml#_idTextAnchor462"><em class="italic">Chapter 14</em></a>, <em class="italic">Managing Power</em>, considers the various ways that Linux can be tuned to reduce power consumption, including dynamic frequency and voltage scaling, selecting deeper idle states, and system suspend. The aim is to make devices that run longer on a battery charge and also run cooler.</p>
    <p class="normal"><a href="Chapter_15.xhtml#_idTextAnchor483"><em class="italic">Chapter 15</em></a>, <em class="italic">Packaging Python</em>, explains what choices are available for bundling Python modules together for deployment and when to use one method over another. It covers <code class="inlineCode">pip</code>, virtual environments, and <code class="inlineCode">conda</code>.</p>
    <p class="normal"><a href="Chapter_01.xhtml#_idTextAnchor030"><em class="italic">Chapter 16</em></a>, <em class="italic">Deploying Container Images</em>, introduces the principles of the DevOps movement and demonstrates how to apply them to embedded Linux. First, we use Docker to bundle a Python application together with its user space environment inside a container image. Then we use GitHub Actions to set up a CI/CD pipeline for our container image. Lastly, we use Docker to perform containerized software updates on a Raspberry Pi 4.</p>
    <p class="normal"><a href="Chapter_17.xhtml#_idTextAnchor542"><em class="italic">Chapter 17</em></a>, <em class="italic">Learning about Processes and Threads</em>, describes embedded systems from the point of view of the application programmer. This chapter looks at processes and threads, inter-process communications, and scheduling policies.</p>
    <p class="normal"><a href="Chapter_18.xhtml#_idTextAnchor581"><em class="italic">Chapter 18</em></a>, <em class="italic">Managing Memory</em>, examines the ideas behind virtual memory and how the address space is divided into memory mappings. It also describes how to measure memory usage accurately and how to detect memory leaks.</p>
    <p class="normal"><a href="Chapter_19.xhtml#_idTextAnchor611"><em class="italic">Chapter 19</em></a>, <em class="italic">Debugging with GDB</em>, shows you how to use the GNU debugger, GDB, together with the debug agent, <code class="inlineCode">gdbserver</code>, to debug applications running remotely on the target device. It goes on to show how you can extend this model to debug kernel code, making use of the kernel debug stubs, KGDB.</p>
    <p class="normal"><a href="Chapter_16.xhtml#_idTextAnchor538"><em class="italic">Chapter 20</em></a>, <em class="italic">Profiling and Tracing</em>, covers the techniques available to measure system performance, starting from whole system profiles and then zeroing in on specific areas where bottlenecks are causing poor performance. It also describes how to use Valgrind to check the correctness of an application’s use of thread synchronization and memory allocation.</p>
    <p class="normal"><a href="Chapter_19.xhtml#_idTextAnchor654"><em class="italic">Chapter 21</em></a>, <em class="italic">Real-Time Programming</em>, provides a detailed guide to real-time programming on Linux using the recently merged <code class="inlineCode">PREEMPT_RT</code> real-time kernel patch.</p>
    <h1 id="_idParaDest-8" class="heading-1"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
    <p class="normal">The software used in this book is entirely open source. In almost all cases, I have used the latest stable versions available at the time of writing. While I have tried to describe the main features in a manner that is not version-specific, it is inevitable that some of the examples will need adaptation to work with later software. Here is the primary hardware and software used throughout the book:</p>
    <ul>
      <li class="bulletList">QEMU (64-bit Arm)</li>
      <li class="bulletList">Raspberry Pi 4</li>
      <li class="bulletList">BeaglePlay</li>
      <li class="bulletList">Yocto Project 5.0 Scarthgap</li>
      <li class="bulletList">Buildroot 2024.02</li>
      <li class="bulletList">Bootlin aarch64 glibc stable toolchain 2024.02-1</li>
      <li class="bulletList">Arm GNU AArch32 bare-metal target (arm-none-eabi) toolchain 13.2.Rel1</li>
      <li class="bulletList">U-Boot v2024.04</li>
      <li class="bulletList">Linux kernel 6.6</li>
    </ul>
    <p class="normal">Embedded development involves two systems: the host, which is used for developing the programs, and the target, which runs them. For the host system, I chose Ubuntu 24.04 LTS because of its widespread adoption and long-term maintenance guarantees. You may decide to run Linux on Docker, a virtual machine, or Windows Subsystem for Linux, but be aware that some tasks, such as building a distribution using The Yocto Project, are quite demanding and run better on a native installation of Linux.</p>
    <p class="normal">For the targets, I chose the QEMU emulator, the Raspberry Pi 4, and the BeaglePlay. Using QEMU means that you can try out most of the examples without having to invest in any additional hardware. On the other hand, some things work better with real hardware. For that, I picked the Raspberry Pi 4 because it is inexpensive, widely available, and has very good community support. The BeaglePlay replaces the BeagleBone Black used in previous editions of the book. Of course, you are not limited to just these three targets. The idea behind the book is to provide you with general solutions to problems so that you can apply them to a wide range of target boards.</p>
    <h2 id="_idParaDest-9" class="heading-2"><a id="_idTextAnchor008"/>Download the example code files</h2>
    <p class="normal">The code bundle for the book is hosted on GitHub at <a href="https://github.com/PacktPublishing/Mastering-Embedded-Linux-Development"><span class="url">https://github.com/PacktPublishing/Mastering-Embedded-Linux-Development</span></a>. We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing"><span class="url">https://github.com/PacktPublishing</span></a>. Check them out!</p>
    <h2 id="_idParaDest-10" class="heading-2"><a id="_idTextAnchor009"/>Download the color images</h2>
    <p class="normal">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://packt.link/gbp/9781803232591"><span class="url">https://packt.link/gbp/9781803232591</span></a>.</p>
    <h2 id="_idParaDest-11" class="heading-2"><a id="_idTextAnchor010"/>Conventions used</h2>
    <p class="normal">There are a number of text conventions used throughout this book.</p>
    <p class="normal"><code class="inlineCode">CodeInText</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. For example: “Execute the <code class="inlineCode">make menuconfig</code> command:”</p>
    <p class="normal">A block of code is set as follows:</p>
    <pre class="programlisting code"><code class="hljs-code">require recipes-core/images/core-image-minimal.bb
IMAGE_INSTALL:append = <span class="hljs-string">" helloworld strace"</span>
</code></pre>
    <p class="normal">Any command-line input or output is written as follows:</p>
    <pre class="programlisting con"><code class="hljs-con">$ bitbake -c populate_sdk nova-image
</code></pre>
    <p class="normal"><strong class="keyWord">Bold</strong>: Indicates a new term, an important word, or words that you see on the screen. For instance, words in menus or dialog boxes appear in the text like this. For example: “Back out of <strong class="keyWord">External toolchain</strong> and open the <strong class="keyWord">Toolchain</strong> submenu.”</p>
    <div class="note">
      <p class="normal">Warnings or important notes appear like this. </p>
    </div>
    <div class="packt_tip">
      <p class="normal">Tips and tricks appear like this.</p>
    </div>
    <h1 id="_idParaDest-12" class="heading-1"><a id="_idTextAnchor011"/>Get in touch</h1>
    <p class="normal">Feedback from our readers is always welcome.</p>
    <p class="normal"><strong class="keyWord">General feedback</strong>: Email <code class="inlineCode">feedback@packtpub.com</code> and mention the book’s title in the subject of your message. If you have questions about any aspect of this book, please email us at <code class="inlineCode">questions@packtpub.com</code>.</p>
    <p class="normal"><strong class="keyWord">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you reported this to us. Please visit <a href="http://www.packtpub.com/submit-errata"><span class="url">http://www.packtpub.com/submit-errata</span></a>, click <strong class="keyWord">Submit Errata</strong>, and fill in the form.</p>
    <p class="normal"><strong class="keyWord">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <code class="inlineCode">copyright@packtpub.com</code> with a link to the material.</p>
    <p class="normal"><strong class="keyWord">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com/"><span class="url">http://authors.packtpub.com/</span></a>.</p>
  </div>
  <div id="_idContainer007" class="Basic-Text-Frame">
    <p class="eop"/>
    <h1 class="heading-1"><a id="_idTextAnchor012"/>Share your thoughts</h1>
    <p class="normal">Once you’ve read <em class="italic">Mastering Embedded Linux Development, Fourth Edition</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1803232595"><span class="url">click here to go straight to the Amazon review page</span></a> for this book and share your feedback.</p>
    <p class="normal">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
  </div>
  <div id="_idContainer009" class="Content">
    <h1 id="_idParaDest-13" class="heading-1"><a id="_idTextAnchor013"/>Download a Free PDF Copy of This Book</h1>
    <p class="normal">Thanks for purchasing this book!</p>
    <p class="normal">Do you like to read on the go but are unable to carry your print books everywhere?</p>
    <p class="normal">Is your eBook purchase not compatible with the device of your choice?</p>
    <p class="normal">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
    <p class="normal">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application.</p>
    <p class="normal">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily.</p>
    <p class="normal">Follow these simple steps to get the benefits:</p>
    <ol>
      <li class="numberedList" value="1">Scan the QR code or visit the link below:</li>
    </ol>
    <div class="IMG---Figure">
      <img src="../Images/B18466_Free_PDF_QR.jpg" alt="https://packt.link/free-ebook/9781801819299" width="200" height="200"/>
    </div>
    <p class="packt_figref"><a href="https://packt.link/free-ebook/9781803232591"><span class="url">https://packt.link/free-ebook/9781803232591</span></a></p>
    <ol>
      <li class="numberedList" value="2">Submit your proof of purchase.</li>
      <li class="numberedList">That’s it! We’ll send your free PDF and other benefits to your email directly.</li>
    </ol>
  </div>
</div></div></body></html>