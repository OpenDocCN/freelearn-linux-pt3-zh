<html><head></head><body>
		<div id="_idContainer130">
			<h1 id="_idParaDest-45" class="chapter-number"><a id="_idTextAnchor047"/>4</h1>
			<h1 id="_idParaDest-46"><a id="_idTextAnchor048"/>Format and Disk Space Commands</h1>
			<p>As we progress in our comprehensive series on frequently used commands for system administrators, the <strong class="bold">command-line interface</strong> (<strong class="bold">CLI</strong>) is an essential tool for getting many tasks done. The <a id="_idIndexMarker234"/>CLI offers a streamlined and efficient way to perform various tasks, from managing files and directories to monitoring system performance and troubleshooting issues. In this section, we will delve into frequently used commands and explore their usefulness, execution, and best practices for effective system administration. By mastering these commands, system administrators can work more efficiently and effectively, making the most of their <span class="No-Break">computing resources.</span></p>
			<p>As a system administrator, managing storage and filesystems is an essential part of ensuring the smooth operation of a system. The ability to format, partition, and manage disk space is critical for managing files, backing up important data, and maintaining system stability. In this chapter, we will explore the various commands used for formatting and disk space management, including <strong class="source-inline">fdisk</strong>, <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, <strong class="source-inline">du</strong>, <span class="No-Break">and more.</span></p>
			<p>We will begin by discussing the history and evolution of disk formatting and partitioning, from the early days of magnetic tapes to <a id="_idIndexMarker235"/>modern <strong class="bold">solid-state drives</strong> (<strong class="bold">SSDs</strong>). We will then delve into the steps involved in creating a partition and explore various commands for disk space management. Additionally, we will cover the use of package managers to display package space and explore various formatting commands such as <strong class="source-inline">mkfs</strong>, <strong class="source-inline">mke2fs</strong>, <strong class="source-inline">fdformat</strong>, and others. By the end of this chapter, you will have a comprehensive understanding of formatting and disk space commands, enabling you to effectively manage storage and filesystems. Itâ€™s important to note that formatting a disk results in deleting all data on that disk, so you should exercise caution when using <span class="No-Break">these commands.</span></p>
			<p>In this chapter, we are going to cover the following <span class="No-Break">main topics:</span></p>
			<ul>
				<li>The history and evolution of disk formatting and partitioning <span class="No-Break">in Linux</span></li>
				<li>Steps to create <span class="No-Break">a partition</span></li>
				<li>fdisk, lsblk, df, <span class="No-Break">and du</span></li>
				<li>Displaying (dpkg and rpm) <span class="No-Break">package space</span></li>
				<li>mkfs, mke2fs, and fdformat, <span class="No-Break">and more</span></li>
			</ul>
			<h1 id="_idParaDest-47"><a id="_idTextAnchor049"/>The history and evolution of disk formatting and partitioning in Linux</h1>
			<p>The history of <a id="_idIndexMarker236"/>disk formatting and partitioning in Unix/Linux dates back to the early days of computing when disk storage was a scarce resource. Disk partitioning was essential in organizing disk space into smaller, manageable sections. It allowed system administrators to allocate disk space more efficiently and reduced the risk of data loss in the event of a disk failure. In the early days of Unix, disk partitioning was done using the <strong class="source-inline">fdisk</strong> command, which allowed the user to create, delete, and modify disk partitions. With the introduction of Linux, the partitioning tool was updated to use the more <a id="_idIndexMarker237"/>advanced <strong class="bold">GUID Partition Table</strong> (<strong class="bold">GPT</strong>) format, which provided support for larger disks and <span class="No-Break">more partitions.</span></p>
			<p>Over time, disk formatting<a id="_idIndexMarker238"/> and partitioning in Unix/Linux have become more sophisticated, with new commands and utilities being added to improve the process. For instance, the <strong class="source-inline">mke2fs</strong> command, which is used to create an <strong class="source-inline">ext2</strong> or <strong class="source-inline">ext3</strong> filesystem, was introduced in Linux version 1.2. This command created a more efficient filesystem, which reduced the risk of data loss and made disk management more manageable. The introduction of the <strong class="source-inline">mke2fs</strong> command was a significant milestone in the evolution of disk formatting and partitioning in Unix/Linux as it allowed administrators to create more reliable filesystems and manage disk space more efficiently. The advent of cloud computing and virtualization has also had a significant impact on disk formatting and partitioning in Unix/Linux. Cloud computing has enabled the use of virtual disks, which can be partitioned and formatted using the same tools as physical disks. In virtualized environments, administrators can easily create, modify, and resize virtual disks, making it easier to manage storage space. Additionally, cloud storage providers have developed their own disk formatting and partitioning tools, such as <a id="_idIndexMarker239"/>Amazon <strong class="bold">Elastic Block Store</strong> (<strong class="bold">EBS</strong>), which allows users to create and attach virtual disks to their instances. These tools have made it easier for administrators to manage disk space in the cloud and ensure that their data is <span class="No-Break">stored securely.</span></p>
			<p>There are three types <span class="No-Break">of partitions:</span></p>
			<ul>
				<li><strong class="bold">Primary partition</strong>: A <a id="_idIndexMarker240"/>primary partition is a basic partition that can be used to boot an operating system. In a hard disk, you can create up to four primary partitions. If you want to create more partitions, you can create an extended partition, which is a special partition that can contain multiple <span class="No-Break">logical partitions.</span></li>
				<li><strong class="bold">Logical partition</strong>: A<a id="_idIndexMarker241"/> logical partition is a partition that is created within an extended partition. You can create multiple logical partitions within an extended partition, which can be useful when you want to create multiple partitions but you have already created four <span class="No-Break">primary partitions.</span></li>
				<li><strong class="bold">Extended partition</strong>: An <a id="_idIndexMarker242"/>extended partition is a special partition that is used to create multiple logical partitions. An extended partition can only be created if there are no more than four primary partitions on the hard disk. Once an extended partition has been created, you can create multiple logical partitions <span class="No-Break">within it.</span></li>
			</ul>
			<p>These partition types are used to organize and manage data on a hard disk. By creating multiple partitions, you can separate different types of data and manage them more effectively. For example, you could create a separate partition for the operating system, one for user data, and one for backup files. This can make it easier to manage your data and protect it in the event of a failure or data loss. The different types of partitions offer flexibility in how you organize your data on a hard disk, depending on your needs and the limitations of the <span class="No-Break">hard disk.</span></p>
			<h1 id="_idParaDest-48"><a id="_idTextAnchor050"/>Steps to create a partition</h1>
			<p>Partitioning is<a id="_idIndexMarker243"/> the process of dividing a physical hard drive into multiple logical storage units. In Linux, the process of creating a partition involves defining the size and location of a new partition on a physical hard drive, and then formatting it with a filesystem such as <strong class="source-inline">ext4</strong>, <strong class="source-inline">XFS</strong>, or <strong class="source-inline">btrfs</strong>. Creating partitions is essential for<a id="_idIndexMarker244"/> managing disk space effectively and efficiently. With partitioning, system administrators can organize and allocate space on a hard drive to various functions such as the operating system, application files, user data, and <span class="No-Break">swap space.</span></p>
			<p>The process of creating partitions in Linux involves several steps. The first step is to identify the physical hard drive that needs to be partitioned, using the <strong class="source-inline">fdisk</strong> command or other disk management tools such as <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, and <strong class="source-inline">du</strong>. Next, the system administrator must decide on the size and location of the new partition and use the <strong class="source-inline">fdisk</strong> command to create it. The new partition must then be formatted with a filesystem using the <strong class="source-inline">mkfs</strong> command. Finally, the system administrator must mount the new partition to make it accessible to the operating system and <span class="No-Break">its applications.</span></p>
			<p>Partitioning is important<a id="_idIndexMarker245"/> for several reasons. Firstly, it allows system administrators to manage disk space efficiently by organizing data into logical units. With partitioning, it becomes easier to back up and restore data, as well as to allocate space for specific applications or functions. Secondly, partitioning can improve system performance by reducing disk fragmentation and optimizing access times. Additionally, partitioning can improve security by isolating sensitive data on separate partitions and protecting it from unauthorized access. Remember that partitioning is a critical tool for system administrators to manage disk space, optimize system performance, and <span class="No-Break">enhance security.</span></p>
			<p>The demonstration will be easy as we only require a drive connected to the Linux machine, and we can begin partitioning by launching the Terminal. The commands weâ€™ll be making use of for this partitioning are <strong class="source-inline">lsblk</strong> and <strong class="source-inline">fdisk</strong>. The <strong class="source-inline">lsblk</strong> command will list the available devices so that we can select the correct one to format, and <strong class="source-inline">fdisk</strong> command will effectively format<a id="_idIndexMarker246"/> the selected device. Letâ€™s get started with <span class="No-Break">the demonstration:</span></p>
			<ol>
				<li>To verify the available devices, execute the <span class="No-Break"><strong class="source-inline">lsblk</strong></span><span class="No-Break"> command:</span></li>
			</ol>
			<div>
				<div id="_idContainer106" class="IMG---Figure">
					<img src="image/B18212_04_1.jpg" alt="Figure 4.1 â€“ Verifying disk space"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 â€“ Verifying disk space</p>
			<p class="list-inset">As we <a id="_idIndexMarker247"/>can see, we have listed the available devices and their respective disk spaces, but our main target is the connected drive on <strong class="source-inline">/dev/sdb</strong>. Note that <strong class="source-inline">/dev</strong> represents the device directory in Linux, where hardware devices are represented as files. In this case, <strong class="source-inline">/dev/sdb</strong> is the second SCSI disk drive on the system. Notice that it already has a partition (<strong class="source-inline">sdb1</strong>). We will delete that partition, verify it again, and then create our own partition. Letâ€™s proceed with the <span class="No-Break">next steps.</span></p>
			<ol>
				<li value="2">Next, execute the <strong class="source-inline">fdisk</strong> command to open its utility for the <strong class="source-inline">/dev/sdb</strong> drive. Please ensure you have <strong class="source-inline">sudo</strong> access to run this command. Once you have opened the utility, you can create a new partition, but first, letâ€™s delete the <span class="No-Break">previous one:</span></li>
			</ol>
			<div>
				<div id="_idContainer107" class="IMG---Figure">
					<img src="image/B18212_04_2.jpg" alt="Figure 4.2 â€“ Viewing the fdisk utility for the /dev/sdb drive"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 â€“ Viewing the fdisk utility for the /dev/sdb drive</p>
			<p class="list-inset">Here, we <a id="_idIndexMarker248"/>used the <strong class="source-inline">p</strong> command, which stands for print, to display information about the existing partition we had previously identified using the <strong class="source-inline">lsblk</strong> command. Now, we need to delete that partition so that we can create a new one according to <span class="No-Break">our needs.</span></p>
			<ol>
				<li value="3">To delete the <strong class="source-inline">sdb1</strong> partition, use the <strong class="source-inline">d</strong> command, which stands for delete, to remove the <span class="No-Break"><strong class="source-inline">sdb1</strong></span><span class="No-Break"> partition:</span></li>
			</ol>
			<div>
				<div id="_idContainer108" class="IMG---Figure">
					<img src="image/B18212_04_3.jpg" alt="Figure 4.3 â€“ Deleting and saving changes made"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 â€“ Deleting and saving changes made</p>
			<ol>
				<li value="4">After that, we <a id="_idIndexMarker249"/>can make use of the <strong class="source-inline">lsblk</strong> command to check whether the partition was really deleted. As we can see, the deleted partition (<strong class="source-inline">sdb1</strong>) is not listed anymore, proving that the <span class="No-Break">deletion succeeded:</span></li>
			</ol>
			<div>
				<div id="_idContainer109" class="IMG---Figure">
					<img src="image/B18212_04_4.jpg" alt="Figure 4.4 â€“ Verifying that the partition was deleted"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 â€“ Verifying that the partition was deleted</p>
			<p class="list-inset">Once we have confirmed this, we can proceed with creating our <span class="No-Break">own partition.</span></p>
			<ol>
				<li value="5">Now, call the <strong class="source-inline">fdisk</strong> utility for the <strong class="source-inline">/dev/sdb</strong> drive, and type <strong class="source-inline">p</strong> to print the current partition table. This will help you understand how the disk is currently partitioned. Next, type <strong class="source-inline">n</strong> to create a new partition. The <strong class="source-inline">n</strong> command in the <strong class="source-inline">fdisk</strong> tool is used to create a new partition on the selected disk. When the command is entered, we are prompted to select the type of partition we wish to create. In this case, we are presented with two partition types â€“ <strong class="source-inline">primary</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">extended</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer110" class="IMG---Figure">
					<img src="image/B18212_04_5.jpg" alt="Figure 4.5 â€“ Creating a new partition"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.5 â€“ Creating a new partition</p>
			<ol>
				<li value="6">Next, we<a id="_idIndexMarker250"/> selected <strong class="source-inline">p</strong> for the primary partition type. Then, we were prompted to select the number of partitions, and we left it as the default value by pressing <em class="italic">Enter</em>. For the first sector, we also pressed <em class="italic">Enter</em>. The same went for the last sector. Finally, we confirmed that we wanted to remove the signature by typing <strong class="source-inline">yes</strong> and then used the <strong class="source-inline">w</strong> command to save all the changes that <span class="No-Break">we made:</span></li>
			</ol>
			<div>
				<div id="_idContainer111" class="IMG---Figure">
					<img src="image/B18212_04_6.jpg" alt="Figure 4.6 â€“ Choosing the primary partition and saving changes"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 â€“ Choosing the primary partition and saving changes</p>
			<ol>
				<li value="7">Verify its <a id="_idIndexMarker251"/>creation by calling <strong class="source-inline">fdisk -l /dev/sdb</strong> <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">lsblk</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer112" class="IMG---Figure">
					<img src="image/B18212_04_7.jpg" alt="Figure 4.7 â€“ Verifying the new partition (sdb1)"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 â€“ Verifying the new partition (sdb1)</p>
			<p>Congratulations! You have successfully created <span class="No-Break">a partition.</span></p>
			<h1 id="_idParaDest-49"><a id="_idTextAnchor051"/>fdisk, lsblk, df, and du</h1>
			<p>Among the utilities used in Linux systems to manage filesystems, ther<a id="_idTextAnchor052"/>eâ€™s <strong class="source-inline">fdisk</strong>, <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, and <strong class="source-inline">du</strong>. Each of these utilities performs a specific function in disk management, and their proper use is essential to ensure the efficient functioning of <span class="No-Break">the system.</span></p>
			<p>We introduced <strong class="source-inline">fdisk</strong>, a command-line utility thatâ€™s used to partition disks, previously. It allows <a id="_idIndexMarker252"/>us to create and modify partition tables, enabling administrators to organize storage space as required. Partitioning is essential for efficiently utilizing storage space, improving system performance, and simplifying the management of the filesystem. <strong class="source-inline">fdisk</strong> can create different types of partitions, including primary, logical, and extended partitions. Additionally, it can be used to change the partition size, delete partitions, and modify partition types. Without <strong class="source-inline">fdisk</strong>, managing and organizing the filesystem would be complex, cumbersome, and prone to errors. We can call this command by simply typing <strong class="source-inline">fdisk -l</strong> to list <span class="No-Break">the partition:</span></p>
			<div>
				<div id="_idContainer113" class="IMG---Figure">
					<img src="image/B18212_04_8.jpg" alt="Figure 4.8 â€“ List partition with fdisk"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 â€“ List partition with fdisk</p>
			<p><strong class="source-inline">lsblk</strong> is another <a id="_idIndexMarker253"/>command-line utility thatâ€™s used in Linux systems to list all the available block devices, including hard drives, USB devices, and CD-ROM drives. This utility is useful in identifying the storage devices attached to the system, and the details of each block device. The output of <strong class="source-inline">lsblk</strong> provides critical information about the block devices, such as the device name, the size, the filesystem type, and the mount point. An example of this can be <span class="No-Break">seen here:</span></p>
			<div>
				<div id="_idContainer114" class="IMG---Figure">
					<img src="image/B18212_04_9.jpg" alt="Figure 4.9 â€“ Output of block devices"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 â€“ Output of block devices</p>
			<p>This information is crucial in making decisions on how to allocate storage space and organize the filesystem efficiently. <strong class="source-inline">lsblk</strong> is essential in disk management as it helps system administrators identify the storage devices attached to the system, troubleshoot device connectivity issues, and make informed decisions regarding partitioning and <span class="No-Break">disk organization.</span></p>
			<p>The <strong class="source-inline">df</strong> (<strong class="bold">Disk Free</strong>) utility is<a id="_idIndexMarker254"/> a command-line tool that displays the disk space used and available in filesystems on Linux systems. This tool is important in monitoring filesystem usage, identifying storage space consumption patterns, and making decisions on how to allocate storage space efficiently. Letâ€™s try and display the disk space usage for a specific filesystem, such as the <span class="No-Break">root filesystem:</span></p>
			<div>
				<div id="_idContainer115" class="IMG---Figure">
					<img src="image/B18212_04_10.jpg" alt="Figure 4.10 â€“ Displaying disk usage with df"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 â€“ Displaying disk usage with df</p>
			<p>With <strong class="source-inline">df</strong>, administrators can identify filesystems that are running low on disk space, which can cause system performance issues or <span class="No-Break">data loss:</span></p>
			<div>
				<div id="_idContainer116" class="IMG---Figure">
					<img src="image/B18212_04_11.jpg" alt="Figure 4.11 â€“ Monitoring disk usage"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 â€“ Monitoring disk usage</p>
			<p>In this example, the <a id="_idIndexMarker255"/>administrator is monitoring the disk space usage on the filesystem where the website files are stored, which is mounted on <strong class="source-inline">/var/www/html</strong>. The <strong class="source-inline">df</strong> command is used with the <strong class="source-inline">-h</strong> option to display the output in a human-readable format, making it easier to understand the disk space usage. The output shows the total size of the filesystem, the amount of space used, the available space, the percentage of space used, and the mount point. The administrator can use this information to identify the directories that are consuming the most space and optimize them for better performance. Additionally, the administrator can use this information to plan for future disk space needs. The <strong class="source-inline">df</strong> utility provides a detailed report on the filesystem usage, including the filesystem type, the total size, the used space, the available space, and the percentage of the disk space used. With this information, administrators can optimize disk usage, increase performance, and avoid <span class="No-Break">system crashes.</span></p>
			<p>The <strong class="source-inline">du</strong> utility is another<a id="_idIndexMarker256"/> essential command-line tool thatâ€™s used in Linux systems to determine the amount of space used by specific directories and files. With <strong class="source-inline">du</strong>, administrators can identify files or directories that are consuming too much space and decide whether to delete, archive, or move them to another filesystem. The <strong class="source-inline">du</strong> utility also displays the amount of space used by each subdirectory, enabling administrators to pinpoint storage hogs quickly. The <strong class="source-inline">du</strong> utilityâ€™s importance in disk management cannot be overstated as it helps system administrators optimize disk usage, identify space-hogging files, and troubleshoot space <span class="No-Break">consumption issues.</span></p>
			<h2 id="_idParaDest-50"><a id="_idTextAnchor053"/>Checking the disk space usage of a directory</h2>
			<p>In this example, we <a id="_idIndexMarker257"/>will use the <strong class="source-inline">du</strong> command<a id="_idIndexMarker258"/> to check the disk space usage of <span class="No-Break">a directory.</span></p>
			<p>The steps are <span class="No-Break">as follows:</span></p>
			<ol>
				<li>Navigate to the directory whose disk space usage you want <span class="No-Break">to check.</span></li>
				<li>Type the <span class="No-Break">following command:</span></li>
			</ol>
			<div>
				<div id="_idContainer117" class="IMG---Figure">
					<img src="image/B18212_04_12.jpg" alt="Figure 4.12 â€“ Using du to check disk usage"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 â€“ Using du to check disk usage</p>
			<p class="list-inset">We have<a id="_idIndexMarker259"/> used the <strong class="source-inline">du -sh</strong> command<a id="_idIndexMarker260"/> to check the disk space usage of the directory. The output shows that the directory is using 13 GB of <span class="No-Break">disk space.</span></p>
			<h2 id="_idParaDest-51"><a id="_idTextAnchor054"/>Finding large files in a directory</h2>
			<p>In this example, we will <a id="_idIndexMarker261"/>use the <strong class="source-inline">du</strong> command<a id="_idIndexMarker262"/> to find large files in <span class="No-Break">a directory.</span></p>
			<p>The steps are <span class="No-Break">as follows:</span></p>
			<ol>
				<li>Navigate to the directory whose large files you want <span class="No-Break">to find.</span></li>
				<li>Type the <span class="No-Break">following command:</span></li>
			</ol>
			<div>
				<div id="_idContainer118" class="IMG---Figure">
					<img src="image/B18212_04_13.jpg" alt="Figure 4.13 â€“ Using du to find large files"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 â€“ Using du to find large files</p>
			<p>Utilize the <strong class="source-inline">du -a | sort -rn | head â€“n 10</strong> command to identify the 10 largest files in the directory. The resulting output provides the size of each file in bytes, along with its <a id="_idIndexMarker263"/>corresponding file path. Letâ€™s apply this command to a different folder and observe <span class="No-Break">the results:</span></p>
			<div>
				<div id="_idContainer119" class="IMG---Figure">
					<img src="image/B18212_04_14.jpg" alt="Figure 4.14 â€“ Viewing the file size with du"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 â€“ Viewing the file size with du</p>
			<p>Utilities such as <strong class="source-inline">fdisk</strong>, <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, and <strong class="source-inline">du</strong> are essential in managing and organizing disk space in Linux systems. <strong class="source-inline">fdisk</strong> is used in partitioning disks, <strong class="source-inline">lsblk</strong> is used in identifying the storage devices attached to the system, <strong class="source-inline">df</strong> is used in monitoring filesystem usage, and <strong class="source-inline">du</strong> is used in determining the amount of space used by specific directories and files. Proper use of these utilities is crucial in optimizing disk usage, increasing system performance, and avoiding <span class="No-Break">data loss.</span></p>
			<h1 id="_idParaDest-52"><a id="_idTextAnchor055"/>Displaying (dpkg and rpm) package space</h1>
			<p>Package management systems such as <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong> are used to install, remove, and manage software packages in Linux and Unix <a id="_idIndexMarker264"/>operating systems. The <strong class="source-inline">dpkg</strong> tool is used in Debian-based systems such as Ubuntu and the <strong class="source-inline">rpm</strong> tool is used in Red Hat-based systems such as CentOS. These tools not only provide an easy way to manage software packages but also offer valuable <a id="_idIndexMarker265"/>information about disk space usage by the installed packages. One important use of the <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong> tools is to display the package space, which refers to the amount of disk space used by the installed packages. By using these tools, administrators can identify the packages that are consuming the most disk space and make decisions on whether to remove or keep them. This is particularly useful in systems with limited disk space, where optimizing the use of disk space is critical to avoid system crashes, performance issues, or <span class="No-Break">data loss.</span></p>
			<p>In addition, the <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong> tools<a id="_idIndexMarker266"/> provide information about the package <a id="_idIndexMarker267"/>dependencies, which are other packages that are required by the installed package to function properly. This information is useful in identifying the packages that can be safely removed without affecting the systemâ€™s stability or functionality. By removing unnecessary packages, administrators can free up disk space, reduce system complexity, and improve system performance. The <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong> tools also offer an easy way to upgrade or install packages with their dependencies automatically resolved. With these tools, administrators can easily install security patches, updates, and new software packages without worrying about the dependencies. This reduces the time and effort required to manage packages and ensures that the system is up to date with the latest software versions. We are currently using CentOS 8, meaning <strong class="source-inline">rpm</strong> (<strong class="bold">Red Hat Package Manager</strong>) will be our number <span class="No-Break">one example.</span></p>
			<h2 id="_idParaDest-53"><a id="_idTextAnchor056"/>Installing a package</h2>
			<p>The<a id="_idIndexMarker268"/> following example demonstrates how to utilize <strong class="source-inline">rpm</strong> to install packages on <span class="No-Break">CentOS 8:</span></p>
			<div>
				<div id="_idContainer120" class="IMG---Figure">
					<img src="image/B18212_04_15.jpg" alt="Figure 4.15 â€“ Using rpm to install a package"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 â€“ Using rpm to install a package</p>
			<p>This command installs the specified package using RPM. It searches for the <strong class="source-inline">package</strong> file in the current directory, or you can specify a path to the <strong class="source-inline">package</strong> file. This command is useful for installing new software on a Linux system, whether it is a single package or a set <span class="No-Break">of packages.</span></p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor057"/>Querying the details of a package</h2>
			<p>The <strong class="source-inline">rpm</strong> command<a id="_idIndexMarker269"/> can be used to query the details of a package installed on the system. For example, to query the details of the <strong class="source-inline">ftp</strong> package, use the <span class="No-Break">following command:</span></p>
			<div>
				<div id="_idContainer121" class="IMG---Figure">
					<img src="image/B18212_04_16.jpg" alt="Figure 4.16 â€“ Querying the details of a package thatâ€™s been installed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.16 â€“ Querying the details of a package thatâ€™s been installed</p>
			<p>The <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong> tools are essential for managing software packages and optimizing the use of disk space in Linux and Unix systems. By providing valuable information about package space, dependencies, and upgrade options, these tools enable administrators to make informed decisions and ensure the stability, security, and performance of <span class="No-Break">the system.</span></p>
			<h1 id="_idParaDest-55"><a id="_idTextAnchor058"/>mkfs, mke2fs, fdformat, and more</h1>
			<p>Disk formatting is the process of preparing a storage device such as a hard drive, SSD, or USB flash drive for data storage. Formatting creates a filesystem on the storage device, which allows the operating system to organize and manage files on the device. In Linux, several disk formatting tool commands can be used to format storage devices. These tools include <strong class="source-inline">mkfs</strong>, <strong class="source-inline">mke2fs</strong>, <strong class="source-inline">f<a id="_idTextAnchor059"/>dformat</strong>, <span class="No-Break">and more.</span></p>
			<p><strong class="source-inline">mkfs</strong> is a<a id="_idIndexMarker270"/> command thatâ€™s used to create a filesystem on a storage device. This command can be used to create a variety of filesystems, including <strong class="source-inline">ext2</strong>, <strong class="source-inline">ext3</strong>, <strong class="source-inline">ext4</strong>, <strong class="source-inline">XFS</strong>, <strong class="source-inline">btrfs</strong>, and more. The <strong class="source-inline">mkfs</strong> command is important in preparing storage devices for use in Linux systems. For example, when a new hard drive is added to a Linux server, it must be formatted before it can be used for data storage. Letâ€™s examine a straightforward approach to utilize this tool on <span class="No-Break">CentOS 8:</span></p>
			<div>
				<div id="_idContainer122" class="IMG---Figure">
					<img src="image/B18212_04_17.jpg" alt="Figure 4.17 â€“ Formatting a partition using mkfs.ext4"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.17 â€“ Formatting a partition using mkfs.ext4</p>
			<p>This will format the <strong class="source-inline">/dev/sdb1</strong> partition with the <strong class="source-inline">ext4</strong> filesystem. The newly formatted partition can then be mounted and used for <span class="No-Break">data storage.</span></p>
			<p><strong class="source-inline">mke2fs</strong> is a variant of the <strong class="source-inline">mkfs</strong> command<a id="_idIndexMarker271"/> that is specifically designed to create <strong class="source-inline">ext2</strong>, <strong class="source-inline">ext3</strong>, and <strong class="source-inline">ext4</strong> filesystems. The <strong class="source-inline">mke2fs</strong> command is important in creating and managing Linux filesystems. With this command, administrators can specify the size of the filesystem, the block size, and other parameters to optimize the filesystem for specific use cases. For example, a filesystem created with the <strong class="source-inline">mke2fs</strong> command can be optimized for high-performance workloads or used with large files, as shown in the <span class="No-Break">following example:</span></p>
			<div>
				<div id="_idContainer123" class="IMG---Figure">
					<img src="image/B18212_04_18.jpg" alt="Figure 4.18 â€“ Creating an ext3 filesystem"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.18 â€“ Creating an ext3 filesystem</p>
			<p>Here, the command creates an <strong class="source-inline">ext3</strong> filesystem on the <strong class="source-inline">/dev/sdb1</strong> partition. The <strong class="source-inline">-t ext3</strong> option specifies the filesystem type <span class="No-Break">as </span><span class="No-Break"><strong class="source-inline">ext3</strong></span><span class="No-Break">.</span></p>
			<p>The <strong class="source-inline">fdformat</strong> command<a id="_idIndexMarker272"/> is primarily used for low-level formatting of floppy disks, which are legacy storage media. It writes a new disk geometry and sector layout to the floppy disk, preparing it for use. However, this command is not intended for formatting modern storage devices such as pen drives or USB <span class="No-Break">flash drives.</span></p>
			<p>For formatting pen drives or USB flash drives in Linux, <strong class="source-inline">mkfs</strong> (make filesystem) commands are typically used, such as <strong class="source-inline">mkfs.fat</strong> for creating a <strong class="source-inline">FAT</strong> filesystem or <strong class="source-inline">mkfs.ext4</strong> for creating an <strong class="source-inline">ext4</strong> filesystem, as shown in the previous examples. These commands are specifically designed for formatting different types of storage devices, including pen drives, USB flash drives, and <span class="No-Break">hard drives.</span></p>
			<p>The <strong class="source-inline">mkswap</strong> command is <a id="_idIndexMarker273"/>used to create a swap area on a Linux system. A swap area is a dedicated space on a hard drive that the system can use as virtual memory when it runs out of physical memory. The <strong class="source-inline">mkswap</strong> command initializes a disk partition or a file as a swap area and assigns it a <span class="No-Break">unique identifier.</span></p>
			<p>Letâ€™s delve into comprehensive examples to demonstrate the practical utilization of <span class="No-Break">these commands:</span></p>
			<ol>
				<li> Check the available <span class="No-Break">disk partitions:</span></li>
			</ol>
			<div>
				<div id="_idContainer124" class="IMG---Figure">
					<img src="image/B18212_04_19.jpg" alt="Figure 4.19 â€“ Viewing the available disk partitions"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.19 â€“ Viewing the available disk partitions</p>
			<ol>
				<li value="2">Identify the desired partition for swap, such as <strong class="source-inline">/dev/sdb1</strong>, and then proceed to execute the <strong class="source-inline">sudo mkswap /dev/sdb1</strong> command. This command formats the partition as <strong class="source-inline">swap</strong>, resulting in the <span class="No-Break">following output:</span></li>
			</ol>
			<div>
				<div id="_idContainer125" class="IMG---Figure">
					<img src="image/B18212_04_20.jpg" alt="Figure 4.20 â€“ Using mkswap to format the partition as swap"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.20 â€“ Using mkswap to format the partition as swap</p>
			<p class="list-inset">The <strong class="source-inline">gdisk</strong> command<a id="_idIndexMarker274"/> is a variant of the <strong class="source-inline">fdisk</strong> command <a id="_idIndexMarker275"/>and is used to partition hard drives on Linux systems. <strong class="source-inline">gdisk</strong> is primarily designed for GPT, which is a newer partitioning scheme that has replaced the older <strong class="bold">Master Boot Record</strong> (<strong class="bold">MBR</strong>) partitioning <a id="_idIndexMarker276"/>scheme on many modern systems. The <strong class="source-inline">gdisk</strong> command is a powerful tool that allows you to create, modify, and delete partitions on <span class="No-Break">GPT disks.</span></p>
			<ol>
				<li value="3">In this scenario, the system administrator is using the <strong class="source-inline">gdisk</strong> command to create a new partition on the <strong class="source-inline">/dev/sdb</strong> disk. The administrator enters the <strong class="source-inline">gdisk /dev/sdb</strong> command to launch the <strong class="source-inline">gdisk</strong> utility for the <span class="No-Break">specified disk.</span></li>
				<li>Once inside the <strong class="source-inline">gdisk</strong> utility, the administrator uses the <strong class="source-inline">n</strong> command to create a new partition. The utility prompts for the partition number, first sector, and last sector. The administrator can choose the default values or specify custom values based on <span class="No-Break">their requirements:</span></li>
			</ol>
			<div>
				<div id="_idContainer126" class="IMG---Figure">
					<img src="image/B18212_04_21.jpg" alt="Figure 4.21 â€“ Using gdisk to create a new partition"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.21 â€“ Using gdisk to create a new partition</p>
			<ol>
				<li value="5">In this <a id="_idIndexMarker277"/>example, the administrator sets the partition type to <strong class="source-inline">Linux swap</strong> by entering a hex code of <strong class="source-inline">8300</strong>. After confirming the changes, the administrator uses the <strong class="source-inline">w</strong> command to write the changes to the disk and exit the <span class="No-Break"><strong class="source-inline">gdisk</strong></span><span class="No-Break"> utility:</span></li>
			</ol>
			<div>
				<div id="_idContainer127" class="IMG---Figure">
					<img src="image/B18212_04_22.jpg" alt="Figure 4.22 â€“ The partition was created"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.22 â€“ The partition was created</p>
			<p>The <strong class="source-inline">parted</strong> command is a<a id="_idIndexMarker278"/> partition editor that allows you to create, delete, resize, and move partitions on a hard drive. Parted supports both MBR and GPT partitioning schemes and can work with multiple filesystem types. It is a powerful tool for managing disk partitions and is commonly used in <span class="No-Break">server environments.</span></p>
			<p>Letâ€™s explore a practical <a id="_idIndexMarker279"/>scenario of using the <span class="No-Break"><strong class="source-inline">parted</strong></span><span class="No-Break"> command:</span></p>
			<ol>
				<li>In this scenario, the system administrator is using the <strong class="source-inline">parted</strong> command to create a new partition on the <strong class="source-inline">/dev/sdb</strong> disk. The administrator enters the <strong class="source-inline">parted /dev/sdb</strong> command to launch the parted utility for the <span class="No-Break">specified disk.</span></li>
				<li>Once inside the parted utility, the administrator uses the <strong class="source-inline">mklabel gpt</strong> command to create a new GPT partition table on the disk. This ensures compatibility with modern systems and larger <span class="No-Break">disk sizes.</span></li>
				<li>Next, the administrator uses the <strong class="source-inline">mkpart primary ext4 0% 100%</strong> command to create a new primary partition that spans the entire disk. The partition is formatted with the <span class="No-Break"><strong class="source-inline">ext4</strong></span><span class="No-Break"> filesystem.</span></li>
				<li>After creating the partition, the administrator can use the <strong class="source-inline">print</strong> command to verify the partition layout and details. This helps ensure that the partition was <span class="No-Break">created correctly.</span></li>
				<li>Finally, the <a id="_idIndexMarker280"/>administrator uses the <strong class="source-inline">quit</strong> command to exit the <span class="No-Break">parted utility:</span></li>
			</ol>
			<div>
				<div id="_idContainer128" class="IMG---Figure">
					<img src="image/B18212_04_23.jpg" alt="Figure 4.23 â€“ Using parted to create a partition table"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.23 â€“ Using parted to create a partition table</p>
			<p>By using the <strong class="source-inline">parted</strong> command in this scenario, the system administrator can easily create and manage partitions on the specified disk, allowing for effective disk management <span class="No-Break">and utilization.</span></p>
			<p>The <strong class="source-inline">dd</strong> command is<a id="_idIndexMarker281"/> a low-level tool thatâ€™s used for copying and converting data between files, disks, and partitions. The <strong class="source-inline">dd</strong> command is commonly used for creating bootable USB drives, backing up and restoring disk images, and cloning disks. It can also be used to write zeros to a hard drive, which is useful for securely wiping <span class="No-Break">sensitive data.</span></p>
			<p>Letâ€™s explore a practical<a id="_idIndexMarker282"/> example scenario for the <span class="No-Break"><strong class="source-inline">dd</strong></span><span class="No-Break"> command:</span></p>
			<ol>
				<li>In this scenario, the system administrator is using the <strong class="source-inline">dd</strong> command to copy the contents of a source file to a USB device represented <span class="No-Break">by </span><span class="No-Break"><strong class="source-inline">/dev/sdb</strong></span><span class="No-Break">.</span></li>
				<li>The administrator starts by executing the <strong class="source-inline">dd</strong> command. The <strong class="source-inline">if</strong> option is used to specify the input file, followed by the path to the source file (<strong class="source-inline">/home/instructor/backup.tar.gz</strong> in <span class="No-Break">this example):</span></li>
			</ol>
			<div>
				<div id="_idContainer129" class="IMG---Figure">
					<img src="image/B18212_04_24.jpg" alt="Figure 4.24 â€“ Using the dd command to copy on the USB device"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.24 â€“ Using the dd command to copy on the USB device</p>
			<ol>
				<li value="3">Next, the <strong class="source-inline">of</strong> option is used to specify the output file, which is the USB device represented by <strong class="source-inline">/dev/sdb</strong>. This means that the contents of the source file will be written to the <span class="No-Break">USB device.</span></li>
				<li>The <strong class="source-inline">bs</strong> option is used to specify the block size for data transfer. In this example, <strong class="source-inline">bs=4M</strong> indicates a block size of <span class="No-Break">4 megabytes.</span></li>
				<li>By executing this command, the system administrator can effectively copy the contents of the source file to the USB device. This can be useful for tasks such as creating bootable USB drives, transferring large files, or creating <span class="No-Break">disk images.</span></li>
				<li>Itâ€™s important to exercise caution when using the <strong class="source-inline">dd</strong> command with block devices such as <strong class="source-inline">/dev/sdb</strong> as any data on the destination device will be overwritten. As an administrator, you should double-check and ensure they are targeting the correct device to avoid accidental <span class="No-Break">data loss.</span></li>
			</ol>
			<p>In conclusion, disk formatting tool commands are an essential part of managing storage devices in Linux systems. These <a id="_idIndexMarker283"/>commands allow administrators to prepare storage devices for use, optimize filesystems for specific use cases, and ensure that devices are reliable and performant. Understanding the purpose and use of these commands is important for any Linux administrator who works with <span class="No-Break">storage devices.</span></p>
			<h1 id="_idParaDest-56"><a id="_idTextAnchor060"/>Summary</h1>
			<p>This chapter explored the steps of creating a partition, a fundamental process in disk management. We provided a detailed walk-through of utilizing tools such as <strong class="source-inline">fdisk</strong>, <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, and <strong class="source-inline">du</strong> to create, modify, and analyze partitions on storage devices. These tools play a crucial role in partition management, allowing system administrators to allocate disk space efficiently, monitor disk usage, and make informed decisions for optimal storage utilization. Additionally, this chapter delved into the topic of displaying package space using commands such as <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong>. These commands enable system administrators to obtain information about installed packages, including their sizes and disk space consumption. By leveraging <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong>, administrators can keep track of package installations, identify space-intensive packages, and manage package dependencies to ensure efficient <span class="No-Break">disk utilization.</span></p>
			<p>Furthermore, this chapter covered the usage of <strong class="source-inline">mkfs</strong>, <strong class="source-inline">mke2fs</strong>, and <strong class="source-inline">fdformat</strong>, among other disk formatting tools. These commands provide administrators with the ability to format disks and partitions with various filesystems, facilitating data organization and compatibility. Proper disk formatting is crucial for optimal performance and storage utilization. System administrators can utilize these tools to prepare disks for specific purposes, create filesystems for data storage, or format <span class="No-Break">removable media.</span></p>
			<p>In summary, this chapter served as a comprehensive guide to effective file management and storage optimization in Linux. By incorporating the steps of creating a partition, utilizing tools such as <strong class="source-inline">fdisk</strong>, <strong class="source-inline">lsblk</strong>, <strong class="source-inline">df</strong>, and <strong class="source-inline">du</strong>, displaying package space with <strong class="source-inline">dpkg</strong> and <strong class="source-inline">rpm</strong>, and employing disk formatting commands such as <strong class="source-inline">mkfs</strong>, <strong class="source-inline">mke2fs</strong>, and <strong class="source-inline">fdformat</strong>, system administrators can efficiently manage their files and storage resources. This enables them to enhance storage utilization, ensure data integrity, and maintain an organized and optimized <span class="No-Break">system environment.</span></p>
			<p>In the next chapter, we will thoroughly explore and discuss important commands such as <strong class="source-inline">chmod</strong>, <strong class="source-inline">chown</strong>, <strong class="source-inline">chgrp</strong>, <strong class="source-inline">umask</strong>, and <strong class="source-inline">sudo</strong>. These commands play a critical role in granting and managing file permissions, modifying ownership and group settings, setting default file permissions, and executing commands with <span class="No-Break">administrative privileges.</span></p>
		</div>
	</body></html>