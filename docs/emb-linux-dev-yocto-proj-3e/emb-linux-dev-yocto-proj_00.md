# 前言

Linux 一直被用于前沿产品，而嵌入式系统也成为人类技术组合中的重要组成部分。

Yocto 项目处于一个理想的位置，成为你项目的首选。它提供了一整套丰富的工具，帮助你将大部分精力和资源集中在产品开发上，而不是重新发明轮子。

本书的构思基于嵌入式 Linux 产品和开发团队的常见任务和需求。然而，由活跃社区成员以实践性和简明的方式编写，本书将成为你学习过程中的一块跳板，也将助力项目的顺利推进。

在本书的第三版中，书籍已经经过彻底的重修，融入了前几版读者的反馈，并扩展了内容，以帮助读者理解与 Yocto 项目相关的复杂概念。此外，本书还进行了全面更新，反映了 Yocto 项目长期支持版本 4.0（代号 Kirkstone）所做的更改。

此外，还新增了两章，一章介绍如何通过仿真使用 QEMU 加速产品开发，另一章则讨论 Yocto 项目及一般项目指南。

# 本书适合的人群

本书适合有嵌入式 Linux 经验的工程师和爱好者，旨在帮助他们了解 Yocto 项目的工具，以便评估、比较或在项目中使用。本书的目标是帮助你迅速掌握知识，避免陷入常见的学习曲线陷阱。

# 本书内容概览

*第一章*，*认识 Yocto 项目*，介绍了引入 Yocto 项目及其主要工具的基本概念和前提条件。

*第二章*，*构建我们的 Poky 系统*，介绍了首次构建所需的环境。

*第三章*，*使用 Toaster 构建镜像*，展示了一个用户友好的 Web 界面，既可以作为配置封装器，也可以作为构建工具使用。

*第四章*，*认识 BitBake 工具*，介绍了 BitBake 元数据的概念。

*第五章*，*掌握 BitBake 工具*，展示了如何管理任务及其依赖关系。

*第六章*，*详细介绍临时构建目录*，详细讲解了构建过程中的临时输出文件夹。

*第七章*，*吸收打包支持*，解释了作为基础的打包机制，用于创建和管理所有二进制包。

*第八章*，*深入了解 BitBake 元数据*，详细说明了 BitBake 元数据语言，这将用于后续的所有章节。

*第九章*，*与 Yocto 项目一起开发*，演示了获取开发环境所需的工作流。

*第十章*，*使用 Yocto 项目进行调试*，展示了如何使用 Poky 生成调试环境并使用它。

*第十一章*，*探索外部层*，探讨了 Yocto 项目中最重要的概念之一——使用外部层的灵活性。

*第十二章*，*创建自定义层*，讲解了层创建的步骤。

*第十三章*，*自定义现有配方*，展示了如何自定义现有的配方。

*第十四章*，*实现 GPL 合规性*，总结了实现 copyleft 合规产品的任务和概念。

*第十五章*，*启动我们的自定义嵌入式 Linux*，使用实际硬件和 Yocto 项目的工具。

*第十六章*，*通过仿真加速产品开发 - QEMU*，演示了 QEMU 如何加速产品开发。

*第十七章*，*最佳实践*，讨论了基于作者经验的一些 Yocto 项目和一般项目的相关指导方针。

# 为了最大化本书的价值

为了更好地理解本书，至关重要的是你需要具备一些相关背景知识，尤其是本书未覆盖或仅简要提及的主题，例如 Git 和 Linux 内核的基础知识以及其基本编译过程。

在深入本书中涉及的技术概念之前，我们建议先了解 Yocto 项目的大致框架。我们推荐阅读开源小册子，*前往 Yocto 项目*，该小册子可以在 Git 仓库中找到：[`git.io/vFUiI`](https://git.io/vFUiI)；这本小册子的内容旨在帮助新手更好地理解 Yocto 项目的目标及其潜在用途。它提供了一个项目的概述，然后再深入探讨如何实现技术细节。

需要具备 GNU/Linux 环境和嵌入式 Linux 的基本使用知识，以及开发中常见的一些概念，如编译、调试、部署和安装。此外，有一些 Shell 脚本和 Python 的经验会加分，因为这些编程语言是 Yocto 项目工具的核心技术，广泛应用于其中。

然而，你可能希望深入了解这些主题。如果是这样，我们推荐阅读 Chris Simmonds 的书籍 *精通嵌入式 Linux 编程 - 第三版*，ISBN-13 978-1789530384。

你不应将我们上面列举的任何缺失概念视为障碍，而应当看作是你可以学习的内容，并且在阅读本书时，实践这些概念的使用。

# 下载彩色图像

我们还提供了一份 PDF 文件，包含了本书中使用的截图和图表的彩色图像。你可以在此下载： https://packt.link/lbpMD。

# 使用的约定

本书中使用了若干文本约定。

`正文中的代码`：表示文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。例如：“在第 8 行，`BBFILE_COLLECTIONS`，我们告诉 BitBake 创建一个新的元数据集合，名为 `yocto`。接下来，在第 9 行，`BBFILE_PATTERN_yocto`，我们定义规则匹配所有以 `LAYERDIR` 开头的路径，从而识别属于 `yocto` 集合的元数据。”

任何命令行输入或输出都如下所示：

```
$ sudo dnf install gawk make wget tar bzip2 gzip python3 unzip perl patch diffutils diffstat git cpp gcc gcc-c++ glibc-devel texinfo chrpath ccache perl-Data-Dumper perl-Text-ParseWords perl-Thread-Queue perl-bignum socat python3-pexpect findutils which file cpio python python3-pip xz python3-GitPython python3-jinja2 SDL-devel xterm rpcgen mesa-libGL-devel perl-FindBin perl-File-Compare perl-File-Copy perl-locale zstd lz4
```

**粗体**：表示新术语、重要词汇或屏幕上显示的单词。例如，菜单或对话框中的词汇会显示为 **粗体**。例如：“然后，点击 **Image recipes** 标签，选择你要构建的镜像。”

提示或重要说明

如此显示。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果你对本书的任何方面有疑问，请通过 customercare@packtpub.com 给我们发邮件，并在邮件主题中注明书名。

**勘误表**：虽然我们已经尽力确保内容的准确性，但错误仍然可能发生。如果你在本书中发现错误，我们将非常感激你能向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果你在互联网上发现任何形式的非法复制品，我们将非常感激你能提供该内容的地址或网站名称。请通过 copyright@packt.com 联系我们，并提供该材料的链接。

**如果你有兴趣成为作者**：如果你在某个领域具有专业知识，并有兴趣写书或为书籍贡献内容，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

阅读完《*嵌入式 Linux 开发与 Yocto 项目*》后，我们希望听到你的反馈！请 [点击这里直接进入亚马逊的评论页面](https://packt.link/r/1804615064)并分享你的想法。

你的评论对我们以及技术社区非常重要，它将帮助我们确保提供优质的内容。

# 下载本书的免费 PDF 版

感谢购买本书！

你喜欢随时随地阅读，但又无法随身携带纸质书籍吗？你购买的电子书与自己选择的设备不兼容吗？

不用担心，现在购买每本 Packt 书籍时，你都能免费获得该书的 DRM-free PDF 版本。

在任何地方、任何设备上阅读。直接从你最喜欢的技术书籍中搜索、复制并粘贴代码到你的应用程序中。

优惠还不止于此，你还可以获得独家折扣、新闻简报和每日发送到邮箱的精彩免费内容。

按照以下简单步骤即可享受这些好处：

1.  扫描二维码或访问以下链接

![](img/B19361_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781804615065`](https://packt.link/free-ebook/9781804615065)

1.  提交您的购买证明

1.  就这样！我们会直接将您的免费 PDF 和其他福利发送到您的邮箱
