<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer054">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">8</span></h1>
<h1 class="chapterTitle" id="_idParaDest-155"><span class="koboSpan" id="kobo.2.1">Ownership and Permissions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In this chapter, you’ll learn how users and groups are combined with ownership and permissions to create the basic Linux security model. </span><span class="koboSpan" id="kobo.3.2">This combination of primitives is used to control access to just about everything on a Linux system – processes, files, network sockets, devices, and more.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">First, you’ll get a tour of all the important file information you get from a long listing (with an emphasis on permissions, naturally). </span><span class="koboSpan" id="kobo.4.2">Then we’ll cover the common permissions that you’ll encounter on production Linux systems, and finally, we’ll show you all the Linux commands you’ll use to set and modify permissions on files. </span><span class="koboSpan" id="kobo.4.3">Together, we’ll do the following:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.5.1">Decipher the output of a long listing</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.6.1">Learn about file attributes</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.7.1">Understand how ownership and permissions work</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.8.1">Understand a common sticking point, the “octal” permission format</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.9.1">Learn practical commands for changing ownership and permissions</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-156"><span class="koboSpan" id="kobo.10.1">Deciphering a long listing</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.11.1">Let’s </span><a id="_idIndexMarker253"/><span class="koboSpan" id="kobo.12.1">dive into this topic by way of a long listing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.13.1">Sometimes, when you’re navigating around a system, seeing only file and directory names isn’t enough. </span><span class="koboSpan" id="kobo.13.2">When you want more information about the files you’re seeing, use </span><code class="inlineCode"><span class="koboSpan" id="kobo.14.1">ls</span></code><span class="koboSpan" id="kobo.15.1"> with its “long” option: </span><code class="inlineCode"><span class="koboSpan" id="kobo.16.1">ls -l</span></code><span class="koboSpan" id="kobo.17.1">.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.18.1">Here is an example of its output when run on the </span><code class="inlineCode"><span class="koboSpan" id="kobo.19.1">/lib</span></code><span class="koboSpan" id="kobo.20.1"> directory of a system. </span><span class="koboSpan" id="kobo.20.2">Open a terminal and type </span><code class="inlineCode"><span class="koboSpan" id="kobo.21.1">ls -l /lib/</span></code><span class="koboSpan" id="kobo.22.1">:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.23.1"> # ls -l /lib/
total 56
drwxr-xr-x 10 root root 4096 Mar  8 02:12 aarch64-linux-gnu
drwxr-xr-x  5 root root 4096 Mar  8 02:12 apt
drwxr-xr-x  3 root root 4096 Mar  8 02:08 dpkg
drwxr-xr-x  2 root root 4096 Mar  8 02:12 init
lrwxrwxrwx  1 root root   39 Jul  6  2022 ld-linux-aarch64.so.1 -&gt; aarch64-linux-gnu/ld-linux-aarch64.so.1
drwxr-xr-x  3 root root 4096 Mar  4  2022 locale
drwxr-xr-x  3 root root 4096 Mar  8 02:12 lsb
drwxr-xr-x  3 root root 4096 Aug 29  2021 mime
-rw-r--r--  1 root root  386 Feb 16  2023 os-release
drwxr-xr-x  2 root root 4096 Mar  8 02:12 sysctl.d
drwxr-xr-x  3 root root 4096 Apr 18  2022 systemd
drwxr-xr-x 16 root root 4096 Jan 17  2022 terminfo
drwxr-xr-x  2 root root 4096 Mar  8 02:12 tmpfiles.d
drwxr-xr-x  3 root root 4096 Mar  8 02:12 udev
drwxr-xr-x  3 root root 4096 Mar  8 02:12 usrmerge
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.24.1">We see a lot of interesting information here – let’s step through it, field by field.</span></p>
<h1 class="heading-1" id="_idParaDest-157"><span class="koboSpan" id="kobo.25.1">File attributes</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.26.1">The first field</span><a id="_idIndexMarker254"/><span class="koboSpan" id="kobo.27.1"> displays a file’s attributes: file type and permissions. </span><span class="koboSpan" id="kobo.27.2">In other words, this field shows us which type of file we’re looking at, and what its file permissions are. </span><span class="koboSpan" id="kobo.27.3">The default lists this information in symbolic mode, in contrast to numeric mode, which you can view with </span><code class="inlineCode"><span class="koboSpan" id="kobo.28.1">-n</span></code><span class="koboSpan" id="kobo.29.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-158"><span class="koboSpan" id="kobo.30.1">File type</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.31.1">-rw-r--r--  1 root root  386 Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.32.1">The first </span><a id="_idIndexMarker255"/><span class="koboSpan" id="kobo.33.1">character here indicates the file type. </span><span class="koboSpan" id="kobo.33.2">In the listing above, the </span><code class="inlineCode"><span class="koboSpan" id="kobo.34.1">-</span></code><span class="koboSpan" id="kobo.35.1"> character indicates a regular file. </span><span class="koboSpan" id="kobo.35.2">Lines starting with </span><code class="inlineCode"><span class="koboSpan" id="kobo.36.1">l</span></code><span class="koboSpan" id="kobo.37.1"> indicate a </span><em class="italic"><span class="koboSpan" id="kobo.38.1">symbolic link</span></em><span class="koboSpan" id="kobo.39.1">, which is simply a special file that has no content of its own, and just points to another location on the filesystem. </span><span class="koboSpan" id="kobo.39.2">You can think of it as a Windows shortcut or a macOS file alias.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.40.1">Other common file types are </span><code class="inlineCode"><span class="koboSpan" id="kobo.41.1">d</span></code><span class="koboSpan" id="kobo.42.1">, indicating a directory, or </span><code class="inlineCode"><span class="koboSpan" id="kobo.43.1">c</span></code><span class="koboSpan" id="kobo.44.1">, which indicates that you’re looking at a character file – you’ll mainly find the latter in </span><code class="inlineCode"><span class="koboSpan" id="kobo.45.1">/dev</span></code><span class="koboSpan" id="kobo.46.1">, representing hardware input devices such as keyboards. </span><span class="koboSpan" id="kobo.46.2">For more on file types, see the </span><em class="italic"><span class="koboSpan" id="kobo.47.1">Filesystem</span></em><span class="koboSpan" id="kobo.48.1"> section of </span><em class="chapterRef"><span class="koboSpan" id="kobo.49.1">Chapter 5</span></em><span class="koboSpan" id="kobo.50.1">, </span><em class="italic"><span class="koboSpan" id="kobo.51.1">Introducing Files</span></em><span class="koboSpan" id="kobo.52.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-159"><span class="koboSpan" id="kobo.53.1">Permissions</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.54.1">-rw-r--r--</span></strong></span><span class="koboSpan" id="kobo.55.1">  1 root root  386 Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.56.1">These are the “permission bits,” which</span><a id="_idIndexMarker256"/><span class="koboSpan" id="kobo.57.1"> determine which users and groups on the system are allowed to read, write, and execute this file. </span><span class="koboSpan" id="kobo.57.2">We’ll dive deeper into this in the </span><em class="italic"><span class="koboSpan" id="kobo.58.1">Permissions</span></em><span class="koboSpan" id="kobo.59.1"> section of this chapter.</span></p>
<h2 class="heading-2" id="_idParaDest-160"><span class="koboSpan" id="kobo.60.1">Number of hardlinks</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.61.1">-rw-r--r--  </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.62.1">1</span></strong></span><span class="koboSpan" id="kobo.63.1"> root root  386 Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.64.1">The next field indicates the </span><a id="_idIndexMarker257"/><span class="koboSpan" id="kobo.65.1">number of hard links. </span><span class="koboSpan" id="kobo.65.2">Hard links</span><a id="_idIndexMarker258"/><span class="koboSpan" id="kobo.66.1"> are special pointers linking file names to an actual file. </span><span class="koboSpan" id="kobo.66.2">So in most situations, this will be 1 for files. </span><span class="koboSpan" id="kobo.66.3">In contrast to a symbolic link (“symlink”), which points to a filepath, a hardlink points to an actual file. </span><span class="koboSpan" id="kobo.66.4">If you move the file that a symlink points to, this makes the symlink invalid; a hardlink will keep pointing to a file even if that file is moved around, renamed, or otherwise modified.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.67.1">You may have noticed that while most files have only one link pointing to them, directories have wildly varying numbers of links in this column. </span><span class="koboSpan" id="kobo.67.2">This is because each file and directory inside of that directory creates another link reference to it. </span><span class="koboSpan" id="kobo.67.3">Even an empty directory starts with two links, “.” </span><span class="koboSpan" id="kobo.67.4">(the shortcut for “this directory”) and “..” </span><span class="koboSpan" id="kobo.67.5">(the shortcut for “the directory above this one”).</span></p>
<h2 class="heading-2" id="_idParaDest-161"><span class="koboSpan" id="kobo.68.1">User ownership</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.69.1">-rw-r--r--  1 </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.70.1">root</span></strong></span><span class="koboSpan" id="kobo.71.1"> root  386 Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.72.1">The third field shows which </span><a id="_idIndexMarker259"/><span class="koboSpan" id="kobo.73.1">user owns the file; all files in our example are owned by </span><code class="inlineCode"><span class="koboSpan" id="kobo.74.1">root</span></code><span class="koboSpan" id="kobo.75.1">. </span><span class="koboSpan" id="kobo.75.2">While you see a username in this example, running </span><code class="inlineCode"><span class="koboSpan" id="kobo.76.1">ls</span></code><span class="koboSpan" id="kobo.77.1"> in numeric mode – </span><code class="inlineCode"><span class="koboSpan" id="kobo.78.1">ls -ln</span></code><span class="koboSpan" id="kobo.79.1"> – will also show a numeric user ID instead of the friendly username you see here.</span></p>
<h2 class="heading-2" id="_idParaDest-162"><span class="koboSpan" id="kobo.80.1">Group ownership</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.81.1">-rw-r--r--  1 root </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.82.1">root</span></strong></span><span class="koboSpan" id="kobo.83.1">  386 Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.84.1">The following field shows the </span><a id="_idIndexMarker260"/><span class="koboSpan" id="kobo.85.1">owning group, which also happens to be </span><code class="inlineCode"><span class="koboSpan" id="kobo.86.1">root</span></code><span class="koboSpan" id="kobo.87.1"> in the example listing above.</span></p>
<h2 class="heading-2" id="_idParaDest-163"><span class="koboSpan" id="kobo.88.1">File size</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.89.1">-rw-r--r--  1 root root  </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.90.1">386</span></strong></span><span class="koboSpan" id="kobo.91.1"> Feb 16  2023 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.92.1">As you might have guessed, the next</span><a id="_idIndexMarker261"/><span class="koboSpan" id="kobo.93.1"> field displays the file size. </span><span class="koboSpan" id="kobo.93.2">When no additional flags are specified, it is displayed in bytes. </span><span class="koboSpan" id="kobo.93.3">To make it more readable the </span><code class="inlineCode"><span class="koboSpan" id="kobo.94.1">-h</span></code><span class="koboSpan" id="kobo.95.1"> (“human-readable”) flag can be used.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.96.1">If you’re paying attention, you’ll have noticed that directories all seem to have the same file size, 4096:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.97.1">drwxr-xr-x 1 root root 4096 Apr 18  2022 systemd
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.98.1">Files can take up as much or as little space as they need, but directory storage is allocated in discrete filesystem blocks. </span><span class="koboSpan" id="kobo.98.2">Because the smallest blocksize on most filesystems is 4096, directories will report their size as 4096.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.99.1">This rabbit hole goes deeper, but we don’t think the information will be useful enough in your day-to-day work as a software engineer to warrant including it here. </span><span class="koboSpan" id="kobo.99.2">If you’re still curious and want to go deeper, start reading about “Linux inodes.”</span></p>
<h2 class="heading-2" id="_idParaDest-164"><span class="koboSpan" id="kobo.100.1">Modification time</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.101.1">-rw-r--r--  1 root root  386 </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.102.1">Feb 16  2023</span></strong></span><span class="koboSpan" id="kobo.103.1"> os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.104.1">Next, we see the </span><a id="_idIndexMarker262"/><span class="koboSpan" id="kobo.105.1">modification timestamp of the file – the last time this file was changed.</span></p>
<h2 class="heading-2" id="_idParaDest-165"><span class="koboSpan" id="kobo.106.1">Filename</span></h2>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.107.1">-rw-r--r--  1 root root  386 Feb 16  2023 </span><span class="code-highlight"><strong class="hljs-con-slc"><span class="koboSpan" id="kobo.108.1">os-release</span></strong></span>
</code></pre>
<p class="normal"><span class="koboSpan" id="kobo.109.1">Finally, we come to the </span><a id="_idIndexMarker263"/><span class="koboSpan" id="kobo.110.1">filename, which is the only thing you’d see if you were doing a regular listing instead of a long listing (</span><code class="inlineCode"><span class="koboSpan" id="kobo.111.1">ls</span></code><span class="koboSpan" id="kobo.112.1"> instead of </span><code class="inlineCode"><span class="koboSpan" id="kobo.113.1">ls -l</span></code><span class="koboSpan" id="kobo.114.1">). </span><span class="koboSpan" id="kobo.114.2">This will usually just be a plain file or directory name, except in the case of a symbolic link, or symlink – in that case, you’ll </span><a id="_idIndexMarker264"/><span class="koboSpan" id="kobo.115.1">see the symlink name, and the file path that it links to.</span></p>
<h1 class="heading-1" id="_idParaDest-166"><span class="koboSpan" id="kobo.116.1">Ownership</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.117.1">To change the owner of files or</span><a id="_idIndexMarker265"/><span class="koboSpan" id="kobo.118.1"> directories, use the </span><code class="inlineCode"><span class="koboSpan" id="kobo.119.1">chown</span></code><span class="koboSpan" id="kobo.120.1"> (change owner) command. </span><span class="koboSpan" id="kobo.120.2">The syntax is </span><code class="inlineCode"><span class="koboSpan" id="kobo.121.1">chown user:group path</span></code><span class="koboSpan" id="kobo.122.1"> where </span><code class="inlineCode"><span class="koboSpan" id="kobo.123.1">user</span></code><span class="koboSpan" id="kobo.124.1"> is the name of the owning user and </span><code class="inlineCode"><span class="koboSpan" id="kobo.125.1">group</span></code><span class="koboSpan" id="kobo.126.1"> is the name of the group, while </span><code class="inlineCode"><span class="koboSpan" id="kobo.127.1">path</span></code><span class="koboSpan" id="kobo.128.1"> is the full or relative part to the file or directory.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.129.1">You can omit the colon and the group to just change the owning user and leave group ownership alone. </span><span class="koboSpan" id="kobo.129.2">Of course, the user attempting to change permissions on a file needs to have permission to do so, so in most situations this command will be run as the </span><code class="inlineCode"><span class="koboSpan" id="kobo.130.1">root</span></code><span class="koboSpan" id="kobo.131.1"> user.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.132.1">In the following command snippet, you see a long listing of a file owned by root, which subsequently has its owner changed using the </span><code class="inlineCode"><span class="koboSpan" id="kobo.133.1">chown</span></code><span class="koboSpan" id="kobo.134.1"> command:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.135.1">bash-3.2$ ls -l mysecret.txt
-rw-r--r-- 1 root staff 0 Apr 12 15:39 mysecret.txt
bash-3.2$ sudo chown dave mysecret.txt
bash-3.2$ ls -l mysecret.txt
-rw-r--r-- 1 dave staff 0 Apr 12 15:39 mysecret.txt
</span></code></pre>
<h1 class="heading-1" id="_idParaDest-167"><span class="koboSpan" id="kobo.136.1">Permissions</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.137.1">Here’s a </span><a id="_idIndexMarker266"/><span class="koboSpan" id="kobo.138.1">single file from our </span><code class="inlineCode"><span class="koboSpan" id="kobo.139.1">ls -l</span></code><span class="koboSpan" id="kobo.140.1"> file listing earlier. </span><span class="koboSpan" id="kobo.140.2">I’ve tweaked the permissions to make this example more illustrative:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.141.1">rwxr-xr-x 1 root root  386 Aug  2 13:14 os-release
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.142.1">Specifically, look at the permission bits:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.143.1">rwxr-xr-x
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.144.1">They are displayed in three groups of three here. </span><span class="koboSpan" id="kobo.144.2">Imagine them separated into three groups, to make it easier:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.145.1">rwx r-x r-x
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.146.1">Each of </span><a id="_idIndexMarker267"/><span class="koboSpan" id="kobo.147.1">these triplets represents read (</span><code class="inlineCode"><span class="koboSpan" id="kobo.148.1">r</span></code><span class="koboSpan" id="kobo.149.1">), write (</span><code class="inlineCode"><span class="koboSpan" id="kobo.150.1">w</span></code><span class="koboSpan" id="kobo.151.1">), and execute (</span><code class="inlineCode"><span class="koboSpan" id="kobo.152.1">x</span></code><span class="koboSpan" id="kobo.153.1">) permissions for a specific set of users, based on the user and group ownership information for that file. </span><span class="koboSpan" id="kobo.153.2">If you see a </span><code class="inlineCode"><span class="koboSpan" id="kobo.154.1">-</span></code><span class="koboSpan" id="kobo.155.1"> character in place of a letter, that action (for the set of users it applies to) is not permitted. </span><span class="koboSpan" id="kobo.155.2">Let’s look at them in more detail:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><span class="koboSpan" id="kobo.156.1">The first three bits represent the permissions of the file owner. </span><span class="koboSpan" id="kobo.156.2">In this case, the file’s owner (</span><code class="inlineCode"><span class="koboSpan" id="kobo.157.1">root</span></code><span class="koboSpan" id="kobo.158.1">) can read, write, and execute the file – </span><code class="inlineCode"><span class="koboSpan" id="kobo.159.1">rwx</span></code><span class="koboSpan" id="kobo.160.1">.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.161.1">The second three bits represent permissions for the group owner of the file, which in this case is also </span><code class="inlineCode"><span class="koboSpan" id="kobo.162.1">root</span></code><span class="koboSpan" id="kobo.163.1">. </span><span class="koboSpan" id="kobo.163.2">The permissions here are </span><code class="inlineCode"><span class="koboSpan" id="kobo.164.1">r-x</span></code><span class="koboSpan" id="kobo.165.1">, or read and execute (no writing!). </span><span class="koboSpan" id="kobo.165.2">But because </span><code class="inlineCode"><span class="koboSpan" id="kobo.166.1">root</span></code><span class="koboSpan" id="kobo.167.1"> is also the user-owner of the file, those (more permissive) permissions take precedence; </span><code class="inlineCode"><span class="koboSpan" id="kobo.168.1">root</span></code><span class="koboSpan" id="kobo.169.1"> can write to this file. </span><span class="koboSpan" id="kobo.169.2">The reason you often see permissions like this is because a group owner is </span><em class="italic"><span class="koboSpan" id="kobo.170.1">required</span></em><span class="koboSpan" id="kobo.171.1"> to be set on files, and if you don’t want to share a file with other groups, you can just use the owner’s group here. </span><span class="koboSpan" id="kobo.171.2">The group permissions on a file are usually less permissive than the owner permissions.</span></li>
<li class="numberedList"><span class="koboSpan" id="kobo.172.1">The last three bits represent the permissions that all other system users have for this file (“the world”). </span><span class="koboSpan" id="kobo.172.2">This is almost always the most restrictive set of permissions, because most files don’t need to be shared with anyone outside of the owner (and sometimes a separate group owner). </span><span class="koboSpan" id="kobo.172.3">In this case, we’re looking at a shared library file that needs to be accessible by all system users, so the permissions are </span><code class="inlineCode"><span class="koboSpan" id="kobo.173.1">r-x</span></code><span class="koboSpan" id="kobo.174.1"> (read and execute, no writing allowed).</span></li>
</ol>
<h2 class="heading-2" id="_idParaDest-168"><span class="koboSpan" id="kobo.175.1">Numeric/octal</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.176.1">“Read,” “write,” and “execute” are terms that make permissions easy to understand, but there is another</span><a id="_idIndexMarker268"/><span class="koboSpan" id="kobo.177.1"> important way that permissions are represented in Linux and Unix: octal.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.178.1">As a developer, you’re probably familiar with non-decimal number systems – octal is simply a base-8 system (instead of the base-10 system – decimal – that we usually use as humans, and in contrast to the base-2 system – binary – that computers use).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.179.1">Because there are only eight possible states for each three-bit permission combination, octal is a perfectly efficient system for representing them.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.180.1">Think of our 9 bits, again divided into 3-bit chunks. </span><span class="koboSpan" id="kobo.180.2">Each 3-bit permissions-chunk can represent an octal number, which requires three bits to represent. </span><span class="koboSpan" id="kobo.180.3">These 9 bits give us exactly the amount of room that we need to represent three octal numbers – one for user permissions, one for group permissions, and one for other/world permissions.</span></p>
<table class="table-container" id="table001-2">
<tbody>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.181.1">Octal</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.182.1">Binary</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.183.1">Meaning</span></strong></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.184.1">0</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.185.1">0</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.186.1">No</span></strong><span class="koboSpan" id="kobo.187.1"> permissions (</span><code class="inlineCode"><span class="koboSpan" id="kobo.188.1">—</span></code><span class="koboSpan" id="kobo.189.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.190.1">1</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.191.1">1</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.192.1">Execute</span></strong><span class="koboSpan" id="kobo.193.1"> permission (</span><code class="inlineCode"><span class="koboSpan" id="kobo.194.1">–x</span></code><span class="koboSpan" id="kobo.195.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.196.1">2</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.197.1">10</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.198.1">Write</span></strong><span class="koboSpan" id="kobo.199.1"> permission (</span><code class="inlineCode"><span class="koboSpan" id="kobo.200.1">-w-</span></code><span class="koboSpan" id="kobo.201.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.202.1">3</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.203.1">11</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.204.1">Write and execute</span></strong><span class="koboSpan" id="kobo.205.1"> permissions (</span><code class="inlineCode"><span class="koboSpan" id="kobo.206.1">-wx</span></code><span class="koboSpan" id="kobo.207.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.208.1">4</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.209.1">100</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.210.1">Read</span></strong><span class="koboSpan" id="kobo.211.1"> permission (</span><code class="inlineCode"><span class="koboSpan" id="kobo.212.1">r–</span></code><span class="koboSpan" id="kobo.213.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.214.1">5</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.215.1">101</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.216.1">Read and execute</span></strong><span class="koboSpan" id="kobo.217.1"> permissions (</span><code class="inlineCode"><span class="koboSpan" id="kobo.218.1">r-x</span></code><span class="koboSpan" id="kobo.219.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.220.1">6</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.221.1">110</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.222.1">Read and write</span></strong><span class="koboSpan" id="kobo.223.1"> permissions (</span><code class="inlineCode"><span class="koboSpan" id="kobo.224.1">rw-</span></code><span class="koboSpan" id="kobo.225.1">)</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.226.1">7</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.227.1">111</span></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.228.1">Read, write, and execute</span></strong><span class="koboSpan" id="kobo.229.1"> permissions (</span><code class="inlineCode"><span class="koboSpan" id="kobo.230.1">rwx</span></code><span class="koboSpan" id="kobo.231.1">)</span></p>
</td>
</tr>
</tbody>
</table>
<figure class="mediaobject"><span class="koboSpan" id="kobo.232.1">Table 8.1: Octal permissions</span></figure>
<p class="normal"><span class="koboSpan" id="kobo.233.1">You’ll notice that this is laid out so that octal addition works – adding “read” (4) and “execute” (1) together gives you “read and execute” (5).</span></p>
<p class="normal"><span class="koboSpan" id="kobo.234.1">This may seem </span><a id="_idIndexMarker269"/><span class="koboSpan" id="kobo.235.1">strange and arbitrary (and it is!), but you’ll get the hang of it quickly. </span><span class="koboSpan" id="kobo.235.2">You’ll mostly be using 7 (all), 6 (read/write), 5 (read/execute), 4 (read), and 0 (no permissions) while working.</span></p>
<h2 class="heading-2" id="_idParaDest-169"><span class="koboSpan" id="kobo.236.1">Common permissions</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.237.1">The most </span><a id="_idIndexMarker270"/><span class="koboSpan" id="kobo.238.1">common permissions you’ll see are:</span></p>
<ul>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.239.1">-rw-r--r--</span></code><span class="koboSpan" id="kobo.240.1"> (644): Owner can read and write; all others can only read.</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.241.1">-rwxr-xr-x</span></code><span class="koboSpan" id="kobo.242.1"> (755): Owner can do everything; all others can read/execute the file. </span><span class="koboSpan" id="kobo.242.2">This is a common one for executable files like scripts and binaries, and the default permission for directories.</span></li>
<li class="bulletList"><code class="inlineCode"><span class="koboSpan" id="kobo.243.1">-rw------</span></code><span class="koboSpan" id="kobo.244.1"> (600): Only the owner can read and write, no one else can do anything with it. </span><span class="koboSpan" id="kobo.244.2">This is common for secret keys, files that contain passwords, and </span><a id="_idIndexMarker271"/><span class="koboSpan" id="kobo.245.1">other sensitive information. </span><span class="koboSpan" id="kobo.245.2">SSH, for example, won’t use keys that are group- or world-readable until you change their permissions to make them secret.</span></li>
</ul>
<h1 class="heading-1" id="_idParaDest-170"><span class="koboSpan" id="kobo.246.1">Changing ownership (chown) and permissions (chmod)</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.247.1">You’ll use two commands to change ownership</span><a id="_idIndexMarker272"/><span class="koboSpan" id="kobo.248.1"> and permissions</span><a id="_idIndexMarker273"/><span class="koboSpan" id="kobo.249.1"> on files: </span><code class="inlineCode"><span class="koboSpan" id="kobo.250.1">chown</span></code><span class="koboSpan" id="kobo.251.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.252.1">chmod</span></code><span class="koboSpan" id="kobo.253.1">.</span></p>
<h2 class="heading-2" id="_idParaDest-171"><span class="koboSpan" id="kobo.254.1">Chown</span></h2>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.255.1">chown</span></code><span class="koboSpan" id="kobo.256.1"> (change owner) is used to</span><a id="_idIndexMarker274"/><span class="koboSpan" id="kobo.257.1"> change the owner and group of a file. </span><span class="koboSpan" id="kobo.257.2">It’s used in the following way:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.258.1">chown [OPTION]... </span><span class="koboSpan" id="kobo.258.2">[OWNER][:[GROUP]] FILE...
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.259.1">For example, imagine we have this file:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.260.1">$ ls -lh testfile
-rw-r--r-- 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<h3 class="heading-3" id="_idParaDest-172"><span class="koboSpan" id="kobo.261.1">Change owner</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.262.1">Let’s change the owner</span><a id="_idIndexMarker275"/><span class="koboSpan" id="kobo.263.1"> to </span><code class="inlineCode"><span class="koboSpan" id="kobo.264.1">chris</span></code><span class="koboSpan" id="kobo.265.1"> (presuming there’s a </span><code class="inlineCode"><span class="koboSpan" id="kobo.266.1">chris</span></code><span class="koboSpan" id="kobo.267.1"> user on the system):</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.268.1">$ chown chris testfile
$ ls -lh testfile
-rw-r--r-- 1 chris dave 10 Aug 14 16:18 testfile
</span></code></pre>
<h3 class="heading-3" id="_idParaDest-173"><span class="koboSpan" id="kobo.269.1">Change owner and group</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.270.1">We’ve changed the </span><a id="_idIndexMarker276"/><span class="koboSpan" id="kobo.271.1">owner, but if we wanted to change the group, too, we could have run:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.272.1">$ chown chris:staff testfile
$ ls -lh testfile
-rw-r--r-- 1 chris staff 10 Aug 14 16:18 testfile
</span></code></pre>
<h3 class="heading-3" id="_idParaDest-174"><span class="koboSpan" id="kobo.273.1">Recursively change owner and group</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.274.1">One </span><a id="_idIndexMarker277"/><span class="koboSpan" id="kobo.275.1">common task is changing the owner and group for all files in a given directory. </span><span class="koboSpan" id="kobo.275.2">You can do this with the </span><code class="inlineCode"><span class="koboSpan" id="kobo.276.1">-R</span></code><span class="koboSpan" id="kobo.277.1"> or </span><code class="inlineCode"><span class="koboSpan" id="kobo.278.1">--recursive</span></code><span class="koboSpan" id="kobo.279.1"> option:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.280.1">$ chown -R dave:staff /home/dave
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.281.1">This will recursively set ownership for </span><code class="inlineCode"><span class="koboSpan" id="kobo.282.1">/home/dave/</span></code><span class="koboSpan" id="kobo.283.1"> and every file and directory inside it. </span></p>
<h2 class="heading-2" id="_idParaDest-175"><span class="koboSpan" id="kobo.284.1">Chmod</span></h2>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.285.1">chmod</span></code><span class="koboSpan" id="kobo.286.1"> (change mode) is </span><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.287.1">used to change the permissions of a file. </span><span class="koboSpan" id="kobo.287.2">You can use regular or octal permissions here:</span></p>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.288.1">chmod [OPTION]... </span><span class="koboSpan" id="kobo.288.2">MODE[,MODE]... </span><span class="koboSpan" id="kobo.288.3">FILE...</span></code></p>
<p class="normal"><code class="inlineCode"><span class="koboSpan" id="kobo.289.1">chmod [OPTION]... </span><span class="koboSpan" id="kobo.289.2">OCTAL-MODE FILE...</span></code></p>
<p class="normal"><span class="koboSpan" id="kobo.290.1">Your options can be given in the form: </span><code class="inlineCode"><span class="koboSpan" id="kobo.291.1">ugo{+,-}rwx</span></code></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><code class="inlineCode"><span class="koboSpan" id="kobo.292.1">ugo</span></code><span class="koboSpan" id="kobo.293.1"> (user, group, other – assumed to be all three if you don’t specify).</span></li>
<li class="numberedList"><code class="inlineCode"><span class="koboSpan" id="kobo.294.1">+</span></code><span class="koboSpan" id="kobo.295.1"> to add permissions, </span><code class="inlineCode"><span class="koboSpan" id="kobo.296.1">-</span></code><span class="koboSpan" id="kobo.297.1"> to remove them.</span></li>
<li class="numberedList"><code class="inlineCode"><span class="koboSpan" id="kobo.298.1">rwx</span></code><span class="koboSpan" id="kobo.299.1"> (read, write, execute – any or all of these letters).</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.300.1">For example, to add execute permissions for the user who owns the file:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.301.1">$ chmod u+x testfile      
$ /tmp ls -lh testfile         
-rwxr--r-- 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.302.1">To add write and execute permissions for the group and all other users:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.303.1">$ chmod go+wx testfile      
$ /tmp ls -lh testfile         
-rwxrwxrwx 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.304.1">Oops, we actually wanted to remove all permissions for others:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.305.1">$ chmod o-rwx testfile      
$ /tmp ls -lh testfile         
-rwxrwx--- 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.306.1">Octal format for permissions can be set just like you’d expect:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.307.1">$ chmod 744 testfile      
$ /tmp ls -lh testfile         
-rwxr--r-- 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.308.1">Actually, let’s </span><a id="_idIndexMarker279"/><span class="koboSpan" id="kobo.309.1">make that file read-only:</span></p>
<pre class="programlisting con"><code class="hljs-con"><span class="koboSpan" id="kobo.310.1">$ chmod 400 testfile      
$ /tmp ls -lh testfile         
-r-------- 1 dave dave 10 Aug 14 16:18 testfile
</span></code></pre>
<h3 class="heading-3" id="_idParaDest-176"><span class="koboSpan" id="kobo.311.1">Using a reference</span></h3>
<p class="normal"><span class="koboSpan" id="kobo.312.1">Both </span><code class="inlineCode"><span class="koboSpan" id="kobo.313.1">chown</span></code><span class="koboSpan" id="kobo.314.1"> and </span><code class="inlineCode"><span class="koboSpan" id="kobo.315.1">chmod</span></code><span class="koboSpan" id="kobo.316.1"> allow </span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.317.1">us to use a </span><code class="inlineCode"><span class="koboSpan" id="kobo.318.1">--reference</span></code><span class="koboSpan" id="kobo.319.1"> argument, with which we can pass a file from which ownership or permissions will be copied.</span></p>
<h2 class="heading-2" id="_idParaDest-177"><span class="koboSpan" id="kobo.320.1">Conclusion</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.321.1">In this chapter, we covered everything you need to know to solve the most common Linux permissions problems: you learned how to view permissions on files and how to modify them. </span><span class="koboSpan" id="kobo.321.2">More importantly, we showed you how to reason about permissions and how they tie in with Linux users and groups, which is where many people stumble.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.322.1">Make sure you have a strong grasp of the material in this chapter; a huge percentage of the troubleshooting you’ll have to do during your career will revolve around file ownership and permission problems. </span><span class="koboSpan" id="kobo.322.2">Thankfully, most of these problems arise from a simple lack of understanding, which you no longer have. </span><span class="koboSpan" id="kobo.322.3">Go forth and troubleshoot!</span></p>
<h1 class="heading-1"><span class="koboSpan" id="kobo.323.1">Learn more on Discord</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.324.1">To join the Discord community for this book – where you can share feedback, ask questions to the author, and learn about new releases – follow the QR code below:</span></p>
<p class="normal"><a href="https://packt.link/SecNet"><span class="url"><span class="koboSpan" id="kobo.325.1">https://packt.link/SecNet</span></span></a></p>
<p class="normal"><span class="koboSpan" id="kobo.326.1"><img alt="" role="presentation" src="../Images/QR_Code1768422420210094187.png"/></span></p>
</div>
</body></html>