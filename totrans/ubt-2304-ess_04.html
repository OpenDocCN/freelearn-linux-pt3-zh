<html><head></head><body>
<div class="_idGenObjectStyleOverride-1" id="_idContainer075">
<p class="Chapter-Title" id="_idParaDest-36" lang="en-US" xml:lang="en-US"><span class="ChapterMarker"><span class="koboSpan" id="kobo.1.1">5. </span></span><a id="_idTextAnchor077"/><a id="_idTextAnchor078"/><span class="koboSpan" id="kobo.2.1">Allocating Windows Disk Partitions to Ubuntu</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.3.1">In the previous chapter, we looked at installing Ubuntu on the same disk as Windows. </span><span class="koboSpan" id="kobo.3.2">This so-called “</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.4.1">dual boot” configuration allows the user to have both operating systems installed on a single disk drive with the option to boot one or the other when the system is powered on. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.5.1">This chapter is intended for users who have decided they like Ubuntu enough to delete Windows entirely from the disk and use the resulting space for Linux. </span><span class="koboSpan" id="kobo.5.2">In the following sections, we will work through this process step by step using both the command-line tools and the gnome-disks utility.</span></p>
<p class="Heading-1-1" id="_idParaDest-37" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.6.1">5.1 </span></span><a id="_idTextAnchor079"/><span class="koboSpan" id="kobo.7.1">Unmounting the </span><a id="_idIndexMarker060"/><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.8.1">Windows Partition</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.9.1">If the steps in the </span><a href="Ubuntu_Installation_Dual_Boot.xhtml#_idTextAnchor060"><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.10.1">“Dual Booting Ubuntu with Windows”</span></span></a><span class="koboSpan" id="kobo.11.1"> chapter were followed to mount the Windows partition from within Ubuntu, steps should be taken to unmount the partition before continuing with this chapter. </span><span class="koboSpan" id="kobo.11.2">Assuming that the Windows partition was mounted as </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.12.1">/mnt/windows</span></span><span class="koboSpan" id="kobo.13.1">, it can be unmounted as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.14.1"># umount /mnt/windows</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.15.1">The </span><a id="_idIndexMarker062"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.16.1">/etc/fstab</span></span><span class="koboSpan" id="kobo.17.1"> file should also be edited to remove the</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.18.1"> /mnt/windows</span></span><span class="koboSpan" id="kobo.19.1"> auto-mount if it was previously added.</span></p>
<p class="Heading-1-1" id="_idParaDest-38" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.20.1">5.2 </span></span><a id="_idTextAnchor080"/><span class="koboSpan" id="kobo.21.1">Deleting the Windows Partitions from the Disk </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.22.1">The first step in freeing up the Windows partition for use by Ubuntu is to delete that partition. </span><span class="koboSpan" id="kobo.22.2">Before doing so, however, any data you need to keep must be backed up from both the Windows and  partitions. </span><span class="koboSpan" id="kobo.22.3">Having done that, it is safe to proceed with this chapter. </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.23.1">To remove the Windows partitions, we first need to identify the disk on which they reside using the </span><a id="_idIndexMarker063"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.24.1">fdisk</span></span><span class="koboSpan" id="kobo.25.1"> tool:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.26.1"># fdisk -l</span></p>
<p class="Code"><span class="koboSpan" id="kobo.27.1">Disk /dev/nvme0n1: 64 GiB, 68719476736 bytes, 134217728 sectors</span></p>
<p class="Code"><span class="koboSpan" id="kobo.28.1">Disk model: VMware Virtual NVMe Disk</span></p>
<p class="Code"><span class="koboSpan" id="kobo.29.1">Units: sectors of 1 * 512 = 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.30.1">Sector size (logical/physical): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.31.1">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.32.1">Disklabel type: gpt</span></p>
<p class="Code"><span class="koboSpan" id="kobo.33.1">Disk identifier: F0D04B58-29F5-4B6B-B10F-07295BEF9AAC</span></p>
<p class="Code"><span class="koboSpan" id="kobo.34.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.35.1">Device             Start       End  Sectors  Size Type</span></p>
<p class="Code"><span class="koboSpan" id="kobo.36.1">/dev/nvme0n1p1      2048    206847   204800  100M EFI System</span></p>
<p class="Code"><span class="koboSpan" id="kobo.37.1">/dev/nvme0n1p2    206848    239615    32768   16M Microsoft reserved</span></p>
<p class="Code"><span class="koboSpan" id="kobo.38.1">/dev/nvme0n1p3    239616  80184560 79944945 38.1G Microsoft basic data</span></p>
<p class="Code"><span class="koboSpan" id="kobo.39.1">/dev/nvme0n1p4 132833280 134213631  1380352  674M Windows recovery environment</span></p>
<p class="Code"><span class="koboSpan" id="kobo.40.1">/dev/nvme0n1p5  80185344 132833279 52647936 25.1G Linux filesystem</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.41.1">In the above example output, the system contains one physical disk drive referenced by device name </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.42.1">/dev/nvme0n1</span></span><span class="koboSpan" id="kobo.43.1">. </span><span class="koboSpan" id="kobo.43.2">On that disk drive are six partitions accessed via the device names </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.44.1">/dev/nvme0n1p1</span></span><span class="koboSpan" id="kobo.45.1"> through</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.46.1"> /dev/nvme0n1p</span></span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.47.1">5</span></span><span class="koboSpan" id="kobo.48.1">, respectively. </span><span class="koboSpan" id="kobo.48.2">Based on the values in the Types column, three Windows-related partitions exist. </span><span class="koboSpan" id="kobo.48.3">The first is the Windows system partition, while the second, much larger, partition is the Windows boot partition containing the Windows operating system and user data, followed by the Windows recovery partition.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.49.1">To remove the partitions, start the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.50.1">fdisk</span></span><span class="koboSpan" id="kobo.51.1"> tool using the device name of the disk containing the partition (</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.52.1">/dev/nvme0n1 </span></span><span class="koboSpan" id="kobo.53.1">in this instance) and follow the instructions to display the partition and sector information once again:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.54.1"># fdisk /dev/nvme0n1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.55.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.56.1">Welcome to fdisk (util-linux 2.37.2).</span></p>
<p class="Code"><span class="koboSpan" id="kobo.57.1">Changes will remain in memory only, until you decide to write them.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.58.1">Be careful before using the write command.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.59.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.60.1">Command (m for help): p</span></p>
<p class="Code"><span class="koboSpan" id="kobo.61.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.62.1"> Disk /dev/nvme0n1: 64 GiB, 68719476736 bytes, 134217728 sectors</span></p>
<p class="Code"><span class="koboSpan" id="kobo.63.1">Disk model: VMware Virtual NVMe Disk</span></p>
<p class="Code"><span class="koboSpan" id="kobo.64.1">Units: sectors of 1 * 512 = 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.65.1">Sector size (logical/physical): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.66.1">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.67.1">Disklabel type: gpt</span></p>
<p class="Code"><span class="koboSpan" id="kobo.68.1">Disk identifier: F0D04B58-29F5-4B6B-B10F-07295BEF9AAC</span></p>
<p class="Code"><span class="koboSpan" id="kobo.69.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.70.1">Device             Start       End  Sectors  Size Type</span></p>
<p class="Code"><span class="koboSpan" id="kobo.71.1">/dev/nvme0n1p1      2048    206847   204800  100M EFI System</span></p>
<p class="Code"><span class="koboSpan" id="kobo.72.1">/dev/nvme0n1p2    206848    239615    32768   16M Microsoft reserved</span></p>
<p class="Code"><span class="koboSpan" id="kobo.73.1">/dev/nvme0n1p3    239616  80184560 79944945 38.1G Microsoft basic data</span></p>
<p class="Code"><span class="koboSpan" id="kobo.74.1">/dev/nvme0n1p4 132833280 134213631  1380352  674M Windows recovery environment</span></p>
<p class="Code"><span class="koboSpan" id="kobo.75.1">/dev/nvme0n1p5  80185344 132833279 52647936 25.1G Linux filesystem</span></p>
<p class="Code"><span class="koboSpan" id="kobo.76.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.77.1">Partition table entries are not in disk order.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.78.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.79.1">Command (m for help):</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.80.1">Before proceeding, note the start and end addresses of the partitions we will delete (in other words, the start of </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.81.1">/dev/nvme0n1p2</span></span><span class="koboSpan" id="kobo.82.1"> and the sector before the start of </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.83.1">/dev/nvme0n1p5</span></span><span class="koboSpan" id="kobo.84.1">).</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.85.1">At the command prompt, delete the Windows partitions (these being partitions 2, 3, and 4 on our example system):</span></p>
<p class="Code"><span class="koboSpan" id="kobo.86.1">Command (m for help): d</span></p>
<p class="Code"><span class="koboSpan" id="kobo.87.1">Partition number (1-5, default 5): 2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.88.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.89.1">Partition 2 has been deleted.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.90.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.91.1">Command (m for help): d</span></p>
<p class="Code"><span class="koboSpan" id="kobo.92.1">Partition number (1,3-5, default 5): 3</span></p>
<p class="Code"><span class="koboSpan" id="kobo.93.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.94.1">Partition 3 has been deleted.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.95.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.96.1">Command (m for help): d</span></p>
<p class="Code"><span class="koboSpan" id="kobo.97.1">Partition number (1,4,5, default 5): 4</span></p>
<p class="Code"><span class="koboSpan" id="kobo.98.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.99.1">Partition 4 has been deleted.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.100.1">Now that we have deleted the Windows partitions, we must create the new Ubuntu partition in the vacated disk space. </span><span class="koboSpan" id="kobo.100.2">The partition number must match the number of the first partition removed (in this case, 2). </span><span class="koboSpan" id="kobo.100.3">It will also be necessary to enter the Start and End sectors of the partition precisely as reported for the old partition (</span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.101.1">fdisk</span></span><span class="koboSpan" id="kobo.102.1"> will typically offer the correct values by default, though it is wise to double-check): </span></p>
<p class="Code"><span class="koboSpan" id="kobo.103.1">Command (m for help): n</span></p>
<p class="Code"><span class="koboSpan" id="kobo.104.1">Partition number (2-4,6-128, default 2): 2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.105.1">First sector (206848-134217694, default 206848):</span></p>
<p class="Code"><span class="koboSpan" id="kobo.106.1">Last sector, +/-sectors or +/-size{K,M,G,T,P} (206848-80185343, default 80185343):</span></p>
<p class="Code"><span class="koboSpan" id="kobo.107.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.108.1">Created a new partition 2 of type 'Linux filesystem' and of size 38.1 GiB.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.109.1">Having made these changes, the next step is to check that the settings are correct:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.110.1">Command (m for help): p</span></p>
<p class="Code"><span class="koboSpan" id="kobo.111.1">Disk /dev/nvme0n1: 64 GiB, 68719476736 bytes, 134217728 sectors</span></p>
<p class="Code"><span class="koboSpan" id="kobo.112.1">Disk model: VMware Virtual NVMe Disk</span></p>
<p class="Code"><span class="koboSpan" id="kobo.113.1">Units: sectors of 1 * 512 = 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.114.1">Sector size (logical/physical): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.115.1">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></p>
<p class="Code"><span class="koboSpan" id="kobo.116.1">Disklabel type: gpt</span></p>
<p class="Code"><span class="koboSpan" id="kobo.117.1">Disk identifier: F0D04B58-29F5-4B6B-B10F-07295BEF9AAC</span></p>
<p class="Code"><span class="koboSpan" id="kobo.118.1"> </span></p>
<p class="Code"><span class="koboSpan" id="kobo.119.1">Device            Start       End  Sectors  Size Type</span></p>
<p class="Code"><span class="koboSpan" id="kobo.120.1">/dev/nvme0n1p1     2048    206847   204800  100M EFI System</span></p>
<p class="Code"><span class="koboSpan" id="kobo.121.1">/dev/nvme0n1p2   206848  80185343 79978496 38.1G Linux filesystem</span></p>
<p class="Code"><span class="koboSpan" id="kobo.122.1">/dev/nvme0n1p5 80185344 132833279 52647936 25.1G Linux filesystem</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.123.1">To commit the changes, we now need to write the new partition information to disk and quit from the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.124.1">fdisk</span></span><span class="koboSpan" id="kobo.125.1"> tool:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.126.1">Command (m for help): w</span></p>
<p class="Code"><span class="koboSpan" id="kobo.127.1">The partition table has been altered.</span></p>
<p class="Code"><span class="koboSpan" id="kobo.128.1">Syncing disks.</span></p>
<p class="Heading-1-1" id="_idParaDest-39" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.129.1">5.3 </span></span><a id="_idTextAnchor081"/><span class="koboSpan" id="kobo.130.1">Formatting the Unallocated </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.131.1">Disk Partition </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.132.1">To make the new partition suitable for use by Ubuntu, it needs to have a file system created on it. </span><span class="koboSpan" id="kobo.132.2">The recommended file system type for the current release of Ubuntu is XFS which will be covered in greater detail in the chapter entitled </span><a href="Adding_New_DIsk.xhtml#_idTextAnchor494"><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.133.1">“Adding a New Disk Drive to an Ubuntu 23.04 System”</span></span></a><span class="koboSpan" id="kobo.134.1">. </span><span class="koboSpan" id="kobo.134.2">Creation of the file system is performed using the </span><a id="_idIndexMarker065"/><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.135.1">mkfs.xfs</span></span><span class="koboSpan" id="kobo.136.1"> command as follows (installing the xfsprogs package if necessary):</span></p>
<p class="Code"><a id="_idTextAnchor082"/><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.137.1"># apt install xfsprogs</span></p>
<p class="Code"><span class="koboSpan" id="kobo.138.1"># mkfs.xfs -f /dev/nvme0n1p2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.139.1">meta-data=/dev/nvme0n1p2         isize=512    agcount=4, agsize=2499328 blks</span></p>
<p class="Code"><span class="koboSpan" id="kobo.140.1">         =                       sectsz=512   attr=2, projid32bit=1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.141.1">         =                       crc=1        finobt=1, sparse=1, rmapbt=0</span></p>
<p class="Code"><span class="koboSpan" id="kobo.142.1">         =                       reflink=1    bigtime=0 inobtcount=0</span></p>
<p class="Code"><span class="koboSpan" id="kobo.143.1">data     =                       bsize=4096   blocks=9997312, imaxpct=25</span></p>
<p class="Code"><span class="koboSpan" id="kobo.144.1">         =                       sunit=0      swidth=0 blks</span></p>
<p class="Code"><span class="koboSpan" id="kobo.145.1">naming   =version 2              bsize=4096   ascii-ci=0, ftype=1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.146.1">log      =internal log           bsize=4096   blocks=4881, version=2</span></p>
<p class="Code"><span class="koboSpan" id="kobo.147.1">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span></p>
<p class="Code"><span class="koboSpan" id="kobo.148.1">realtime =none                   extsz=4096   blocks=0, rtextents=0</span></p>
<p class="Heading-1-1" id="_idParaDest-40" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.149.1">5.4 </span></span><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.150.1">Mounting the New </span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.151.1">Partition </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.152.1">Next, we need to mount the new partition. </span><span class="koboSpan" id="kobo.152.2">In this example, we will mount it in a directory named </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.153.1">/data</span></span><span class="koboSpan" id="kobo.154.1">. </span><span class="koboSpan" id="kobo.154.2">You are free, however, to mount the new partition using any valid mount point you desire or to use it as part of a logical volume (details of which are covered in the chapter entitled </span><a href="Volume_Groups.xhtml#_idTextAnchor506"><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.155.1">“Adding a New Disk to an Ubuntu 23.04 Volume Group and Logical Volume”</span></span></a><span class="koboSpan" id="kobo.156.1">). </span><span class="koboSpan" id="kobo.156.2">First, we need to create the directory to act as the mount point: </span></p>
<p class="Code"><span class="koboSpan" id="kobo.157.1"># mkdir /data</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.158.1">Secondly, we need to edit the mount table in </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.159.1">/etc/fstab</span></span><span class="koboSpan" id="kobo.160.1"> so that the partition is automatically mounted each time the system starts. </span><span class="koboSpan" id="kobo.160.2">At the bottom of the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.161.1">/etc/fstab</span></span><span class="koboSpan" id="kobo.162.1"> file, add the following line to mount the new partition (modifying the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.163.1">/dev/nvme0n1p2</span></span><span class="koboSpan" id="kobo.164.1"> device to match your environment): </span></p>
<p class="Code"><span class="koboSpan" id="kobo.165.1">/dev/nvme0n1p2    /data   xfs defaults 0 0 </span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.166.1">Finally, we can manually mount the new partition (note that this will not be necessary on subsequent reboots as the partition will automount due to the setting we added to the </span><span class="My-Italic _idGenCharOverride-1"><span class="koboSpan" id="kobo.167.1">/etc/fstab </span></span><span class="koboSpan" id="kobo.168.1">file above): </span></p>
<p class="Code"><span class="koboSpan" id="kobo.169.1"># mount /data</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.170.1">To check the partition, run the following command to display the available space: </span></p>
<p class="Code"><a id="_idTextAnchor085"/><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.171.1"># df -h /data</span></p>
<p class="Code"><span class="koboSpan" id="kobo.172.1">Filesystem      Size  Used Avail Use% Mounted on</span></p>
<p class="Code"><span class="koboSpan" id="kobo.173.1">/dev/nvme0n1p2   39G  305M   38G   1% /data</span></p>
<p class="Heading-1-1" id="_idParaDest-41" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.174.1">5.5 </span></span><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.175.1">Editing the </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.176.1">Boot Menu</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.177.1">The next step is to modify the Ubuntu boot menu. </span><span class="koboSpan" id="kobo.177.2">Since this was originally a dual boot system, the menu is configured to provide the option of booting either Windows or Ubuntu. </span><span class="koboSpan" id="kobo.177.3">Now that the Windows partition is gone, we need to remove this boot option. </span><span class="koboSpan" id="kobo.177.4">On Ubuntu this can be achieved using the following steps:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.178.1"># rm -r /boot/efi/EFI/Microsoft</span></p>
<p class="Code"><span class="koboSpan" id="kobo.179.1"># update-grub</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.180.1">Since there is now only one operating system to boot, the system will automatically boot Ubuntu on the next restart without displaying the boot menu. </span><span class="koboSpan" id="kobo.180.2">If you need to access this boot menu, for example to use the advanced boot options, simply press the Esc key during the initial stages of the startup process.</span></p>
<p class="Heading-1-1" id="_idParaDest-42" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.181.1">5.6 </span></span><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.182.1">Using GNOME Disks Utility</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.183.1">The gnome-disks utility provides a user-friendly graphical alternative to reclaiming the Windows partitions from the command-line. </span><span class="koboSpan" id="kobo.183.2">Since the example used here will convert the Windows NTFS partitions to XFS format, the first step is to install the xfsprogs package as follows:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.184.1"># apt install xfsprogs</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.185.1">Once the package has been installed, open a terminal window and launch the gnome-disks utility:</span></p>
<p class="Code"><span class="koboSpan" id="kobo.186.1"># gnome-disks</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.187.1">After a short delay, the gnome-disks tool will appear as shown in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor089"><span class="koboSpan" id="kobo.188.1">Figure 5-1</span></a><span class="koboSpan" id="kobo.189.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.190.1"><img alt="" class="_idGenObjectAttribute-1" src="image/ubuntu_gnome_disks_windows_mounted.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.191.1">Figure 5-1</span></span><a id="_idTextAnchor089"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.192.1">In the above example, the disk contains two Windows NTFS partitions that will need to be deleted. </span><span class="koboSpan" id="kobo.192.2">Any NTFS partitions with a star shown in the disk map (as is the case for the highlighted partition in the above figure) will need to be unmounted before they can be deleted. </span><span class="koboSpan" id="kobo.192.3">This can be achieved by selecting the partition and clicking on the unmount button as indicated in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor090"><span class="koboSpan" id="kobo.193.1">Figure 5-2</span></a><span class="koboSpan" id="kobo.194.1"> below:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.195.1"><img alt="" class="_idGenObjectAttribute-2" src="image/ubuntu_gnome_disks_unmount_button.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.196.1">Figure 5-2</span></span><a id="_idTextAnchor090"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.197.1">With all the NTFS partitions unmounted, the next step is to delete them. </span><span class="koboSpan" id="kobo.197.2">Select the left-most NTFS partition in the disk map and click on the Delete button as shown in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor091"><span class="koboSpan" id="kobo.198.1">Figure 5-3</span></a><span class="koboSpan" id="kobo.199.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.200.1"><img alt="" class="_idGenObjectAttribute-3" src="image/ubuntu_gnome_disks_delete_partition.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.201.1">Figure 5-3</span></span><a id="_idTextAnchor091"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.202.1">Review the information in the confirmation dialog before clicking on the Delete button to commit the change. </span><span class="koboSpan" id="kobo.202.2">Once the first partition has been deleted, repeat this step for any remaining NTFS partitions. </span><span class="koboSpan" id="kobo.202.3">Once the NTFS partitions have been removed, the space should now be shown as being free within the disk map. </span><span class="koboSpan" id="kobo.202.4">A new partition now needs to be created to make use of this free space. </span><span class="koboSpan" id="kobo.202.5">With the space selected, click on the new partition button (indicated by the arrow in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor092"><span class="koboSpan" id="kobo.203.1">Figure 5-4</span></a><span class="koboSpan" id="kobo.204.1">):</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1"><img alt="" class="_idGenObjectAttribute-4" src="image/ubuntu_gnome_new_partition_button.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.206.1">Figure 5-4</span></span><a id="_idTextAnchor092"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.207.1">In the Create Partition dialog, choose whether the partition is to occupy all of the available space, or reduce the size if you plan to use the space for more than one partition:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.208.1"><img alt="" class="_idGenObjectAttribute-5" src="image/ubuntu_gnome_disks_new_partition.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.209.1">Figure 5-5</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.210.1">Click Next and, on the subsequent screen, enter a name for the new partition and choose whether the partition should be erased during creation. </span><span class="koboSpan" id="kobo.210.2">This causes the creation process to take more time but is a recommended option. </span><span class="koboSpan" id="kobo.210.3">Finally, choose a filesystem type for the partition. </span><span class="koboSpan" id="kobo.210.4">This will typically be either ext4 or XFS. </span><span class="koboSpan" id="kobo.210.5">Given the benefits of XFS, select Other before clicking the Next button. </span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.211.1"><img alt="" class="_idGenObjectAttribute-6" src="image/ubuntu_gnome_disks_format.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.212.1">Figure 5-6</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.213.1">On the next screen, select the XFS option before clicking on the Create button:</span></p>
<p class="Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1"><img alt="" class="_idGenObjectAttribute-7" src="image/ubuntu_gnome_disks_xfs.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.215.1">Figure 5-7</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.216.1">The gnome-disks utility will begin the formatting process and display the status of the process:</span></p>
<p class="Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.217.1"><img alt="" class="_idGenObjectAttribute-8" src="image/ubuntu_gnome_disks_progress.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.218.1">Figure 5-8</span></span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.219.1">Once the partition is ready, it can be mounted either from the command-line or using the gnome-disks utility. </span><span class="koboSpan" id="kobo.219.2">To configure a mount point, select the partition and click on the settings button as shown in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor093"><span class="koboSpan" id="kobo.220.1">Figure 5-9</span></a><span class="koboSpan" id="kobo.221.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.222.1"><img alt="" class="_idGenObjectAttribute-9" src="image/ubuntu_gnome_disks_Settings_button.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.223.1">Figure 5-9</span></span><a id="_idTextAnchor093"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.224.1">From the settings menu, select the </span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.225.1">Edit Mount Options...</span></span><span class="koboSpan" id="kobo.226.1"> item to display the dialog shown in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor094"><span class="koboSpan" id="kobo.227.1">Figure 5-10</span></a><span class="koboSpan" id="kobo.228.1">.</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.229.1"><img alt="" class="_idGenObjectAttribute-10" src="image/ubuntu_gnome_disks_mount_options1.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.230.1">Figure 5-10</span></span><a id="_idTextAnchor094"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.231.1">Turn off the User Session Defaults switch and configure the mount point to your requirements. </span><span class="koboSpan" id="kobo.231.2">In the above figure, the partition is mounted at /mnt</span><span class="My-Italic CharOverride-1"><span class="koboSpan" id="kobo.232.1">/Data</span></span><span class="koboSpan" id="kobo.233.1"> at system startup and is configured to be identified by the label “Data”.</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.234.1">Once the settings are complete, click on OK, then click the mount button highlighted in </span><a href="Reclaim_Windows_Partition.xhtml#_idTextAnchor095"><span class="koboSpan" id="kobo.235.1">Figure 5-11</span></a><span class="koboSpan" id="kobo.236.1">:</span></p>
<p class="My-Basic-Paragraph ParaOverride-1" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.237.1"><img alt="" class="_idGenObjectAttribute-11" src="image/ubuntu_gnome_disks_mount_button1.jpg"/></span></p>
<p class="Figure-Caption" lang="en-US" xml:lang="en-US"><span class="FigureCaptionMarker"><span class="koboSpan" id="kobo.238.1">Figure 5-11</span></span><a id="_idTextAnchor095"/></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.239.1">To check the partition is now mounted and ready for use, run the following command to display the available space:</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="CharOverride-2"><span class="koboSpan" id="kobo.240.1">$ df -h /mnt/Data</span></span></p>
<p class="Code"><span class="koboSpan" id="kobo.241.1">Filesystem      Size  Used Avail Use% Mounted on</span></p>
<p class="Code"><span class="koboSpan" id="kobo.242.1">/dev/sda3       253G  1.8G  251G   1% /mnt/Data</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.243.1">Finally, update the boot menu to remove the Windows option using the steps outlined earlier in this chapter.</span></p>
<p class="Heading-1-1" id="_idParaDest-43" lang="en-US" xml:lang="en-US"><span class="Heading11Marker"><span class="koboSpan" id="kobo.244.1">5.7 </span></span><a id="_idTextAnchor096"/><a id="_idTextAnchor097"/><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.245.1">Summary</span></p>
<p class="My-Basic-Paragraph" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.246.1">The Windows partitions in a dual boot configuration can be removed anytime to free up space for a Ubuntu system by identifying which partitions belong to Windows and then deleting them. </span><span class="koboSpan" id="kobo.246.2">Once deleted, the unallocated space can be used to create a new filesystem and mounted to make it available to the Ubuntu system. </span></p>
</div>
</body></html>