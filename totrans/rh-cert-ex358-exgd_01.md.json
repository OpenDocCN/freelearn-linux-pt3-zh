["```\n[emcleroy@rhel1 ~]$ sudo hostnamectl set-hostname rhel1.example.com\n[emcleroy@rhel1 ~]$ hostname\n rhel1.example.com\n```", "```\n$ sudo vi /etc/hosts\n```", "```\n$ sudo visudo\n```", "```\n$ ssh-keygen\n```", "```\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub username@server\n```", "```\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub emcleroy@rhel1\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub emcleroy@rhel2\n$ ssh-copy-id -i ~/.ssh/id_rsa.pub emcleroy@rhel3\n```", "```\n$ sudo dnf install targetcli -y\n```", "```\n$ sudo systemctl enable target\n```", "```\n$ sudo firewall-cmd --permanent --add-service=iscsi-target\n$ sudo firewall-cmd –reload\n```", "```\n/> cd /backstores/block\n/backstores/block> create blockstorage1 /dev/sdb\nCreated block storage object blockstorage1 using /dev/sdb.\n```", "```\n/backstores/block> cd /iscsi\n/iscsi> create iqn.2022-05.com.example:rhel1\nCreated target iqn.2022-05.com.example:rhel1.\nCreated TPG 1.\nGlobal pref auto_add_default_portal=true\nCreated default portal listening on all IPs (0.0.0.0), port 3260.\n/iscsi> ls\no- iscsi ..................................... [Targets: 1]\n  o- iqn.2022-05.com.example:rhel1 .............. [TPGs: 1]\n    o- tpg1 ........................ [no-gen-acls, no-auth]\n      o- acls ................................... [ACLs: 0]\n      o- luns ................................... [LUNs: 0]\n      o- portals ............................. [Portals: 1]\n        o- 0.0.0.0:3260 .............................. [OK]\n```", "```\n/iscsi> cd /iscsi/iqn.2022-05.com.example:rhel1/tpg1/luns\n/iscsi/iqn.20…sk1/tpg1/luns> create  /backstores/block/blockstorage1\nCreated LUN 0.\n```", "```\nGlobal pref auto_save_on_exit=true\nConfiguration saved to /etc/\n[emcleroy@rhel1 ~]$ vi /etc/iscsi/initiatorname.iscsi\n```", "```\n[emcleroy@rhel1 ~]$ sudo targetcli\ntargetcli shell version 2.1.53\nCopyright 2011-2013 by Datera, Inc and others.\nFor help on commands, type 'help'.\n> cd /iscsi/iqn.2022-05.com.example:rhel1/tpg1/acls\n/iscsi/iqn.20...sk1/tpg1/acls> create iqn.2022-05.com.example:rhel2\nCreated Node ACL for iqn.2022-05.com.example:rhel2\nCreated mapped LUN 0.\n```", "```\n> cd /iscsi/iqn.2022-05.com.example:rhel1/tpg1/portals\n/iscsi/iqn.20.../tpg1/portals> delete 0.0.0.0 3260\nDeleted network portal 0.0.0.0:3260\n/iscsi/iqn.20.../tpg1/portals> create 192.168.1.198 3260\nUsing default IP port 3260\nCreated network portal 192.168.1.198:3260.\n```", "```\n$ sudo dnf install iscsi-initiator-utils targetcli -y\n```", "```\n$ sudo getent hosts rhel1\n```", "```\n[emcleroy@rhel1 ~]$ sudo vi /etc/iscsi/initiatorname.iscsi\nInitiatorName=iqn.2022-05.com.example:rhel1\n[emcleroy@rhel1 ~]$ sudo systemctl restart iscsid.service\n```", "```\n[emcleroy@rhel2 ~]$ sudo iscsiadm -m discovery -t st -p 192.168.1.198:3260\n```", "```\n 192.168.1.198:3260,1 iqn.2022-05.com.example:rhel1\n```", "```\n[emcleroy@rhel2 ~]$ sudo iscsiadm -m node -T iqn.2022-05.com.example:rhel1  -p 192.168.1.198 -l\n```", "```\n[emcleroy@rhel2 ~]$ sudo iscsiadm -m session -P 3\niSCSI Transport Class version 2.0-870\nversion 6.2.1.4-1\nTarget: iqn.2022-05.com.example:rhel1 (non-flash)\n     Current Portal: 192.168.1.198:3260,1\n     Persistent Portal: 192.168.1.198:3260,1\n```", "```\n[emcleroy@rhel2 ~]$ sudo mkfs.xfs /dev/sdc\nmeta-data=/dev/sdc               isize=512    agcount=4, agsize=327680 blks\n         =                       sectsz=512   attr=2, projid32bit=1\n         =                       crc=1        finobt=1, sparse=1, rmapbt=0\n         =                       reflink=1\ndata     =                       bsize=4096   blocks=1310720, imaxpct=25\n         =                       sunit=0      swidth=0 blks\nnaming   =version 2              bsize=4096   ascii-ci=0, ftype=1\nlog      =internal log           bsize=4096   blocks=2560, version=2\n         =                       sectsz=512   sunit=0 blks, lazy-count=1\nrealtime =none                   extsz=4096   blocks=0, rtextents=0\n```", "```\n[emcleroy@rhel2 ~]$ lsblk -f /dev/sdc\nNAME FSTYPE LABEL UUID                                 MOUNTPOINT\nsdc  xfs          38505868-00de-4269-88d8-3357a22f2101\n[emcleroy@rhel2 ~]$ sudo vi /etc/fstab\n```", "```\n[emcleroy@rhel2 ~]$ sudo mkdir -p /data\n[emcleroy@rhel2 ~]$ sudo mount /data\n[emcleroy@rhel2 ~]$ df /data\nFilesystem     1K-blocks  Used Available Use% Mounted on\n/dev/sdc         5232640 69616   5163024   2% /home/emcleroy/data\n[emcleroy@rhel2 ~]$ cd /data\n```", "```\n[emcleroy@rhel2 ~]$ sudo mkdir test\n[emcleroy@rhel2 ~]$ cd test/\n[emcleroy@rhel2 ~]$ sudo vi test.txt\n```", "```\n[emcleroy@rhel2 ~]$ cd\n[emcleroy@rhel2 ~]$ sudo umount /data\n[emcleroy@rhel2 ~]$ sudo iscsiadm -m node -T iqn.2022-05.com.example:rhel1 -p 192.168.1.198 -u\nLogging out of session [sid: 8, target: iqn.2022-05.com.example:rhel1, portal: 192.168.1.198,3260]\nLogout of [sid: 8, target: iqn.2022-05.com.example:rhel1, portal: 192.168.1.198,3260] successful.\n[emcleroy@rhel2 ~]$ sudo iscsiadm -m node -T iqn.2022-05.com.example:rhel1 -p 192.168.1.198 -o delete\n```", "```\n[emcleroy@rhel3 ~]$ sudo subscription-manager repos --enable ansible-2.9-for-rhel-8-x86_64-rpms\nRepository 'ansible-2.9-for-rhel-8-x86_64-rpms' is enabled for this system.\n```", "```\n[emcleroy@rhel3 ~]$ sudo dnf install python3 -y\n```", "```\n[emcleroy@rhel3 ~]$ sudo dnf install ansible -y\n```", "```\n[emcleroy@rhel3 ~]$ ansible --version\nansible 2.9.27\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = ['/home/emcleroy/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\n  ansible python module location = /usr/lib/python3.6/site-packages/ansible\n  executable location = /usr/bin/ansible\n  python version = 3.6.8 (default, Oct 11 2019, 15:04:54) [GCC 8.3.1 20190507 (Red Hat 8.3.1-4)]\n```", "```\n[emcleroy@rhel3 ~]$ mkdir iscsi_mount\n```", "```\n[emcleroy@rhel3 ~]$ cd iscsi_mount\n[emcleroy@rhel3 ~]$ vi inventory\n[defaults]\nrhel1 ansible_host=192.168.1.198\nrhel2 ansible_host=192.168.1.133\n[iscsi_block]\nrhel1 ansible_host=192.168.1.198\n[iscsi_user]\nrhel2 ansible_host=192.168.1.133\n```", "```\n---\n- name: Ensure /data is mounted from rhel1 iSCSI target that was created manually onto rhel2\n  hosts: iscsi_user\n  become: true\n  become_method: sudo\n  tasks:\n    - name: the targetcli package is installed\n      yum:\n        name: targetcli\n        state: present\n    - name: the IQN is set for the initiator\n      template:\n        dest: /etc/iscsi/initiatorname.iscsi\n        src: templates/initiatorname.iscsi.j2\n        mode: '644'\n        owner: root\n        group: root\n    - name: Create mount directory for /data\n      file:\n        path: /data\n        state: directory\n        mode: '0755'\n    - name: Restart iscsiadm\n      command:\n        cmd: systemctl restart iscsid.service\n    - name: Mount new drive\n      command:\n  cmd: iscsiadm -m node –T iqn.2022-05.com.example:rhel1  -p 192.168.1.198 -l\n```", "```\nInitiatorName=iqn.2022-05.com.example:rhel1\n```", "```\n[emcleroy@rhel3 ~]$ ansible-doc yum\n```", "```\n[emcleroy@rhel3 ~]$ ansible-doc –-list\n```"]